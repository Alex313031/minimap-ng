{"version":3,"file":"main-8e3fc76c.js","sources":["../node_modules/event-kit/dist/disposable.js","../node_modules/event-kit/dist/composite-disposable.js","../node_modules/event-kit/dist/emitter.js","../node_modules/batch-processor/src/batch-processor.js","../node_modules/element-resize-detector/src/state-handler.js","../node_modules/element-resize-detector/src/element-resize-detector.js","../node_modules/underscore/modules/restArguments.js","../node_modules/underscore/modules/isObject.js","../node_modules/underscore/modules/isNull.js","../node_modules/underscore/modules/isUndefined.js","../node_modules/underscore/modules/isBoolean.js","../node_modules/underscore/modules/isElement.js","../node_modules/underscore/modules/_tagTester.js","../node_modules/underscore/modules/_has.js","../node_modules/underscore/modules/isFinite.js","../node_modules/underscore/modules/isNaN.js","../node_modules/underscore/modules/constant.js","../node_modules/underscore/modules/_createSizePropertyCheck.js","../node_modules/underscore/modules/_setup.js","../node_modules/underscore/modules/_shallowProperty.js","../node_modules/underscore/modules/_collectNonEnumProps.js","../node_modules/underscore/modules/keys.js","../node_modules/underscore/modules/isEmpty.js","../node_modules/underscore/modules/isMatch.js","../node_modules/underscore/modules/underscore.js","../node_modules/underscore/modules/isEqual.js","../node_modules/underscore/modules/allKeys.js","../node_modules/underscore/modules/values.js","../node_modules/underscore/modules/pairs.js","../node_modules/underscore/modules/invert.js","../node_modules/underscore/modules/functions.js","../node_modules/underscore/modules/_createAssigner.js","../node_modules/underscore/modules/_baseCreate.js","../node_modules/underscore/modules/create.js","../node_modules/underscore/modules/clone.js","../node_modules/underscore/modules/tap.js","../node_modules/underscore/modules/has.js","../node_modules/underscore/modules/identity.js","../node_modules/underscore/modules/matcher.js","../node_modules/underscore/modules/_deepGet.js","../node_modules/underscore/modules/property.js","../node_modules/underscore/modules/_optimizeCb.js","../node_modules/underscore/modules/_baseIteratee.js","../node_modules/underscore/modules/iteratee.js","../node_modules/underscore/modules/_cb.js","../node_modules/underscore/modules/mapObject.js","../node_modules/underscore/modules/noop.js","../node_modules/underscore/modules/propertyOf.js","../node_modules/underscore/modules/times.js","../node_modules/underscore/modules/random.js","../node_modules/underscore/modules/_createEscaper.js","../node_modules/underscore/modules/template.js","../node_modules/underscore/modules/result.js","../node_modules/underscore/modules/uniqueId.js","../node_modules/underscore/modules/chain.js","../node_modules/underscore/modules/_executeBound.js","../node_modules/underscore/modules/_flatten.js","../node_modules/underscore/modules/memoize.js","../node_modules/underscore/modules/throttle.js","../node_modules/underscore/modules/debounce.js","../node_modules/underscore/modules/wrap.js","../node_modules/underscore/modules/negate.js","../node_modules/underscore/modules/compose.js","../node_modules/underscore/modules/after.js","../node_modules/underscore/modules/before.js","../node_modules/underscore/modules/findKey.js","../node_modules/underscore/modules/_createPredicateIndexFinder.js","../node_modules/underscore/modules/sortedIndex.js","../node_modules/underscore/modules/_createIndexFinder.js","../node_modules/underscore/modules/find.js","../node_modules/underscore/modules/findWhere.js","../node_modules/underscore/modules/each.js","../node_modules/underscore/modules/map.js","../node_modules/underscore/modules/_createReduce.js","../node_modules/underscore/modules/filter.js","../node_modules/underscore/modules/reject.js","../node_modules/underscore/modules/every.js","../node_modules/underscore/modules/some.js","../node_modules/underscore/modules/contains.js","../node_modules/underscore/modules/pluck.js","../node_modules/underscore/modules/where.js","../node_modules/underscore/modules/max.js","../node_modules/underscore/modules/min.js","../node_modules/underscore/modules/sample.js","../node_modules/underscore/modules/shuffle.js","../node_modules/underscore/modules/sortBy.js","../node_modules/underscore/modules/_group.js","../node_modules/underscore/modules/toArray.js","../node_modules/underscore/modules/size.js","../node_modules/underscore/modules/_keyInObj.js","../node_modules/underscore/modules/initial.js","../node_modules/underscore/modules/first.js","../node_modules/underscore/modules/rest.js","../node_modules/underscore/modules/last.js","../node_modules/underscore/modules/compact.js","../node_modules/underscore/modules/flatten.js","../node_modules/underscore/modules/uniq.js","../node_modules/underscore/modules/intersection.js","../node_modules/underscore/modules/unzip.js","../node_modules/underscore/modules/object.js","../node_modules/underscore/modules/range.js","../node_modules/underscore/modules/chunk.js","../node_modules/underscore/modules/_chainResult.js","../node_modules/underscore/modules/mixin.js","../lib/mixins/canvas-drawer.js","../lib/decorators/include.js","../lib/decorators/element.js","../lib/minimap-element.js","../lib/plugin-management.js","../lib/main.js","../lib/performance-monitor.js","../node_modules/grim/lib/deprecation.js","../node_modules/event-kit/dist/event-kit.js","../node_modules/grim/lib/grim.js","../node_modules/atom-utils-plus/lib/register-or-update-element.coffee","../node_modules/mixto/lib/mixin.js","../node_modules/atom-utils-plus/lib/mixins/ancestors.coffee","../node_modules/atom-utils-plus/lib/mixins/disposable-events.coffee","../node_modules/atom-utils-plus/lib/mixins/events-delegation.coffee","../node_modules/atom-utils-plus/lib/mixins/space-pen-dsl.coffee","../node_modules/atom-utils-plus/lib/atom-utils.coffee","../node_modules/element-resize-detector/src/collection-utils.js","../node_modules/element-resize-detector/src/browser-detector.js","../node_modules/batch-processor/src/utils.js","../node_modules/element-resize-detector/src/detection-strategy/scroll.js","../node_modules/underscore/modules/isString.js","../node_modules/underscore/modules/isNumber.js","../node_modules/underscore/modules/isDate.js","../node_modules/underscore/modules/isRegExp.js","../node_modules/underscore/modules/isError.js","../node_modules/underscore/modules/isSymbol.js","../node_modules/underscore/modules/isMap.js","../node_modules/underscore/modules/isWeakMap.js","../node_modules/underscore/modules/isSet.js","../node_modules/underscore/modules/isWeakSet.js","../node_modules/underscore/modules/isArrayBuffer.js","../node_modules/underscore/modules/isDataView.js","../node_modules/underscore/modules/isArray.js","../node_modules/underscore/modules/isFunction.js","../node_modules/underscore/modules/isArguments.js","../node_modules/underscore/modules/_getByteLength.js","../node_modules/underscore/modules/_isBufferLike.js","../node_modules/underscore/modules/isTypedArray.js","../node_modules/underscore/modules/_getLength.js","../node_modules/underscore/modules/_isArrayLike.js","../node_modules/underscore/modules/extend.js","../node_modules/underscore/modules/extendOwn.js","../node_modules/underscore/modules/defaults.js","../node_modules/underscore/modules/now.js","../node_modules/underscore/modules/_escapeMap.js","../node_modules/underscore/modules/escape.js","../node_modules/underscore/modules/unescape.js","../node_modules/underscore/modules/_unescapeMap.js","../node_modules/underscore/modules/templateSettings.js","../node_modules/underscore/modules/partial.js","../node_modules/underscore/modules/bind.js","../node_modules/underscore/modules/bindAll.js","../node_modules/underscore/modules/delay.js","../node_modules/underscore/modules/defer.js","../node_modules/underscore/modules/once.js","../node_modules/underscore/modules/findIndex.js","../node_modules/underscore/modules/findLastIndex.js","../node_modules/underscore/modules/indexOf.js","../node_modules/underscore/modules/lastIndexOf.js","../node_modules/underscore/modules/reduce.js","../node_modules/underscore/modules/reduceRight.js","../node_modules/underscore/modules/invoke.js","../node_modules/underscore/modules/groupBy.js","../node_modules/underscore/modules/indexBy.js","../node_modules/underscore/modules/countBy.js","../node_modules/underscore/modules/partition.js","../node_modules/underscore/modules/pick.js","../node_modules/underscore/modules/omit.js","../node_modules/underscore/modules/difference.js","../node_modules/underscore/modules/without.js","../node_modules/underscore/modules/union.js","../node_modules/underscore/modules/zip.js","../node_modules/underscore/modules/underscore-array-methods.js","../node_modules/underscore/modules/index-default.js","../node_modules/underscore-plus/lib/underscore-plus.js","../lib/canvas-layer.js","../lib/minimap-quick-settings-element.js","../node_modules/element-resize-detector/src/id-generator.js","../node_modules/element-resize-detector/src/id-handler.js","../node_modules/element-resize-detector/src/reporter.js","../node_modules/element-resize-detector/src/listener-handler.js","../node_modules/element-resize-detector/src/element-utils.js","../node_modules/element-resize-detector/src/detection-strategy/object.js","../lib/adapters/legacy-adapter.js","../lib/decoration.js","../lib/decoration-management.js","../lib/adapters/stable-adapter.js","../lib/minimap.js","../lib/dom-styles-reader.js"],"sourcesContent":["\"use strict\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// Essential: A handle to a resource that can be disposed. For example,\n// {Emitter::on} returns disposables representing subscriptions.\nmodule.exports =\n/*#__PURE__*/\nfunction () {\n  _createClass(Disposable, null, [{\n    key: \"isDisposable\",\n    // Public: Ensure that `object` correctly implements the `Disposable`\n    // contract.\n    //\n    // * `object` An {Object} you want to perform the check against.\n    //\n    // Returns a {Boolean} indicating whether `object` is a valid `Disposable`.\n    value: function isDisposable(object) {\n      return typeof (object != null ? object.dispose : undefined) === \"function\";\n    }\n    /*\n    Section: Construction and Destruction\n    */\n    // Public: Construct a Disposable\n    //\n    // * `disposalAction` A {Function} to call when {::dispose} is called for the\n    //   first time.\n\n  }]);\n\n  function Disposable(disposalAction) {\n    _classCallCheck(this, Disposable);\n\n    this.disposed = false;\n    this.disposalAction = disposalAction;\n  } // Public: Perform the disposal action, indicating that the resource associated\n  // with this disposable is no longer needed.\n  //\n  // You can call this method more than once, but the disposal action will only\n  // be performed the first time.\n\n\n  _createClass(Disposable, [{\n    key: \"dispose\",\n    value: function dispose() {\n      if (!this.disposed) {\n        this.disposed = true;\n\n        if (typeof this.disposalAction === \"function\") {\n          this.disposalAction();\n        }\n\n        this.disposalAction = null;\n      }\n    }\n  }]);\n\n  return Disposable;\n}();","\"use strict\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar CompositeDisposable;\nvar Disposable; // Essential: An object that aggregates multiple {Disposable} instances together\n// into a single disposable, so they can all be disposed as a group.\n//\n// These are very useful when subscribing to multiple events.\n//\n// ## Examples\n//\n// ```js\n// const {CompositeDisposable} = require('atom')\n//\n// class Something {\n//   constructor() {\n//     this.disposables = new CompositeDisposable()\n//     const editor = atom.workspace.getActiveTextEditor()\n//     this.disposables.add(editor.onDidChange(() => {})\n//     this.disposables.add(editor.onDidChangePath(() => {})\n//   }\n//\n//   destroy() {\n//     this.disposables.dispose();\n//   }\n// }\n// ```\n\nmodule.exports =\n/*#__PURE__*/\nfunction () {\n  /*\n  Section: Construction and Destruction\n  */\n  // Public: Construct an instance, optionally with one or more disposables\n  function CompositeDisposable() {\n    _classCallCheck(this, CompositeDisposable);\n\n    this.disposed = false;\n    this.disposables = new Set();\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = arguments[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var disposable = _step.value;\n        this.add(disposable);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  } // Public: Dispose all disposables added to this composite disposable.\n  //\n  // If this object has already been disposed, this method has no effect.\n\n\n  _createClass(CompositeDisposable, [{\n    key: \"dispose\",\n    value: function dispose() {\n      if (!this.disposed) {\n        this.disposed = true;\n        this.disposables.forEach(function (disposable) {\n          return disposable.dispose();\n        });\n        this.disposables = null;\n      }\n    }\n    /*\n    Section: Managing Disposables\n    */\n    // Public: Add disposables to be disposed when the composite is disposed.\n    //\n    // If this object has already been disposed, this method has no effect.\n    //\n    // * `...disposables` {Disposable} instances or any objects with `.dispose()`\n    //   methods.\n\n  }, {\n    key: \"add\",\n    value: function add() {\n      if (!this.disposed) {\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = arguments[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var disposable = _step2.value;\n            assertDisposable(disposable);\n            this.disposables.add(disposable);\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      }\n    } // Public: Remove a previously added disposable.\n    //\n    // * `disposable` {Disposable} instance or any object with a `.dispose()`\n    //   method.\n\n  }, {\n    key: \"remove\",\n    value: function remove(disposable) {\n      if (!this.disposed) {\n        this.disposables.delete(disposable);\n      }\n    } // Public: Alias to {CompositeDisposable::remove}\n\n  }, {\n    key: \"delete\",\n    value: function _delete(disposable) {\n      this.remove(disposable);\n    } // Public: Clear all disposables. They will not be disposed by the next call\n    // to dispose.\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      if (!this.disposed) {\n        this.disposables.clear();\n      }\n    }\n  }]);\n\n  return CompositeDisposable;\n}();\n\nfunction assertDisposable(disposable) {\n  if (Disposable == null) {\n    Disposable = require(\"./disposable\");\n  }\n\n  if (!Disposable.isDisposable(disposable)) {\n    throw new TypeError(\"Arguments to CompositeDisposable.add must have a .dispose() method\");\n  }\n}","\"use strict\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Disposable = require(\"./disposable\");\n\nvar CompositeDisposable = require(\"./composite-disposable\"); // Essential: Utility class to be used when implementing event-based APIs that\n// allows for handlers registered via `::on` to be invoked with calls to\n// `::emit`. Instances of this class are intended to be used internally by\n// classes that expose an event-based API.\n//\n// For example:\n//\n// ```js\n// class User {\n//   constructor() {\n//     this.emitter = new Emitter()\n//   }\n//\n//   onDidChangeName(callback) {\n//     this.emitter.on('did-change-name', callback)\n//   }\n//\n//   setName(name) {\n//     if (name !== this.name) {\n//       this.name = name\n//       this.emitter.emit('did-change-name', name)\n//     }\n//\n//     return this.name\n//   }\n// }\n// ```\n\n\nvar Emitter =\n/*#__PURE__*/\nfunction () {\n  _createClass(Emitter, null, [{\n    key: \"onEventHandlerException\",\n    value: function onEventHandlerException(exceptionHandler) {\n      var _this = this;\n\n      if (this.exceptionHandlers.length === 0) {\n        this.dispatch = this.exceptionHandlingDispatch;\n      }\n\n      this.exceptionHandlers.push(exceptionHandler);\n      return new Disposable(function () {\n        _this.exceptionHandlers.splice(_this.exceptionHandlers.indexOf(exceptionHandler), 1);\n\n        if (_this.exceptionHandlers.length === 0) {\n          return _this.dispatch = _this.simpleDispatch;\n        }\n      });\n    }\n  }, {\n    key: \"simpleDispatch\",\n    value: function simpleDispatch(handler, value) {\n      return handler(value);\n    }\n  }, {\n    key: \"exceptionHandlingDispatch\",\n    value: function exceptionHandlingDispatch(handler, value) {\n      try {\n        return handler(value);\n      } catch (exception) {\n        return this.exceptionHandlers.map(function (exceptionHandler) {\n          return exceptionHandler(exception);\n        });\n      }\n    }\n    /*\n    Section: Construction and Destruction\n    */\n    // Public: Construct an emitter.\n    //\n    // ```js\n    // this.emitter = new Emitter()\n    // ```\n\n  }]);\n\n  function Emitter() {\n    _classCallCheck(this, Emitter);\n\n    this.disposed = false;\n    this.clear();\n  } // Public: Clear out any existing subscribers.\n\n\n  _createClass(Emitter, [{\n    key: \"clear\",\n    value: function clear() {\n      if (this.subscriptions != null) {\n        this.subscriptions.dispose();\n      }\n\n      this.subscriptions = new CompositeDisposable();\n      this.handlersByEventName = {};\n    } // Public: Unsubscribe all handlers.\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.subscriptions.dispose();\n      this.handlersByEventName = null;\n      this.disposed = true;\n    }\n    /*\n    Section: Event Subscription\n    */\n    // Public: Register the given handler function to be invoked whenever events by\n    // the given name are emitted via {::emit}.\n    //\n    // * `eventName` {String} naming the event that you want to invoke the handler\n    //   when emitted.\n    // * `handler` {Function} to invoke when {::emit} is called with the given\n    //   event name.\n    //\n    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.\n\n  }, {\n    key: \"on\",\n    value: function on(eventName, handler, unshift) {\n      var _this2 = this;\n\n      if (unshift == null) {\n        unshift = false;\n      }\n\n      if (this.disposed) {\n        throw new Error(\"Emitter has been disposed\");\n      }\n\n      if (typeof handler !== \"function\") {\n        throw new Error(\"Handler must be a function\");\n      }\n\n      var currentHandlers = this.handlersByEventName[eventName];\n\n      if (currentHandlers) {\n        if (unshift) {\n          this.handlersByEventName[eventName].unshift(handler);\n        } else {\n          this.handlersByEventName[eventName].push(handler);\n        }\n      } else {\n        this.handlersByEventName[eventName] = [handler];\n      } // When the emitter is disposed, we want to dispose of all subscriptions.\n      // However, we also need to stop tracking disposables when they're disposed\n      // from outside, otherwise this class will hold references to all the\n      // disposables it created (instead of just the active ones).\n\n\n      var cleanup = new Disposable(function () {\n        _this2.subscriptions.remove(cleanup);\n\n        return _this2.off(eventName, handler);\n      });\n      this.subscriptions.add(cleanup);\n      return cleanup;\n    } // Public: Register the given handler function to be invoked the next time an\n    // events with the given name is emitted via {::emit}.\n    //\n    // * `eventName` {String} naming the event that you want to invoke the handler\n    //   when emitted.\n    // * `handler` {Function} to invoke when {::emit} is called with the given\n    //   event name.\n    //\n    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.\n\n  }, {\n    key: \"once\",\n    value: function once(eventName, handler, unshift) {\n      if (unshift == null) {\n        unshift = false;\n      }\n\n      var wrapped = function wrapped(value) {\n        disposable.dispose();\n        return handler(value);\n      };\n\n      var disposable = this.on(eventName, wrapped, unshift);\n      return disposable;\n    } // Public: Register the given handler function to be invoked *before* all\n    // other handlers existing at the time of subscription whenever events by the\n    // given name are emitted via {::emit}.\n    //\n    // Use this method when you need to be the first to handle a given event. This\n    // could be required when a data structure in a parent object needs to be\n    // updated before third-party event handlers registered on a child object via a\n    // public API are invoked. Your handler could itself be preempted via\n    // subsequent calls to this method, but this can be controlled by keeping\n    // methods based on `::preempt` private.\n    //\n    // * `eventName` {String} naming the event that you want to invoke the handler\n    //   when emitted.\n    // * `handler` {Function} to invoke when {::emit} is called with the given\n    //   event name.\n    //\n    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.\n\n  }, {\n    key: \"preempt\",\n    value: function preempt(eventName, handler) {\n      return this.on(eventName, handler, true);\n    } // Private: Used by the disposable.\n\n  }, {\n    key: \"off\",\n    value: function off(eventName, handlerToRemove) {\n      if (this.disposed) {\n        return;\n      }\n\n      var handlers = this.handlersByEventName[eventName];\n\n      if (handlers) {\n        var handlerIndex = handlers.indexOf(handlerToRemove);\n\n        if (handlerIndex >= 0) {\n          handlers.splice(handlerIndex, 1);\n        }\n\n        if (handlers.length === 0) {\n          delete this.handlersByEventName[eventName];\n        }\n      }\n    }\n    /*\n    Section: Event Emission\n    */\n    // Public: Invoke handlers registered via {::on} for the given event name.\n    //\n    // * `eventName` The name of the event to emit. Handlers registered with {::on}\n    //   for the same name will be invoked.\n    // * `value` Callbacks will be invoked with this value as an argument.\n\n  }, {\n    key: \"emit\",\n    value: function emit(eventName, value) {\n      var handlers = this.handlersByEventName && this.handlersByEventName[eventName];\n\n      if (handlers) {\n        // create a copy of `handlers` so that if any handler mutates `handlers`\n        // (e.g. by calling `on` on this same emitter), this does not result in\n        // changing the handlers being called during this same `emit`.\n        var handlersCopy = handlers.slice();\n\n        for (var i = 0; i < handlersCopy.length; i++) {\n          this.constructor.dispatch(handlersCopy[i], value);\n        }\n      }\n    }\n  }, {\n    key: \"emitAsync\",\n    value: function emitAsync(eventName, value) {\n      var _this3 = this;\n\n      var handlers = this.handlersByEventName && this.handlersByEventName[eventName];\n\n      if (handlers) {\n        var promises = handlers.map(function (handler) {\n          return _this3.constructor.dispatch(handler, value);\n        });\n        return Promise.all(promises).then(function () {});\n      }\n\n      return Promise.resolve();\n    }\n  }, {\n    key: \"getEventNames\",\n    value: function getEventNames() {\n      return Object.keys(this.handlersByEventName);\n    }\n  }, {\n    key: \"listenerCountForEventName\",\n    value: function listenerCountForEventName(eventName) {\n      var handlers = this.handlersByEventName[eventName];\n      return handlers == null ? 0 : handlers.length;\n    }\n  }, {\n    key: \"getTotalListenerCount\",\n    value: function getTotalListenerCount() {\n      var result = 0;\n\n      var _arr = Object.keys(this.handlersByEventName);\n\n      for (var _i = 0; _i < _arr.length; _i++) {\n        var eventName = _arr[_i];\n        result += this.handlersByEventName[eventName].length;\n      }\n\n      return result;\n    }\n  }]);\n\n  return Emitter;\n}();\n\nEmitter.dispatch = Emitter.simpleDispatch;\nEmitter.exceptionHandlers = [];\nmodule.exports = Emitter;","\"use strict\";\n\nvar utils = require(\"./utils\");\n\nmodule.exports = function batchProcessorMaker(options) {\n    options             = options || {};\n    var reporter        = options.reporter;\n    var asyncProcess    = utils.getOption(options, \"async\", true);\n    var autoProcess     = utils.getOption(options, \"auto\", true);\n\n    if(autoProcess && !asyncProcess) {\n        reporter && reporter.warn(\"Invalid options combination. auto=true and async=false is invalid. Setting async=true.\");\n        asyncProcess = true;\n    }\n\n    var batch = Batch();\n    var asyncFrameHandler;\n    var isProcessing = false;\n\n    function addFunction(level, fn) {\n        if(!isProcessing && autoProcess && asyncProcess && batch.size() === 0) {\n            // Since this is async, it is guaranteed to be executed after that the fn is added to the batch.\n            // This needs to be done before, since we're checking the size of the batch to be 0.\n            processBatchAsync();\n        }\n\n        batch.add(level, fn);\n    }\n\n    function processBatch() {\n        // Save the current batch, and create a new batch so that incoming functions are not added into the currently processing batch.\n        // Continue processing until the top-level batch is empty (functions may be added to the new batch while processing, and so on).\n        isProcessing = true;\n        while (batch.size()) {\n            var processingBatch = batch;\n            batch = Batch();\n            processingBatch.process();\n        }\n        isProcessing = false;\n    }\n\n    function forceProcessBatch(localAsyncProcess) {\n        if (isProcessing) {\n            return;\n        }\n\n        if(localAsyncProcess === undefined) {\n            localAsyncProcess = asyncProcess;\n        }\n\n        if(asyncFrameHandler) {\n            cancelFrame(asyncFrameHandler);\n            asyncFrameHandler = null;\n        }\n\n        if(localAsyncProcess) {\n            processBatchAsync();\n        } else {\n            processBatch();\n        }\n    }\n\n    function processBatchAsync() {\n        asyncFrameHandler = requestFrame(processBatch);\n    }\n\n    function clearBatch() {\n        batch           = {};\n        batchSize       = 0;\n        topLevel        = 0;\n        bottomLevel     = 0;\n    }\n\n    function cancelFrame(listener) {\n        // var cancel = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.clearTimeout;\n        var cancel = clearTimeout;\n        return cancel(listener);\n    }\n\n    function requestFrame(callback) {\n        // var raf = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || function(fn) { return window.setTimeout(fn, 20); };\n        var raf = function(fn) { return setTimeout(fn, 0); };\n        return raf(callback);\n    }\n\n    return {\n        add: addFunction,\n        force: forceProcessBatch\n    };\n};\n\nfunction Batch() {\n    var batch       = {};\n    var size        = 0;\n    var topLevel    = 0;\n    var bottomLevel = 0;\n\n    function add(level, fn) {\n        if(!fn) {\n            fn = level;\n            level = 0;\n        }\n\n        if(level > topLevel) {\n            topLevel = level;\n        } else if(level < bottomLevel) {\n            bottomLevel = level;\n        }\n\n        if(!batch[level]) {\n            batch[level] = [];\n        }\n\n        batch[level].push(fn);\n        size++;\n    }\n\n    function process() {\n        for(var level = bottomLevel; level <= topLevel; level++) {\n            var fns = batch[level];\n\n            for(var i = 0; i < fns.length; i++) {\n                var fn = fns[i];\n                fn();\n            }\n        }\n    }\n\n    function getSize() {\n        return size;\n    }\n\n    return {\n        add: add,\n        process: process,\n        size: getSize\n    };\n}\n","\"use strict\";\n\nvar prop = \"_erd\";\n\nfunction initState(element) {\n    element[prop] = {};\n    return getState(element);\n}\n\nfunction getState(element) {\n    return element[prop];\n}\n\nfunction cleanState(element) {\n    delete element[prop];\n}\n\nmodule.exports = {\n    initState: initState,\n    getState: getState,\n    cleanState: cleanState\n};\n","\"use strict\";\n\nvar forEach                 = require(\"./collection-utils\").forEach;\nvar elementUtilsMaker       = require(\"./element-utils\");\nvar listenerHandlerMaker    = require(\"./listener-handler\");\nvar idGeneratorMaker        = require(\"./id-generator\");\nvar idHandlerMaker          = require(\"./id-handler\");\nvar reporterMaker           = require(\"./reporter\");\nvar browserDetector         = require(\"./browser-detector\");\nvar batchProcessorMaker     = require(\"batch-processor\");\nvar stateHandler            = require(\"./state-handler\");\n\n//Detection strategies.\nvar objectStrategyMaker     = require(\"./detection-strategy/object.js\");\nvar scrollStrategyMaker     = require(\"./detection-strategy/scroll.js\");\n\nfunction isCollection(obj) {\n    return Array.isArray(obj) || obj.length !== undefined;\n}\n\nfunction toArray(collection) {\n    if (!Array.isArray(collection)) {\n        var array = [];\n        forEach(collection, function (obj) {\n            array.push(obj);\n        });\n        return array;\n    } else {\n        return collection;\n    }\n}\n\nfunction isElement(obj) {\n    return obj && obj.nodeType === 1;\n}\n\n/**\n * @typedef idHandler\n * @type {object}\n * @property {function} get Gets the resize detector id of the element.\n * @property {function} set Generate and sets the resize detector id of the element.\n */\n\n/**\n * @typedef Options\n * @type {object}\n * @property {boolean} callOnAdd    Determines if listeners should be called when they are getting added.\n                                    Default is true. If true, the listener is guaranteed to be called when it has been added.\n                                    If false, the listener will not be guarenteed to be called when it has been added (does not prevent it from being called).\n * @property {idHandler} idHandler  A custom id handler that is responsible for generating, setting and retrieving id's for elements.\n                                    If not provided, a default id handler will be used.\n * @property {reporter} reporter    A custom reporter that handles reporting logs, warnings and errors.\n                                    If not provided, a default id handler will be used.\n                                    If set to false, then nothing will be reported.\n * @property {boolean} debug        If set to true, the the system will report debug messages as default for the listenTo method.\n */\n\n/**\n * Creates an element resize detector instance.\n * @public\n * @param {Options?} options Optional global options object that will decide how this instance will work.\n */\nmodule.exports = function(options) {\n    options = options || {};\n\n    //idHandler is currently not an option to the listenTo function, so it should not be added to globalOptions.\n    var idHandler;\n\n    if (options.idHandler) {\n        // To maintain compatability with idHandler.get(element, readonly), make sure to wrap the given idHandler\n        // so that readonly flag always is true when it's used here. This may be removed next major version bump.\n        idHandler = {\n            get: function (element) { return options.idHandler.get(element, true); },\n            set: options.idHandler.set\n        };\n    } else {\n        var idGenerator = idGeneratorMaker();\n        var defaultIdHandler = idHandlerMaker({\n            idGenerator: idGenerator,\n            stateHandler: stateHandler\n        });\n        idHandler = defaultIdHandler;\n    }\n\n    //reporter is currently not an option to the listenTo function, so it should not be added to globalOptions.\n    var reporter = options.reporter;\n\n    if(!reporter) {\n        //If options.reporter is false, then the reporter should be quiet.\n        var quiet = reporter === false;\n        reporter = reporterMaker(quiet);\n    }\n\n    //batchProcessor is currently not an option to the listenTo function, so it should not be added to globalOptions.\n    var batchProcessor = getOption(options, \"batchProcessor\", batchProcessorMaker({ reporter: reporter }));\n\n    //Options to be used as default for the listenTo function.\n    var globalOptions = {};\n    globalOptions.callOnAdd     = !!getOption(options, \"callOnAdd\", true);\n    globalOptions.debug         = !!getOption(options, \"debug\", false);\n\n    var eventListenerHandler    = listenerHandlerMaker(idHandler);\n    var elementUtils            = elementUtilsMaker({\n        stateHandler: stateHandler\n    });\n\n    //The detection strategy to be used.\n    var detectionStrategy;\n    var desiredStrategy = getOption(options, \"strategy\", \"object\");\n    var importantCssRules = getOption(options, \"important\", false);\n    var strategyOptions = {\n        reporter: reporter,\n        batchProcessor: batchProcessor,\n        stateHandler: stateHandler,\n        idHandler: idHandler,\n        important: importantCssRules\n    };\n\n    if(desiredStrategy === \"scroll\") {\n        if (browserDetector.isLegacyOpera()) {\n            reporter.warn(\"Scroll strategy is not supported on legacy Opera. Changing to object strategy.\");\n            desiredStrategy = \"object\";\n        } else if (browserDetector.isIE(9)) {\n            reporter.warn(\"Scroll strategy is not supported on IE9. Changing to object strategy.\");\n            desiredStrategy = \"object\";\n        }\n    }\n\n    if(desiredStrategy === \"scroll\") {\n        detectionStrategy = scrollStrategyMaker(strategyOptions);\n    } else if(desiredStrategy === \"object\") {\n        detectionStrategy = objectStrategyMaker(strategyOptions);\n    } else {\n        throw new Error(\"Invalid strategy name: \" + desiredStrategy);\n    }\n\n    //Calls can be made to listenTo with elements that are still being installed.\n    //Also, same elements can occur in the elements list in the listenTo function.\n    //With this map, the ready callbacks can be synchronized between the calls\n    //so that the ready callback can always be called when an element is ready - even if\n    //it wasn't installed from the function itself.\n    var onReadyCallbacks = {};\n\n    /**\n     * Makes the given elements resize-detectable and starts listening to resize events on the elements. Calls the event callback for each event for each element.\n     * @public\n     * @param {Options?} options Optional options object. These options will override the global options. Some options may not be overriden, such as idHandler.\n     * @param {element[]|element} elements The given array of elements to detect resize events of. Single element is also valid.\n     * @param {function} listener The callback to be executed for each resize event for each element.\n     */\n    function listenTo(options, elements, listener) {\n        function onResizeCallback(element) {\n            var listeners = eventListenerHandler.get(element);\n            forEach(listeners, function callListenerProxy(listener) {\n                listener(element);\n            });\n        }\n\n        function addListener(callOnAdd, element, listener) {\n            eventListenerHandler.add(element, listener);\n\n            if(callOnAdd) {\n                listener(element);\n            }\n        }\n\n        //Options object may be omitted.\n        if(!listener) {\n            listener = elements;\n            elements = options;\n            options = {};\n        }\n\n        if(!elements) {\n            throw new Error(\"At least one element required.\");\n        }\n\n        if(!listener) {\n            throw new Error(\"Listener required.\");\n        }\n\n        if (isElement(elements)) {\n            // A single element has been passed in.\n            elements = [elements];\n        } else if (isCollection(elements)) {\n            // Convert collection to array for plugins.\n            // TODO: May want to check so that all the elements in the collection are valid elements.\n            elements = toArray(elements);\n        } else {\n            return reporter.error(\"Invalid arguments. Must be a DOM element or a collection of DOM elements.\");\n        }\n\n        var elementsReady = 0;\n\n        var callOnAdd = getOption(options, \"callOnAdd\", globalOptions.callOnAdd);\n        var onReadyCallback = getOption(options, \"onReady\", function noop() {});\n        var debug = getOption(options, \"debug\", globalOptions.debug);\n\n        forEach(elements, function attachListenerToElement(element) {\n            if (!stateHandler.getState(element)) {\n                stateHandler.initState(element);\n                idHandler.set(element);\n            }\n\n            var id = idHandler.get(element);\n\n            debug && reporter.log(\"Attaching listener to element\", id, element);\n\n            if(!elementUtils.isDetectable(element)) {\n                debug && reporter.log(id, \"Not detectable.\");\n                if(elementUtils.isBusy(element)) {\n                    debug && reporter.log(id, \"System busy making it detectable\");\n\n                    //The element is being prepared to be detectable. Do not make it detectable.\n                    //Just add the listener, because the element will soon be detectable.\n                    addListener(callOnAdd, element, listener);\n                    onReadyCallbacks[id] = onReadyCallbacks[id] || [];\n                    onReadyCallbacks[id].push(function onReady() {\n                        elementsReady++;\n\n                        if(elementsReady === elements.length) {\n                            onReadyCallback();\n                        }\n                    });\n                    return;\n                }\n\n                debug && reporter.log(id, \"Making detectable...\");\n                //The element is not prepared to be detectable, so do prepare it and add a listener to it.\n                elementUtils.markBusy(element, true);\n                return detectionStrategy.makeDetectable({ debug: debug, important: importantCssRules }, element, function onElementDetectable(element) {\n                    debug && reporter.log(id, \"onElementDetectable\");\n\n                    if (stateHandler.getState(element)) {\n                        elementUtils.markAsDetectable(element);\n                        elementUtils.markBusy(element, false);\n                        detectionStrategy.addListener(element, onResizeCallback);\n                        addListener(callOnAdd, element, listener);\n\n                        // Since the element size might have changed since the call to \"listenTo\", we need to check for this change,\n                        // so that a resize event may be emitted.\n                        // Having the startSize object is optional (since it does not make sense in some cases such as unrendered elements), so check for its existance before.\n                        // Also, check the state existance before since the element may have been uninstalled in the installation process.\n                        var state = stateHandler.getState(element);\n                        if (state && state.startSize) {\n                            var width = element.offsetWidth;\n                            var height = element.offsetHeight;\n                            if (state.startSize.width !== width || state.startSize.height !== height) {\n                                onResizeCallback(element);\n                            }\n                        }\n\n                        if(onReadyCallbacks[id]) {\n                            forEach(onReadyCallbacks[id], function(callback) {\n                                callback();\n                            });\n                        }\n                    } else {\n                        // The element has been unisntalled before being detectable.\n                        debug && reporter.log(id, \"Element uninstalled before being detectable.\");\n                    }\n\n                    delete onReadyCallbacks[id];\n\n                    elementsReady++;\n                    if(elementsReady === elements.length) {\n                        onReadyCallback();\n                    }\n                });\n            }\n\n            debug && reporter.log(id, \"Already detecable, adding listener.\");\n\n            //The element has been prepared to be detectable and is ready to be listened to.\n            addListener(callOnAdd, element, listener);\n            elementsReady++;\n        });\n\n        if(elementsReady === elements.length) {\n            onReadyCallback();\n        }\n    }\n\n    function uninstall(elements) {\n        if(!elements) {\n            return reporter.error(\"At least one element is required.\");\n        }\n\n        if (isElement(elements)) {\n            // A single element has been passed in.\n            elements = [elements];\n        } else if (isCollection(elements)) {\n            // Convert collection to array for plugins.\n            // TODO: May want to check so that all the elements in the collection are valid elements.\n            elements = toArray(elements);\n        } else {\n            return reporter.error(\"Invalid arguments. Must be a DOM element or a collection of DOM elements.\");\n        }\n\n        forEach(elements, function (element) {\n            eventListenerHandler.removeAllListeners(element);\n            detectionStrategy.uninstall(element);\n            stateHandler.cleanState(element);\n        });\n    }\n\n    function initDocument(targetDocument) {\n        detectionStrategy.initDocument && detectionStrategy.initDocument(targetDocument);\n    }\n\n    return {\n        listenTo: listenTo,\n        removeListener: eventListenerHandler.removeListener,\n        removeAllListeners: eventListenerHandler.removeAllListeners,\n        uninstall: uninstall,\n        initDocument: initDocument\n    };\n};\n\nfunction getOption(options, name, defaultValue) {\n    var value = options[name];\n\n    if((value === undefined || value === null) && defaultValue !== undefined) {\n        return defaultValue;\n    }\n\n    return value;\n}\n","// Some functions take a variable number of arguments, or a few expected\n// arguments at the beginning and then a variable number of values to operate\n// on. This helper accumulates all remaining arguments past the function’s\n// argument length (or an explicit `startIndex`), into an array that becomes\n// the last argument. Similar to ES6’s \"rest parameter\".\nexport default function restArguments(func, startIndex) {\n  startIndex = startIndex == null ? func.length - 1 : +startIndex;\n  return function() {\n    var length = Math.max(arguments.length - startIndex, 0),\n        rest = Array(length),\n        index = 0;\n    for (; index < length; index++) {\n      rest[index] = arguments[index + startIndex];\n    }\n    switch (startIndex) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, arguments[0], rest);\n      case 2: return func.call(this, arguments[0], arguments[1], rest);\n    }\n    var args = Array(startIndex + 1);\n    for (index = 0; index < startIndex; index++) {\n      args[index] = arguments[index];\n    }\n    args[startIndex] = rest;\n    return func.apply(this, args);\n  };\n}\n","// Is a given variable an object?\nexport default function isObject(obj) {\n  var type = typeof obj;\n  return type === 'function' || type === 'object' && !!obj;\n}\n","// Is a given value equal to null?\nexport default function isNull(obj) {\n  return obj === null;\n}\n","// Is a given variable undefined?\nexport default function isUndefined(obj) {\n  return obj === void 0;\n}\n","import { toString } from './_setup.js';\n\n// Is a given value a boolean?\nexport default function isBoolean(obj) {\n  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n}\n","// Is a given value a DOM element?\nexport default function isElement(obj) {\n  return !!(obj && obj.nodeType === 1);\n}\n","import { toString } from './_setup.js';\n\n// Internal function for creating a `toString`-based type tester.\nexport default function tagTester(name) {\n  return function(obj) {\n    return toString.call(obj) === '[object ' + name + ']';\n  };\n}\n","import { hasOwnProperty } from './_setup.js';\n\n// Internal function to check whether `key` is an own property name of `obj`.\nexport default function has(obj, key) {\n  return obj != null && hasOwnProperty.call(obj, key);\n}\n","import { _isFinite } from './_setup.js';\nimport isSymbol from './isSymbol.js';\n\n// Is a given object a finite number?\nexport default function isFinite(obj) {\n  return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\n}\n","import { _isNaN } from './_setup.js';\nimport isNumber from './isNumber.js';\n\n// Is the given value `NaN`?\nexport default function isNaN(obj) {\n  return isNumber(obj) && _isNaN(obj);\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function constant(value) {\n  return function() {\n    return value;\n  };\n}\n","import { MAX_ARRAY_INDEX } from './_setup.js';\n\n// Common internal logic for `isArrayLike` and `isBufferLike`.\nexport default function createSizePropertyCheck(getSizeProperty) {\n  return function(collection) {\n    var sizeProperty = getSizeProperty(collection);\n    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\n  }\n}\n","// Current version.\nexport var VERSION = '1.11.0';\n\n// Establish the root object, `window` (`self`) in the browser, `global`\n// on the server, or `this` in some virtual machines. We use `self`\n// instead of `window` for `WebWorker` support.\nexport var root = typeof self == 'object' && self.self === self && self ||\n          typeof global == 'object' && global.global === global && global ||\n          Function('return this')() ||\n          {};\n\n// Save bytes in the minified (but not gzipped) version:\nexport var ArrayProto = Array.prototype, ObjProto = Object.prototype;\nexport var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport var push = ArrayProto.push,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty;\n\n// Modern feature detection.\nexport var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined';\n\n// All **ECMAScript 5+** native function implementations that we hope to use\n// are declared here.\nexport var nativeIsArray = Array.isArray,\n    nativeKeys = Object.keys,\n    nativeCreate = Object.create,\n    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\n\n// Create references to these builtin functions because we override them.\nexport var _isNaN = isNaN,\n    _isFinite = isFinite;\n\n// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\nexport var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\nexport var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n// The largest integer that can be represented exactly.\nexport var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n","// Internal helper to generate a function to obtain property `key` from `obj`.\nexport default function shallowProperty(key) {\n  return function(obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n}\n","import { nonEnumerableProps, ObjProto } from './_setup.js';\nimport isFunction from './isFunction.js';\nimport has from './_has.js';\n\n// Internal helper to create a simple lookup structure.\n// `collectNonEnumProps` used to depend on `_.contains`, but this led to\n// circular imports. `emulatedSet` is a one-off solution that only works for\n// arrays of strings.\nfunction emulatedSet(keys) {\n  var hash = {};\n  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\n  return {\n    contains: function(key) { return hash[key]; },\n    push: function(key) {\n      hash[key] = true;\n      return keys.push(key);\n    }\n  };\n}\n\n// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\n// be iterated by `for key in ...` and thus missed. Extends `keys` in place if\n// needed.\nexport default function collectNonEnumProps(obj, keys) {\n  keys = emulatedSet(keys);\n  var nonEnumIdx = nonEnumerableProps.length;\n  var constructor = obj.constructor;\n  var proto = isFunction(constructor) && constructor.prototype || ObjProto;\n\n  // Constructor is a special case.\n  var prop = 'constructor';\n  if (has(obj, prop) && !keys.contains(prop)) keys.push(prop);\n\n  while (nonEnumIdx--) {\n    prop = nonEnumerableProps[nonEnumIdx];\n    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\n      keys.push(prop);\n    }\n  }\n}\n","import isObject from './isObject.js';\nimport { nativeKeys, hasEnumBug } from './_setup.js';\nimport has from './_has.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve the names of an object's own properties.\n// Delegates to **ECMAScript 5**'s native `Object.keys`.\nexport default function keys(obj) {\n  if (!isObject(obj)) return [];\n  if (nativeKeys) return nativeKeys(obj);\n  var keys = [];\n  for (var key in obj) if (has(obj, key)) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isString from './isString.js';\nimport isArguments from './isArguments.js';\nimport keys from './keys.js';\n\n// Is a given array, string, or object empty?\n// An \"empty\" object has no enumerable own-properties.\nexport default function isEmpty(obj) {\n  if (obj == null) return true;\n  // Skip the more expensive `toString`-based type checks if `obj` has no\n  // `.length`.\n  if (isArrayLike(obj) && (isArray(obj) || isString(obj) || isArguments(obj))) return obj.length === 0;\n  return keys(obj).length === 0;\n}\n","import keys from './keys.js';\n\n// Returns whether an object has a given set of `key:value` pairs.\nexport default function isMatch(object, attrs) {\n  var _keys = keys(attrs), length = _keys.length;\n  if (object == null) return !length;\n  var obj = Object(object);\n  for (var i = 0; i < length; i++) {\n    var key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) return false;\n  }\n  return true;\n}\n","import { VERSION } from './_setup.js';\n\n// If Underscore is called as a function, it returns a wrapped object that can\n// be used OO-style. This wrapper holds altered versions of all functions added\n// through `_.mixin`. Wrapped objects may be chained.\nexport default function _(obj) {\n  if (obj instanceof _) return obj;\n  if (!(this instanceof _)) return new _(obj);\n  this._wrapped = obj;\n}\n\n_.VERSION = VERSION;\n\n// Extracts the result from a wrapped and chained object.\n_.prototype.value = function() {\n  return this._wrapped;\n};\n\n// Provide unwrapping proxies for some methods used in engine operations\n// such as arithmetic and JSON stringification.\n_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n_.prototype.toString = function() {\n  return String(this._wrapped);\n};\n","import _ from './underscore.js';\nimport { toString, SymbolProto } from './_setup.js';\nimport getByteLength from './_getByteLength.js';\nimport isTypedArray from './isTypedArray.js';\nimport isFunction from './isFunction.js';\nimport keys from './keys.js';\nimport has from './_has.js';\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction eq(a, b, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) return false;\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) return b !== b;\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n  return deepEq(a, b, aStack, bStack);\n}\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction deepEq(a, b, aStack, bStack) {\n  // Unwrap any wrapped objects.\n  if (a instanceof _) a = a._wrapped;\n  if (b instanceof _) b = b._wrapped;\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) return false;\n  switch (className) {\n    // These types are compared by value.\n    case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case '[object String]':\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return '' + a === '' + b;\n    case '[object Number]':\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) return +b !== +b;\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case '[object Symbol]':\n      return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    case '[object ArrayBuffer]':\n      // Coerce to `DataView` so we can fall through to the next case.\n      return deepEq(new DataView(a), new DataView(b), aStack, bStack);\n    case '[object DataView]':\n      var byteLength = getByteLength(a);\n      if (byteLength !== getByteLength(b)) {\n        return false;\n      }\n      while (byteLength--) {\n        if (a.getUint8(byteLength) !== b.getUint8(byteLength)) {\n          return false;\n        }\n      }\n      return true;\n  }\n\n  if (isTypedArray(a)) {\n    // Coerce typed arrays to `DataView`.\n    return deepEq(new DataView(a.buffer), new DataView(b.buffer), aStack, bStack);\n  }\n\n  var areArrays = className === '[object Array]';\n  if (!areArrays) {\n    if (typeof a != 'object' || typeof b != 'object') return false;\n\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\n                             isFunction(bCtor) && bCtor instanceof bCtor)\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) return bStack[length] === b;\n  }\n\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) return false;\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], aStack, bStack)) return false;\n    }\n  } else {\n    // Deep compare objects.\n    var _keys = keys(a), key;\n    length = _keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (keys(b).length !== length) return false;\n    while (length--) {\n      // Deep compare each member\n      key = _keys[length];\n      if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\n\n// Perform a deep comparison to check if two objects are equal.\nexport default function isEqual(a, b) {\n  return eq(a, b);\n}\n","import isObject from './isObject.js';\nimport { hasEnumBug } from './_setup.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve all the enumerable property names of an object.\nexport default function allKeys(obj) {\n  if (!isObject(obj)) return [];\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import keys from './keys.js';\n\n// Retrieve the values of an object's properties.\nexport default function values(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var values = Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[_keys[i]];\n  }\n  return values;\n}\n","import keys from './keys.js';\n\n// Convert an object into a list of `[key, value]` pairs.\n// The opposite of `_.object` with one argument.\nexport default function pairs(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var pairs = Array(length);\n  for (var i = 0; i < length; i++) {\n    pairs[i] = [_keys[i], obj[_keys[i]]];\n  }\n  return pairs;\n}\n","import keys from './keys.js';\n\n// Invert the keys and values of an object. The values must be serializable.\nexport default function invert(obj) {\n  var result = {};\n  var _keys = keys(obj);\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    result[obj[_keys[i]]] = _keys[i];\n  }\n  return result;\n}\n","import isFunction from './isFunction.js';\n\n// Return a sorted list of the function names available on the object.\nexport default function functions(obj) {\n  var names = [];\n  for (var key in obj) {\n    if (isFunction(obj[key])) names.push(key);\n  }\n  return names.sort();\n}\n","// An internal function for creating assigner functions.\nexport default function createAssigner(keysFunc, defaults) {\n  return function(obj) {\n    var length = arguments.length;\n    if (defaults) obj = Object(obj);\n    if (length < 2 || obj == null) return obj;\n    for (var index = 1; index < length; index++) {\n      var source = arguments[index],\n          keys = keysFunc(source),\n          l = keys.length;\n      for (var i = 0; i < l; i++) {\n        var key = keys[i];\n        if (!defaults || obj[key] === void 0) obj[key] = source[key];\n      }\n    }\n    return obj;\n  };\n}\n","import isObject from './isObject.js';\nimport { nativeCreate } from './_setup.js';\n\n// Create a naked function reference for surrogate-prototype-swapping.\nfunction ctor() {\n  return function(){};\n}\n\n// An internal function for creating a new object that inherits from another.\nexport default function baseCreate(prototype) {\n  if (!isObject(prototype)) return {};\n  if (nativeCreate) return nativeCreate(prototype);\n  var Ctor = ctor();\n  Ctor.prototype = prototype;\n  var result = new Ctor;\n  Ctor.prototype = null;\n  return result;\n}\n","import baseCreate from './_baseCreate.js';\nimport extendOwn from './extendOwn.js';\n\n// Creates an object that inherits from the given prototype object.\n// If additional properties are provided then they will be added to the\n// created object.\nexport default function create(prototype, props) {\n  var result = baseCreate(prototype);\n  if (props) extendOwn(result, props);\n  return result;\n}\n","import isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport extend from './extend.js';\n\n// Create a (shallow-cloned) duplicate of an object.\nexport default function clone(obj) {\n  if (!isObject(obj)) return obj;\n  return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n","// Invokes `interceptor` with the `obj` and then returns `obj`.\n// The primary purpose of this method is to \"tap into\" a method chain, in\n// order to perform operations on intermediate results within the chain.\nexport default function tap(obj, interceptor) {\n  interceptor(obj);\n  return obj;\n}\n","import isArray from './isArray.js';\nimport _has from './_has.js';\nimport { hasOwnProperty } from './_setup.js';\n\n// Shortcut function for checking if an object has a given property directly on\n// itself (in other words, not on a prototype). Unlike the internal `has`\n// function, this public version can also traverse nested properties.\nexport default function has(obj, path) {\n  if (!isArray(path)) {\n    return _has(obj, path);\n  }\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    var key = path[i];\n    if (obj == null || !hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n    obj = obj[key];\n  }\n  return !!length;\n}\n","// Keep the identity function around for default iteratees.\nexport default function identity(value) {\n  return value;\n}\n","import extendOwn from './extendOwn.js';\nimport isMatch from './isMatch.js';\n\n// Returns a predicate for checking whether an object has a given set of\n// `key:value` pairs.\nexport default function matcher(attrs) {\n  attrs = extendOwn({}, attrs);\n  return function(obj) {\n    return isMatch(obj, attrs);\n  };\n}\n","// Internal function to obtain a nested property in `obj` along `path`.\nexport default function deepGet(obj, path) {\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    if (obj == null) return void 0;\n    obj = obj[path[i]];\n  }\n  return length ? obj : void 0;\n}\n","import isArray from './isArray.js';\nimport shallowProperty from './_shallowProperty.js';\nimport deepGet from './_deepGet.js';\n\n// Creates a function that, when passed an object, will traverse that object’s\n// properties down the given `path`, specified as an array of keys or indices.\nexport default function property(path) {\n  if (!isArray(path)) {\n    return shallowProperty(path);\n  }\n  return function(obj) {\n    return deepGet(obj, path);\n  };\n}\n","// Internal function that returns an efficient (for current engines) version\n// of the passed-in callback, to be repeatedly applied in other Underscore\n// functions.\nexport default function optimizeCb(func, context, argCount) {\n  if (context === void 0) return func;\n  switch (argCount == null ? 3 : argCount) {\n    case 1: return function(value) {\n      return func.call(context, value);\n    };\n    // The 2-argument case is omitted because we’re not using it.\n    case 3: return function(value, index, collection) {\n      return func.call(context, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(context, accumulator, value, index, collection);\n    };\n  }\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n","import identity from './identity.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport matcher from './matcher.js';\nimport property from './property.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// An internal function to generate callbacks that can be applied to each\n// element in a collection, returning the desired result — either `_.identity`,\n// an arbitrary callback, a property matcher, or a property accessor.\nexport default function baseIteratee(value, context, argCount) {\n  if (value == null) return identity;\n  if (isFunction(value)) return optimizeCb(value, context, argCount);\n  if (isObject(value) && !isArray(value)) return matcher(value);\n  return property(value);\n}\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\n\n// External wrapper for our callback generator. Users may customize\n// `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n// This abstraction hides the internal-only `argCount` argument.\nexport default function iteratee(value, context) {\n  return baseIteratee(value, context, Infinity);\n}\n_.iteratee = iteratee;\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\nimport iteratee from './iteratee.js';\n\n// The function we call internally to generate a callback. It invokes\n// `_.iteratee` if overridden, otherwise `baseIteratee`.\nexport default function cb(value, context, argCount) {\n  if (_.iteratee !== iteratee) return _.iteratee(value, context);\n  return baseIteratee(value, context, argCount);\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the results of applying the `iteratee` to each element of `obj`.\n// In contrast to `_.map` it returns an object.\nexport default function mapObject(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = keys(obj),\n      length = _keys.length,\n      results = {};\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys[index];\n    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function noop(){}\n","import isArray from './isArray.js';\nimport deepGet from './_deepGet.js';\n\n// Generates a function for a given object that returns a given property.\nexport default function propertyOf(obj) {\n  if (obj == null) {\n    return function(){};\n  }\n  return function(path) {\n    return !isArray(path) ? obj[path] : deepGet(obj, path);\n  };\n}\n","import optimizeCb from './_optimizeCb.js';\n\n// Run a function **n** times.\nexport default function times(n, iteratee, context) {\n  var accum = Array(Math.max(0, n));\n  iteratee = optimizeCb(iteratee, context, 1);\n  for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n  return accum;\n}\n","// Return a random integer between `min` and `max` (inclusive).\nexport default function random(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n","import keys from './keys.js';\n\n// Internal helper to generate functions for escaping and unescaping strings\n// to/from HTML interpolation.\nexport default function createEscaper(map) {\n  var escaper = function(match) {\n    return map[match];\n  };\n  // Regexes for identifying a key that needs to be escaped.\n  var source = '(?:' + keys(map).join('|') + ')';\n  var testRegexp = RegExp(source);\n  var replaceRegexp = RegExp(source, 'g');\n  return function(string) {\n    string = string == null ? '' : '' + string;\n    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n  };\n}\n","import defaults from './defaults.js';\nimport _ from './underscore.js';\nimport './templateSettings.js';\n\n// When customizing `_.templateSettings`, if you don't want to define an\n// interpolation, evaluation or escaping regex, we need one that is\n// guaranteed not to match.\nvar noMatch = /(.)^/;\n\n// Certain characters need to be escaped so that they can be put into a\n// string literal.\nvar escapes = {\n  \"'\": \"'\",\n  '\\\\': '\\\\',\n  '\\r': 'r',\n  '\\n': 'n',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\nvar escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\nfunction escapeChar(match) {\n  return '\\\\' + escapes[match];\n}\n\n// JavaScript micro-templating, similar to John Resig's implementation.\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\n// and correctly escapes quotes within interpolated code.\n// NB: `oldSettings` only exists for backwards compatibility.\nexport default function template(text, settings, oldSettings) {\n  if (!settings && oldSettings) settings = oldSettings;\n  settings = defaults({}, settings, _.templateSettings);\n\n  // Combine delimiters into one regular expression via alternation.\n  var matcher = RegExp([\n    (settings.escape || noMatch).source,\n    (settings.interpolate || noMatch).source,\n    (settings.evaluate || noMatch).source\n  ].join('|') + '|$', 'g');\n\n  // Compile the template source, escaping string literals appropriately.\n  var index = 0;\n  var source = \"__p+='\";\n  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n    index = offset + match.length;\n\n    if (escape) {\n      source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n    } else if (interpolate) {\n      source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n    } else if (evaluate) {\n      source += \"';\\n\" + evaluate + \"\\n__p+='\";\n    }\n\n    // Adobe VMs need the match returned to produce the correct offset.\n    return match;\n  });\n  source += \"';\\n\";\n\n  // If a variable is not specified, place data values in local scope.\n  if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n  source = \"var __t,__p='',__j=Array.prototype.join,\" +\n    \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n    source + 'return __p;\\n';\n\n  var render;\n  try {\n    render = new Function(settings.variable || 'obj', '_', source);\n  } catch (e) {\n    e.source = source;\n    throw e;\n  }\n\n  var template = function(data) {\n    return render.call(this, data, _);\n  };\n\n  // Provide the compiled source as a convenience for precompilation.\n  var argument = settings.variable || 'obj';\n  template.source = 'function(' + argument + '){\\n' + source + '}';\n\n  return template;\n}\n","import isArray from './isArray.js';\nimport isFunction from './isFunction.js';\n\n// Traverses the children of `obj` along `path`. If a child is a function, it\n// is invoked with its parent as context. Returns the value of the final\n// child, or `fallback` if any child is undefined.\nexport default function result(obj, path, fallback) {\n  if (!isArray(path)) path = [path];\n  var length = path.length;\n  if (!length) {\n    return isFunction(fallback) ? fallback.call(obj) : fallback;\n  }\n  for (var i = 0; i < length; i++) {\n    var prop = obj == null ? void 0 : obj[path[i]];\n    if (prop === void 0) {\n      prop = fallback;\n      i = length; // Ensure we don't continue iterating.\n    }\n    obj = isFunction(prop) ? prop.call(obj) : prop;\n  }\n  return obj;\n}\n","// Generate a unique integer id (unique within the entire client session).\n// Useful for temporary DOM ids.\nvar idCounter = 0;\nexport default function uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n}\n","import _ from './underscore.js';\n\n// Start chaining a wrapped Underscore object.\nexport default function chain(obj) {\n  var instance = _(obj);\n  instance._chain = true;\n  return instance;\n}\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n// Internal function to execute `sourceFunc` bound to `context` with optional\n// `args`. Determines whether to execute a function as a constructor or as a\n// normal function.\nexport default function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\n  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n  var self = baseCreate(sourceFunc.prototype);\n  var result = sourceFunc.apply(self, args);\n  if (isObject(result)) return result;\n  return self;\n}\n","import getLength from './_getLength.js';\nimport isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isArguments from './isArguments.js';\n\n// Internal implementation of a recursive `flatten` function.\nexport default function flatten(input, depth, strict, output) {\n  output = output || [];\n  if (!depth && depth !== 0) {\n    depth = Infinity;\n  } else if (depth <= 0) {\n    return output.concat(input);\n  }\n  var idx = output.length;\n  for (var i = 0, length = getLength(input); i < length; i++) {\n    var value = input[i];\n    if (isArrayLike(value) && (isArray(value) || isArguments(value))) {\n      // Flatten current level of array or arguments object.\n      if (depth > 1) {\n        flatten(value, depth - 1, strict, output);\n        idx = output.length;\n      } else {\n        var j = 0, len = value.length;\n        while (j < len) output[idx++] = value[j++];\n      }\n    } else if (!strict) {\n      output[idx++] = value;\n    }\n  }\n  return output;\n}\n","import has from './_has.js';\n\n// Memoize an expensive function by storing its results.\nexport default function memoize(func, hasher) {\n  var memoize = function(key) {\n    var cache = memoize.cache;\n    var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n    if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n    return cache[address];\n  };\n  memoize.cache = {};\n  return memoize;\n}\n","import now from './now.js';\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nexport default function throttle(func, wait, options) {\n  var timeout, context, args, result;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function() {\n    var _now = now();\n    if (!previous && options.leading === false) previous = _now;\n    var remaining = wait - (_now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = _now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n","import restArguments from './restArguments.js';\nimport delay from './delay.js';\n\n// When a sequence of calls of the returned function ends, the argument\n// function is triggered. The end of a sequence is defined by the `wait`\n// parameter. If `immediate` is passed, the argument function will be\n// triggered at the beginning of the sequence instead of at the end.\nexport default function debounce(func, wait, immediate) {\n  var timeout, result;\n\n  var later = function(context, args) {\n    timeout = null;\n    if (args) result = func.apply(context, args);\n  };\n\n  var debounced = restArguments(function(args) {\n    if (timeout) clearTimeout(timeout);\n    if (immediate) {\n      var callNow = !timeout;\n      timeout = setTimeout(later, wait);\n      if (callNow) result = func.apply(this, args);\n    } else {\n      timeout = delay(later, wait, this, args);\n    }\n\n    return result;\n  });\n\n  debounced.cancel = function() {\n    clearTimeout(timeout);\n    timeout = null;\n  };\n\n  return debounced;\n}\n","import partial from './partial.js';\n\n// Returns the first function passed as an argument to the second,\n// allowing you to adjust arguments, run code before and after, and\n// conditionally execute the original function.\nexport default function wrap(func, wrapper) {\n  return partial(wrapper, func);\n}\n","// Returns a negated version of the passed-in predicate.\nexport default function negate(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n","// Returns a function that is the composition of a list of functions, each\n// consuming the return value of the function that follows.\nexport default function compose() {\n  var args = arguments;\n  var start = args.length - 1;\n  return function() {\n    var i = start;\n    var result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n","// Returns a function that will only be executed on and after the Nth call.\nexport default function after(times, func) {\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n","// Returns a function that will only be executed up to (but not including) the\n// Nth call.\nexport default function before(times, func) {\n  var memo;\n  return function() {\n    if (--times > 0) {\n      memo = func.apply(this, arguments);\n    }\n    if (times <= 1) func = null;\n    return memo;\n  };\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the first key on an object that passes a truth test.\nexport default function findKey(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = keys(obj), key;\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    key = _keys[i];\n    if (predicate(obj[key], key, obj)) return key;\n  }\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Internal function to generate `_.findIndex` and `_.findLastIndex`.\nexport default function createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    predicate = cb(predicate, context);\n    var length = getLength(array);\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Use a comparator function to figure out the smallest index at which\n// an object should be inserted so as to maintain order. Uses binary search.\nexport default function sortedIndex(array, obj, iteratee, context) {\n  iteratee = cb(iteratee, context, 1);\n  var value = iteratee(obj);\n  var low = 0, high = getLength(array);\n  while (low < high) {\n    var mid = Math.floor((low + high) / 2);\n    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n  }\n  return low;\n}\n","import getLength from './_getLength.js';\nimport { slice } from './_setup.js';\nimport isNaN from './isNaN.js';\n\n// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\nexport default function createIndexFinder(dir, predicateFind, sortedIndex) {\n  return function(array, item, idx) {\n    var i = 0, length = getLength(array);\n    if (typeof idx == 'number') {\n      if (dir > 0) {\n        i = idx >= 0 ? idx : Math.max(idx + length, i);\n      } else {\n        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n      }\n    } else if (sortedIndex && idx && length) {\n      idx = sortedIndex(array, item);\n      return array[idx] === item ? idx : -1;\n    }\n    if (item !== item) {\n      idx = predicateFind(slice.call(array, i, length), isNaN);\n      return idx >= 0 ? idx + i : -1;\n    }\n    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n      if (array[idx] === item) return idx;\n    }\n    return -1;\n  };\n}\n","import isArrayLike from './_isArrayLike.js';\nimport findIndex from './findIndex.js';\nimport findKey from './findKey.js';\n\n// Return the first value which passes a truth test.\nexport default function find(obj, predicate, context) {\n  var keyFinder = isArrayLike(obj) ? findIndex : findKey;\n  var key = keyFinder(obj, predicate, context);\n  if (key !== void 0 && key !== -1) return obj[key];\n}\n","import find from './find.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.find`: getting the first\n// object containing specific `key:value` pairs.\nexport default function findWhere(obj, attrs) {\n  return find(obj, matcher(attrs));\n}\n","import optimizeCb from './_optimizeCb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// The cornerstone for collection functions, an `each`\n// implementation, aka `forEach`.\n// Handles raw objects in addition to array-likes. Treats all\n// sparse array-likes as if they were dense.\nexport default function each(obj, iteratee, context) {\n  iteratee = optimizeCb(iteratee, context);\n  var i, length;\n  if (isArrayLike(obj)) {\n    for (i = 0, length = obj.length; i < length; i++) {\n      iteratee(obj[i], i, obj);\n    }\n  } else {\n    var _keys = keys(obj);\n    for (i = 0, length = _keys.length; i < length; i++) {\n      iteratee(obj[_keys[i]], _keys[i], obj);\n    }\n  }\n  return obj;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the results of applying the iteratee to each element.\nexport default function map(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length,\n      results = Array(length);\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    results[index] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// Internal helper to create a reducing function, iterating left or right.\nexport default function createReduce(dir) {\n  // Wrap code that reassigns argument variables in a separate function than\n  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n  var reducer = function(obj, iteratee, memo, initial) {\n    var _keys = !isArrayLike(obj) && keys(obj),\n        length = (_keys || obj).length,\n        index = dir > 0 ? 0 : length - 1;\n    if (!initial) {\n      memo = obj[_keys ? _keys[index] : index];\n      index += dir;\n    }\n    for (; index >= 0 && index < length; index += dir) {\n      var currentKey = _keys ? _keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n  };\n\n  return function(obj, iteratee, memo, context) {\n    var initial = arguments.length >= 3;\n    return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n  };\n}\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// Return all the elements that pass a truth test.\nexport default function filter(obj, predicate, context) {\n  var results = [];\n  predicate = cb(predicate, context);\n  each(obj, function(value, index, list) {\n    if (predicate(value, index, list)) results.push(value);\n  });\n  return results;\n}\n","import filter from './filter.js';\nimport negate from './negate.js';\nimport cb from './_cb.js';\n\n// Return all the elements for which a truth test fails.\nexport default function reject(obj, predicate, context) {\n  return filter(obj, negate(cb(predicate)), context);\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine whether all of the elements pass a truth test.\nexport default function every(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (!predicate(obj[currentKey], currentKey, obj)) return false;\n  }\n  return true;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine if at least one element in the object passes a truth test.\nexport default function some(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (predicate(obj[currentKey], currentKey, obj)) return true;\n  }\n  return false;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport indexOf from './indexOf.js';\n\n// Determine if the array or object contains a given item (using `===`).\nexport default function contains(obj, item, fromIndex, guard) {\n  if (!isArrayLike(obj)) obj = values(obj);\n  if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n  return indexOf(obj, item, fromIndex) >= 0;\n}\n","import map from './map.js';\nimport property from './property.js';\n\n// Convenience version of a common use case of `_.map`: fetching a property.\nexport default function pluck(obj, key) {\n  return map(obj, property(key));\n}\n","import filter from './filter.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.filter`: selecting only\n// objects containing specific `key:value` pairs.\nexport default function where(obj, attrs) {\n  return filter(obj, matcher(attrs));\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the maximum element (or element-based computation).\nexport default function max(obj, iteratee, context) {\n  var result = -Infinity, lastComputed = -Infinity,\n      value, computed;\n  if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value > result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the minimum element (or element-based computation).\nexport default function min(obj, iteratee, context) {\n  var result = Infinity, lastComputed = Infinity,\n      value, computed;\n  if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value < result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed < lastComputed || computed === Infinity && result === Infinity) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport clone from './clone.js';\nimport values from './values.js';\nimport getLength from './_getLength.js';\nimport random from './random.js';\n\n// Sample **n** random values from a collection using the modern version of the\n// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n// If **n** is not specified, returns a single random element.\n// The internal `guard` argument allows it to work with `_.map`.\nexport default function sample(obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = values(obj);\n    return obj[random(obj.length - 1)];\n  }\n  var sample = isArrayLike(obj) ? clone(obj) : values(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n}\n","import sample from './sample.js';\n\n// Shuffle a collection.\nexport default function shuffle(obj) {\n  return sample(obj, Infinity);\n}\n","import cb from './_cb.js';\nimport pluck from './pluck.js';\nimport map from './map.js';\n\n// Sort the object's values by a criterion produced by an iteratee.\nexport default function sortBy(obj, iteratee, context) {\n  var index = 0;\n  iteratee = cb(iteratee, context);\n  return pluck(map(obj, function(value, key, list) {\n    return {\n      value: value,\n      index: index++,\n      criteria: iteratee(value, key, list)\n    };\n  }).sort(function(left, right) {\n    var a = left.criteria;\n    var b = right.criteria;\n    if (a !== b) {\n      if (a > b || a === void 0) return 1;\n      if (a < b || b === void 0) return -1;\n    }\n    return left.index - right.index;\n  }), 'value');\n}\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// An internal function used for aggregate \"group by\" operations.\nexport default function group(behavior, partition) {\n  return function(obj, iteratee, context) {\n    var result = partition ? [[], []] : {};\n    iteratee = cb(iteratee, context);\n    each(obj, function(value, index) {\n      var key = iteratee(value, index, obj);\n      behavior(result, value, key);\n    });\n    return result;\n  };\n}\n","import isArray from './isArray.js';\nimport { slice } from './_setup.js';\nimport isString from './isString.js';\nimport isArrayLike from './_isArrayLike.js';\nimport map from './map.js';\nimport identity from './identity.js';\nimport values from './values.js';\n\n// Safely create a real, live array from anything iterable.\nvar reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\nexport default function toArray(obj) {\n  if (!obj) return [];\n  if (isArray(obj)) return slice.call(obj);\n  if (isString(obj)) {\n    // Keep surrogate pair characters together.\n    return obj.match(reStrSymbol);\n  }\n  if (isArrayLike(obj)) return map(obj, identity);\n  return values(obj);\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the number of elements in a collection.\nexport default function size(obj) {\n  if (obj == null) return 0;\n  return isArrayLike(obj) ? obj.length : keys(obj).length;\n}\n","// Internal `_.pick` helper function to determine whether `key` is an enumerable\n// property name of `obj`.\nexport default function keyInObj(value, key, obj) {\n  return key in obj;\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the last entry of the array. Especially useful on\n// the arguments object. Passing **n** will return all the values in\n// the array, excluding the last N.\nexport default function initial(array, n, guard) {\n  return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n","import initial from './initial.js';\n\n// Get the first element of an array. Passing **n** will return the first N\n// values in the array. The **guard** check allows it to work with `_.map`.\nexport default function first(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[0];\n  return initial(array, array.length - n);\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the first entry of the `array`. Especially useful on\n// the `arguments` object. Passing an **n** will return the rest N values in the\n// `array`.\nexport default function rest(array, n, guard) {\n  return slice.call(array, n == null || guard ? 1 : n);\n}\n","import rest from './rest.js';\n\n// Get the last element of an array. Passing **n** will return the last N\n// values in the array.\nexport default function last(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[array.length - 1];\n  return rest(array, Math.max(0, array.length - n));\n}\n","import filter from './filter.js';\n\n// Trim out all falsy values from an array.\nexport default function compact(array) {\n  return filter(array, Boolean);\n}\n","import _flatten from './_flatten.js';\n\n// Flatten out an array, either recursively (by default), or up to `depth`.\n// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\nexport default function flatten(array, depth) {\n  return _flatten(array, depth, false);\n}\n","import isBoolean from './isBoolean.js';\nimport cb from './_cb.js';\nimport getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// The faster algorithm will not work with an iteratee if the iteratee\n// is not a one-to-one function, so providing an iteratee will disable\n// the faster algorithm.\nexport default function uniq(array, isSorted, iteratee, context) {\n  if (!isBoolean(isSorted)) {\n    context = iteratee;\n    iteratee = isSorted;\n    isSorted = false;\n  }\n  if (iteratee != null) iteratee = cb(iteratee, context);\n  var result = [];\n  var seen = [];\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var value = array[i],\n        computed = iteratee ? iteratee(value, i, array) : value;\n    if (isSorted && !iteratee) {\n      if (!i || seen !== computed) result.push(value);\n      seen = computed;\n    } else if (iteratee) {\n      if (!contains(seen, computed)) {\n        seen.push(computed);\n        result.push(value);\n      }\n    } else if (!contains(result, value)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n","import getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce an array that contains every item shared between all the\n// passed-in arrays.\nexport default function intersection(array) {\n  var result = [];\n  var argsLength = arguments.length;\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var item = array[i];\n    if (contains(result, item)) continue;\n    var j;\n    for (j = 1; j < argsLength; j++) {\n      if (!contains(arguments[j], item)) break;\n    }\n    if (j === argsLength) result.push(item);\n  }\n  return result;\n}\n","import max from './max.js';\nimport getLength from './_getLength.js';\nimport pluck from './pluck.js';\n\n// Complement of zip. Unzip accepts an array of arrays and groups\n// each array's elements on shared indices.\nexport default function unzip(array) {\n  var length = array && max(array, getLength).length || 0;\n  var result = Array(length);\n\n  for (var index = 0; index < length; index++) {\n    result[index] = pluck(array, index);\n  }\n  return result;\n}\n","import getLength  from './_getLength.js';\n\n// Converts lists into objects. Pass either a single array of `[key, value]`\n// pairs, or two parallel arrays of the same length -- one of keys, and one of\n// the corresponding values. Passing by pairs is the reverse of `_.pairs`.\nexport default function object(list, values) {\n  var result = {};\n  for (var i = 0, length = getLength(list); i < length; i++) {\n    if (values) {\n      result[list[i]] = values[i];\n    } else {\n      result[list[i][0]] = list[i][1];\n    }\n  }\n  return result;\n}\n","// Generate an integer Array containing an arithmetic progression. A port of\n// the native Python `range()` function. See\n// [the Python documentation](https://docs.python.org/library/functions.html#range).\nexport default function range(start, stop, step) {\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (!step) {\n    step = stop < start ? -1 : 1;\n  }\n\n  var length = Math.max(Math.ceil((stop - start) / step), 0);\n  var range = Array(length);\n\n  for (var idx = 0; idx < length; idx++, start += step) {\n    range[idx] = start;\n  }\n\n  return range;\n}\n","import { slice } from './_setup.js';\n\n// Chunk a single array into multiple arrays, each containing `count` or fewer\n// items.\nexport default function chunk(array, count) {\n  if (count == null || count < 1) return [];\n  var result = [];\n  var i = 0, length = array.length;\n  while (i < length) {\n    result.push(slice.call(array, i, i += count));\n  }\n  return result;\n}\n","import _ from './underscore.js';\n\n// Helper function to continue chaining intermediate results.\nexport default function chainResult(instance, obj) {\n  return instance._chain ? _(obj).chain() : obj;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport functions from './functions.js';\nimport { push } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add your own custom functions to the Underscore object.\nexport default function mixin(obj) {\n  each(functions(obj), function(name) {\n    var func = _[name] = obj[name];\n    _.prototype[name] = function() {\n      var args = [this._wrapped];\n      push.apply(args, arguments);\n      return chainResult(this, func.apply(_, args));\n    };\n  });\n  return _;\n}\n","'use strict'\n\nimport { escapeRegExp } from 'underscore-plus'\nimport Mixin from 'mixto'\n\nimport * as Main from '../main'\nimport { domStylesReader } from '../main'\nimport CanvasLayer from '../canvas-layer'\n\nconst SPEC_MODE = atom.inSpecMode()\n\n/**\n * The `CanvasDrawer` mixin is responsible for the rendering of a `Minimap`\n * in a `canvas` element.\n *\n * This mixin is injected in the `MinimapElement` prototype, so all these\n * methods  are available on any `MinimapElement` instance.\n */\nexport default class CanvasDrawer extends Mixin {\n  /**\n   * Initializes the canvas elements needed to perform the `Minimap` rendering.\n   */\n  initializeCanvas () {\n    if (SPEC_MODE) {\n      // class methods only used for spying the calls\n      this.drawLines = (firstLine, lastLine) => { console.log({ firstLine, lastLine }) }\n      this.drawLineDecoration = drawLineDecoration\n      this.drawGutterDecoration = drawGutterDecoration\n      this.drawHighlightDecoration = drawHighlightDecoration\n      this.drawHighlightOutlineDecoration = drawHighlightOutlineDecoration\n      this.drawCustomDecoration = drawCustomDecoration\n      this.DOMStylesReader = domStylesReader\n    }\n\n    /**\n    * The main canvas layer where lines are rendered.\n    * @type {CanvasLayer}\n    */\n    this.tokensLayer = new CanvasLayer()\n    /**\n    * The canvas layer for decorations below the text.\n    * @type {CanvasLayer}\n    */\n    this.backLayer = new CanvasLayer()\n    /**\n    * The canvas layer for decorations above the text.\n    * @type {CanvasLayer}\n    */\n    this.frontLayer = new CanvasLayer()\n\n    if (!this.pendingChanges) {\n      /**\n       * Stores the changes from the text editor.\n       * @type {Array<Object>}\n       * @access private\n       */\n      this.pendingChanges = []\n    }\n\n    if (!this.pendingBackDecorationChanges) {\n      /**\n       * Stores the changes from the minimap back decorations.\n       * @type {Array<Object>}\n       * @access private\n       */\n      this.pendingBackDecorationChanges = []\n    }\n\n    if (!this.pendingFrontDecorationChanges) {\n      /**\n       * Stores the changes from the minimap front decorations.\n       * @type {Array<Object>}\n       * @access private\n       */\n      this.pendingFrontDecorationChanges = []\n    }\n\n    // the maximum number of tokens to render in one line\n    this.maxTokensInOneLine = atom.config.get('minimap.maxTokensInOneLine')\n  }\n\n  /**\n   * Returns the uppermost canvas in the MinimapElement.\n   *\n   * @return {HTMLCanvasElement} the html canvas element\n   */\n  getFrontCanvas () { return this.frontLayer.canvas }\n\n  /**\n   * Attaches the canvases into the specified container.\n   *\n   * @param  {HTMLElement} parent the canvases' container\n   * @access private\n   */\n  attachCanvases (parent) {\n    this.backLayer.attach(parent)\n    this.tokensLayer.attach(parent)\n    this.frontLayer.attach(parent)\n  }\n\n  /**\n   * Changes the size of all the canvas layers at once.\n   *\n   * @param {number} width the new width for the three canvases\n   * @param {number} height the new height for the three canvases\n   * @access private\n   */\n  setCanvasesSize (width, height) {\n    this.backLayer.setSize(width, height)\n    this.tokensLayer.setSize(width, height)\n    this.frontLayer.setSize(width, height)\n  }\n\n  /**\n   * Performs an update of the rendered `Minimap` based on the changes\n   * registered in the instance.\n   */\n  updateCanvas () {\n    const firstRow = this.minimap.getFirstVisibleScreenRow()\n    const lastRow = this.minimap.getLastVisibleScreenRow()\n\n    const devicePixelRatio = this.minimap.getDevicePixelRatio()\n    const lineHeight = this.minimap.getLineHeight() * devicePixelRatio\n    const charHeight = this.minimap.getCharHeight() * devicePixelRatio\n    const charWidth = this.minimap.getCharWidth() * devicePixelRatio\n    const { width: canvasWidth, height: canvasHeight } = this.tokensLayer.getSize()\n    const editor = this.minimap.getTextEditor()\n    const editorElement = this.minimap.getTextEditorElement()\n\n    // TODO avoid closure: https://stackoverflow.com/a/46256398/7910299\n    const getTokenColor = this.displayCodeHighlights ? (scopes) => this.getTokenColor(scopes, editorElement) : () => this.getDefaultColor(editorElement)\n\n    updateTokensLayer(this.tokensLayer, firstRow, lastRow, this.offscreenFirstRow, this.offscreenLastRow, this.pendingChanges, lineHeight, charHeight, charWidth, canvasWidth, editor, editor.getScreenLineCount(), getInvisibleRegExp(editor), getTokenColor, this.ignoreWhitespacesInTokens, this.maxTokensInOneLine)\n\n    if (SPEC_MODE) {\n      // call the spy for drawLines which is used inside updateTokensLayer\n      this.drawLines(firstRow, lastRow)\n    }\n\n    const decorations = this.minimap.decorationsByTypeThenRows(firstRow, lastRow)\n\n    const renderData = {\n      context: this.backLayer.context,\n      canvasWidth,\n      canvasHeight,\n      lineHeight,\n      charWidth,\n      charHeight,\n      orders: Main.getPluginsOrder()\n    }\n\n    const drawCustomDecorationLambda = (decoration, data, decorationColor) => drawCustomDecoration(decoration, data, decorationColor, editorElement)\n    backgroundDecorationDispatcher['background-custom'] = drawCustomDecorationLambda\n    frontDecorationDispatcher['foreground-custom'] = drawCustomDecorationLambda\n\n    this.updateBackDecorationsLayer(firstRow, lastRow, renderData, lineHeight, editorElement, decorations)\n\n    renderData.context = this.frontLayer.context\n\n    this.updateFrontDecorationsLayer(firstRow, lastRow, renderData, lineHeight, editorElement, decorations)\n\n    this.pendingChanges = []\n    this.pendingBackDecorationChanges = []\n    this.pendingFrontDecorationChanges = []\n\n    /**\n     * The first row in the last render of the offscreen canvas.\n     * @type {number}\n     * @access private\n     */\n    this.offscreenFirstRow = firstRow\n    /**\n     * The last row in the last render of the offscreen canvas.\n     * @type {number}\n     * @access private\n     */\n    this.offscreenLastRow = lastRow\n  }\n\n  /**\n   * Performs an update of the back decorations layer using the pending back\n   * decorations changes arrays.\n   *\n   * @param  {number} firstRow firstRow the first row of the range to update\n   * @param  {number} lastRow lastRow the last row of the range to update\n   *\n   * @param {Object} renderData\n   * @param {number} lineHeight  this.minimap.getLineHeight() * devicePixelRatio\n   * @param {TextEditorElement} editorElement  this.minimap.getTextEditorElement()\n   * @param {Array<Decoration>} decorations\n   * @access private\n   */\n  updateBackDecorationsLayer (firstRow, lastRow, renderData, lineHeight, editorElement, decorations) {\n    const intactRanges = computeIntactRanges(firstRow, lastRow, this.pendingBackDecorationChanges, this.offscreenFirstRow, this.offscreenLastRow)\n\n    // NOTE: this method is the hot function of Minimap. Do not refactor. The code is inlined delibarately.\n\n    // redrawRangesOnLayer\n\n    this.backLayer.clearCanvas()\n\n    if (intactRanges.length === 0) {\n      this.drawBackDecorationsForLines(firstRow, lastRow, 0, renderData, lineHeight, editorElement, decorations)\n    } else {\n      for (let j = 0, len = intactRanges.length; j < len; j++) {\n        const intact = intactRanges[j]\n\n        this.backLayer.copyPartFromOffscreen(\n          intact.offscreenRow * lineHeight,\n          (intact.start - firstRow) * lineHeight,\n          (intact.end - intact.start) * lineHeight\n        )\n      }\n      // drawLinesForRanges\n      let currentRow = firstRow\n      for (let i = 0, len = intactRanges.length; i < len; i++) {\n        const range = intactRanges[i]\n\n        this.drawBackDecorationsForLines(currentRow, range.start, currentRow - firstRow, renderData, lineHeight, editorElement, decorations)\n\n        currentRow = range.end\n      }\n      if (currentRow <= lastRow) {\n        this.drawBackDecorationsForLines(currentRow, lastRow, currentRow - firstRow, renderData, lineHeight, editorElement, decorations)\n      }\n    }\n\n    this.backLayer.resetOffscreenSize()\n    this.backLayer.copyToOffscreen()\n  }\n\n  /**\n   * Performs an update of the front decorations layer using the pending front\n   * decorations changes arrays.\n   *\n   * @param  {number} firstRow firstRow the first row of the range to update\n   * @param  {number} lastRow lastRow the last row of the range to update\n   *\n   * @param {Object} renderData\n   * @param {number} lineHeight  this.minimap.getLineHeight() * devicePixelRatio\n   * @param {TextEditorElement} editorElement  this.minimap.getTextEditorElement()\n   * @param {Array<Decoration>} decorations\n   * @access private\n   */\n  updateFrontDecorationsLayer (firstRow, lastRow, renderData, lineHeight, editorElement, decorations) {\n    const intactRanges = computeIntactRanges(firstRow, lastRow, this.pendingFrontDecorationChanges, this.offscreenFirstRow, this.offscreenLastRow)\n\n    // NOTE: this method is the hot function of Minimap. Do not refactor. The code is inlined delibarately.\n\n    // redrawRangesOnLayer\n\n    this.frontLayer.clearCanvas()\n\n    if (intactRanges.length === 0) {\n      this.drawFrontDecorationsForLines(firstRow, lastRow, 0, renderData, lineHeight, editorElement, decorations)\n    } else {\n      for (let j = 0, len = intactRanges.length; j < len; j++) {\n        const intact = intactRanges[j]\n\n        this.frontLayer.copyPartFromOffscreen(\n          intact.offscreenRow * lineHeight,\n          (intact.start - firstRow) * lineHeight,\n          (intact.end - intact.start) * lineHeight\n        )\n      }\n      // drawLinesForRanges\n      let currentRow = firstRow\n      for (let i = 0, len = intactRanges.length; i < len; i++) {\n        const range = intactRanges[i]\n\n        this.drawFrontDecorationsForLines(currentRow, range.start, currentRow - firstRow, renderData, lineHeight, editorElement, decorations)\n\n        currentRow = range.end\n      }\n      if (currentRow <= lastRow) {\n        this.drawFrontDecorationsForLines(currentRow, lastRow, currentRow - firstRow, renderData, lineHeight, editorElement, decorations)\n      }\n    }\n\n    this.frontLayer.resetOffscreenSize()\n    this.frontLayer.copyToOffscreen()\n  }\n\n  //     ######   #######  ##        #######  ########   ######\n  //    ##    ## ##     ## ##       ##     ## ##     ## ##    ##\n  //    ##       ##     ## ##       ##     ## ##     ## ##\n  //    ##       ##     ## ##       ##     ## ########   ######\n  //    ##       ##     ## ##       ##     ## ##   ##         ##\n  //    ##    ## ##     ## ##       ##     ## ##    ##  ##    ##\n  //     ######   #######  ########  #######  ##     ##  ######\n\n  /**\n   * Returns the opacity value to use when rendering the `Minimap` text.\n   *\n   * @return {Number} the text opacity value\n   * Unused (inlined)\n   */\n  // getTextOpacity () { return this.textOpacity }\n\n  /**\n   * Returns the default text color for an editor content.\n   *\n   * The color value is directly read from the `TextEditorView` computed styles.\n   * @param {TextEditorElement} editorElement\n   * @return {string} a CSS color\n   */\n  getDefaultColor (editorElement) {\n    const color = domStylesReader.retrieveStyleFromDom(['.editor'], 'color', editorElement, true)\n    return transparentize(color, this.textOpacity)\n  }\n\n  /**\n   * Returns the text color for the passed-in scopes\n   *\n   * The color value is read from the DOM by creating a node structure that\n   * match the token `scope` property.\n   *\n   * @param  {Array<string>} scopes an array of scopes for a `TextEditor` token (token.scopeDescriptor || token.scopes)\n   * @param {TextEditorElement} editorElement\n   * @return {string} the CSS color for the provided token\n   */\n  getTokenColor (scopes, editorElement) {\n    const color = domStylesReader.retrieveStyleFromDom(scopes, 'color', editorElement, true)\n\n    return transparentize(color, this.textOpacity)\n  }\n\n  /**\n   * Returns the background color for the passed-in `decoration` object.\n   *\n   * The color value is read from the DOM by creating a node structure that\n   * match the decoration `scope` property unless the decoration provides\n   * its own `color` property.\n   *\n   * @param  {Decoration} decoration the decoration to get the color for\n   * @param {TextEditorElement} editorElement\n   * @return {string} the CSS color for the provided decoration\n   */\n  getDecorationColor (decoration, editorElement) {\n    const properties = decoration.getProperties()\n    if (properties.color) { return properties.color }\n\n    if (properties.scope) {\n      const scopeString = properties.scope.split(oneOrMoreWhiteSpaceRegexp)\n      return domStylesReader.retrieveStyleFromDom(scopeString, 'background-color', editorElement, true)\n    } else {\n      return this.getDefaultColor(editorElement)\n    }\n  }\n\n  //    ########  ########     ###    ##      ##\n  //    ##     ## ##     ##   ## ##   ##  ##  ##\n  //    ##     ## ##     ##  ##   ##  ##  ##  ##\n  //    ##     ## ########  ##     ## ##  ##  ##\n  //    ##     ## ##   ##   ######### ##  ##  ##\n  //    ##     ## ##    ##  ##     ## ##  ##  ##\n  //    ########  ##     ## ##     ##  ###  ###\n\n  /**\n   * Routine used to render changes in specific ranges for one layer.\n   *\n   * @param  {CanvasLayer} layer the layer to redraw\n   * @param  {Array<Object>} intactRanges an array of the ranges to leave intact\n   * @param  {number} firstRow firstRow the first row of the range to update\n   * @param  {number} lastRow lastRow the last row of the range to update\n   * @param  {Function} method the render method to use for the lines drawing\n   * @access private\n   * Unused (inlined the code for performance reasons)\n   */\n  // redrawRangesOnLayer (layer, intactRanges, firstRow, lastRow, method) {\n  //   const devicePixelRatio = this.minimap.getDevicePixelRatio()\n  //   const lineHeight = this.minimap.getLineHeight() * devicePixelRatio\n  //\n  //   layer.clearCanvas()\n  //\n  //   if (intactRanges.length === 0) {\n  //     method.call(this, firstRow, lastRow, 0)\n  //   } else {\n  //     for (let j = 0, len = intactRanges.length; j < len; j++) {\n  //       const intact = intactRanges[j]\n  //\n  //       layer.copyPartFromOffscreen(\n  //         intact.offscreenRow * lineHeight,\n  //         (intact.start - firstRow) * lineHeight,\n  //         (intact.end - intact.start) * lineHeight\n  //       )\n  //     }\n  //     drawLinesForRanges(method, intactRanges, firstRow, lastRow)\n  //   }\n  //\n  //   layer.resetOffscreenSize()\n  //   layer.copyToOffscreen()\n  // }\n\n  /**\n   * Renders the lines between the intact ranges when an update has pending\n   * changes.\n   *\n   * @param  {Function} method the render method to use for the lines drawing\n   * @param  {Array<Object>} intactRanges the intact ranges in the minimap\n   * @param  {number} firstRow the first row of the rendered region\n   * @param  {number} lastRow the last row of the rendered region\n   * @access private\n   * Unused (inlined the code for performance reasons)\n   */\n  // drawLinesForRanges (method, ranges, firstRow, lastRow) {\n  //   let currentRow = firstRow\n  //   for (let i = 0, len = ranges.length; i < len; i++) {\n  //     const range = ranges[i]\n  //\n  //     method.call(this, currentRow, range.start, currentRow - firstRow)\n  //\n  //     currentRow = range.end\n  //   }\n  //   if (currentRow <= lastRow) {\n  //     method.call(this, currentRow, lastRow, currentRow - firstRow)\n  //   }\n  // }\n\n  /**\n   * Draws back decorations on the corresponding layer.\n   *\n   * The lines range to draw is specified by the `firstRow` and `lastRow`\n   * parameters.\n   *\n   * @param  {number} firstRow the first row to render\n   * @param  {number} lastRow the last row to render\n   * @param  {number} offsetRow the relative offset to apply to rows when\n   *                            rendering them\n   *\n   * @param {Object} renderData\n   * @param {number} lineHeight  this.minimap.getLineHeight() * devicePixelRatio\n   * @param {TextEditorElement} editorElement  this.minimap.getTextEditorElement()\n   * @param {Array<Decoration>} decorations\n   * @access private\n   */\n  drawBackDecorationsForLines (firstRow, lastRow, offsetRow, renderData, lineHeight, editorElement, decorations) {\n    if (firstRow > lastRow) { return }\n\n    for (let screenRow = firstRow; screenRow <= lastRow; screenRow++) {\n      renderData.row = offsetRow + (screenRow - firstRow)\n      renderData.yRow = renderData.row * lineHeight\n      renderData.screenRow = screenRow\n\n      this.drawDecorations(screenRow, decorations, renderData, backgroundDecorationDispatcher, editorElement)\n    }\n\n    renderData.context.fill()\n  }\n\n  /**\n   * Draws front decorations on the corresponding layer.\n   *\n   * The lines range to draw is specified by the `firstRow` and `lastRow`\n   * parameters.\n   *\n   * @param  {number} firstRow the first row to render\n   * @param  {number} lastRow the last row to render\n   * @param  {number} offsetRow the relative offset to apply to rows when\n   *                            rendering them\n   *\n   * @param {Object} renderData\n   * @param {number} lineHeight  this.minimap.getLineHeight() * devicePixelRatio\n   * @param {TextEditorElement} editorElement  this.minimap.getTextEditorElement()\n   * @param {Array<Decoration>} decorations\n   * @access private\n   */\n  drawFrontDecorationsForLines (firstRow, lastRow, offsetRow, renderData, lineHeight, editorElement, decorations) {\n    if (firstRow > lastRow) { return }\n\n    for (let screenRow = firstRow; screenRow <= lastRow; screenRow++) {\n      renderData.row = offsetRow + (screenRow - firstRow)\n      renderData.yRow = renderData.row * lineHeight\n      renderData.screenRow = screenRow\n\n      this.drawDecorations(screenRow, decorations, renderData, frontDecorationDispatcher, editorElement)\n    }\n\n    renderData.context.fill()\n  }\n\n  /**\n   * Draws the specified decorations for the current `screenRow`.\n   *\n   * The `decorations` object contains all the decorations grouped by type and\n   * then rows.\n   *\n   * @param  {number} screenRow the screen row index for which\n   *                            render decorations\n   * @param  {Object} decorations the object containing all the decorations\n   * @param  {Object} renderData the object containing the render data\n   * @param  {Object} types an object with the type to render as key and the\n   *                        render method as value\n   * @param {TextEditorElement} editorElement\n   * @access private\n   */\n  drawDecorations (screenRow, decorations, renderData, types, editorElement) {\n    let decorationsToRender = []\n\n    renderData.context.clearRect(\n      0, renderData.yRow,\n      renderData.canvasWidth, renderData.lineHeight\n    )\n\n    for (const i in types) {\n      decorationsToRender = decorationsToRender.concat(\n        decorations[i] != null ? decorations[i][screenRow] || [] : []\n      )\n    }\n\n    decorationsToRender.sort((a, b) =>\n      (renderData.orders[a.properties.plugin] || 0) - (renderData.orders[b.properties.plugin] || 0)\n    )\n\n    if (decorationsToRender != null ? decorationsToRender.length : undefined) {\n      for (let i = 0, len = decorationsToRender.length; i < len; i++) {\n        const decoration = decorationsToRender[i]\n        const decorationDrawer = types[decoration.properties.type]\n        if (!SPEC_MODE) {\n          decorationDrawer(\n            decoration,\n            renderData,\n            /* decorationColor */ this.getDecorationColor(decoration, editorElement)\n          )\n        } else {\n          // get the real function name from the mangeld Parcel names\n          const functionName = decorationDrawer.name.split('$').pop().replace('Lambda', '')\n          // call the spy:\n          this[functionName](\n            decoration,\n            renderData,\n            /* decorationColor */ this.getDecorationColor(decoration, editorElement)\n          )\n        }\n      }\n    }\n  }\n}\n\n//    ########  ########     ###    ##      ##\n//    ##     ## ##     ##   ## ##   ##  ##  ##\n//    ##     ## ##     ##  ##   ##  ##  ##  ##\n//    ##     ## ########  ##     ## ##  ##  ##\n//    ##     ## ##   ##   ######### ##  ##  ##\n//    ##     ## ##    ##  ##     ## ##  ##  ##\n//    ########  ##     ## ##     ##  ###  ###\n\n/**\n * Performs an update of the tokens layer using the pending changes array.\n *\n * @param {CanvasLayer} tokensLayer\n * @param  {number} firstRow firstRow the first row of the range to update\n * @param  {number} lastRow lastRow the last row of the range to update\n * @param {number} offscreenFirstRow\n * @param {number} offscreenLastRow\n * @param {Array<>} pendingChanges\n * @param {number} lineHeight  this.minimap.getLineHeight() * devicePixelRatio\n * @param {number} charHeight  this.minimap.getCharHeight() * devicePixelRatio\n * @param {number} charWidth  this.minimap.getCharWidth() * devicePixelRatio\n * @param {number} canvasWidth  this.tokensLayer.getSize().width\n * @param {TextEditor} editor this.minimap.getTextEditor()\n * @param {(t: Token) => string} getTokenColor\n * @param {boolean} ignoreWhitespacesInTokens this.ignoreWhitespacesInTokens\n * @param {number} maxTokensInOneLine this.maxTokensInOneLine\n * @access private\n */\nfunction updateTokensLayer (tokensLayer, firstRow, lastRow, offscreenFirstRow, offscreenLastRow, pendingChanges, lineHeight, charHeight, charWidth, canvasWidth, editor, editorScreenLineCount, invisibleRegExp, getTokenColor, ignoreWhitespacesInTokens, maxTokensInOneLine) {\n  // NOTE: this method is the hot function of Minimap. Do not refactor. The code is inlined delibarately.\n\n  const intactRanges = computeIntactRanges(firstRow, lastRow, pendingChanges, offscreenFirstRow, offscreenLastRow)\n\n  // redrawRangesOnLayer\n  const context = tokensLayer.context\n\n  tokensLayer.clearCanvas()\n\n  if (intactRanges.length === 0) {\n    drawLines(firstRow, lastRow, 0, lineHeight, charHeight, charWidth, canvasWidth, context, editor, editorScreenLineCount, invisibleRegExp, getTokenColor, ignoreWhitespacesInTokens, maxTokensInOneLine)\n  } else {\n    for (let j = 0, len = intactRanges.length; j < len; j++) {\n      const intact = intactRanges[j]\n\n      tokensLayer.copyPartFromOffscreen(\n        intact.offscreenRow * lineHeight,\n        (intact.start - firstRow) * lineHeight,\n        (intact.end - intact.start) * lineHeight\n      )\n    }\n    // drawLinesForRanges\n    let currentRow = firstRow\n    for (let i = 0, len = intactRanges.length; i < len; i++) {\n      const range = intactRanges[i]\n\n      drawLines(currentRow, range.start, currentRow - firstRow, lineHeight, charHeight, charWidth, canvasWidth, context, editor, editorScreenLineCount, invisibleRegExp, getTokenColor, ignoreWhitespacesInTokens, maxTokensInOneLine)\n\n      currentRow = range.end\n    }\n    if (currentRow <= lastRow) {\n      drawLines(currentRow, lastRow, currentRow - firstRow, lineHeight, charHeight, charWidth, canvasWidth, context, editor, editorScreenLineCount, invisibleRegExp, getTokenColor, ignoreWhitespacesInTokens, maxTokensInOneLine)\n    }\n  }\n\n  tokensLayer.resetOffscreenSize()\n  tokensLayer.copyToOffscreen()\n}\n\nconst whitespaceTokenRegex = /^\\s+$/\nconst oneOrMoreWhiteSpaceRegexp = /\\s+/\n\n/**\n * Draws a single token on the given context.\n *\n * @param  {CanvasRenderingContext2D} context the target canvas context\n * @param  {string} text the token's text content\n * @param  {string} color the token's CSS color\n * @param  {number} x the x position of the token in the line\n * @param  {number} y the y position of the line in the minimap\n * @param  {number} charWidth the width of a character in the minimap\n * @param  {number} charHeight the height of a character in the minimap\n * @return {number} the x position at the end of the token\n * @return {boolean} the x position at the end of the token\n * @access private\n */\nfunction drawToken (context, text, color, x, y, charWidth, charHeight, ignoreWhitespacesInTokens) {\n  context.fillStyle = color\n\n  if (ignoreWhitespacesInTokens) {\n    const length = text.length * charWidth\n    context.fillRect(x, y, length, charHeight)\n\n    return x + length\n  } else {\n    let chars = 0\n    for (let j = 0, len = text.length; j < len; j++) {\n      const char = text[j]\n      if (char === ' ') {\n        if (chars > 0) {\n          context.fillRect(x - (chars * charWidth), y, chars * charWidth, charHeight)\n        }\n        chars = 0\n      } else {\n        chars++\n      }\n      x += charWidth\n    }\n    if (chars > 0) {\n      context.fillRect(x - (chars * charWidth), y, chars * charWidth, charHeight)\n    }\n    return x\n  }\n}\n\n/**\n * Draws lines on the corresponding layer.\n *\n * The lines range to draw is specified by the `firstRow` and `lastRow`\n * parameters.\n *\n * @param  {number} firstRow the first row to render\n * @param  {number} lastRow the last row to render\n * @param  {number} offsetRow the relative offset to apply to rows when\n *                            rendering them\n * @param {number} lineHeight  this.minimap.getLineHeight() * devicePixelRatio\n * @param {number} charHeight  this.minimap.getCharHeight() * devicePixelRatio\n * @param {number} charWidth  this.minimap.getCharWidth() * devicePixelRatio\n * @param {number} canvasWidth  this.tokensLayer.getSize().width\n * @param {CanvasRenderingContext2D} context this.tokensLayer.context\n * @param {TextEditor} editor this.minimap.getTextEditor()\n * @param {number} editorScreenLineCount\n * @param {RegExp} invisibleRegExp\n * @param {(t: Token) => string} getTokenColor\n * @param {boolean} ignoreWhitespacesInTokens this.ignoreWhitespacesInTokens\n * @param {number} maxTokensInOneLine this.maxTokensInOneLine\n * @access private\n */\nfunction drawLines (firstRow, lastRow, offsetRow, lineHeight, charHeight, charWidth, canvasWidth, context, editor, editorScreenLineCount, invisibleRegExp, getTokenColor, ignoreWhitespacesInTokens, maxTokensInOneLine) {\n  // NOTE: this method is the hot function of Minimap. Do not refactor. The code is inlined delibarately.\n\n  if (firstRow > lastRow) { return }\n\n  let lastLine, x\n  let y = (offsetRow * lineHeight) - lineHeight\n\n  // eachTokenForScreenRows\n  lastRow = Math.min(lastRow, editorScreenLineCount)\n\n  for (let line = firstRow; line < lastRow; line++) {\n    const editorTokensForScreenRow = editor.tokensForScreenRow(line)\n    const numToken = editorTokensForScreenRow.length\n    const numTokenToRender = Math.min(numToken, maxTokensInOneLine)\n    for (let iToken = 0; iToken < numTokenToRender; iToken++) {\n      const token = editorTokensForScreenRow[iToken]\n      const tokenText = token.text.replace(invisibleRegExp, ' ')\n      const tokenScopes = token.scopes\n\n      if (lastLine !== line) {\n        x = 0\n        y += lineHeight\n        lastLine = line\n        context.clearRect(x, y, canvasWidth, lineHeight)\n      }\n      if (x > canvasWidth) { continue }\n\n      if (whitespaceTokenRegex.test(tokenText)) {\n        x += tokenText.length * charWidth\n      } else {\n        x = drawToken(\n          context, tokenText, getTokenColor(tokenScopes), x, y, charWidth, charHeight, ignoreWhitespacesInTokens\n        )\n      }\n    }\n  }\n\n  context.fill()\n}\n\n/**\n * Returns the regexp to replace invisibles substitution characters\n * in editor lines.\n * @param {TextEditor} editor\n * @return {RegExp} the regular expression to match invisible characters\n * @access private\n */\nfunction getInvisibleRegExp (editor) {\n  const invisibles = editor.getInvisibles()\n  const regexp = []\n  if (invisibles.cr != null) { regexp.push(invisibles.cr) }\n  if (invisibles.eol != null) { regexp.push(invisibles.eol) }\n  if (invisibles.space != null) { regexp.push(invisibles.space) }\n  if (invisibles.tab != null) { regexp.push(invisibles.tab) }\n\n  if (regexp.length !== 0) {\n    return RegExp(regexp.filter((s) => {\n      return typeof s === 'string'\n    }).map(escapeRegExp).join('|'), 'g')\n  } else {\n    return null\n  }\n}\n\n/**\n * dispatchers for decoration drawing (custom decoration drawer added dynamically)\n * @param {Object} backgroundDecorationDispatcher an object with the type to render as key and the\n *                        render method as value\n*/\nconst backgroundDecorationDispatcher = {\n  line: drawLineDecoration,\n  'highlight-under': drawHighlightDecoration\n}\n\n/**\n * dispatchers for decoration drawing (custom decoration drawer added dynamically)\n * @param {Object} frontDecorationDispatcher an object with the type to render as key and the\n *                        render method as value\n*/\nconst frontDecorationDispatcher = {\n  gutter: drawGutterDecoration,\n  'highlight-over': drawHighlightDecoration,\n  'highlight-outline': drawHighlightOutlineDecoration\n}\n\n/**\n * Draws a line decoration.\n *\n * @param  {Decoration} decoration the decoration to render\n * @param  {Object} data the data need to perform the render\n * @param {string} decorationColor decoration color\n * @access private\n */\nfunction drawLineDecoration (decoration, data, decorationColor) {\n  data.context.fillStyle = decorationColor\n  data.context.fillRect(0, data.yRow, data.canvasWidth, data.lineHeight)\n}\n\n/**\n * Draws a gutter decoration.\n *\n * @param  {Decoration} decoration the decoration to render\n * @param  {Object} data the data need to perform the render\n * @param {string} decorationColor decoration color\n * @access private\n */\nfunction drawGutterDecoration (decoration, data, decorationColor) {\n  data.context.fillStyle = decorationColor\n  data.context.fillRect(0, data.yRow, 1, data.lineHeight)\n}\n\n/**\n * Draws a highlight decoration.\n *\n * It renders only the part of the highlight corresponding to the specified\n * row.\n *\n * @param  {Decoration} decoration the decoration to render\n * @param  {Object} data the data need to perform the render\n * @param {string} decorationColor decoration color\n * @access private\n */\nfunction drawHighlightDecoration (decoration, data, decorationColor) {\n  const range = decoration.getMarker().getScreenRange()\n  const rowSpan = range.end.row - range.start.row\n\n  data.context.fillStyle = decorationColor\n\n  if (rowSpan === 0) {\n    const colSpan = range.end.column - range.start.column\n    data.context.fillRect(range.start.column * data.charWidth, data.yRow, colSpan * data.charWidth, data.lineHeight)\n  } else if (data.screenRow === range.start.row) {\n    const x = range.start.column * data.charWidth\n    data.context.fillRect(x, data.yRow, data.canvasWidth - x, data.lineHeight)\n  } else if (data.screenRow === range.end.row) {\n    data.context.fillRect(0, data.yRow, range.end.column * data.charWidth, data.lineHeight)\n  } else {\n    data.context.fillRect(0, data.yRow, data.canvasWidth, data.lineHeight)\n  }\n}\n\n/**\n * Draws a highlight outline decoration.\n *\n * It renders only the part of the highlight corresponding to the specified\n * row.\n *\n * @param  {Decoration} decoration the decoration to render\n * @param  {Object} data the data need to perform the render\n * @param {string} decorationColor decoration color\n * @access private\n */\nfunction drawHighlightOutlineDecoration (decoration, data, decorationColor) {\n  let bottomWidth, colSpan, width, xBottomStart, xEnd, xStart\n  const { lineHeight, charWidth, canvasWidth, screenRow } = data\n  const range = decoration.getMarker().getScreenRange()\n  const rowSpan = range.end.row - range.start.row\n  const yStart = data.yRow\n  const yEnd = yStart + lineHeight\n\n  data.context.fillStyle = decorationColor\n\n  if (rowSpan === 0) {\n    colSpan = range.end.column - range.start.column\n    width = colSpan * charWidth\n    xStart = range.start.column * charWidth\n    xEnd = xStart + width\n\n    data.context.fillRect(xStart, yStart, width, 1)\n    data.context.fillRect(xStart, yEnd - 1, width, 1)\n    data.context.fillRect(xStart, yStart, 1, lineHeight)\n    data.context.fillRect(xEnd, yStart, 1, lineHeight)\n  } else if (rowSpan === 1) {\n    xStart = range.start.column * data.charWidth\n    xEnd = range.end.column * data.charWidth\n\n    if (screenRow === range.start.row) {\n      width = data.canvasWidth - xStart\n      xBottomStart = Math.max(xStart, xEnd)\n      bottomWidth = data.canvasWidth - xBottomStart\n\n      data.context.fillRect(xStart, yStart, width, 1)\n      data.context.fillRect(xBottomStart, yEnd - 1, bottomWidth, 1)\n      data.context.fillRect(xStart, yStart, 1, lineHeight)\n      data.context.fillRect(canvasWidth - 1, yStart, 1, lineHeight)\n    } else {\n      width = canvasWidth - xStart\n      bottomWidth = canvasWidth - xEnd\n\n      data.context.fillRect(0, yStart, xStart, 1)\n      data.context.fillRect(0, yEnd - 1, xEnd, 1)\n      data.context.fillRect(0, yStart, 1, lineHeight)\n      data.context.fillRect(xEnd, yStart, 1, lineHeight)\n    }\n  } else {\n    xStart = range.start.column * charWidth\n    xEnd = range.end.column * charWidth\n    if (screenRow === range.start.row) {\n      width = canvasWidth - xStart\n\n      data.context.fillRect(xStart, yStart, width, 1)\n      data.context.fillRect(xStart, yStart, 1, lineHeight)\n      data.context.fillRect(canvasWidth - 1, yStart, 1, lineHeight)\n    } else if (screenRow === range.end.row) {\n      width = canvasWidth - xStart\n\n      data.context.fillRect(0, yEnd - 1, xEnd, 1)\n      data.context.fillRect(0, yStart, 1, lineHeight)\n      data.context.fillRect(xEnd, yStart, 1, lineHeight)\n    } else {\n      data.context.fillRect(0, yStart, 1, lineHeight)\n      data.context.fillRect(canvasWidth - 1, yStart, 1, lineHeight)\n      if (screenRow === range.start.row + 1) {\n        data.context.fillRect(0, yStart, xStart, 1)\n      }\n      if (screenRow === range.end.row - 1) {\n        data.context.fillRect(xEnd, yEnd - 1, canvasWidth - xEnd, 1)\n      }\n    }\n  }\n}\n\n/**\n * Draws a custom decoration.\n *\n * It renders only the part of the highlight corresponding to the specified\n * row.\n *\n * @param  {Decoration} decoration the decoration to render\n * @param  {Object} data the data need to perform the render\n * @param {string} decorationColor decoration color\n * @param {TextEditorElement} editorElement\n * @access private\n */\nfunction drawCustomDecoration (decoration, data, decorationColor, editorElement) {\n  const renderRoutine = decoration.getProperties().render\n\n  if (renderRoutine) {\n    data.color = decorationColor\n    renderRoutine(decoration, data, editorElement)\n  }\n}\n\n//     ######   #######  ##        #######  ########   ######\n//    ##    ## ##     ## ##       ##     ## ##     ## ##    ##\n//    ##       ##     ## ##       ##     ## ##     ## ##\n//    ##       ##     ## ##       ##     ## ########   ######\n//    ##       ##     ## ##       ##     ## ##   ##         ##\n//    ##    ## ##     ## ##       ##     ## ##    ##  ##    ##\n//     ######   #######  ########  #######  ##     ##  ######\n\n/**\n * Converts a `rgb(...)` color into a `rgba(...)` color with the specified\n * opacity.\n *\n * @param  {string} color the CSS RGB color to transparentize\n * @param  {number} opacity the opacity amount\n * @return {string} the transparentized CSS color\n * @access private\n */\nfunction transparentize (color, opacity) {\n  // assumes that color is in form of `rgb(content)` with no spaces around the given value\n  return `rgba(${color.slice(4, -1)}, ${opacity})`\n}\n\n//    ########     ###    ##    ##  ######   ########  ######\n//    ##     ##   ## ##   ###   ## ##    ##  ##       ##    ##\n//    ##     ##  ##   ##  ####  ## ##        ##       ##\n//    ########  ##     ## ## ## ## ##   #### ######    ######\n//    ##   ##   ######### ##  #### ##    ##  ##             ##\n//    ##    ##  ##     ## ##   ### ##    ##  ##       ##    ##\n//    ##     ## ##     ## ##    ##  ######   ########  ######\n\n/**\n * Computes the ranges that are not affected by the current pending changes.\n *\n * @param  {number} firstRow the first row of the rendered region\n * @param  {number} lastRow the last row of the rendered region\n * @param  {number | null} offscreenFirstRow CanvasDrawer.offscreenLastRow\n * @param  {number | null} offscreenLastRow CanvasDrawer.offscreenLastRow\n * @return {Array<Object>} the intact ranges in the rendered region\n * @access private\n */\nfunction computeIntactRanges (firstRow, lastRow, changes, offscreenFirstRow, offscreenLastRow) {\n  // TODO when do they get null?\n  if ((offscreenFirstRow == null) && (offscreenLastRow == null)) {\n    return []\n  }\n\n  // At first, the whole range is considered intact\n  let intactRanges = [\n    {\n      start: offscreenFirstRow,\n      end: offscreenLastRow,\n      offscreenRow: 0\n    }\n  ]\n\n  for (let i = 0, len = changes.length; i < len; i++) {\n    const change = changes[i]\n    const newIntactRanges = []\n\n    for (let j = 0, intactLen = intactRanges.length; j < intactLen; j++) {\n      const range = intactRanges[j]\n\n      if (change.end < range.start && change.screenDelta !== 0) {\n        // The change is above of the range and lines are either\n        // added or removed\n        newIntactRanges.push({\n          start: range.start + change.screenDelta,\n          end: range.end + change.screenDelta,\n          offscreenRow: range.offscreenRow\n        })\n      } else if (change.end < range.start || change.start > range.end) {\n        // The change is outside the range but didn't add\n        // or remove lines\n        newIntactRanges.push(range)\n      } else {\n        // The change is within the range, there's one intact range\n        // from the range start to the change start\n        if (change.start > range.start) {\n          newIntactRanges.push({\n            start: range.start,\n            end: change.start - 1,\n            offscreenRow: range.offscreenRow\n          })\n        }\n        if (change.end < range.end) {\n          // The change ends within the range\n          if (change.bufferDelta !== 0) {\n            // Lines are added or removed, the intact range starts in the\n            // next line after the change end plus the screen delta\n            newIntactRanges.push({\n              start: change.end + change.screenDelta + 1,\n              end: range.end + change.screenDelta,\n              offscreenRow: range.offscreenRow + change.end + 1 - range.start\n            })\n          } else if (change.screenDelta !== 0) {\n            // Lines are added or removed in the display buffer, the intact\n            // range starts in the next line after the change end plus the\n            // screen delta\n            newIntactRanges.push({\n              start: change.end + change.screenDelta + 1,\n              end: range.end + change.screenDelta,\n              offscreenRow: range.offscreenRow + change.end + 1 - range.start\n            })\n          } else {\n            // No lines are added, the intact range starts on the line after\n            // the change end\n            newIntactRanges.push({\n              start: change.end + 1,\n              end: range.end,\n              offscreenRow: range.offscreenRow + change.end + 1 - range.start\n            })\n          }\n        }\n      }\n    }\n    intactRanges = newIntactRanges\n  }\n\n  return truncateIntactRanges(intactRanges, firstRow, lastRow)\n}\n\n/**\n * Truncates the intact ranges so that they doesn't expand past the visible\n * area of the minimap.\n *\n * @param  {Array<Object>} intactRanges the initial array of ranges\n * @param  {number} firstRow the first row of the rendered region\n * @param  {number} lastRow the last row of the rendered region\n * @return {Array<Object>} the array of truncated ranges\n * @access private\n */\nfunction truncateIntactRanges (intactRanges, firstRow, lastRow) {\n  let i = 0\n  while (i < intactRanges.length) {\n    const range = intactRanges[i]\n\n    if (range.start < firstRow) {\n      range.offscreenRow += firstRow - range.start\n      range.start = firstRow\n    }\n\n    if (range.end > lastRow) { range.end = lastRow }\n\n    if (range.start >= range.end) { intactRanges.splice(i--, 1) }\n\n    i++\n  }\n\n  return intactRanges.sort((a, b) => {\n    return a.offscreenRow - b.offscreenRow\n  })\n}\n","'use strict'\n\n/**\n * Generates a decorator function to includes many `mixto` mixins into a class.\n *\n * @param  {...Mixin} mixins the mixins to include in the class\n * @return {function(cls:Function):Function} the decorator function that will\n *                                           include the specified mixins\n * @example\n * @include(SomeMixin)\n * export default class SomeClass {\n *   // ...\n * }\n */\nexport default function include (cls, ...mixins) {\n  mixins.forEach((mixin) => { includeMixin(cls, mixin) })\n}\n\nfunction includeMixin (target, source) {\n  Object.getOwnPropertyNames(source).forEach((k) => {\n    if (['length', 'name', 'arguments', 'caller', 'prototype', 'includeInto'].indexOf(k) >= 0) { return }\n\n    const descriptor = Object.getOwnPropertyDescriptor(source, k)\n    Object.defineProperty(target, k, descriptor)\n  })\n\n  Object.getOwnPropertyNames(source.prototype).forEach((k) => {\n    if (k === 'constructor') { return }\n\n    const descriptor = Object.getOwnPropertyDescriptor(source.prototype, k)\n    Object.defineProperty(target.prototype, k, descriptor)\n  })\n}\n","'use strict'\n\nimport { registerOrUpdateElement } from 'atom-utils-plus'\n\n/**\n * Generates a decorator function to convert a class into a custom element\n * through the `registerOrUpdateElement` method from `atom-utils-plus`.\n *\n * The decorator will take care to return the generated element class so that\n * you can just export it directly as demonstrated below.\n *\n * As supported by the `registerOrUpdateElement` method, static member will\n * be available on the new class.\n *\n * **Note: As there's some limitations when modifying the prototype\n * of a custom element, if you need to inject element callbacks (like\n * `createdCallback`) through a mixin, the mixins should be included before\n * converting the class as a custom element. You'll be able to achieve that by\n * placing the `include` decorator after the `element` one as shown in the\n * second example.**\n *\n * @param  {string} elementName the node name of the element to register\n * @return {Function} the element class as returned by\n *                    `document.registerElement`\n * @example\n * @element('dummy-element-name')\n * export default class SomeClass {\n *   // ...\n * }\n *\n * @element('dummy-element-with-mixin')\n * @include(SomeMixin)\n * export default class SomeClass {\n *   // ...\n * }\n */\nexport default function element (cls, elementName) {\n  return registerOrUpdateElement(elementName, { class: cls })\n}\n","'use strict'\n\nimport { CompositeDisposable, Disposable } from 'atom'\nimport { EventsDelegation, AncestorsMethods } from 'atom-utils-plus'\nimport elementResizeDetectorImport from 'element-resize-detector'\n\nimport * as Main from './main'\nimport CanvasDrawer from './mixins/canvas-drawer'\nimport include from './decorators/include'\nimport element from './decorators/element'\n\nimport MinimapQuickSettingsElement from './minimap-quick-settings-element'\nconst elementResizeDetector = elementResizeDetectorImport({ strategy: 'scroll' })\n\nlet overlayStyle\n\nfunction ensureOverlayStyle () {\n  if (!overlayStyle) {\n    overlayStyle = document.createElement('style')\n    overlayStyle.setAttribute('context', 'atom-text-editor-minimap')\n    document.head.appendChild(overlayStyle)\n  }\n}\n\nfunction removeOverlayStyle () {\n  if (overlayStyle) {\n    overlayStyle.parentNode.removeChild(overlayStyle)\n    overlayStyle = null\n  }\n}\n\nfunction updateOverlayStyle (basis) {\n  if (overlayStyle) {\n    overlayStyle.textContent = `\n    atom-text-editor[with-minimap].editor > div,\n    atom-text-editor[with-minimap] > div {\n      margin-left: ${basis}px;\n    }\n    `\n  }\n}\n\nconst SPEC_MODE = atom.inSpecMode()\n\n/**\n * Public: The MinimapElement is the view meant to render a {@link Minimap}\n * instance in the DOM.\n *\n * You can retrieve the MinimapElement associated to a Minimap\n * using the `atom.views.getView` method.\n *\n * Note that most interactions with the Minimap package is done through the\n * Minimap model so you should never have to access MinimapElement\n * instances.\n *\n * @example\n * let minimapElement = atom.views.getView(minimap)\n */\nclass MinimapElement {\n  static initClass () {\n    include(this, CanvasDrawer, EventsDelegation, AncestorsMethods)\n    return element(this, 'atom-text-editor-minimap')\n  }\n\n  //    ##     ##  #######   #######  ##    ##  ######\n  //    ##     ## ##     ## ##     ## ##   ##  ##    ##\n  //    ##     ## ##     ## ##     ## ##  ##   ##\n  //    ######### ##     ## ##     ## #####     ######\n  //    ##     ## ##     ## ##     ## ##  ##         ##\n  //    ##     ## ##     ## ##     ## ##   ##  ##    ##\n  //    ##     ##  #######   #######  ##    ##  ######\n\n  /**\n   * DOM callback invoked when a new MinimapElement is created.\n   *\n   * @access private\n   */\n  createdCallback () {\n    // Core properties\n\n    /**\n     * @access private\n     */\n    this.minimap = undefined\n\n    /**\n     * @access private\n     */\n    this.width = undefined\n    /**\n     * @access private\n     */\n    this.height = undefined\n\n    // Subscriptions\n\n    /**\n     * @access private\n     */\n    this.subscriptions = new CompositeDisposable()\n    /**\n     * @access private\n     */\n    this.visibleAreaSubscription = undefined\n    /**\n     * @access private\n     */\n    this.quickSettingsSubscription = undefined\n    /**\n     * @access private\n     */\n    this.dragSubscription = undefined\n    /**\n     * @access private\n     */\n    this.openQuickSettingSubscription = undefined\n\n    // Configs\n\n    /**\n    * @access private\n    */\n    this.displayMinimapOnLeft = false\n    /**\n    * @access private\n    */\n    this.minimapScrollIndicator = undefined\n    /**\n    * @access private\n    */\n    this.displayMinimapOnLeft = undefined\n    /**\n    * @access private\n    */\n    this.displayPluginsControls = undefined\n    /**\n    * @access private\n    */\n    this.textOpacity = undefined\n    /**\n    * @access private\n    */\n    this.displayCodeHighlights = undefined\n    /**\n    * @access private\n    */\n    this.adjustToSoftWrap = undefined\n    /**\n    * @access private\n    */\n    this.useHardwareAcceleration = undefined\n    /**\n    * @access private\n    */\n    this.absoluteMode = undefined\n\n    // Elements\n\n    /**\n     * @access private\n     */\n    this.visibleArea = undefined\n    /**\n     * @access private\n     */\n    this.controls = undefined\n    /**\n     * @access private\n     */\n    this.scrollIndicator = undefined\n    /**\n     * @access private\n     */\n    this.openQuickSettings = undefined\n    /**\n     * @access private\n     */\n    this.quickSettingsElement = undefined\n\n    // States\n\n    /**\n    * @access private\n    */\n    this.attached = undefined\n    /**\n    * @access private\n    */\n    this.attachedToTextEditor = undefined\n    /**\n    * @access private\n    */\n    this.standAlone = undefined\n    /**\n     * @access private\n     */\n    this.wasVisible = undefined\n\n    // Other\n\n    /**\n     * @access private\n     */\n    this.offscreenFirstRow = undefined\n    /**\n     * @access private\n     */\n    this.offscreenLastRow = undefined\n    /**\n     * @access private\n     */\n    this.frameRequested = undefined\n    /**\n     * @access private\n     */\n    this.flexBasis = undefined\n\n    this.initializeContent()\n\n    this.subscriptions.add(\n      atom.config.observe('minimap.displayMinimapOnLeft', (displayMinimapOnLeft) => {\n        this.displayMinimapOnLeft = displayMinimapOnLeft\n\n        displayMinimapOnLeft\n          ? ensureOverlayStyle()\n          : removeOverlayStyle()\n        this.updateMinimapFlexPosition()\n        this.measureHeightAndWidth(true, true)\n      }),\n\n      atom.config.observe('minimap.minimapScrollIndicator', (minimapScrollIndicator) => {\n        this.minimapScrollIndicator = minimapScrollIndicator\n\n        if (this.minimapScrollIndicator && !(this.scrollIndicator != null) && !this.standAlone) {\n          this.initializeScrollIndicator()\n        } else if ((this.scrollIndicator != null)) {\n          this.disposeScrollIndicator()\n        }\n\n        if (this.attached) { this.requestUpdate() }\n      }),\n\n      atom.config.observe('minimap.displayPluginsControls', (displayPluginsControls) => {\n        this.displayPluginsControls = displayPluginsControls\n\n        if (this.displayPluginsControls && !(this.openQuickSettings != null) && !this.standAlone) {\n          this.initializeOpenQuickSettings()\n        } else if ((this.openQuickSettings != null)) {\n          this.disposeOpenQuickSettings()\n        }\n      }),\n\n      atom.config.observe('minimap.textOpacity', (textOpacity) => {\n        this.textOpacity = textOpacity\n\n        if (this.attached) { this.requestForcedUpdate() }\n      }),\n\n      atom.config.observe('minimap.displayCodeHighlights', (displayCodeHighlights) => {\n        this.displayCodeHighlights = displayCodeHighlights\n\n        if (this.attached) { this.requestForcedUpdate() }\n      }),\n\n      atom.config.observe('minimap.smoothScrolling', (smoothScrolling) => {\n        this.smoothScrolling = smoothScrolling\n\n        if (this.attached) {\n          if (!this.smoothScrolling) {\n            this.backLayer.canvas.style.cssText = ''\n            this.tokensLayer.canvas.style.cssText = ''\n            this.frontLayer.canvas.style.cssText = ''\n          } else {\n            this.requestUpdate()\n          }\n        }\n      }),\n\n      atom.config.observe('minimap.adjustMinimapWidthToSoftWrap', (adjustToSoftWrap) => {\n        this.adjustToSoftWrap = adjustToSoftWrap\n\n        if (this.attached) { this.measureHeightAndWidth() }\n      }),\n\n      atom.config.observe('minimap.adjustMinimapWidthOnlyIfSmaller', (adjustOnlyIfSmaller) => {\n        this.adjustOnlyIfSmaller = adjustOnlyIfSmaller\n\n        if (this.attached) { this.measureHeightAndWidth() }\n      }),\n\n      atom.config.observe('minimap.useHardwareAcceleration', (useHardwareAcceleration) => {\n        this.useHardwareAcceleration = useHardwareAcceleration\n\n        if (this.attached) { this.requestUpdate() }\n      }),\n\n      atom.config.observe('minimap.absoluteMode', (absoluteMode) => {\n        this.absoluteMode = absoluteMode\n\n        this.classList.toggle('absolute', this.absoluteMode)\n      }),\n\n      atom.config.observe('minimap.adjustAbsoluteModeHeight', (adjustAbsoluteModeHeight) => {\n        this.adjustAbsoluteModeHeight = adjustAbsoluteModeHeight\n\n        this.classList.toggle('adjust-absolute-height', this.adjustAbsoluteModeHeight)\n\n        if (this.attached) { this.measureHeightAndWidth() }\n      }),\n\n      atom.config.observe('minimap.ignoreWhitespacesInTokens', (ignoreWhitespacesInTokens) => {\n        this.ignoreWhitespacesInTokens = ignoreWhitespacesInTokens\n\n        if (this.attached) { this.requestForcedUpdate() }\n      }),\n\n      atom.config.observe('editor.preferredLineLength', () => {\n        if (this.attached) { this.measureHeightAndWidth() }\n      }),\n\n      atom.config.observe('editor.softWrap', () => {\n        if (this.attached) { this.requestUpdate() }\n      }),\n\n      atom.config.observe('editor.showInvisibles', () => {\n        if (this.attached) { this.requestUpdate() }\n      }),\n\n      atom.config.observe('editor.invisibles', () => {\n        if (this.attached) { this.requestUpdate() }\n      }),\n\n      atom.config.observe('editor.softWrapAtPreferredLineLength', () => {\n        if (this.attached) { this.requestUpdate() }\n      })\n    )\n  }\n\n  /**\n   * DOM callback invoked when a new MinimapElement is attached to the DOM.\n   *\n   * @access private\n   */\n  attachedCallback () {\n    if (typeof atom.views.pollDocument === 'function') {\n      this.subscriptions.add(atom.views.pollDocument(() => { this.pollDOM() }))\n    } else {\n      this.intersectionObserver = new IntersectionObserver((entries) => {\n        const { intersectionRect } = entries[entries.length - 1]\n        if (intersectionRect.width > 0 || intersectionRect.height > 0) {\n          this.measureHeightAndWidth(true, true)\n        }\n      })\n\n      this.intersectionObserver.observe(this)\n      if (this.isVisible()) {\n        this.measureHeightAndWidth(true, true)\n      }\n\n      const measureDimensions = () => { this.measureHeightAndWidth(false, false) }\n      elementResizeDetector.listenTo(this, measureDimensions)\n      window.addEventListener('resize', measureDimensions, { passive: true })\n\n      this.subscriptions.add(\n        new Disposable(() => { elementResizeDetector.removeListener(this, measureDimensions) }),\n        new Disposable(() => { window.removeEventListener('resize', measureDimensions) })\n      )\n    }\n\n    this.measureHeightAndWidth()\n    this.updateMinimapFlexPosition()\n    this.attached = true\n    this.attachedToTextEditor = this.queryParentSelector('atom-text-editor') === this.minimap.getTextEditorElement()\n\n    if (this.attachedToTextEditor) {\n      this.minimap.getTextEditorElement().setAttribute('with-minimap', '')\n    }\n\n    this.subscriptions.add(\n      this.subscribeToMediaQuery()\n    )\n  }\n\n  /**\n   * DOM callback invoked when a new MinimapElement is detached from the DOM.\n   *\n   * @access private\n   */\n  detachedCallback () {\n    this.minimap.getTextEditorElement().removeAttribute('with-minimap')\n    this.attached = false\n  }\n\n  //       ###    ######## ########    ###     ######  ##     ##\n  //      ## ##      ##       ##      ## ##   ##    ## ##     ##\n  //     ##   ##     ##       ##     ##   ##  ##       ##     ##\n  //    ##     ##    ##       ##    ##     ## ##       #########\n  //    #########    ##       ##    ######### ##       ##     ##\n  //    ##     ##    ##       ##    ##     ## ##    ## ##     ##\n  //    ##     ##    ##       ##    ##     ##  ######  ##     ##\n\n  /**\n   * Returns whether the MinimapElement is currently visible on screen or not.\n   *\n   * The visibility of the minimap is defined by testing the size of the offset\n   * width and height of the element.\n   *\n   * @return {boolean} whether the MinimapElement is currently visible or not\n   */\n  isVisible () { return this.offsetWidth > 0 || this.offsetHeight > 0 }\n\n  /**\n   * Attaches the MinimapElement to the DOM.\n   *\n   * The position at which the element is attached is defined by the\n   * `displayMinimapOnLeft` setting.\n   *\n   * @param  {HTMLElement} [parent] the DOM node where attaching the minimap\n   *                                element\n   */\n  attach (parent) {\n    if (this.attached) { return }\n\n    const container = parent || this.minimap.getTextEditorElement()\n    const minimaps = container.querySelectorAll('atom-text-editor-minimap')\n    if (minimaps.length) {\n      Array.prototype.forEach.call(minimaps, (el) => { el.destroy() })\n    }\n    container.appendChild(this)\n  }\n\n  /**\n   * Detaches the MinimapElement from the DOM.\n   */\n  detach () {\n    if (!this.attached || this.parentNode == null) { return }\n    this.parentNode.removeChild(this)\n  }\n\n  /**\n   * Toggles the minimap left/right position based on the value of the\n   * `displayMinimapOnLeft` setting.\n   *\n   * @access private\n   */\n  updateMinimapFlexPosition () {\n    this.classList.toggle('left', this.displayMinimapOnLeft)\n  }\n\n  /**\n   * Destroys this MinimapElement\n   */\n  destroy () {\n    this.subscriptions.dispose()\n    this.detach()\n    this.minimap = null\n  }\n\n  //     ######   #######  ##    ## ######## ######## ##    ## ########\n  //    ##    ## ##     ## ###   ##    ##    ##       ###   ##    ##\n  //    ##       ##     ## ####  ##    ##    ##       ####  ##    ##\n  //    ##       ##     ## ## ## ##    ##    ######   ## ## ##    ##\n  //    ##       ##     ## ##  ####    ##    ##       ##  ####    ##\n  //    ##    ## ##     ## ##   ###    ##    ##       ##   ###    ##\n  //     ######   #######  ##    ##    ##    ######## ##    ##    ##\n\n  /**\n   * Creates the content of the MinimapElement and attaches the mouse control\n   * event listeners.\n   *\n   * @access private\n   */\n  initializeContent () {\n    this.initializeCanvas()\n\n    this.attachCanvases(this)\n\n    this.createVisibleArea()\n    this.createControls()\n\n    this.subscriptions.add(\n\n      this.subscribeTo(\n        this,\n        {\n          mousewheel: (e) => {\n            if (!this.standAlone && this.minimap.onMouseWheel) {\n              this.minimap.onMouseWheel(e)\n            }\n          }\n        },\n        { passive: true }\n      ),\n\n      this.subscribeTo(\n        this.getFrontCanvas(),\n        {\n          mousedown: (e) => { this.canvasPressed(extractMouseEventData(e)) },\n          touchstart: (e) => { this.canvasPressed(extractTouchEventData(e)) }\n        },\n        { passive: true }\n      )\n\n    )\n  }\n\n  /**\n   * Initializes the visible area div.\n   *\n   * @access private\n   */\n  createVisibleArea () {\n    if (this.visibleArea) { return }\n\n    this.visibleArea = document.createElement('div')\n    this.visibleArea.classList.add('minimap-visible-area')\n    this.appendChild(this.visibleArea)\n    this.visibleAreaSubscription = this.subscribeTo(this.visibleArea, {\n      mousedown: (e) => { this.startDrag(extractMouseEventData(e)) },\n      touchstart: (e) => { this.startDrag(extractTouchEventData(e)) }\n    }, { passive: true })\n\n    this.subscriptions.add(this.visibleAreaSubscription)\n  }\n\n  /**\n   * Removes the visible area div.\n   *\n   * @access private\n   */\n  removeVisibleArea () {\n    if (!this.visibleArea) { return }\n\n    this.subscriptions.remove(this.visibleAreaSubscription)\n    this.visibleAreaSubscription.dispose()\n    this.removeChild(this.visibleArea)\n    delete this.visibleArea\n  }\n\n  /**\n   * Creates the controls container div.\n   *\n   * @access private\n   */\n  createControls () {\n    if (this.controls || this.standAlone) { return }\n\n    this.controls = document.createElement('div')\n    this.controls.classList.add('minimap-controls')\n    this.appendChild(this.controls)\n  }\n\n  /**\n   * Removes the controls container div.\n   *\n   * @access private\n   */\n  removeControls () {\n    if (!this.controls) { return }\n\n    this.removeChild(this.controls)\n    delete this.controls\n  }\n\n  /**\n   * Initializes the scroll indicator div when the `minimapScrollIndicator`\n   * settings is enabled.\n   *\n   * @access private\n   */\n  initializeScrollIndicator () {\n    if (this.scrollIndicator || this.standAlone) { return }\n\n    this.scrollIndicator = document.createElement('div')\n    this.scrollIndicator.classList.add('minimap-scroll-indicator')\n    this.controls.appendChild(this.scrollIndicator)\n  }\n\n  /**\n   * Disposes the scroll indicator div when the `minimapScrollIndicator`\n   * settings is disabled.\n   *\n   * @access private\n   */\n  disposeScrollIndicator () {\n    if (!this.scrollIndicator) { return }\n\n    this.controls.removeChild(this.scrollIndicator)\n    delete this.scrollIndicator\n  }\n\n  /**\n   * Initializes the quick settings openener div when the\n   * `displayPluginsControls` setting is enabled.\n   *\n   * @access private\n   */\n  initializeOpenQuickSettings () {\n    if (this.openQuickSettings || this.standAlone) { return }\n\n    this.openQuickSettings = document.createElement('div')\n    this.openQuickSettings.classList.add('open-minimap-quick-settings')\n    this.controls.appendChild(this.openQuickSettings)\n\n    this.openQuickSettingSubscription = this.subscribeTo(this.openQuickSettings, {\n      mousedown: (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n\n        if ((this.quickSettingsElement != null)) {\n          this.quickSettingsElement.destroy()\n          this.quickSettingsSubscription.dispose()\n        } else {\n          this.quickSettingsElement = new MinimapQuickSettingsElement()\n          this.quickSettingsElement.setModel(this)\n          this.quickSettingsSubscription = this.quickSettingsElement.onDidDestroy(() => {\n            this.quickSettingsElement = null\n          })\n\n          const { top, left, right } = this.getFrontCanvas().getBoundingClientRect()\n          this.quickSettingsElement.style.top = `${top}px`\n          this.quickSettingsElement.attach()\n\n          if (this.displayMinimapOnLeft) {\n            this.quickSettingsElement.style.left = `${right}px`\n          } else {\n            this.quickSettingsElement.style.left = `${left - this.quickSettingsElement.clientWidth}px`\n          }\n        }\n      }\n    })\n  }\n\n  /**\n   * Disposes the quick settings openener div when the `displayPluginsControls`\n   * setting is disabled.\n   *\n   * @access private\n   */\n  disposeOpenQuickSettings () {\n    if (!this.openQuickSettings) { return }\n\n    this.controls.removeChild(this.openQuickSettings)\n    this.openQuickSettingSubscription.dispose()\n    delete this.openQuickSettings\n  }\n\n  //    ##     ##  #######  ########  ######## ##\n  //    ###   ### ##     ## ##     ## ##       ##\n  //    #### #### ##     ## ##     ## ##       ##\n  //    ## ### ## ##     ## ##     ## ######   ##\n  //    ##     ## ##     ## ##     ## ##       ##\n  //    ##     ## ##     ## ##     ## ##       ##\n  //    ##     ##  #######  ########  ######## ########\n\n  /**\n   * Returns the Minimap for which this MinimapElement was created.\n   *\n   * @return {Minimap} this element's Minimap\n   */\n  getModel () { return this.minimap }\n\n  /**\n   * Defines the Minimap model for this MinimapElement instance.\n   *\n   * @param  {Minimap} minimap the Minimap model for this instance.\n   * @return {Minimap} this element's Minimap\n   */\n  setModel (minimap) {\n    this.minimap = minimap\n\n    this.subscriptions.add(\n\n      this.minimap.onDidChangeScrollTop(() => {\n        this.requestUpdate()\n      }),\n\n      this.minimap.onDidChangeScrollLeft(() => {\n        this.requestUpdate()\n      }),\n\n      this.minimap.onDidDestroy(() => {\n        this.destroy()\n      }),\n\n      this.minimap.onDidChangeConfig(() => {\n        if (this.attached) { return this.requestForcedUpdate() }\n      }),\n\n      this.minimap.onDidChangeStandAlone(() => {\n        this.setStandAlone(this.minimap.isStandAlone())\n        this.requestUpdate()\n      }),\n\n      this.minimap.onDidChange((change) => {\n        this.pendingChanges.push(change)\n        this.requestUpdate()\n      }),\n\n      this.minimap.onDidChangeDecorationRange((change) => {\n        const { type } = change\n        if (type === 'line' ||\n            type === 'highlight-under' ||\n            type === 'background-custom') {\n          this.pendingBackDecorationChanges.push(change)\n        } else {\n          this.pendingFrontDecorationChanges.push(change)\n        }\n        this.requestUpdate()\n      }),\n\n      Main.onDidChangePluginOrder(() => {\n        this.requestForcedUpdate()\n      })\n    )\n\n    this.setStandAlone(this.minimap.isStandAlone())\n\n    if (this.width != null && this.height != null) {\n      this.minimap.setScreenHeightAndWidth(this.height, this.width)\n    }\n\n    return this.minimap\n  }\n\n  /**\n   * Sets the stand-alone mode for this MinimapElement.\n   *\n   * @param {boolean} standAlone the new mode for this MinimapElement\n   */\n  setStandAlone (standAlone) {\n    this.standAlone = standAlone\n\n    if (this.standAlone) {\n      this.setAttribute('stand-alone', true)\n      this.disposeScrollIndicator()\n      this.disposeOpenQuickSettings()\n      this.removeControls()\n      this.removeVisibleArea()\n    } else {\n      this.removeAttribute('stand-alone')\n      this.createVisibleArea()\n      this.createControls()\n      if (this.minimapScrollIndicator) { this.initializeScrollIndicator() }\n      if (this.displayPluginsControls) { this.initializeOpenQuickSettings() }\n    }\n  }\n\n  //    ##     ## ########  ########     ###    ######## ########\n  //    ##     ## ##     ## ##     ##   ## ##      ##    ##\n  //    ##     ## ##     ## ##     ##  ##   ##     ##    ##\n  //    ##     ## ########  ##     ## ##     ##    ##    ######\n  //    ##     ## ##        ##     ## #########    ##    ##\n  //    ##     ## ##        ##     ## ##     ##    ##    ##\n  //     #######  ##        ########  ##     ##    ##    ########\n\n  /**\n   * Requests an update to be performed on the next frame.\n   */\n  requestUpdate () {\n    if (this.frameRequested) { return }\n\n    this.frameRequested = true\n    requestAnimationFrame(() => {\n      this.update()\n      this.frameRequested = false\n    })\n  }\n\n  /**\n   * Requests an update to be performed on the next frame that will completely\n   * redraw the minimap.\n   */\n  requestForcedUpdate () {\n    this.offscreenFirstRow = null\n    this.offscreenLastRow = null\n    this.requestUpdate()\n  }\n\n  /**\n   * Performs the actual MinimapElement update.\n   *\n   * @access private\n   */\n  update () {\n    if (!(this.attached && this.isVisible() && this.minimap)) { return }\n    const minimap = this.minimap\n    minimap.enableCache()\n    const canvas = this.getFrontCanvas()\n\n    const devicePixelRatio = this.minimap.getDevicePixelRatio()\n    const visibleAreaLeft = minimap.getTextEditorScaledScrollLeft()\n    const visibleAreaTop = minimap.getTextEditorScaledScrollTop() - minimap.getScrollTop()\n    const width = Math.min(canvas.width / devicePixelRatio, this.width)\n    const visibleWidth = width + visibleAreaLeft\n\n    if (this.adjustToSoftWrap && this.flexBasis) {\n      this.style.flexBasis = `${this.flexBasis}px`\n      this.style.width = `${this.flexBasis}px`\n    } else {\n      this.style.flexBasis = null\n      this.style.width = null\n    }\n\n    if (SPEC_MODE) {\n      applyStyles(this.visibleArea, {\n        width: `${Math.round(visibleWidth)}px`,\n        height: `${Math.round(minimap.getTextEditorScaledHeight())}px`,\n        top: `${Math.round(visibleAreaTop)}px`,\n        'border-left-width': `${Math.round(visibleAreaLeft)}px`\n      })\n    } else {\n      applyStyles(this.visibleArea, {\n        width: `${Math.round(visibleWidth)}px`,\n        height: `${Math.round(minimap.getTextEditorScaledHeight())}px`,\n        transform: makeTranslate(0, visibleAreaTop, this.useHardwareAcceleration),\n        'border-left-width': `${Math.round(visibleAreaLeft)}px`\n      })\n    }\n\n    applyStyles(this.controls, { width: `${Math.round(width)}px` })\n\n    const canvasTop = minimap.getFirstVisibleScreenRow() * minimap.getLineHeight() - minimap.getScrollTop()\n\n    if (this.smoothScrolling) {\n      if (SPEC_MODE) {\n        applyStyles(this.backLayer.canvas, { top: `${canvasTop}px` })\n        applyStyles(this.tokensLayer.canvas, { top: `${canvasTop}px` })\n        applyStyles(this.frontLayer.canvas, { top: `${canvasTop}px` })\n      } else {\n        let canvasTransform = makeTranslate(0, canvasTop, this.useHardwareAcceleration)\n        if (devicePixelRatio !== 1) {\n          const scale = 1 / devicePixelRatio\n          canvasTransform += ` ${makeScale(scale, scale, this.useHardwareAcceleration)}`\n        }\n        applyStyles(this.backLayer.canvas, { transform: canvasTransform })\n        applyStyles(this.tokensLayer.canvas, { transform: canvasTransform })\n        applyStyles(this.frontLayer.canvas, { transform: canvasTransform })\n      }\n    } else {\n      const scale = 1 / devicePixelRatio\n      const canvasTransform = makeScale(scale, scale, this.useHardwareAcceleration)\n      applyStyles(this.backLayer.canvas, { transform: canvasTransform })\n      applyStyles(this.tokensLayer.canvas, { transform: canvasTransform })\n      applyStyles(this.frontLayer.canvas, { transform: canvasTransform })\n    }\n\n    if (this.minimapScrollIndicator && !this.scrollIndicator && minimap.canScroll()) {\n      this.initializeScrollIndicator()\n    }\n\n    if (this.scrollIndicator != null) {\n      const minimapScreenHeight = minimap.getScreenHeight()\n      const indicatorHeight = minimapScreenHeight * (minimapScreenHeight / minimap.getHeight())\n      const indicatorScroll = (minimapScreenHeight - indicatorHeight) * minimap.getScrollRatio()\n\n      if (SPEC_MODE) {\n        applyStyles(this.scrollIndicator, {\n          height: `${indicatorHeight}px`,\n          top: `${indicatorScroll}px`\n        })\n      } else {\n        applyStyles(this.scrollIndicator, {\n          height: `${indicatorHeight}px`,\n          transform: makeTranslate(0, indicatorScroll, this.useHardwareAcceleration)\n        })\n      }\n\n      if (!minimap.canScroll()) { this.disposeScrollIndicator() }\n    }\n\n    if (this.absoluteMode && this.adjustAbsoluteModeHeight) { this.updateCanvasesSize() }\n\n    this.updateCanvas()\n    minimap.clearCache()\n  }\n\n  /**\n   * Defines whether to render the code highlights or not.\n   *\n   * @param {Boolean} displayCodeHighlights whether to render the code\n   *                                        highlights or not\n   */\n  setDisplayCodeHighlights (displayCodeHighlights) {\n    this.displayCodeHighlights = displayCodeHighlights\n    if (this.attached) { this.requestForcedUpdate() }\n  }\n\n  /**\n   * Polling callback used to detect visibility and size changes.\n   *\n   * @access private\n   */\n  pollDOM () {\n    const visibilityChanged = this.checkForVisibilityChange()\n    if (this.isVisible()) {\n      if (!this.wasVisible) { this.requestForcedUpdate() }\n\n      this.measureHeightAndWidth(visibilityChanged, false)\n    }\n  }\n\n  /**\n   * A method that checks for visibility changes in the MinimapElement.\n   * The method returns `true` when the visibility changed from visible to\n   * hidden or from hidden to visible.\n   *\n   * @return {boolean} whether the visibility changed or not since the last call\n   * @access private\n   */\n  checkForVisibilityChange () {\n    if (this.isVisible()) {\n      if (this.wasVisible) {\n        return false\n      } else {\n        this.wasVisible = true\n        return this.wasVisible\n      }\n    } else {\n      if (this.wasVisible) {\n        this.wasVisible = false\n        return true\n      } else {\n        this.wasVisible = false\n        return this.wasVisible\n      }\n    }\n  }\n\n  /**\n   * A method used to measure the size of the MinimapElement and update internal\n   * components based on the new size.\n   *\n   * @param  {boolean} visibilityChanged did the visibility changed since last\n   *                                     measurement\n   * @param  {[type]} [forceUpdate=true] forces the update even when no changes\n   *                                     were detected\n   * @access private\n   */\n  measureHeightAndWidth (visibilityChanged, forceUpdate = true) {\n    if (!this.minimap) { return }\n\n    const safeFlexBasis = this.style.flexBasis\n    this.style.flexBasis = ''\n\n    const wasResized = this.width !== this.clientWidth || this.height !== this.clientHeight\n\n    this.height = this.clientHeight\n    this.width = this.clientWidth\n    let canvasWidth = this.width\n\n    if ((this.minimap != null)) {\n      this.minimap.setScreenHeightAndWidth(this.height, this.width)\n    }\n\n    if (wasResized || visibilityChanged || forceUpdate) {\n      this.requestForcedUpdate()\n    }\n\n    if (!this.isVisible()) { return }\n\n    if (wasResized || forceUpdate) {\n      if (this.adjustToSoftWrap) {\n        const lineLength = atom.config.get('editor.preferredLineLength')\n        const softWrap = atom.config.get('editor.softWrap')\n        const softWrapAtPreferredLineLength = atom.config.get('editor.softWrapAtPreferredLineLength')\n        const width = lineLength * this.minimap.getCharWidth()\n\n        if (softWrap && softWrapAtPreferredLineLength && lineLength && (width <= this.width || !this.adjustOnlyIfSmaller)) {\n          this.flexBasis = width\n          canvasWidth = width\n          updateOverlayStyle(width)\n        } else {\n          updateOverlayStyle(canvasWidth)\n          delete this.flexBasis\n        }\n      } else {\n        updateOverlayStyle(canvasWidth)\n        delete this.flexBasis\n      }\n\n      this.updateCanvasesSize(canvasWidth)\n    } else {\n      this.style.flexBasis = safeFlexBasis\n    }\n  }\n\n  updateCanvasesSize (canvasWidth) {\n    const devicePixelRatio = this.minimap.getDevicePixelRatio()\n    const maxCanvasHeight = this.height + this.minimap.getLineHeight()\n    const newHeight = this.absoluteMode && this.adjustAbsoluteModeHeight ? Math.min(this.minimap.getHeight(), maxCanvasHeight) : maxCanvasHeight\n    const canvas = this.getFrontCanvas()\n\n    if (canvasWidth == null) {\n      canvasWidth = canvas.width / devicePixelRatio\n    }\n\n    if (canvasWidth !== canvas.width || newHeight !== canvas.height) {\n      this.setCanvasesSize(\n        canvasWidth * devicePixelRatio,\n        newHeight * devicePixelRatio\n      )\n      if (this.absoluteMode && this.adjustAbsoluteModeHeight) {\n        this.offscreenFirstRow = null\n        this.offscreenLastRow = null\n      }\n    }\n  }\n\n  //    ######## ##     ## ######## ##    ## ########  ######\n  //    ##       ##     ## ##       ###   ##    ##    ##    ##\n  //    ##       ##     ## ##       ####  ##    ##    ##\n  //    ######   ##     ## ######   ## ## ##    ##     ######\n  //    ##        ##   ##  ##       ##  ####    ##          ##\n  //    ##         ## ##   ##       ##   ###    ##    ##    ##\n  //    ########    ###    ######## ##    ##    ##     ######\n\n  /**\n   * Callback triggered when the mouse is pressed on the MinimapElement canvas.\n   *\n   * @param  {number} y the vertical coordinate of the event\n   * @param  {boolean} isLeftMouse was the left mouse button pressed?\n   * @param  {boolean} isMiddleMouse was the middle mouse button pressed?\n   * @access private\n   */\n  canvasPressed ({ y, isLeftMouse, isMiddleMouse }) {\n    if (this.minimap.isStandAlone()) { return }\n    if (isLeftMouse) {\n      this.canvasLeftMousePressed(y)\n    } else if (isMiddleMouse) {\n      this.canvasMiddleMousePressed(y)\n      const { top, height } = this.visibleArea.getBoundingClientRect()\n      this.startDrag({ y: top + height / 2, isLeftMouse: false, isMiddleMouse: true })\n    }\n  }\n\n  /**\n   * Callback triggered when the mouse left button is pressed on the\n   * MinimapElement canvas.\n   *\n   * @param  {MouseEvent} e the mouse event object\n   * @param  {number} e.pageY the mouse y position in page\n   * @param  {HTMLElement} e.target the source of the event\n   * @access private\n   */\n  canvasLeftMousePressed (y) {\n    const deltaY = y - this.getBoundingClientRect().top\n    const row = Math.floor(deltaY / this.minimap.getLineHeight()) + this.minimap.getFirstVisibleScreenRow()\n\n    const textEditor = this.minimap.getTextEditor()\n    const textEditorElement = this.minimap.getTextEditorElement()\n\n    const scrollTop = row * textEditor.getLineHeightInPixels() - this.minimap.getTextEditorHeight() / 2\n    const textEditorScrollTop = textEditorElement.pixelPositionForScreenPosition([row, 0]).top - this.minimap.getTextEditorHeight() / 2\n\n    if (atom.config.get('minimap.moveCursorOnMinimapClick')) {\n      textEditor.setCursorScreenPosition([row, 0])\n    }\n\n    if (atom.config.get('minimap.scrollAnimation')) {\n      const duration = atom.config.get('minimap.scrollAnimationDuration')\n      const independentScroll = this.minimap.scrollIndependentlyOnMouseWheel()\n\n      const from = this.minimap.getTextEditorScrollTop()\n      const to = textEditorScrollTop\n      let step\n\n      if (independentScroll) {\n        const minimapFrom = this.minimap.getScrollTop()\n        const minimapTo = Math.min(1, scrollTop / (this.minimap.getTextEditorMaxScrollTop() || 1)) * this.minimap.getMaxScrollTop()\n\n        step = (now, t) => {\n          if (this.minimap === null) return // TODO why this happens in the tests?\n          this.minimap.setTextEditorScrollTop(now, true)\n          this.minimap.setScrollTop(minimapFrom + (minimapTo - minimapFrom) * t)\n        }\n        animate({ from, to, duration, step })\n      } else {\n        step = (now) => {\n          if (this.minimap === null) return // TODO why this happens in the tests?\n          this.minimap.setTextEditorScrollTop(now)\n        }\n        animate({ from, to, duration, step })\n      }\n    } else {\n      this.minimap.setTextEditorScrollTop(textEditorScrollTop)\n    }\n  }\n\n  /**\n   * Callback triggered when the mouse middle button is pressed on the\n   * MinimapElement canvas.\n   *\n   * @param  {MouseEvent} e the mouse event object\n   * @param  {number} e.pageY the mouse y position in page\n   * @access private\n   */\n  canvasMiddleMousePressed (y) {\n    const { top: offsetTop } = this.getBoundingClientRect()\n    const deltaY = y - offsetTop - this.minimap.getTextEditorScaledHeight() / 2\n\n    const ratio = deltaY / (this.minimap.getVisibleHeight() - this.minimap.getTextEditorScaledHeight())\n\n    this.minimap.setTextEditorScrollTop(ratio * this.minimap.getTextEditorMaxScrollTop())\n  }\n\n  /**\n   * Subscribes to a media query for device pixel ratio changes and forces\n   * a repaint when it occurs.\n   *\n   * @return {Disposable} a disposable to remove the media query listener\n   * @access private\n   */\n  subscribeToMediaQuery () {\n    const mediaQuery = window.matchMedia('screen and (-webkit-min-device-pixel-ratio: 1.5)')\n    const mediaListener = () => { this.requestForcedUpdate() }\n    mediaQuery.addEventListener('change', mediaListener)\n\n    return new Disposable(() => {\n      mediaQuery.removeEventListener('change', mediaListener)\n    })\n  }\n\n  //    ########    ####    ########\n  //    ##     ##  ##  ##   ##     ##\n  //    ##     ##   ####    ##     ##\n  //    ##     ##  ####     ##     ##\n  //    ##     ## ##  ## ## ##     ##\n  //    ##     ## ##   ##   ##     ##\n  //    ########   ####  ## ########\n\n  /**\n   * A method triggered when the mouse is pressed over the visible area that\n   * starts the dragging gesture.\n   *\n   * @param  {number} y the vertical coordinate of the event\n   * @param  {boolean} isLeftMouse was the left mouse button pressed?\n   * @param  {boolean} isMiddleMouse was the middle mouse button pressed?\n   * @access private\n   */\n  startDrag ({ y, isLeftMouse, isMiddleMouse }) {\n    if (!this.minimap) { return }\n    if (!isLeftMouse && !isMiddleMouse) { return }\n\n    const initial = {\n      dragOffset: y - this.visibleArea.getBoundingClientRect().top,\n      offsetTop: this.getBoundingClientRect().top\n    }\n\n    // TODO can we avoid adding and removing the listeners every time?\n\n    const mousemoveHandler = (e) => this.drag(extractMouseEventData(e), initial)\n    const dragendHandler = () => this.endDrag()\n\n    const touchmoveHandler = (e) => this.drag(extractTouchEventData(e), initial)\n\n    document.body.addEventListener('mousemove', mousemoveHandler, { passive: true })\n    document.body.addEventListener('mouseup', dragendHandler, { passive: true })\n    document.body.addEventListener('mouseleave', dragendHandler, { passive: true })\n\n    document.body.addEventListener('touchmove', touchmoveHandler, { passive: true })\n    document.body.addEventListener('touchend', dragendHandler, { passive: true })\n    document.body.addEventListener('touchcancel', dragendHandler, { passive: true })\n\n    this.dragSubscription = new Disposable(function () {\n      document.body.removeEventListener('mousemove', mousemoveHandler)\n      document.body.removeEventListener('mouseup', dragendHandler)\n      document.body.removeEventListener('mouseleave', dragendHandler)\n\n      document.body.removeEventListener('touchmove', touchmoveHandler)\n      document.body.removeEventListener('touchend', dragendHandler)\n      document.body.removeEventListener('touchcancel', dragendHandler)\n    })\n  }\n\n  /**\n   * The method called during the drag gesture.\n   *\n   * @param  {number} y the vertical coordinate of the event\n   * @param  {boolean} isLeftMouse was the left mouse button pressed?\n   * @param  {boolean} isMiddleMouse was the middle mouse button pressed?\n   * @param  {number} initial.dragOffset the mouse offset within the visible\n   *                                     area\n   * @param  {number} initial.offsetTop the MinimapElement offset at the moment\n   *                                    of the drag start\n   * @access private\n   */\n  drag ({ y, isLeftMouse, isMiddleMouse }, initial) {\n    if (!this.minimap) { return }\n    if (!isLeftMouse && !isMiddleMouse) { return }\n    const deltaY = y - initial.offsetTop - initial.dragOffset\n\n    const ratio = deltaY / (this.minimap.getVisibleHeight() - this.minimap.getTextEditorScaledHeight())\n\n    this.minimap.setTextEditorScrollTop(ratio * this.minimap.getTextEditorMaxScrollTop())\n  }\n\n  /**\n   * The method that ends the drag gesture.\n   *\n   * @access private\n   */\n  endDrag () {\n    if (!this.minimap) { return }\n    this.dragSubscription.dispose()\n  }\n}\n\nconst minimapElement = MinimapElement.initClass()\nexport default minimapElement\n\n//    ######## ##     ## ######## ##    ## ########  ######\n//    ##       ##     ## ##       ###   ##    ##    ##    ##\n//    ##       ##     ## ##       ####  ##    ##    ##\n//    ######   ##     ## ######   ## ## ##    ##     ######\n//    ##        ##   ##  ##       ##  ####    ##          ##\n//    ##         ## ##   ##       ##   ###    ##    ##    ##\n//    ########    ###    ######## ##    ##    ##     ######\n\n/**\n * A method that extracts data from a `MouseEvent` which can then be used to\n * process clicks and drags of the minimap.\n *\n * Used together with `extractTouchEventData` to provide a unified interface\n * for `MouseEvent`s and `TouchEvent`s.\n *\n * @param  {MouseEvent} mouseEvent the mouse event object\n * @access private\n */\nfunction extractMouseEventData (mouseEvent) {\n  return {\n    x: mouseEvent.pageX,\n    y: mouseEvent.pageY,\n    isLeftMouse: mouseEvent.button === 0,\n    isMiddleMouse: mouseEvent.button === 1\n  }\n}\n\n/**\n * A method that extracts data from a `TouchEvent` which can then be used to\n * process clicks and drags of the minimap.\n *\n * Used together with `extractMouseEventData` to provide a unified interface\n * for `MouseEvent`s and `TouchEvent`s.\n *\n * @param  {TouchEvent} touchEvent the touch event object\n * @access private\n */\nfunction extractTouchEventData (touchEvent) {\n  // Use the first touch on the target area. Other touches will be ignored in\n  // case of multi-touch.\n  const touch = touchEvent.changedTouches[0]\n\n  return {\n    x: touch.pageX,\n    y: touch.pageY,\n    isLeftMouse: true, // Touch is treated like a left mouse button click\n    isMiddleMouse: false\n  }\n}\n\n//     ######   ######   ######\n//    ##    ## ##    ## ##    ##\n//    ##       ##       ##\n//    ##        ######   ######\n//    ##             ##       ##\n//    ##    ## ##    ## ##    ##\n//     ######   ######   ######\n\n/**\n * Applies the passed-in styles properties to the specified element\n *\n * @param  {HTMLElement} element the element onto which apply the styles\n * @param  {Object} styles the styles to apply\n * @access private\n */\nfunction applyStyles (element, styles) {\n  if (!element) { return }\n\n  let cssText = ''\n  for (const property in styles) {\n    cssText += `${property}: ${styles[property]}; `\n  }\n\n  element.style.cssText = cssText\n}\n\n/**\n * Returns a string with a CSS translation tranform value.\n *\n * @param  {number} [x = 0] the x offset of the translation\n * @param  {number} [y = 0] the y offset of the translation\n * @param  {boolean} [useHardwareAcceleration = false] use hardware acceleration\n * @return {string} the CSS translation string\n * @access private\n */\nfunction makeTranslate (x = 0, y = 0, useHardwareAcceleration = false) {\n  if (useHardwareAcceleration) {\n    return `translate3d(${x}px, ${y}px, 0)`\n  } else {\n    return `translate(${x}px, ${y}px)`\n  }\n}\n\n/**\n * Returns a string with a CSS scaling tranform value.\n *\n * @param  {number} [x = 0] the x scaling factor\n * @param  {number} [y = 0] the y scaling factor\n * @param  {boolean} [useHardwareAcceleration = false] use hardware acceleration\n * @return {string} the CSS scaling string\n * @access private\n */\nfunction makeScale (x = 0, y = x, useHardwareAcceleration = false) {\n  if (useHardwareAcceleration) {\n    return `scale3d(${x}, ${y}, 1)`\n  } else {\n    return `scale(${x}, ${y})`\n  }\n}\n\n/**\n * A method that mimic the jQuery `animate` method and used to animate the\n * scroll when clicking on the MinimapElement canvas.\n *\n * @param  {Object} param the animation data object\n * @param  {[type]} param.from the start value\n * @param  {[type]} param.to the end value\n * @param  {[type]} param.duration the animation duration\n * @param  {[type]} param.step the easing function for the animation\n * @access private\n */\nfunction animate ({ from, to, duration, step }) {\n  const start = getTime()\n  let progress\n\n  const update = () => {\n    const passed = getTime() - start\n    if (duration === 0) {\n      progress = 1\n    } else {\n      progress = passed / duration\n    }\n    if (progress > 1) { progress = 1 }\n    const delta = swing(progress)\n    const value = from + (to - from) * delta\n    step(value, delta)\n\n    if (progress < 1) { requestAnimationFrame(update) }\n  }\n\n  update()\n}\n\nfunction swing (progress) {\n  return 0.5 - Math.cos(progress * Math.PI) / 2\n}\n\n/**\n * A method that return the current time as a Date.\n *\n * That method exist so that we can mock it in tests.\n *\n * @return {Date} the current time as Date\n * @access private\n */\nfunction getTime () { return new Date() }\n","'use strict'\n\nimport { CompositeDisposable } from 'atom'\nimport { emitter, getConfigSchema } from './main'\n\n/**\n * Provides methods to manage minimap plugins.\n * Minimap plugins are Atom packages that will augment the minimap.\n * They have a secondary activation cycle going on constrained by the minimap\n * package activation. A minimap plugin life cycle will generally look\n * like this:\n *\n * 1. The plugin module is activated by Atom through the `activate` method\n * 2. The plugin then register itself as a minimap plugin using `registerPlugin`\n * 3. The plugin is activated/deactivated according to the minimap settings.\n * 4. On the plugin module deactivation, the plugin must unregisters itself\n *    from the minimap using the `unregisterPlugin`.\n *\n * @access public\n */\n\n// Initialize the properties for plugin management.\n\n/**\n  * The registered Minimap plugins stored using their name as key.\n  *\n  * @type {Object}\n  * @access private\n  */\nexport const plugins = {}\n/**\n  * The plugins' subscriptions stored using the plugin names as keys.\n  *\n  * @type {Object}\n  * @access private\n  */\nconst pluginsSubscriptions = {}\n\n/**\n  * A map that stores the display order for each plugin\n  *\n  * @type {Object}\n  * @access private\n  */\nconst pluginsOrderMap = {}\n\n/**\n   * Registers a minimap `plugin` with the given `name`.\n   *\n   * @param {string} name The identifying name of the plugin.\n   *                      It will be used as activation settings name\n   *                      as well as the key to unregister the module.\n   * @param {MinimapPlugin} plugin The plugin to register.\n   * @emits {did-add-plugin} with the name and a reference to the added plugin.\n   * @emits {did-activate-plugin} if the plugin was activated during\n   *                              the registration.\n   */\nexport function registerPlugin (name, plugin) {\n  plugins[name] = plugin\n  pluginsSubscriptions[name] = new CompositeDisposable()\n\n  const event = { name, plugin }\n  emitter.emit('did-add-plugin', event)\n\n  if (atom.config.get('minimap.displayPluginsControls')) {\n    registerPluginControls(name, plugin)\n  }\n\n  updatesPluginActivationState(name)\n}\n\n/**\n   * Unregisters a plugin from the minimap.\n   *\n   * @param {string} name The identifying name of the plugin to unregister.\n   * @emits {did-remove-plugin} with the name and a reference\n   *        to the added plugin.\n   */\nexport function unregisterPlugin (name) {\n  const plugin = plugins[name]\n\n  if (atom.config.get('minimap.displayPluginsControls')) {\n    unregisterPluginControls(name)\n  }\n\n  delete plugins[name]\n\n  const event = { name, plugin }\n  emitter.emit('did-remove-plugin', event)\n}\n\n/**\n   * Toggles the specified plugin activation state.\n   *\n   * @param  {string} name     The name of the plugin.\n   * @param  {boolean} boolean An optional boolean to set the activation\n   *                           state of the plugin. If ommitted the new plugin\n   *                           state will be the the inverse of its current\n   *                           state.\n   * @emits {did-activate-plugin} if the plugin was activated by the call.\n   * @emits {did-deactivate-plugin} if the plugin was deactivated by the call.\n   */\nexport function togglePluginActivation (name, boolean) {\n  const settingsKey = `minimap.plugins.${name}`\n\n  if (boolean !== undefined && boolean !== null) {\n    atom.config.set(settingsKey, boolean)\n  } else {\n    atom.config.set(settingsKey, !atom.config.get(settingsKey))\n  }\n\n  updatesPluginActivationState(name)\n}\n\n/**\n   * Deactivates all the plugins registered in the minimap package so far.\n   *\n   * @emits {did-deactivate-plugin} for each plugin deactivated by the call.\n   */\nexport function deactivateAllPlugins () {\n  for (const [name, plugin] of eachPlugin()) {\n    plugin.deactivatePlugin()\n    emitter.emit('did-deactivate-plugin', { name, plugin })\n  }\n}\n\n/**\n   * A generator function to iterate over registered plugins.\n   *\n   * @return An iterable that yield the name and reference to every plugin\n   *         as an array in each iteration.\n   */\nfunction * eachPlugin () {\n  for (const name in plugins) {\n    yield [name, plugins[name]]\n  }\n}\n\n/**\n   * Updates the plugin activation state according to the current config.\n   *\n   * @param {string} name The identifying name of the plugin to update.\n   * @emits {did-activate-plugin} if the plugin was activated by the call.\n   * @emits {did-deactivate-plugin} if the plugin was deactivated by the call.\n   * @access private\n   */\nfunction updatesPluginActivationState (name) {\n  const plugin = plugins[name]\n  const pluginActive = plugin.isActive()\n  const settingActive = atom.config.get(`minimap.plugins.${name}`)\n\n  if (atom.config.get('minimap.displayPluginsControls')) {\n    if (settingActive && !pluginActive) {\n      activatePlugin(name, plugin)\n    } else if (pluginActive && !settingActive) {\n      deactivatePlugin(name, plugin)\n    }\n  } else {\n    if (!pluginActive) {\n      activatePlugin(name, plugin)\n    } else if (pluginActive) {\n      deactivatePlugin(name, plugin)\n    }\n  }\n}\n\nexport function activatePlugin (name, plugin) {\n  const event = { name, plugin }\n\n  plugin.activatePlugin()\n  emitter.emit('did-activate-plugin', event)\n}\n\nexport function deactivatePlugin (name, plugin) {\n  const event = { name, plugin }\n\n  plugin.deactivatePlugin()\n  emitter.emit('did-deactivate-plugin', event)\n}\n\n/**\n   * When the `minimap.displayPluginsControls` setting is toggled,\n   * this function will register the commands and setting to manage the plugin\n   * activation from the minimap settings.\n   *\n   * @param {string} name The identifying name of the plugin.\n   * @param {MinimapPlugin} plugin The plugin instance to register\n   *        controls for.\n   * @listens {minimap.plugins.${name}} listen to the setting to update\n   *          the plugin state accordingly.\n   * @listens {minimap:toggle-${name}} listen to the command on `atom-workspace`\n   *          to toggle the plugin state.\n   * @access private\n   */\nfunction registerPluginControls (name, plugin) {\n  const settingsKey = `minimap.plugins.${name}`\n  const orderSettingsKey = `minimap.plugins.${name}DecorationsZIndex`\n\n  const config = getConfigSchema()\n\n  config.plugins.properties[name] = {\n    type: 'boolean',\n    title: name,\n    description: `Whether the ${name} plugin is activated and displayed in the Minimap.`,\n    default: true\n  }\n\n  config.plugins.properties[`${name}DecorationsZIndex`] = {\n    type: 'integer',\n    title: `${name} decorations order`,\n    description: `The relative order of the ${name} plugin's decorations in the layer into which they are drawn. Note that this order only apply inside a layer, so highlight-over decorations will always be displayed above line decorations as they are rendered in different layers.`,\n    default: 0\n  }\n\n  if (atom.config.get(settingsKey) === undefined) {\n    atom.config.set(settingsKey, true)\n  }\n\n  if (atom.config.get(orderSettingsKey) === undefined) {\n    atom.config.set(orderSettingsKey, 0)\n  }\n\n  pluginsSubscriptions[name].add(atom.config.observe(settingsKey, () => {\n    updatesPluginActivationState(name)\n  }))\n\n  pluginsSubscriptions[name].add(atom.config.observe(orderSettingsKey, (order) => {\n    updatePluginsOrderMap(name)\n    const event = { name, plugin, order }\n    emitter.emit('did-change-plugin-order', event)\n  }))\n\n  pluginsSubscriptions[name].add(atom.commands.add('atom-workspace', {\n    [`minimap:toggle-${name}`]: () => {\n      togglePluginActivation(name)\n    }\n  }))\n\n  updatePluginsOrderMap(name)\n}\n\n/**\n   * Updates the display order in the map for the passed-in plugin name.\n   *\n   * @param  {string} name the name of the plugin to update\n   * @access private\n   */\nfunction updatePluginsOrderMap (name) {\n  const orderSettingsKey = `minimap.plugins.${name}DecorationsZIndex`\n\n  pluginsOrderMap[name] = atom.config.get(orderSettingsKey)\n}\n\n/**\n   * Returns the plugins display order mapped by name.\n   *\n   * @return {Object} The plugins order by name\n   */\nexport function getPluginsOrder () { return pluginsOrderMap }\n\n/**\n   * When the `minimap.displayPluginsControls` setting is toggled,\n   * this function will unregister the commands and setting that\n   * was created previously.\n   *\n   * @param {string} name The identifying name of the plugin.\n   * @access private\n   */\nfunction unregisterPluginControls (name) {\n  pluginsSubscriptions[name].dispose()\n  delete pluginsSubscriptions[name]\n  delete getConfigSchema().plugins.properties[name]\n}\n","'use strict'\n\nimport { Emitter, CompositeDisposable } from 'atom'\nimport MinimapElement from './minimap-element'\nimport Minimap from './minimap'\nimport config from './config.json'\nimport * as PluginManagement from './plugin-management'\nimport { treeSitterWarning } from './performance-monitor'\nimport DOMStylesReader from './dom-styles-reader'\n\nexport { default as config } from './config.json'\nexport * from './plugin-management'\nexport { default as Minimap } from './minimap'\n\n/**\n * The `Minimap` package provides an eagle-eye view of text buffers.\n *\n * It also provides API for plugin packages that want to interact with the\n * minimap and be available to the user through the minimap settings.\n */\n\n/**\n     * The activation state of the package.\n     *\n     * @type {boolean}\n     * @access private\n     */\nlet active = false\n/**\n     * The toggle state of the package.\n     *\n     * @type {boolean}\n     * @access private\n     */\nlet toggled = false\n/**\n     * The `Map` where Minimap instances are stored with the text editor they\n     * target as key.\n     *\n     * @type {Map}\n     * @access private\n     */\nlet editorsMinimaps = null\n/**\n     * The composite disposable that stores the package's subscriptions.\n     *\n     * @type {CompositeDisposable}\n     * @access private\n     */\nlet subscriptions = null\n/**\n     * The disposable that stores the package's commands subscription.\n     *\n     * @type {Disposable}\n     * @access private\n     */\nlet subscriptionsOfCommands = null\n\n/**\n     * The package's events emitter.\n     *\n     * @type {Emitter}\n     * @access private\n     */\nexport const emitter = new Emitter()\n\n\n/**\n  DOMStylesReader cache used for storing token colors\n*/\nexport let domStylesReader = null\n\n/**\n   * Activates the minimap package.\n   */\nexport function activate () {\n  if (active) { return }\n\n  subscriptionsOfCommands = atom.commands.add('atom-workspace', {\n    'minimap:toggle': () => {\n      toggle()\n    },\n    'minimap:generate-coffee-plugin': async () => {\n      await generatePlugin('coffee')\n    },\n    'minimap:generate-javascript-plugin': async () => {\n      await generatePlugin('javascript')\n    },\n    'minimap:generate-babel-plugin': async () => {\n      await generatePlugin('babel')\n    }\n  })\n\n  editorsMinimaps = new Map()\n  domStylesReader = new DOMStylesReader()\n\n  subscriptions = new CompositeDisposable()\n  active = true\n\n  if (atom.config.get('minimap.autoToggle')) { toggle() }\n}\n\n/**\n   * Returns a {MinimapElement} for the passed-in model if it's a {Minimap}.\n   *\n   * @param {*} model the model for which returning a view\n   * @return {MinimapElement}\n   */\nexport function minimapViewProvider (model) {\n  if (model instanceof Minimap) {\n    const element = new MinimapElement()\n    element.setModel(model)\n    return element\n  }\n}\n\n/**\n   * Deactivates the minimap package.\n   */\nexport function deactivate () {\n  if (!active) { return }\n\n  PluginManagement.deactivateAllPlugins()\n\n  if (editorsMinimaps) {\n    editorsMinimaps.forEach((value, key) => {\n      value.destroy()\n      editorsMinimaps.delete(key)\n    })\n  }\n\n  subscriptions.dispose()\n  subscriptions = null\n  subscriptionsOfCommands.dispose()\n  subscriptionsOfCommands = null\n  editorsMinimaps = undefined\n  domStylesReader.invalidateDOMStylesCache()\n  toggled = false\n  active = false\n}\n\nexport function getConfigSchema () {\n  return config || atom.packages.getLoadedPackage('minimap').metadata.configSchema\n}\n\n/**\n   * Toggles the minimap display.\n   */\nexport function toggle () {\n  if (!active) { return }\n\n  if (toggled) {\n    toggled = false\n\n    if (editorsMinimaps) {\n      editorsMinimaps.forEach((value, key) => {\n        value.destroy()\n        editorsMinimaps.delete(key)\n      })\n    }\n    subscriptions.dispose()\n  } else {\n    toggled = true\n    initSubscriptions()\n  }\n  domStylesReader.invalidateDOMStylesCache()\n}\n\n/**\n   * Opens the plugin generation view.\n   *\n   * @param  {string} template the name of the template to use\n   */\nasync function generatePlugin (template) {\n  const { default: MinimapPluginGeneratorElement } = await import('./minimap-plugin-generator-element')\n  const view = new MinimapPluginGeneratorElement()\n  view.template = template\n  view.attach()\n}\n\n/**\n   * Registers a callback to listen to the `did-activate` event of the package.\n   *\n   * @param  {function(event:Object):void} callback the callback function\n   * @return {Disposable} a disposable to stop listening to the event\n   */\nexport function onDidActivate (callback) {\n  return emitter.on('did-activate', callback)\n}\n\n/**\n   * Registers a callback to listen to the `did-deactivate` event of the\n   * package.\n   *\n   * @param  {function(event:Object):void} callback the callback function\n   * @return {Disposable} a disposable to stop listening to the event\n   */\nexport function onDidDeactivate (callback) {\n  return emitter.on('did-deactivate', callback)\n}\n\n/**\n   * Registers a callback to listen to the `did-create-minimap` event of the\n   * package.\n   *\n   * @param  {function(event:Object):void} callback the callback function\n   * @return {Disposable} a disposable to stop listening to the event\n   */\nexport function onDidCreateMinimap (callback) {\n  return emitter.on('did-create-minimap', callback)\n}\n\n/**\n   * Registers a callback to listen to the `did-add-plugin` event of the\n   * package.\n   *\n   * @param  {function(event:Object):void} callback the callback function\n   * @return {Disposable} a disposable to stop listening to the event\n   */\nexport function onDidAddPlugin (callback) {\n  return emitter.on('did-add-plugin', callback)\n}\n\n/**\n   * Registers a callback to listen to the `did-remove-plugin` event of the\n   * package.\n   *\n   * @param  {function(event:Object):void} callback the callback function\n   * @return {Disposable} a disposable to stop listening to the event\n   */\nexport function onDidRemovePlugin (callback) {\n  return emitter.on('did-remove-plugin', callback)\n}\n\n/**\n   * Registers a callback to listen to the `did-activate-plugin` event of the\n   * package.\n   *\n   * @param  {function(event:Object):void} callback the callback function\n   * @return {Disposable} a disposable to stop listening to the event\n   */\nexport function onDidActivatePlugin (callback) {\n  return emitter.on('did-activate-plugin', callback)\n}\n\n/**\n   * Registers a callback to listen to the `did-deactivate-plugin` event of the\n   * package.\n   *\n   * @param  {function(event:Object):void} callback the callback function\n   * @return {Disposable} a disposable to stop listening to the event\n   */\nexport function onDidDeactivatePlugin (callback) {\n  return emitter.on('did-deactivate-plugin', callback)\n}\n\n/**\n   * Registers a callback to listen to the `did-change-plugin-order` event of\n   * the package.\n   *\n   * @param  {function(event:Object):void} callback the callback function\n   * @return {Disposable} a disposable to stop listening to the event\n   */\nexport function onDidChangePluginOrder (callback) {\n  return emitter.on('did-change-plugin-order', callback)\n}\n\n/**\n   * Returns the `Minimap` class\n   *\n   * @return {Function} the `Minimap` class constructor\n   */\nexport function minimapClass () {\n  return Minimap\n}\n\n/**\n   * Returns the `Minimap` object associated to the passed-in\n   * `TextEditorElement`.\n   *\n   * @param  {TextEditorElement} editorElement a text editor element\n   * @return {Minimap} the associated minimap\n   */\nexport function minimapForEditorElement (editorElement) {\n  if (!editorElement) { return }\n  return minimapForEditor(editorElement.getModel())\n}\n\n/**\n   * Returns the `Minimap` object associated to the passed-in\n   * `TextEditor`.\n   *\n   * @param  {TextEditor} textEditor a text editor\n   * @return {Minimap} the associated minimap\n   */\nexport function minimapForEditor (textEditor) {\n  if (!textEditor) { return }\n  if (!editorsMinimaps) { return }\n\n  let minimap = editorsMinimaps.get(textEditor)\n\n  if (!minimap) {\n    minimap = new Minimap({ textEditor })\n    editorsMinimaps.set(textEditor, minimap)\n\n    const editorSubscription = textEditor.onDidDestroy(() => {\n      const minimaps = editorsMinimaps\n      if (minimaps) { minimaps.delete(textEditor) }\n      editorSubscription.dispose()\n    })\n  }\n\n  return minimap\n}\n\n/**\n   * Returns a new stand-alone {Minimap} for the passed-in `TextEditor`.\n   *\n   * @param  {TextEditor} textEditor a text editor instance to create\n   *                                 a minimap for\n   * @return {Minimap} a new stand-alone Minimap for the passed-in editor\n   */\nexport function standAloneMinimapForEditor (textEditor) {\n  if (!textEditor) { return }\n\n  return new Minimap({\n    textEditor,\n    standAlone: true\n  })\n}\n\n/**\n   * Returns the `Minimap` associated to the active `TextEditor`.\n   *\n   * @return {Minimap} the active Minimap\n   */\nexport function getActiveMinimap () {\n  return minimapForEditor(atom.workspace.getActiveTextEditor())\n}\n\n/**\n   * Calls a function for each present and future minimaps.\n   *\n   * @param  {function(minimap:Minimap):void} iterator a function to call with\n   *                                                   the existing and future\n   *                                                   minimaps\n   * @return {Disposable} a disposable to unregister the observer\n   */\nexport function observeMinimaps (iterator) {\n  if (!iterator) { return }\n\n  if (editorsMinimaps) {\n    editorsMinimaps.forEach((minimap) => { iterator(minimap) })\n  }\n  return onDidCreateMinimap((minimap) => { iterator(minimap) })\n}\n\n/**\n   * Registers to the `observeTextEditors` method.\n   *\n   * @access private\n   */\nfunction initSubscriptions () {\n  subscriptions.add(\n    atom.workspace.observeTextEditors((textEditor) => {\n      const minimap = minimapForEditor(textEditor)\n      const minimapElement = atom.views.getView(minimap)\n\n      emitter.emit('did-create-minimap', minimap)\n      minimapElement.attach()\n    }),\n    // empty color cache if the theme changes\n    atom.themes.onDidChangeActiveThemes(() => {\n      domStylesReader.invalidateDOMStylesCache()\n      editorsMinimaps.forEach((minimap) => { atom.views.getView(minimap).requestForcedUpdate() })\n    }),\n    treeSitterWarning()\n  )\n}\n\n// The public exports included in the service:\nconst MinimapServiceV1 = {\n  minimapViewProvider,\n  getConfigSchema,\n  onDidActivate,\n  onDidDeactivate,\n  onDidCreateMinimap,\n  onDidAddPlugin,\n  onDidRemovePlugin,\n  onDidActivatePlugin,\n  onDidDeactivatePlugin,\n  onDidChangePluginOrder,\n  minimapClass,\n  minimapForEditorElement,\n  minimapForEditor,\n  standAloneMinimapForEditor,\n  getActiveMinimap,\n  observeMinimaps,\n  registerPlugin: PluginManagement.registerPlugin,\n  unregisterPlugin: PluginManagement.unregisterPlugin,\n  togglePluginActivation: PluginManagement.togglePluginActivation,\n  deactivateAllPlugins: PluginManagement.deactivateAllPlugins,\n  activatePlugin: PluginManagement.activatePlugin,\n  deactivatePlugin: PluginManagement.deactivatePlugin,\n  getPluginsOrder: PluginManagement.getPluginsOrder\n}\n\n/**\n   * Returns the Minimap main module instance.\n   *\n   * @return {Main} The Minimap main module instance.\n   */\nexport function provideMinimapServiceV1 () { return MinimapServiceV1 }\n","// Functions used to recommend the configurations required for the best performance of Minimap\n\nexport function treeSitterWarning () {\n  return observeAndWarn(\n    'core.useTreeSitterParsers',\n    true,\n    'Tree-sitter is off (Low Performance Warning).',\n    `You should turn on Atom's tree-sitter parser to experience the best performance Minimap and Atom is deisgned for.\n    Keeping tree-sitter parser off results in sluggish scrolling and lags in the text editor.`\n  )\n}\n\n/* Utility function that observes a config and throws warnings once a day if it is not the recommended value */\nfunction observeAndWarn (configName, recommendedValue, warningTitle, warningDescription) {\n  return atom.config.observe(configName, value => {\n    if (value !== recommendedValue) {\n      const storageName = `Minimap.${configName}`\n      const today = new Date()\n      const previousWarning = window.localStorage.getItem(storageName)\n      let previousWarningDay = null\n      if (previousWarning) {\n        previousWarningDay = (new Date(Date.parse(previousWarning))).getDay()\n      }\n      // throw the warning once a day\n      if (!previousWarningDay ||\n        (typeof previousWarningDay === 'number' && (previousWarningDay - today.getDay() >= 1))\n      ) {\n        window.localStorage.setItem(storageName, today)\n\n        const notification = atom.notifications.addWarning(\n          warningTitle, {\n            description: warningDescription,\n            dismissable: true,\n            buttons: [\n              {\n                text: `Set to ${recommendedValue} and restart Atom`,\n                onDidClick () {\n                  atom.config.set(configName, true)\n                  notification.dismiss()\n                  window.localStorage.removeItem(storageName)\n                  setTimeout(() => {\n                    atom.reload()\n                  }, 1500)\n                }\n              }\n            ]\n          })\n      }\n    }\n  })\n}\n","(function() {\n  var Deprecation, SourceMapCache;\n\n  SourceMapCache = {};\n\n  module.exports = Deprecation = (function() {\n    Deprecation.getFunctionNameFromCallsite = function(callsite) {};\n\n    Deprecation.deserialize = function(_arg) {\n      var deprecation, fileName, lineNumber, message, stack, stacks, _i, _len;\n      message = _arg.message, fileName = _arg.fileName, lineNumber = _arg.lineNumber, stacks = _arg.stacks;\n      deprecation = new Deprecation(message, fileName, lineNumber);\n      for (_i = 0, _len = stacks.length; _i < _len; _i++) {\n        stack = stacks[_i];\n        deprecation.addStack(stack, stack.metadata);\n      }\n      return deprecation;\n    };\n\n    function Deprecation(message, fileName, lineNumber) {\n      this.message = message;\n      this.fileName = fileName;\n      this.lineNumber = lineNumber;\n      this.callCount = 0;\n      this.stackCount = 0;\n      this.stacks = {};\n      this.stackCallCounts = {};\n    }\n\n    Deprecation.prototype.getFunctionNameFromCallsite = function(callsite) {\n      var _ref, _ref1, _ref2;\n      if (callsite.functionName != null) {\n        return callsite.functionName;\n      }\n      if (callsite.isToplevel()) {\n        return (_ref = callsite.getFunctionName()) != null ? _ref : '<unknown>';\n      } else {\n        if (callsite.isConstructor()) {\n          return \"new \" + (callsite.getFunctionName());\n        } else if (callsite.getMethodName() && !callsite.getFunctionName()) {\n          return callsite.getMethodName();\n        } else {\n          return \"\" + (callsite.getTypeName()) + \".\" + ((_ref1 = (_ref2 = callsite.getMethodName()) != null ? _ref2 : callsite.getFunctionName()) != null ? _ref1 : '<anonymous>');\n        }\n      }\n    };\n\n    Deprecation.prototype.getLocationFromCallsite = function(callsite) {\n      var column, fileName, line;\n      if (callsite == null) {\n        return \"unknown\";\n      }\n      if (callsite.location != null) {\n        return callsite.location;\n      }\n      if (callsite.isNative()) {\n        return \"native\";\n      } else if (callsite.isEval()) {\n        return \"eval at \" + (this.getLocationFromCallsite(callsite.getEvalOrigin()));\n      } else {\n        fileName = callsite.getFileName();\n        line = callsite.getLineNumber();\n        column = callsite.getColumnNumber();\n        return \"\" + fileName + \":\" + line + \":\" + column;\n      }\n    };\n\n    Deprecation.prototype.getFileNameFromCallSite = function(callsite) {\n      var _ref;\n      return (_ref = callsite.fileName) != null ? _ref : callsite.getFileName();\n    };\n\n    Deprecation.prototype.getOriginName = function() {\n      return this.originName;\n    };\n\n    Deprecation.prototype.getMessage = function() {\n      return this.message;\n    };\n\n    Deprecation.prototype.getStacks = function() {\n      var location, parsedStack, parsedStacks, stack, _ref;\n      parsedStacks = [];\n      _ref = this.stacks;\n      for (location in _ref) {\n        stack = _ref[location];\n        parsedStack = this.parseStack(stack);\n        parsedStack.callCount = this.stackCallCounts[location];\n        parsedStack.metadata = stack.metadata;\n        parsedStacks.push(parsedStack);\n      }\n      return parsedStacks;\n    };\n\n    Deprecation.prototype.getStackCount = function() {\n      return this.stackCount;\n    };\n\n    Deprecation.prototype.getCallCount = function() {\n      return this.callCount;\n    };\n\n    Deprecation.prototype.addStack = function(stack, metadata) {\n      var callerLocation, _base, _base1;\n      if (this.originName == null) {\n        this.originName = this.getFunctionNameFromCallsite(stack[0]);\n      }\n      if (this.fileName == null) {\n        this.fileName = this.getFileNameFromCallSite(stack[0]);\n      }\n      if (this.lineNumber == null) {\n        this.lineNumber = typeof (_base = stack[0]).getLineNumber === \"function\" ? _base.getLineNumber() : void 0;\n      }\n      this.callCount++;\n      stack.metadata = metadata;\n      callerLocation = this.getLocationFromCallsite(stack[1]);\n      if (this.stacks[callerLocation] == null) {\n        this.stacks[callerLocation] = stack;\n        this.stackCount++;\n      }\n      if ((_base1 = this.stackCallCounts)[callerLocation] == null) {\n        _base1[callerLocation] = 0;\n      }\n      return this.stackCallCounts[callerLocation]++;\n    };\n\n    Deprecation.prototype.parseStack = function(stack) {\n      return stack.map((function(_this) {\n        return function(callsite) {\n          return {\n            functionName: _this.getFunctionNameFromCallsite(callsite),\n            location: _this.getLocationFromCallsite(callsite),\n            fileName: _this.getFileNameFromCallSite(callsite)\n          };\n        };\n      })(this));\n    };\n\n    Deprecation.prototype.serialize = function() {\n      return {\n        message: this.getMessage(),\n        lineNumber: this.lineNumber,\n        fileName: this.fileName,\n        stacks: this.getStacks()\n      };\n    };\n\n    return Deprecation;\n\n  })();\n\n}).call(this);\n","\"use strict\";\n\nexports.Emitter = require(\"./emitter\");\nexports.Disposable = require(\"./disposable\");\nexports.CompositeDisposable = require(\"./composite-disposable\");","(function() {\n  var Deprecation, Emitter, getRawStack, grim;\n\n  Deprecation = require('./deprecation');\n\n  if (global.__grim__ == null) {\n    Emitter = require('event-kit').Emitter;\n    grim = global.__grim__ = {\n      deprecations: {},\n      emitter: new Emitter,\n      includeDeprecatedAPIs: true,\n      getDeprecations: function() {\n        var deprecation, deprecations, deprecationsByLineNumber, deprecationsByPackage, fileName, lineNumber, packageName, _ref;\n        deprecations = [];\n        _ref = grim.deprecations;\n        for (fileName in _ref) {\n          deprecationsByLineNumber = _ref[fileName];\n          for (lineNumber in deprecationsByLineNumber) {\n            deprecationsByPackage = deprecationsByLineNumber[lineNumber];\n            for (packageName in deprecationsByPackage) {\n              deprecation = deprecationsByPackage[packageName];\n              deprecations.push(deprecation);\n            }\n          }\n        }\n        return deprecations;\n      },\n      getDeprecationsLength: function() {\n        return this.getDeprecations().length;\n      },\n      clearDeprecations: function() {\n        grim.deprecations = {};\n      },\n      logDeprecations: function() {\n        var deprecation, deprecations, _i, _len;\n        deprecations = this.getDeprecations();\n        deprecations.sort(function(a, b) {\n          return b.getCallCount() - a.getCallCount();\n        });\n        console.warn(\"\\nCalls to deprecated functions\\n-----------------------------\");\n        for (_i = 0, _len = deprecations.length; _i < _len; _i++) {\n          deprecation = deprecations[_i];\n          console.warn(\"(\" + (deprecation.getCallCount()) + \") \" + (deprecation.getOriginName()) + \" : \" + (deprecation.getMessage()), deprecation);\n        }\n      },\n      deprecate: function(message, metadata) {\n        var deprecation, deprecationSite, error, fileName, lineNumber, originalStackTraceLimit, packageName, stack, _base, _base1, _base2, _ref, _ref1;\n        originalStackTraceLimit = Error.stackTraceLimit;\n        try {\n          Error.stackTraceLimit = 7;\n          error = new Error;\n          stack = (_ref = typeof error.getRawStack === \"function\" ? error.getRawStack() : void 0) != null ? _ref : getRawStack(error);\n          stack = stack.slice(1);\n        } finally {\n          Error.stackTraceLimit = originalStackTraceLimit;\n        }\n        deprecationSite = stack[0];\n        fileName = deprecationSite.getFileName();\n        lineNumber = deprecationSite.getLineNumber();\n        packageName = (_ref1 = metadata != null ? metadata.packageName : void 0) != null ? _ref1 : \"\";\n        if ((_base = grim.deprecations)[fileName] == null) {\n          _base[fileName] = {};\n        }\n        if ((_base1 = grim.deprecations[fileName])[lineNumber] == null) {\n          _base1[lineNumber] = {};\n        }\n        if ((_base2 = grim.deprecations[fileName][lineNumber])[packageName] == null) {\n          _base2[packageName] = new Deprecation(message);\n        }\n        deprecation = grim.deprecations[fileName][lineNumber][packageName];\n        deprecation.addStack(stack, metadata);\n        grim.emitter.emit(\"updated\", deprecation);\n      },\n      addSerializedDeprecation: function(serializedDeprecation) {\n        var deprecation, fileName, lineNumber, message, packageName, stack, stacks, _base, _base1, _base2, _i, _len, _ref, _ref1, _ref2;\n        deprecation = Deprecation.deserialize(serializedDeprecation);\n        message = deprecation.getMessage();\n        fileName = deprecation.fileName, lineNumber = deprecation.lineNumber;\n        stacks = deprecation.getStacks();\n        packageName = (_ref = (_ref1 = stacks[0]) != null ? (_ref2 = _ref1.metadata) != null ? _ref2.packageName : void 0 : void 0) != null ? _ref : \"\";\n        if ((_base = grim.deprecations)[fileName] == null) {\n          _base[fileName] = {};\n        }\n        if ((_base1 = grim.deprecations[fileName])[lineNumber] == null) {\n          _base1[lineNumber] = {};\n        }\n        if ((_base2 = grim.deprecations[fileName][lineNumber])[packageName] == null) {\n          _base2[packageName] = new Deprecation(message, fileName, lineNumber);\n        }\n        deprecation = grim.deprecations[fileName][lineNumber][packageName];\n        for (_i = 0, _len = stacks.length; _i < _len; _i++) {\n          stack = stacks[_i];\n          deprecation.addStack(stack, stack.metadata);\n        }\n        grim.emitter.emit(\"updated\", deprecation);\n      },\n      on: function(eventName, callback) {\n        return grim.emitter.on(eventName, callback);\n      }\n    };\n  }\n\n  getRawStack = function(error) {\n    var originalPrepareStackTrace, result;\n    originalPrepareStackTrace = Error.prepareStackTrace;\n    Error.prepareStackTrace = function(error, stack) {\n      return stack;\n    };\n    Error.captureStackTrace(error, getRawStack);\n    result = error.stack;\n    Error.prepareStackTrace = originalPrepareStackTrace;\n    return result;\n  };\n\n  module.exports = global.__grim__;\n\n}).call(this);\n","{deprecate} = require 'grim'\n\nif global.__CUSTOM_HTML_ELEMENTS_CLASSES__?\n  global.__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__ = global.__CUSTOM_HTML_ELEMENTS_CLASSES__\n  delete global.__CUSTOM_HTML_ELEMENTS_CLASSES__\nelse\n  global.__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__ ?= {}\n\ncallbackProperties = [\n  'createdCallback'\n  'attachedCallback'\n  'detachedCallback'\n  'attributeChangedCallback'\n]\n\ndecorateElementPrototype = (target, source) ->\n  callbackProperties.forEach (k) ->\n    Object.defineProperty target, k, {\n      value: -> @[\"__#{k}\"]?.apply(this, arguments)\n      writable: true\n      enumerable: true\n      configurable: true\n    }\n\n  Object.getOwnPropertyNames(source).forEach (k) ->\n    return if k in ['constructor']\n\n    descriptor = Object.getOwnPropertyDescriptor(source, k)\n    if callbackProperties.indexOf(k) > -1\n      Object.defineProperty(target, \"__#{k}\", descriptor)\n    else\n      Object.defineProperty(target, k, descriptor)\n\ndecorateElementClass = (target, source) ->\n  Object.getOwnPropertyNames(source).forEach (k) ->\n    return if k in ['length', 'name', 'arguments', 'caller', 'prototype']\n\n    descriptor = Object.getOwnPropertyDescriptor(source, k)\n    Object.defineProperty(target, k, descriptor)\n\nmodule.exports = (nodeName, options) ->\n  {class: klass} = options\n  if klass?\n    proto = klass.prototype\n  else\n    proto = options.prototype ? options\n\n  if proto is options\n    deprecate('Using the prototype as the second argument is deprecated, use the prototype option instead')\n\n\n  if __ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__[nodeName]\n    elementClass = __ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__[nodeName]\n\n    decorateElementPrototype(elementClass.prototype, proto)\n    decorateElementClass(elementClass, klass) if klass?\n\n    elementClass\n  else\n    elementPrototype = Object.create(HTMLElement.prototype)\n    decorateElementPrototype(elementPrototype, proto)\n\n    elementClass = document.registerElement nodeName, prototype: Object.create(elementPrototype)\n\n    decorateElementClass(elementClass, klass) if klass?\n\n    __ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__[nodeName] = elementClass\n","(function() {\n  var ExcludedClassProperties, ExcludedPrototypeProperties, Mixin, name;\n\n  module.exports = Mixin = (function() {\n    Mixin.includeInto = function(constructor) {\n      var name, value, _ref;\n      this.extend(constructor.prototype);\n      for (name in this) {\n        value = this[name];\n        if (ExcludedClassProperties.indexOf(name) === -1) {\n          if (!constructor.hasOwnProperty(name)) {\n            constructor[name] = value;\n          }\n        }\n      }\n      return (_ref = this.included) != null ? _ref.call(constructor) : void 0;\n    };\n\n    Mixin.extend = function(object) {\n      var name, _i, _len, _ref, _ref1;\n      _ref = Object.getOwnPropertyNames(this.prototype);\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        name = _ref[_i];\n        if (ExcludedPrototypeProperties.indexOf(name) === -1) {\n          if (!object.hasOwnProperty(name)) {\n            object[name] = this.prototype[name];\n          }\n        }\n      }\n      return (_ref1 = this.prototype.extended) != null ? _ref1.call(object) : void 0;\n    };\n\n    function Mixin() {\n      if (typeof this.extended === \"function\") {\n        this.extended();\n      }\n    }\n\n    return Mixin;\n\n  })();\n\n  ExcludedClassProperties = ['__super__'];\n\n  for (name in Mixin) {\n    ExcludedClassProperties.push(name);\n  }\n\n  ExcludedPrototypeProperties = ['constructor', 'extended'];\n\n}).call(this);\n","Mixin = require 'mixto'\n\n# Public\nmodule.exports =\nclass Ancestors extends Mixin\n\n  ### Public ###\n\n  @parents: (node, selector='*') ->\n    parents = []\n    @eachParent node, (parent) -> parents.push(parent) if parent.matches?(selector)\n    parents\n\n  @eachParent: (node, block) ->\n    parent = node.parentNode\n\n    block(parent) if parent?\n    while parent = parent.parentNode\n      block(parent) if parent?\n\n  parents: (selector='*') -> Ancestors.parents(this, selector)\n\n  queryParentSelectorAll: (selector) ->\n    unless selector?\n      throw new Error '::queryParentSelectorAll requires a valid selector as argument'\n    @parents(selector)\n\n  queryParentSelector: (selector) ->\n    unless selector?\n      throw new Error '::queryParentSelector requires a valid selector as argument'\n    @queryParentSelectorAll(selector)[0]\n\n  eachParent: (block) -> Ancestors.eachParent(this, block)\n","Mixin = require 'mixto'\n{Disposable} = require 'atom'\n\nmodule.exports =\nclass DisposableEvents extends Mixin\n  addDisposableEventListener: (object, event, listener, options) ->\n    object.addEventListener event, listener, options\n    new Disposable -> object.removeEventListener event, listener\n","Mixin = require 'mixto'\nDisposableEvents = require './disposable-events'\n{Disposable, CompositeDisposable} = require 'atom'\neachPair = (object, callback) -> callback(k,v) for k,v of object\n\nNO_SELECTOR = '__NONE__'\n\nmodule.exports =\nclass EventsDelegation extends Mixin\n  DisposableEvents.includeInto(this)\n\n  subscribeTo: (object, selector, events, options) ->\n    unless object instanceof HTMLElement\n      [object, selector, events, options] = [this, object, selector, events]\n\n    [events, selector, options] = [selector, NO_SELECTOR, events] if typeof selector is 'object'\n\n    @eventsMap ?= new WeakMap\n    @disposablesMap ?= new WeakMap\n    @eventsMap.set(object, {}) unless @eventsMap.get(object)?\n    @disposablesMap.set(object, {}) unless @disposablesMap.get(object)?\n\n    eventsForObject = @eventsMap.get(object)\n    disposablesForObject = @disposablesMap.get(object)\n\n    eachPair events, (event, callback) =>\n      unless eventsForObject[event]?\n        eventsForObject[event] = {}\n        disposablesForObject[event] = @createEventListener(object, event, options)\n\n      eventsForObject[event][selector] = callback\n\n    new Disposable => @unsubscribeFrom object, selector, events\n\n  unsubscribeFrom: (object, selector, events) ->\n    unless object instanceof HTMLElement\n      [object, selector, events] = [this, object, selector]\n\n    [events, selector] = [selector, NO_SELECTOR] if typeof selector is 'object'\n\n    return unless eventsForObject = @eventsMap.get(object)\n\n    for event of events\n      delete eventsForObject[event][selector]\n\n      if Object.keys(eventsForObject[event]).length is 0\n        disposablesForObject = @disposablesMap.get(object)\n        disposablesForObject[event].dispose()\n        delete disposablesForObject[event]\n        delete eventsForObject[event]\n\n    if Object.keys(eventsForObject).length is 0\n      @eventsMap.delete(object)\n      @disposablesMap.delete(object)\n\n  createEventListener: (object, event, options) ->\n    listener = (e) =>\n      return unless eventsForObject = @eventsMap.get(object)?[event]\n\n      {target} = e\n      @decorateEvent(e)\n\n      @eachSelectorFromTarget(e, target, eventsForObject)\n      eventsForObject[NO_SELECTOR]?(e) unless e.isPropagationStopped\n      return true\n\n    @addDisposableEventListener object, event, listener, options\n\n  eachSelectorFromTarget: (event, target, eventsForObject) ->\n    @nodeAndItsAncestors target, (node) =>\n      return if event.isPropagationStopped\n      @eachSelector eventsForObject, (selector,callback) =>\n        matched = @targetMatch(node, selector)\n        return if event.isImmediatePropagationStopped or not matched\n        callback(event)\n\n  eachSelector: (eventsForObject, callback) ->\n    keys = Object.keys(eventsForObject)\n    if keys.indexOf(NO_SELECTOR) isnt - 1\n      keys.splice(keys.indexOf(NO_SELECTOR), 1)\n    keys.sort (a,b) -> b.split(' ').length - a.split(' ').length\n\n    for key in keys\n      return true if callback(key, eventsForObject[key])\n    return false\n\n  targetMatch: (target, selector) ->\n    return true if target.matches(selector)\n\n    parent = target.parentNode\n    while parent? and parent.matches?\n      return true if parent.matches(selector)\n      parent = parent.parentNode\n\n    false\n\n  nodeAndItsAncestors: (node, callback) ->\n    parent = node.parentNode\n\n    callback(node)\n    while parent? and parent.matches?\n      callback(parent)\n      parent = parent.parentNode\n\n  decorateEvent: (e) ->\n    overriddenStop =  Event::stopPropagation\n    e.stopPropagation = ->\n      @isPropagationStopped = true\n      overriddenStop.apply(this, arguments)\n\n    overriddenStopImmediate =  Event::stopImmediatePropagation\n    e.stopImmediatePropagation = ->\n      @isImmediatePropagationStopped = true\n      overriddenStopImmediate.apply(this, arguments)\n","Mixin = require 'mixto'\n\nTags =\n  'a abbr address article aside audio b bdi bdo blockquote body button canvas\n   caption cite code colgroup datalist dd del details dfn dialog div dl dt em\n   fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header html i\n   iframe ins kbd label legend li main map mark menu meter nav noscript object\n   ol optgroup option output p pre progress q rp rt ruby s samp script section\n   select small span strong style sub summary sup table tbody td textarea tfoot\n   th thead time title tr u ul var video area base br col command embed hr img\n   input keygen link meta param source track wbr'.split /\\s+/\n\nSelfClosingTags = {}\n'area base br col command embed hr img input keygen link meta param\n source track wbr'.split(/\\s+/).forEach (tag) -> SelfClosingTags[tag] = true\n\nEvents =\n  'blur change click dblclick error focus input keydown\n   keypress keyup load mousedown mousemove mouseout mouseover\n   mouseup resize scroll select submit unload'.split /\\s+/\n\nclass BabelSpacePenDSL extends Mixin\n  buildContent: ->\n    SpacePenDSL.buildContent(this, @constructor.content) if @constructor.content?\n\nmodule.exports =\nclass SpacePenDSL extends Mixin\n  @Babel: BabelSpacePenDSL\n\n  @includeInto: (klass) ->\n    super(klass)\n\n    Object.defineProperty klass, 'content',\n      enumerable: false\n      get: -> @prototype.__content__\n      set: (value) -> @prototype.__content__ = value\n\n    Object.defineProperty klass::, 'createdCallback',\n      enumerable: true\n      get: -> @__create__\n      set: (value) -> @__createdCallback__ = value\n\n    Object.defineProperty klass::, '__create__',\n      enumerable: true\n      value: ->\n        SpacePenDSL.buildContent(this, @__content__) if @__content__?\n\n        do @__createdCallback__ if @__createdCallback__?\n\n    klass.useShadowRoot = ->\n      klass::__useShadowRoot__ = true\n\n  @buildContent: (element, content) ->\n    template = new Template\n\n    content.call(template)\n\n    [html] = template.buildHtml()\n    root =\n    if element.__useShadowRoot__\n      root = element.shadowRoot = element.createShadowRoot()\n    else\n      root = element\n    root.innerHTML = html\n\n    @wireOutlets(element, root)\n\n  @wireOutlets: (view, root) ->\n    for element in root.querySelectorAll('[outlet]')\n      outlet = element.getAttribute('outlet')\n      view[outlet] = element\n      element.removeAttribute('outlet')\n\n    undefined\n\nclass Template\n  constructor: -> @currentBuilder = new Builder\n\n  Tags.forEach (tagName) ->\n    Template::[tagName] = (args...) -> @currentBuilder.tag(tagName, args...)\n\n  subview: (name, view) -> @currentBuilder.subview(name, view)\n\n  text: (string) -> @currentBuilder.text(string)\n\n  tag: (tagName, args...) -> @currentBuilder.tag(tagName, args...)\n\n  raw: (string) -> @currentBuilder.raw(string)\n\n  buildHtml: -> @currentBuilder.buildHtml()\n\nclass Builder\n  constructor: ->\n    @document = []\n    @postProcessingSteps = []\n\n  buildHtml: ->\n    [@document.join(''), @postProcessingSteps]\n\n  tag: (name, args...) ->\n    options = @extractOptions(args)\n\n    @openTag(name, options.attributes)\n\n    if SelfClosingTags.hasOwnProperty(name)\n      if options.text? or options.content?\n        throw new Error(\"Self-closing tag #{name} cannot have text or content\")\n    else\n      options.content?()\n      @text(options.text) if options.text\n      @closeTag(name)\n\n  openTag: (name, attributes) ->\n    if @document.length is 0\n      attributes ?= {}\n\n    attributePairs =\n      for attributeName, value of attributes\n        \"#{attributeName}=\\\"#{value}\\\"\"\n\n    attributesString =\n      if attributePairs.length\n        \" \" + attributePairs.join(\" \")\n      else\n        \"\"\n\n    @document.push \"<#{name}#{attributesString}>\"\n\n  closeTag: (name) ->\n    @document.push \"</#{name}>\"\n\n  text: (string) ->\n    escapedString = string\n      .replace(/&/g, '&amp;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#39;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n\n    @document.push escapedString\n\n  raw: (string) ->\n    @document.push string\n\n  subview: (outletName, subview) ->\n    subviewId = \"subview-#{++idCounter}\"\n    @tag 'div', id: subviewId\n    @postProcessingSteps.push (view) ->\n      view[outletName] = subview\n      subview.parentView = view\n      view.find(\"div##{subviewId}\").replaceWith(subview)\n\n  extractOptions: (args) ->\n    options = {}\n    for arg in args\n      switch typeof(arg)\n        when 'function'\n          options.content = arg\n        when 'string', 'number'\n          options.text = arg.toString()\n        else\n          options.attributes = arg\n    options\n","\nmodule.exports =\n  requirePackages: (packages...) ->\n    new Promise (resolve, reject) ->\n      required = []\n      failures = []\n      remains = packages.length\n\n      solved = ->\n        remains--\n        return unless remains is 0\n        return reject(failures) if failures.length > 0\n        resolve(required)\n\n      packages.forEach (pkg, i) ->\n        failHandler = (reason) ->\n          failures[i] = reason\n          solved()\n\n        promise = atom.packages.activatePackage(pkg)\n        .then (activatedPackage) ->\n          required[i] = activatedPackage.mainModule\n          solved()\n\n        if promise.fail?\n          promise.fail(failHandler)\n        else if promise.catch?\n          promise.catch(failHandler)\n\n  registerOrUpdateElement: require './register-or-update-element'\n  Ancestors: require './mixins/ancestors'\n  AncestorsMethods: require './mixins/ancestors'\n  DisposableEvents: require './mixins/disposable-events'\n  EventsDelegation: require './mixins/events-delegation'\n  SpacePenDSL: require './mixins/space-pen-dsl'\n","\"use strict\";\n\nvar utils = module.exports = {};\n\n/**\n * Loops through the collection and calls the callback for each element. if the callback returns truthy, the loop is broken and returns the same value.\n * @public\n * @param {*} collection The collection to loop through. Needs to have a length property set and have indices set from 0 to length - 1.\n * @param {function} callback The callback to be called for each element. The element will be given as a parameter to the callback. If this callback returns truthy, the loop is broken and the same value is returned.\n * @returns {*} The value that a callback has returned (if truthy). Otherwise nothing.\n */\nutils.forEach = function(collection, callback) {\n    for(var i = 0; i < collection.length; i++) {\n        var result = callback(collection[i]);\n        if(result) {\n            return result;\n        }\n    }\n};\n","\"use strict\";\n\nvar detector = module.exports = {};\n\ndetector.isIE = function(version) {\n    function isAnyIeVersion() {\n        var agent = navigator.userAgent.toLowerCase();\n        return agent.indexOf(\"msie\") !== -1 || agent.indexOf(\"trident\") !== -1 || agent.indexOf(\" edge/\") !== -1;\n    }\n\n    if(!isAnyIeVersion()) {\n        return false;\n    }\n\n    if(!version) {\n        return true;\n    }\n\n    //Shamelessly stolen from https://gist.github.com/padolsey/527683\n    var ieVersion = (function(){\n        var undef,\n            v = 3,\n            div = document.createElement(\"div\"),\n            all = div.getElementsByTagName(\"i\");\n\n        do {\n            div.innerHTML = \"<!--[if gt IE \" + (++v) + \"]><i></i><![endif]-->\";\n        }\n        while (all[0]);\n\n        return v > 4 ? v : undef;\n    }());\n\n    return version === ieVersion;\n};\n\ndetector.isLegacyOpera = function() {\n    return !!window.opera;\n};\n","\"use strict\";\n\nvar utils = module.exports = {};\n\nutils.getOption = getOption;\n\nfunction getOption(options, name, defaultValue) {\n    var value = options[name];\n\n    if((value === undefined || value === null) && defaultValue !== undefined) {\n        return defaultValue;\n    }\n\n    return value;\n}\n","/**\n * Resize detection strategy that injects divs to elements in order to detect resize events on scroll events.\n * Heavily inspired by: https://github.com/marcj/css-element-queries/blob/master/src/ResizeSensor.js\n */\n\n\"use strict\";\n\nvar forEach = require(\"../collection-utils\").forEach;\n\nmodule.exports = function(options) {\n    options             = options || {};\n    var reporter        = options.reporter;\n    var batchProcessor  = options.batchProcessor;\n    var getState        = options.stateHandler.getState;\n    var hasState        = options.stateHandler.hasState;\n    var idHandler       = options.idHandler;\n\n    if (!batchProcessor) {\n        throw new Error(\"Missing required dependency: batchProcessor\");\n    }\n\n    if (!reporter) {\n        throw new Error(\"Missing required dependency: reporter.\");\n    }\n\n    //TODO: Could this perhaps be done at installation time?\n    var scrollbarSizes = getScrollbarSizes();\n\n    var styleId = \"erd_scroll_detection_scrollbar_style\";\n    var detectionContainerClass = \"erd_scroll_detection_container\";\n\n    function initDocument(targetDocument) {\n        // Inject the scrollbar styling that prevents them from appearing sometimes in Chrome.\n        // The injected container needs to have a class, so that it may be styled with CSS (pseudo elements).\n        injectScrollStyle(targetDocument, styleId, detectionContainerClass);\n    }\n\n    initDocument(window.document);\n\n    function buildCssTextString(rules) {\n        var seperator = options.important ? \" !important; \" : \"; \";\n\n        return (rules.join(seperator) + seperator).trim();\n    }\n\n    function getScrollbarSizes() {\n        var width = 500;\n        var height = 500;\n\n        var child = document.createElement(\"div\");\n        child.style.cssText = buildCssTextString([\"position: absolute\", \"width: \" + width*2 + \"px\", \"height: \" + height*2 + \"px\", \"visibility: hidden\", \"margin: 0\", \"padding: 0\"]);\n\n        var container = document.createElement(\"div\");\n        container.style.cssText = buildCssTextString([\"position: absolute\", \"width: \" + width + \"px\", \"height: \" + height + \"px\", \"overflow: scroll\", \"visibility: none\", \"top: \" + -width*3 + \"px\", \"left: \" + -height*3 + \"px\", \"visibility: hidden\", \"margin: 0\", \"padding: 0\"]);\n\n        container.appendChild(child);\n\n        document.body.insertBefore(container, document.body.firstChild);\n\n        var widthSize = width - container.clientWidth;\n        var heightSize = height - container.clientHeight;\n\n        document.body.removeChild(container);\n\n        return {\n            width: widthSize,\n            height: heightSize\n        };\n    }\n\n    function injectScrollStyle(targetDocument, styleId, containerClass) {\n        function injectStyle(style, method) {\n            method = method || function (element) {\n                targetDocument.head.appendChild(element);\n            };\n\n            var styleElement = targetDocument.createElement(\"style\");\n            styleElement.innerHTML = style;\n            styleElement.id = styleId;\n            method(styleElement);\n            return styleElement;\n        }\n\n        if (!targetDocument.getElementById(styleId)) {\n            var containerAnimationClass = containerClass + \"_animation\";\n            var containerAnimationActiveClass = containerClass + \"_animation_active\";\n            var style = \"/* Created by the element-resize-detector library. */\\n\";\n            style += \".\" + containerClass + \" > div::-webkit-scrollbar { \" + buildCssTextString([\"display: none\"]) + \" }\\n\\n\";\n            style += \".\" + containerAnimationActiveClass + \" { \" + buildCssTextString([\"-webkit-animation-duration: 0.1s\", \"animation-duration: 0.1s\", \"-webkit-animation-name: \" + containerAnimationClass, \"animation-name: \" + containerAnimationClass]) + \" }\\n\";\n            style += \"@-webkit-keyframes \" + containerAnimationClass +  \" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\\n\";\n            style += \"@keyframes \" + containerAnimationClass +          \" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\";\n            injectStyle(style);\n        }\n    }\n\n    function addAnimationClass(element) {\n        element.className += \" \" + detectionContainerClass + \"_animation_active\";\n    }\n\n    function addEvent(el, name, cb) {\n        if (el.addEventListener) {\n            el.addEventListener(name, cb);\n        } else if(el.attachEvent) {\n            el.attachEvent(\"on\" + name, cb);\n        } else {\n            return reporter.error(\"[scroll] Don't know how to add event listeners.\");\n        }\n    }\n\n    function removeEvent(el, name, cb) {\n        if (el.removeEventListener) {\n            el.removeEventListener(name, cb);\n        } else if(el.detachEvent) {\n            el.detachEvent(\"on\" + name, cb);\n        } else {\n            return reporter.error(\"[scroll] Don't know how to remove event listeners.\");\n        }\n    }\n\n    function getExpandElement(element) {\n        return getState(element).container.childNodes[0].childNodes[0].childNodes[0];\n    }\n\n    function getShrinkElement(element) {\n        return getState(element).container.childNodes[0].childNodes[0].childNodes[1];\n    }\n\n    /**\n     * Adds a resize event listener to the element.\n     * @public\n     * @param {element} element The element that should have the listener added.\n     * @param {function} listener The listener callback to be called for each resize event of the element. The element will be given as a parameter to the listener callback.\n     */\n    function addListener(element, listener) {\n        var listeners = getState(element).listeners;\n\n        if (!listeners.push) {\n            throw new Error(\"Cannot add listener to an element that is not detectable.\");\n        }\n\n        getState(element).listeners.push(listener);\n    }\n\n    /**\n     * Makes an element detectable and ready to be listened for resize events. Will call the callback when the element is ready to be listened for resize changes.\n     * @private\n     * @param {object} options Optional options object.\n     * @param {element} element The element to make detectable\n     * @param {function} callback The callback to be called when the element is ready to be listened for resize changes. Will be called with the element as first parameter.\n     */\n    function makeDetectable(options, element, callback) {\n        if (!callback) {\n            callback = element;\n            element = options;\n            options = null;\n        }\n\n        options = options || {};\n\n        function debug() {\n            if (options.debug) {\n                var args = Array.prototype.slice.call(arguments);\n                args.unshift(idHandler.get(element), \"Scroll: \");\n                if (reporter.log.apply) {\n                    reporter.log.apply(null, args);\n                } else {\n                    for (var i = 0; i < args.length; i++) {\n                        reporter.log(args[i]);\n                    }\n                }\n            }\n        }\n\n        function isDetached(element) {\n            function isInDocument(element) {\n                return element === element.ownerDocument.body || element.ownerDocument.body.contains(element);\n            }\n\n            if (!isInDocument(element)) {\n                return true;\n            }\n\n            // FireFox returns null style in hidden iframes. See https://github.com/wnr/element-resize-detector/issues/68 and https://bugzilla.mozilla.org/show_bug.cgi?id=795520\n            if (window.getComputedStyle(element) === null) {\n                return true;\n            }\n\n            return false;\n        }\n\n        function isUnrendered(element) {\n            // Check the absolute positioned container since the top level container is display: inline.\n            var container = getState(element).container.childNodes[0];\n            var style = window.getComputedStyle(container);\n            return !style.width || style.width.indexOf(\"px\") === -1; //Can only compute pixel value when rendered.\n        }\n\n        function getStyle() {\n            // Some browsers only force layouts when actually reading the style properties of the style object, so make sure that they are all read here,\n            // so that the user of the function can be sure that it will perform the layout here, instead of later (important for batching).\n            var elementStyle            = window.getComputedStyle(element);\n            var style                   = {};\n            style.position              = elementStyle.position;\n            style.width                 = element.offsetWidth;\n            style.height                = element.offsetHeight;\n            style.top                   = elementStyle.top;\n            style.right                 = elementStyle.right;\n            style.bottom                = elementStyle.bottom;\n            style.left                  = elementStyle.left;\n            style.widthCSS              = elementStyle.width;\n            style.heightCSS             = elementStyle.height;\n            return style;\n        }\n\n        function storeStartSize() {\n            var style = getStyle();\n            getState(element).startSize = {\n                width: style.width,\n                height: style.height\n            };\n            debug(\"Element start size\", getState(element).startSize);\n        }\n\n        function initListeners() {\n            getState(element).listeners = [];\n        }\n\n        function storeStyle() {\n            debug(\"storeStyle invoked.\");\n            if (!getState(element)) {\n                debug(\"Aborting because element has been uninstalled\");\n                return;\n            }\n\n            var style = getStyle();\n            getState(element).style = style;\n        }\n\n        function storeCurrentSize(element, width, height) {\n            getState(element).lastWidth = width;\n            getState(element).lastHeight  = height;\n        }\n\n        function getExpandChildElement(element) {\n            return getExpandElement(element).childNodes[0];\n        }\n\n        function getWidthOffset() {\n            return 2 * scrollbarSizes.width + 1;\n        }\n\n        function getHeightOffset() {\n            return 2 * scrollbarSizes.height + 1;\n        }\n\n        function getExpandWidth(width) {\n            return width + 10 + getWidthOffset();\n        }\n\n        function getExpandHeight(height) {\n            return height + 10 + getHeightOffset();\n        }\n\n        function getShrinkWidth(width) {\n            return width * 2 + getWidthOffset();\n        }\n\n        function getShrinkHeight(height) {\n            return height * 2 + getHeightOffset();\n        }\n\n        function positionScrollbars(element, width, height) {\n            var expand          = getExpandElement(element);\n            var shrink          = getShrinkElement(element);\n            var expandWidth     = getExpandWidth(width);\n            var expandHeight    = getExpandHeight(height);\n            var shrinkWidth     = getShrinkWidth(width);\n            var shrinkHeight    = getShrinkHeight(height);\n            expand.scrollLeft   = expandWidth;\n            expand.scrollTop    = expandHeight;\n            shrink.scrollLeft   = shrinkWidth;\n            shrink.scrollTop    = shrinkHeight;\n        }\n\n        function injectContainerElement() {\n            var container = getState(element).container;\n\n            if (!container) {\n                container                   = document.createElement(\"div\");\n                container.className         = detectionContainerClass;\n                container.style.cssText     = buildCssTextString([\"visibility: hidden\", \"display: inline\", \"width: 0px\", \"height: 0px\", \"z-index: -1\", \"overflow: hidden\", \"margin: 0\", \"padding: 0\"]);\n                getState(element).container = container;\n                addAnimationClass(container);\n                element.appendChild(container);\n\n                var onAnimationStart = function () {\n                    getState(element).onRendered && getState(element).onRendered();\n                };\n\n                addEvent(container, \"animationstart\", onAnimationStart);\n\n                // Store the event handler here so that they may be removed when uninstall is called.\n                // See uninstall function for an explanation why it is needed.\n                getState(element).onAnimationStart = onAnimationStart;\n            }\n\n            return container;\n        }\n\n        function injectScrollElements() {\n            function alterPositionStyles() {\n                var style = getState(element).style;\n\n                if(style.position === \"static\") {\n                    element.style.setProperty(\"position\", \"relative\",options.important ? \"important\" : \"\");\n\n                    var removeRelativeStyles = function(reporter, element, style, property) {\n                        function getNumericalValue(value) {\n                            return value.replace(/[^-\\d\\.]/g, \"\");\n                        }\n\n                        var value = style[property];\n\n                        if(value !== \"auto\" && getNumericalValue(value) !== \"0\") {\n                            reporter.warn(\"An element that is positioned static has style.\" + property + \"=\" + value + \" which is ignored due to the static positioning. The element will need to be positioned relative, so the style.\" + property + \" will be set to 0. Element: \", element);\n                            element.style[property] = 0;\n                        }\n                    };\n\n                    //Check so that there are no accidental styles that will make the element styled differently now that is is relative.\n                    //If there are any, set them to 0 (this should be okay with the user since the style properties did nothing before [since the element was positioned static] anyway).\n                    removeRelativeStyles(reporter, element, style, \"top\");\n                    removeRelativeStyles(reporter, element, style, \"right\");\n                    removeRelativeStyles(reporter, element, style, \"bottom\");\n                    removeRelativeStyles(reporter, element, style, \"left\");\n                }\n            }\n\n            function getLeftTopBottomRightCssText(left, top, bottom, right) {\n                left = (!left ? \"0\" : (left + \"px\"));\n                top = (!top ? \"0\" : (top + \"px\"));\n                bottom = (!bottom ? \"0\" : (bottom + \"px\"));\n                right = (!right ? \"0\" : (right + \"px\"));\n\n                return [\"left: \" + left, \"top: \" + top, \"right: \" + right, \"bottom: \" + bottom];\n            }\n\n            debug(\"Injecting elements\");\n\n            if (!getState(element)) {\n                debug(\"Aborting because element has been uninstalled\");\n                return;\n            }\n\n            alterPositionStyles();\n\n            var rootContainer = getState(element).container;\n\n            if (!rootContainer) {\n                rootContainer = injectContainerElement();\n            }\n\n            // Due to this WebKit bug https://bugs.webkit.org/show_bug.cgi?id=80808 (currently fixed in Blink, but still present in WebKit browsers such as Safari),\n            // we need to inject two containers, one that is width/height 100% and another that is left/top -1px so that the final container always is 1x1 pixels bigger than\n            // the targeted element.\n            // When the bug is resolved, \"containerContainer\" may be removed.\n\n            // The outer container can occasionally be less wide than the targeted when inside inline elements element in WebKit (see https://bugs.webkit.org/show_bug.cgi?id=152980).\n            // This should be no problem since the inner container either way makes sure the injected scroll elements are at least 1x1 px.\n\n            var scrollbarWidth          = scrollbarSizes.width;\n            var scrollbarHeight         = scrollbarSizes.height;\n            var containerContainerStyle = buildCssTextString([\"position: absolute\", \"flex: none\", \"overflow: hidden\", \"z-index: -1\", \"visibility: hidden\", \"width: 100%\", \"height: 100%\", \"left: 0px\", \"top: 0px\"]);\n            var containerStyle          = buildCssTextString([\"position: absolute\", \"flex: none\", \"overflow: hidden\", \"z-index: -1\", \"visibility: hidden\"].concat(getLeftTopBottomRightCssText(-(1 + scrollbarWidth), -(1 + scrollbarHeight), -scrollbarHeight, -scrollbarWidth)));\n            var expandStyle             = buildCssTextString([\"position: absolute\", \"flex: none\", \"overflow: scroll\", \"z-index: -1\", \"visibility: hidden\", \"width: 100%\", \"height: 100%\"]);\n            var shrinkStyle             = buildCssTextString([\"position: absolute\", \"flex: none\", \"overflow: scroll\", \"z-index: -1\", \"visibility: hidden\", \"width: 100%\", \"height: 100%\"]);\n            var expandChildStyle        = buildCssTextString([\"position: absolute\", \"left: 0\", \"top: 0\"]);\n            var shrinkChildStyle        = buildCssTextString([\"position: absolute\", \"width: 200%\", \"height: 200%\"]);\n\n            var containerContainer      = document.createElement(\"div\");\n            var container               = document.createElement(\"div\");\n            var expand                  = document.createElement(\"div\");\n            var expandChild             = document.createElement(\"div\");\n            var shrink                  = document.createElement(\"div\");\n            var shrinkChild             = document.createElement(\"div\");\n\n            // Some browsers choke on the resize system being rtl, so force it to ltr. https://github.com/wnr/element-resize-detector/issues/56\n            // However, dir should not be set on the top level container as it alters the dimensions of the target element in some browsers.\n            containerContainer.dir              = \"ltr\";\n\n            containerContainer.style.cssText    = containerContainerStyle;\n            containerContainer.className        = detectionContainerClass;\n            container.className                 = detectionContainerClass;\n            container.style.cssText             = containerStyle;\n            expand.style.cssText                = expandStyle;\n            expandChild.style.cssText           = expandChildStyle;\n            shrink.style.cssText                = shrinkStyle;\n            shrinkChild.style.cssText           = shrinkChildStyle;\n\n            expand.appendChild(expandChild);\n            shrink.appendChild(shrinkChild);\n            container.appendChild(expand);\n            container.appendChild(shrink);\n            containerContainer.appendChild(container);\n            rootContainer.appendChild(containerContainer);\n\n            function onExpandScroll() {\n                getState(element).onExpand && getState(element).onExpand();\n            }\n\n            function onShrinkScroll() {\n                getState(element).onShrink && getState(element).onShrink();\n            }\n\n            addEvent(expand, \"scroll\", onExpandScroll);\n            addEvent(shrink, \"scroll\", onShrinkScroll);\n\n            // Store the event handlers here so that they may be removed when uninstall is called.\n            // See uninstall function for an explanation why it is needed.\n            getState(element).onExpandScroll = onExpandScroll;\n            getState(element).onShrinkScroll = onShrinkScroll;\n        }\n\n        function registerListenersAndPositionElements() {\n            function updateChildSizes(element, width, height) {\n                var expandChild             = getExpandChildElement(element);\n                var expandWidth             = getExpandWidth(width);\n                var expandHeight            = getExpandHeight(height);\n                expandChild.style.setProperty(\"width\", expandWidth + \"px\", options.important ? \"important\" : \"\");\n                expandChild.style.setProperty(\"height\", expandHeight + \"px\", options.important ? \"important\" : \"\");\n            }\n\n            function updateDetectorElements(done) {\n                var width           = element.offsetWidth;\n                var height          = element.offsetHeight;\n\n                // Check whether the size has actually changed since last time the algorithm ran. If not, some steps may be skipped.\n                var sizeChanged = width !== getState(element).lastWidth || height !== getState(element).lastHeight;\n\n                debug(\"Storing current size\", width, height);\n\n                // Store the size of the element sync here, so that multiple scroll events may be ignored in the event listeners.\n                // Otherwise the if-check in handleScroll is useless.\n                storeCurrentSize(element, width, height);\n\n                // Since we delay the processing of the batch, there is a risk that uninstall has been called before the batch gets to execute.\n                // Since there is no way to cancel the fn executions, we need to add an uninstall guard to all fns of the batch.\n\n                batchProcessor.add(0, function performUpdateChildSizes() {\n                    if (!sizeChanged) {\n                        return;\n                    }\n\n                    if (!getState(element)) {\n                        debug(\"Aborting because element has been uninstalled\");\n                        return;\n                    }\n\n                    if (!areElementsInjected()) {\n                        debug(\"Aborting because element container has not been initialized\");\n                        return;\n                    }\n\n                    if (options.debug) {\n                        var w = element.offsetWidth;\n                        var h = element.offsetHeight;\n\n                        if (w !== width || h !== height) {\n                            reporter.warn(idHandler.get(element), \"Scroll: Size changed before updating detector elements.\");\n                        }\n                    }\n\n                    updateChildSizes(element, width, height);\n                });\n\n                batchProcessor.add(1, function updateScrollbars() {\n                    // This function needs to be invoked event though the size is unchanged. The element could have been resized very quickly and then\n                    // been restored to the original size, which will have changed the scrollbar positions.\n\n                    if (!getState(element)) {\n                        debug(\"Aborting because element has been uninstalled\");\n                        return;\n                    }\n\n                    if (!areElementsInjected()) {\n                        debug(\"Aborting because element container has not been initialized\");\n                        return;\n                    }\n\n                    positionScrollbars(element, width, height);\n                });\n\n                if (sizeChanged && done) {\n                    batchProcessor.add(2, function () {\n                        if (!getState(element)) {\n                            debug(\"Aborting because element has been uninstalled\");\n                            return;\n                        }\n\n                        if (!areElementsInjected()) {\n                          debug(\"Aborting because element container has not been initialized\");\n                          return;\n                        }\n\n                        done();\n                    });\n                }\n            }\n\n            function areElementsInjected() {\n                return !!getState(element).container;\n            }\n\n            function notifyListenersIfNeeded() {\n                function isFirstNotify() {\n                    return getState(element).lastNotifiedWidth === undefined;\n                }\n\n                debug(\"notifyListenersIfNeeded invoked\");\n\n                var state = getState(element);\n\n                // Don't notify if the current size is the start size, and this is the first notification.\n                if (isFirstNotify() && state.lastWidth === state.startSize.width && state.lastHeight === state.startSize.height) {\n                    return debug(\"Not notifying: Size is the same as the start size, and there has been no notification yet.\");\n                }\n\n                // Don't notify if the size already has been notified.\n                if (state.lastWidth === state.lastNotifiedWidth && state.lastHeight === state.lastNotifiedHeight) {\n                    return debug(\"Not notifying: Size already notified\");\n                }\n\n\n                debug(\"Current size not notified, notifying...\");\n                state.lastNotifiedWidth = state.lastWidth;\n                state.lastNotifiedHeight = state.lastHeight;\n                forEach(getState(element).listeners, function (listener) {\n                    listener(element);\n                });\n            }\n\n            function handleRender() {\n                debug(\"startanimation triggered.\");\n\n                if (isUnrendered(element)) {\n                    debug(\"Ignoring since element is still unrendered...\");\n                    return;\n                }\n\n                debug(\"Element rendered.\");\n                var expand = getExpandElement(element);\n                var shrink = getShrinkElement(element);\n                if (expand.scrollLeft === 0 || expand.scrollTop === 0 || shrink.scrollLeft === 0 || shrink.scrollTop === 0) {\n                    debug(\"Scrollbars out of sync. Updating detector elements...\");\n                    updateDetectorElements(notifyListenersIfNeeded);\n                }\n            }\n\n            function handleScroll() {\n                debug(\"Scroll detected.\");\n\n                if (isUnrendered(element)) {\n                    // Element is still unrendered. Skip this scroll event.\n                    debug(\"Scroll event fired while unrendered. Ignoring...\");\n                    return;\n                }\n\n                updateDetectorElements(notifyListenersIfNeeded);\n            }\n\n            debug(\"registerListenersAndPositionElements invoked.\");\n\n            if (!getState(element)) {\n                debug(\"Aborting because element has been uninstalled\");\n                return;\n            }\n\n            getState(element).onRendered = handleRender;\n            getState(element).onExpand = handleScroll;\n            getState(element).onShrink = handleScroll;\n\n            var style = getState(element).style;\n            updateChildSizes(element, style.width, style.height);\n        }\n\n        function finalizeDomMutation() {\n            debug(\"finalizeDomMutation invoked.\");\n\n            if (!getState(element)) {\n                debug(\"Aborting because element has been uninstalled\");\n                return;\n            }\n\n            var style = getState(element).style;\n            storeCurrentSize(element, style.width, style.height);\n            positionScrollbars(element, style.width, style.height);\n        }\n\n        function ready() {\n            callback(element);\n        }\n\n        function install() {\n            debug(\"Installing...\");\n            initListeners();\n            storeStartSize();\n\n            batchProcessor.add(0, storeStyle);\n            batchProcessor.add(1, injectScrollElements);\n            batchProcessor.add(2, registerListenersAndPositionElements);\n            batchProcessor.add(3, finalizeDomMutation);\n            batchProcessor.add(4, ready);\n        }\n\n        debug(\"Making detectable...\");\n\n        if (isDetached(element)) {\n            debug(\"Element is detached\");\n\n            injectContainerElement();\n\n            debug(\"Waiting until element is attached...\");\n\n            getState(element).onRendered = function () {\n                debug(\"Element is now attached\");\n                install();\n            };\n        } else {\n            install();\n        }\n    }\n\n    function uninstall(element) {\n        var state = getState(element);\n\n        if (!state) {\n            // Uninstall has been called on a non-erd element.\n            return;\n        }\n\n        // Uninstall may have been called in the following scenarios:\n        // (1) Right between the sync code and async batch (here state.busy = true, but nothing have been registered or injected).\n        // (2) In the ready callback of the last level of the batch by another element (here, state.busy = true, but all the stuff has been injected).\n        // (3) After the installation process (here, state.busy = false and all the stuff has been injected).\n        // So to be on the safe side, let's check for each thing before removing.\n\n        // We need to remove the event listeners, because otherwise the event might fire on an uninstall element which results in an error when trying to get the state of the element.\n        state.onExpandScroll && removeEvent(getExpandElement(element), \"scroll\", state.onExpandScroll);\n        state.onShrinkScroll && removeEvent(getShrinkElement(element), \"scroll\", state.onShrinkScroll);\n        state.onAnimationStart && removeEvent(state.container, \"animationstart\", state.onAnimationStart);\n\n        state.container && element.removeChild(state.container);\n    }\n\n    return {\n        makeDetectable: makeDetectable,\n        addListener: addListener,\n        uninstall: uninstall,\n        initDocument: initDocument\n    };\n};\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('String');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Number');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Date');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('RegExp');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Error');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Symbol');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Map');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakMap');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Set');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakSet');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('ArrayBuffer');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('DataView');\n","import { nativeIsArray } from './_setup.js';\nimport tagTester from './_tagTester.js';\n\n// Is a given value an array?\n// Delegates to ECMA5's native `Array.isArray`.\nexport default nativeIsArray || tagTester('Array');\n","import tagTester from './_tagTester.js';\nimport { root } from './_setup.js';\n\nvar isFunction = tagTester('Function');\n\n// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\n// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nvar nodelist = root.document && root.document.childNodes;\nif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n  isFunction = function(obj) {\n    return typeof obj == 'function' || false;\n  };\n}\n\nexport default isFunction;\n","import tagTester from './_tagTester.js';\nimport has from './_has.js';\n\nvar isArguments = tagTester('Arguments');\n\n// Define a fallback version of the method in browsers (ahem, IE < 9), where\n// there isn't any inspectable \"Arguments\" type.\n(function() {\n  if (!isArguments(arguments)) {\n    isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n}());\n\nexport default isArguments;\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `byteLength` property of an object.\nexport default shallowProperty('byteLength');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getByteLength from './_getByteLength.js';\n\n// Internal helper to determine whether we should spend extensive checks against\n// `ArrayBuffer` et al.\nexport default createSizePropertyCheck(getByteLength);\n","import { supportsArrayBuffer, nativeIsView, toString } from './_setup.js';\nimport isDataView from './isDataView.js';\nimport constant from './constant.js';\nimport isBufferLike from './_isBufferLike.js';\n\n// Is a given value a typed array?\nvar typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\nfunction isTypedArray(obj) {\n  // `ArrayBuffer.isView` is the most future-proof, so use it when available.\n  // Otherwise, fall back on the above regular expression.\n  return nativeIsView ? (nativeIsView(obj) && !isDataView(obj)) :\n                isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\n}\n\nexport default supportsArrayBuffer ? isTypedArray : constant(false);\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `length` property of an object.\nexport default shallowProperty('length');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getLength from './_getLength.js';\n\n// Internal helper for collection methods to determine whether a collection\n// should be iterated as an array or as an object.\n// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\nexport default createSizePropertyCheck(getLength);\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Extend a given object with all the properties in passed-in object(s).\nexport default createAssigner(allKeys);\n","import createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n// Assigns a given object with all the own properties in the passed-in\n// object(s).\n// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\nexport default createAssigner(keys);\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Fill in a given object with default properties.\nexport default createAssigner(allKeys, true);\n","// A (possibly faster) way to get the current timestamp as an integer.\nexport default Date.now || function() {\n  return new Date().getTime();\n};\n","// Internal list of HTML entities for escaping.\nexport default {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n","import createEscaper from './_createEscaper.js';\nimport escapeMap from './_escapeMap.js';\n\n// Function for escaping strings to HTML interpolation.\nexport default createEscaper(escapeMap);\n","import createEscaper from './_createEscaper.js';\nimport unescapeMap from './_unescapeMap.js';\n\n// Function for unescaping strings from HTML interpolation.\nexport default createEscaper(unescapeMap);\n","import invert from './invert.js';\nimport escapeMap from './_escapeMap.js';\n\n// Internal list of HTML entities for unescaping.\nexport default invert(escapeMap);\n","import _ from './underscore.js';\n\n// By default, Underscore uses ERB-style template delimiters. Change the\n// following template settings to use alternative delimiters.\nexport default _.templateSettings = {\n  evaluate: /<%([\\s\\S]+?)%>/g,\n  interpolate: /<%=([\\s\\S]+?)%>/g,\n  escape: /<%-([\\s\\S]+?)%>/g\n};\n","import restArguments from './restArguments.js';\nimport executeBound from './_executeBound.js';\nimport _ from './underscore.js';\n\n// Partially apply a function by creating a version that has had some of its\n// arguments pre-filled, without changing its dynamic `this` context. `_` acts\n// as a placeholder by default, allowing any combination of arguments to be\n// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\nvar partial = restArguments(function(func, boundArgs) {\n  var placeholder = partial.placeholder;\n  var bound = function() {\n    var position = 0, length = boundArgs.length;\n    var args = Array(length);\n    for (var i = 0; i < length; i++) {\n      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n    }\n    while (position < arguments.length) args.push(arguments[position++]);\n    return executeBound(func, bound, this, this, args);\n  };\n  return bound;\n});\n\npartial.placeholder = _;\nexport default partial;\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport executeBound from './_executeBound.js';\n\n// Create a function bound to a given object (assigning `this`, and arguments,\n// optionally).\nexport default restArguments(function(func, context, args) {\n  if (!isFunction(func)) throw new TypeError('Bind must be called on a function');\n  var bound = restArguments(function(callArgs) {\n    return executeBound(func, bound, context, this, args.concat(callArgs));\n  });\n  return bound;\n});\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport bind from './bind.js';\n\n// Bind a number of an object's methods to that object. Remaining arguments\n// are the method names to be bound. Useful for ensuring that all callbacks\n// defined on an object belong to it.\nexport default restArguments(function(obj, keys) {\n  keys = flatten(keys, false, false);\n  var index = keys.length;\n  if (index < 1) throw new Error('bindAll must be passed function names');\n  while (index--) {\n    var key = keys[index];\n    obj[key] = bind(obj[key], obj);\n  }\n  return obj;\n});\n","import restArguments from './restArguments.js';\n\n// Delays a function for the given number of milliseconds, and then calls\n// it with the arguments supplied.\nexport default restArguments(function(func, wait, args) {\n  return setTimeout(function() {\n    return func.apply(null, args);\n  }, wait);\n});\n","import partial from './partial.js';\nimport delay from './delay.js';\nimport _ from './underscore.js';\n\n// Defers a function, scheduling it to run after the current call stack has\n// cleared.\nexport default partial(delay, _, 1);\n","import partial from './partial.js';\nimport before from './before.js';\n\n// Returns a function that will be executed at most one time, no matter how\n// often you call it. Useful for lazy initialization.\nexport default partial(before, 2);\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the first index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(1);\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the last index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(-1);\n","import sortedIndex from './sortedIndex.js';\nimport findIndex from './findIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the first occurrence of an item in an array,\n// or -1 if the item is not included in the array.\n// If the array is large and already in sort order, pass `true`\n// for **isSorted** to use binary search.\nexport default createIndexFinder(1, findIndex, sortedIndex);\n","import findLastIndex from './findLastIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the last occurrence of an item in an array,\n// or -1 if the item is not included in the array.\nexport default createIndexFinder(-1, findLastIndex);\n","import createReduce from './_createReduce.js';\n\n// **Reduce** builds up a single result from a list of values, aka `inject`,\n// or `foldl`.\nexport default createReduce(1);\n","import createReduce from './_createReduce.js';\n\n// The right-associative version of reduce, also known as `foldr`.\nexport default createReduce(-1);\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport isArray from './isArray.js';\nimport map from './map.js';\nimport deepGet from './_deepGet.js';\n\n// Invoke a method (with arguments) on every item in a collection.\nexport default restArguments(function(obj, path, args) {\n  var contextPath, func;\n  if (isFunction(path)) {\n    func = path;\n  } else if (isArray(path)) {\n    contextPath = path.slice(0, -1);\n    path = path[path.length - 1];\n  }\n  return map(obj, function(context) {\n    var method = func;\n    if (!method) {\n      if (contextPath && contextPath.length) {\n        context = deepGet(context, contextPath);\n      }\n      if (context == null) return void 0;\n      method = context[path];\n    }\n    return method == null ? method : method.apply(context, args);\n  });\n});\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Groups the object's values by a criterion. Pass either a string attribute\n// to group by, or a function that returns the criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key].push(value); else result[key] = [value];\n});\n","import group from './_group.js';\n\n// Indexes the object's values by a criterion, similar to `_.groupBy`, but for\n// when you know that your index values will be unique.\nexport default group(function(result, value, key) {\n  result[key] = value;\n});\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Counts instances of an object that group by a certain criterion. Pass\n// either a string attribute to count by, or a function that returns the\n// criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key]++; else result[key] = 1;\n});\n","import group from './_group.js';\n\n// Split a collection into two arrays: one whose elements all pass the given\n// truth test, and one whose elements all do not pass the truth test.\nexport default group(function(result, value, pass) {\n  result[pass ? 0 : 1].push(value);\n}, true);\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport optimizeCb from './_optimizeCb.js';\nimport allKeys from './allKeys.js';\nimport keyInObj from './_keyInObj.js';\nimport flatten from './_flatten.js';\n\n// Return a copy of the object only containing the allowed properties.\nexport default restArguments(function(obj, keys) {\n  var result = {}, iteratee = keys[0];\n  if (obj == null) return result;\n  if (isFunction(iteratee)) {\n    if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n    keys = allKeys(obj);\n  } else {\n    iteratee = keyInObj;\n    keys = flatten(keys, false, false);\n    obj = Object(obj);\n  }\n  for (var i = 0, length = keys.length; i < length; i++) {\n    var key = keys[i];\n    var value = obj[key];\n    if (iteratee(value, key, obj)) result[key] = value;\n  }\n  return result;\n});\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport negate from './negate.js';\nimport map from './map.js';\nimport flatten from './_flatten.js';\nimport contains from './contains.js';\nimport pick from './pick.js';\n\n// Return a copy of the object without the disallowed properties.\nexport default restArguments(function(obj, keys) {\n  var iteratee = keys[0], context;\n  if (isFunction(iteratee)) {\n    iteratee = negate(iteratee);\n    if (keys.length > 1) context = keys[1];\n  } else {\n    keys = map(flatten(keys, false, false), String);\n    iteratee = function(value, key) {\n      return !contains(keys, key);\n    };\n  }\n  return pick(obj, iteratee, context);\n});\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport filter from './filter.js';\nimport contains from './contains.js';\n\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\nexport default restArguments(function(array, rest) {\n  rest = flatten(rest, true, true);\n  return filter(array, function(value){\n    return !contains(rest, value);\n  });\n});\n","import restArguments from './restArguments.js';\nimport difference from './difference.js';\n\n// Return a version of the array that does not contain the specified value(s).\nexport default restArguments(function(array, otherArrays) {\n  return difference(array, otherArrays);\n});\n","import restArguments from './restArguments.js';\nimport uniq from './uniq.js';\nimport flatten from './_flatten.js';\n\n// Produce an array that contains the union: each distinct element from all of\n// the passed-in arrays.\nexport default restArguments(function(arrays) {\n  return uniq(flatten(arrays, true, true));\n});\n","import restArguments from './restArguments.js';\nimport unzip from './unzip.js';\n\n// Zip together multiple lists into a single array -- elements that share\n// an index go together.\nexport default restArguments(unzip);\n","import _ from './underscore.js';\nimport each from './each.js';\nimport { ArrayProto } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add all mutator `Array` functions to the wrapper.\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) {\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n    }\n    return chainResult(this, obj);\n  };\n});\n\n// Add all accessor `Array` functions to the wrapper.\neach(['concat', 'join', 'slice'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) obj = method.apply(obj, arguments);\n    return chainResult(this, obj);\n  };\n});\n\nexport default _;\n","// Default Export\n// ==============\n// In this module, we mix our bundled exports into the `_` object and export\n// the result. This is analogous to setting `module.exports = _` in CommonJS.\n// Hence, this module is also the entry point of our UMD bundle and the package\n// entry point for CommonJS and AMD users. In other words, this is (the source\n// of) the module you are interfacing with when you do any of the following:\n//\n// ```js\n// // CommonJS\n// var _ = require('underscore');\n//\n// // AMD\n// define(['underscore'], function(_) {...});\n//\n// // UMD in the browser\n// // _ is available as a global variable\n// ```\nimport * as allExports from './index.js';\nimport { mixin } from './index.js';\n\n// Add all of the Underscore functions to the wrapper object.\nvar _ = mixin(allExports);\n// Legacy Node.js API.\n_._ = _;\n// Export the Underscore API.\nexport default _;\n","(function() {\n  var isEqual, isPlainObject, macModifierKeyMap, nonMacModifierKeyMap, plus, shiftKeyMap, splitKeyPath, _,\n    __slice = [].slice;\n\n  _ = require('underscore');\n\n  macModifierKeyMap = {\n    cmd: '\\u2318',\n    ctrl: '\\u2303',\n    alt: '\\u2325',\n    option: '\\u2325',\n    shift: '\\u21e7',\n    enter: '\\u23ce',\n    left: '\\u2190',\n    right: '\\u2192',\n    up: '\\u2191',\n    down: '\\u2193'\n  };\n\n  nonMacModifierKeyMap = {\n    cmd: 'Cmd',\n    ctrl: 'Ctrl',\n    alt: 'Alt',\n    option: 'Alt',\n    shift: 'Shift',\n    enter: 'Enter',\n    left: 'Left',\n    right: 'Right',\n    up: 'Up',\n    down: 'Down'\n  };\n\n  shiftKeyMap = {\n    '~': '`',\n    '_': '-',\n    '+': '=',\n    '|': '\\\\',\n    '{': '[',\n    '}': ']',\n    ':': ';',\n    '\"': '\\'',\n    '<': ',',\n    '>': '.',\n    '?': '/'\n  };\n\n  splitKeyPath = function(keyPath) {\n    var char, i, keyPathArray, startIndex, _i, _len;\n    startIndex = 0;\n    keyPathArray = [];\n    if (keyPath == null) {\n      return keyPathArray;\n    }\n    for (i = _i = 0, _len = keyPath.length; _i < _len; i = ++_i) {\n      char = keyPath[i];\n      if (char === '.' && (i === 0 || keyPath[i - 1] !== '\\\\')) {\n        keyPathArray.push(keyPath.substring(startIndex, i));\n        startIndex = i + 1;\n      }\n    }\n    keyPathArray.push(keyPath.substr(startIndex, keyPath.length));\n    return keyPathArray;\n  };\n\n  isPlainObject = function(value) {\n    return _.isObject(value) && !_.isArray(value);\n  };\n\n  plus = {\n    adviseBefore: function(object, methodName, advice) {\n      var original;\n      original = object[methodName];\n      return object[methodName] = function() {\n        var args;\n        args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        if (advice.apply(this, args) !== false) {\n          return original.apply(this, args);\n        }\n      };\n    },\n    camelize: function(string) {\n      if (string) {\n        return string.replace(/[_-]+(\\w)/g, function(m) {\n          return m[1].toUpperCase();\n        });\n      } else {\n        return '';\n      }\n    },\n    capitalize: function(word) {\n      if (!word) {\n        return '';\n      }\n      if (word.toLowerCase() === 'github') {\n        return 'GitHub';\n      } else {\n        return word[0].toUpperCase() + word.slice(1);\n      }\n    },\n    compactObject: function(object) {\n      var key, newObject, value;\n      newObject = {};\n      for (key in object) {\n        value = object[key];\n        if (value != null) {\n          newObject[key] = value;\n        }\n      }\n      return newObject;\n    },\n    dasherize: function(string) {\n      if (!string) {\n        return '';\n      }\n      string = string[0].toLowerCase() + string.slice(1);\n      return string.replace(/([A-Z])|(_)/g, function(m, letter) {\n        if (letter) {\n          return \"-\" + letter.toLowerCase();\n        } else {\n          return \"-\";\n        }\n      });\n    },\n    deepClone: function(object) {\n      if (_.isArray(object)) {\n        return object.map(function(value) {\n          return plus.deepClone(value);\n        });\n      } else if (_.isObject(object) && !_.isFunction(object)) {\n        return plus.mapObject(object, (function(_this) {\n          return function(key, value) {\n            return [key, plus.deepClone(value)];\n          };\n        })(this));\n      } else {\n        return object;\n      }\n    },\n    deepExtend: function(target) {\n      var i, key, object, result, _i, _len, _ref;\n      result = target;\n      i = 0;\n      while (++i < arguments.length) {\n        object = arguments[i];\n        if (isPlainObject(result) && isPlainObject(object)) {\n          _ref = Object.keys(object);\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            key = _ref[_i];\n            result[key] = plus.deepExtend(result[key], object[key]);\n          }\n        } else {\n          result = plus.deepClone(object);\n        }\n      }\n      return result;\n    },\n    deepContains: function(array, target) {\n      var object, _i, _len;\n      if (array == null) {\n        return false;\n      }\n      for (_i = 0, _len = array.length; _i < _len; _i++) {\n        object = array[_i];\n        if (_.isEqual(object, target)) {\n          return true;\n        }\n      }\n      return false;\n    },\n    endsWith: function(string, suffix) {\n      if (suffix == null) {\n        suffix = '';\n      }\n      if (string) {\n        return string.indexOf(suffix, string.length - suffix.length) !== -1;\n      } else {\n        return false;\n      }\n    },\n    escapeAttribute: function(string) {\n      if (string) {\n        return string.replace(/\"/g, '&quot;').replace(/\\n/g, '').replace(/\\\\/g, '-');\n      } else {\n        return '';\n      }\n    },\n    escapeRegExp: function(string) {\n      if (string) {\n        return string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n      } else {\n        return '';\n      }\n    },\n    humanizeEventName: function(eventName, eventDoc) {\n      var event, namespace, namespaceDoc, _ref;\n      _ref = eventName.split(':'), namespace = _ref[0], event = _ref[1];\n      if (event == null) {\n        return plus.undasherize(namespace);\n      }\n      namespaceDoc = plus.undasherize(namespace);\n      if (eventDoc == null) {\n        eventDoc = plus.undasherize(event);\n      }\n      return \"\" + namespaceDoc + \": \" + eventDoc;\n    },\n    humanizeKey: function(key, platform) {\n      var modifierKeyMap;\n      if (platform == null) {\n        platform = process.platform;\n      }\n      if (!key) {\n        return key;\n      }\n      modifierKeyMap = platform === 'darwin' ? macModifierKeyMap : nonMacModifierKeyMap;\n      if (modifierKeyMap[key]) {\n        return modifierKeyMap[key];\n      } else if (key.length === 1 && (shiftKeyMap[key] != null)) {\n        return [modifierKeyMap.shift, shiftKeyMap[key]];\n      } else if (key.length === 1 && key === key.toUpperCase() && key.toUpperCase() !== key.toLowerCase()) {\n        return [modifierKeyMap.shift, key.toUpperCase()];\n      } else if (key.length === 1 || /f[0-9]{1,2}/.test(key)) {\n        return key.toUpperCase();\n      } else {\n        if (platform === 'darwin') {\n          return key;\n        } else {\n          return plus.capitalize(key);\n        }\n      }\n    },\n    humanizeKeystroke: function(keystroke, platform) {\n      var humanizedKeystrokes, index, key, keys, keystrokes, splitKeystroke, _i, _j, _len, _len1;\n      if (platform == null) {\n        platform = process.platform;\n      }\n      if (!keystroke) {\n        return keystroke;\n      }\n      keystrokes = keystroke.split(' ');\n      humanizedKeystrokes = [];\n      for (_i = 0, _len = keystrokes.length; _i < _len; _i++) {\n        keystroke = keystrokes[_i];\n        keys = [];\n        splitKeystroke = keystroke.split('-');\n        for (index = _j = 0, _len1 = splitKeystroke.length; _j < _len1; index = ++_j) {\n          key = splitKeystroke[index];\n          if (key === '' && splitKeystroke[index - 1] === '') {\n            key = '-';\n          }\n          if (key) {\n            keys.push(plus.humanizeKey(key, platform));\n          }\n        }\n        keys = _.uniq(_.flatten(keys));\n        if (platform === 'darwin') {\n          keys = keys.join('');\n        } else {\n          keys = keys.join('+');\n        }\n        humanizedKeystrokes.push(keys);\n      }\n      return humanizedKeystrokes.join(' ');\n    },\n    isSubset: function(potentialSubset, potentialSuperset) {\n      return _.every(potentialSubset, function(element) {\n        return _.include(potentialSuperset, element);\n      });\n    },\n    losslessInvert: function(hash) {\n      var inverted, key, value;\n      inverted = {};\n      for (key in hash) {\n        value = hash[key];\n        if (inverted[value] == null) {\n          inverted[value] = [];\n        }\n        inverted[value].push(key);\n      }\n      return inverted;\n    },\n    mapObject: function(object, iterator) {\n      var key, newObject, value, _i, _len, _ref, _ref1;\n      newObject = {};\n      _ref = Object.keys(object);\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        key = _ref[_i];\n        _ref1 = iterator(key, object[key]), key = _ref1[0], value = _ref1[1];\n        newObject[key] = value;\n      }\n      return newObject;\n    },\n    multiplyString: function(string, n) {\n      var finalString, i;\n      finalString = \"\";\n      i = 0;\n      while (i < n) {\n        finalString += string;\n        i++;\n      }\n      return finalString;\n    },\n    pluralize: function(count, singular, plural) {\n      if (count == null) {\n        count = 0;\n      }\n      if (plural == null) {\n        plural = singular + 's';\n      }\n      if (count === 1) {\n        return \"\" + count + \" \" + singular;\n      } else {\n        return \"\" + count + \" \" + plural;\n      }\n    },\n    remove: function(array, element) {\n      var index;\n      index = array.indexOf(element);\n      if (index >= 0) {\n        array.splice(index, 1);\n      }\n      return array;\n    },\n    setValueForKeyPath: function(object, keyPath, value) {\n      var key, keys;\n      keys = splitKeyPath(keyPath);\n      while (keys.length > 1) {\n        key = keys.shift();\n        if (object[key] == null) {\n          object[key] = {};\n        }\n        object = object[key];\n      }\n      if (value != null) {\n        return object[keys.shift()] = value;\n      } else {\n        return delete object[keys.shift()];\n      }\n    },\n    hasKeyPath: function(object, keyPath) {\n      var key, keys, _i, _len;\n      keys = splitKeyPath(keyPath);\n      for (_i = 0, _len = keys.length; _i < _len; _i++) {\n        key = keys[_i];\n        if (!object.hasOwnProperty(key)) {\n          return false;\n        }\n        object = object[key];\n      }\n      return true;\n    },\n    spliceWithArray: function(originalArray, start, length, insertedArray, chunkSize) {\n      var chunkStart, _i, _ref, _results;\n      if (chunkSize == null) {\n        chunkSize = 100000;\n      }\n      if (insertedArray.length < chunkSize) {\n        return originalArray.splice.apply(originalArray, [start, length].concat(__slice.call(insertedArray)));\n      } else {\n        originalArray.splice(start, length);\n        _results = [];\n        for (chunkStart = _i = 0, _ref = insertedArray.length; chunkSize > 0 ? _i <= _ref : _i >= _ref; chunkStart = _i += chunkSize) {\n          _results.push(originalArray.splice.apply(originalArray, [start + chunkStart, 0].concat(__slice.call(insertedArray.slice(chunkStart, chunkStart + chunkSize)))));\n        }\n        return _results;\n      }\n    },\n    sum: function(array) {\n      var elt, sum, _i, _len;\n      sum = 0;\n      for (_i = 0, _len = array.length; _i < _len; _i++) {\n        elt = array[_i];\n        sum += elt;\n      }\n      return sum;\n    },\n    uncamelcase: function(string) {\n      var result;\n      if (!string) {\n        return '';\n      }\n      result = string.replace(/([A-Z])|_+/g, function(match, letter) {\n        if (letter == null) {\n          letter = '';\n        }\n        return \" \" + letter;\n      });\n      return plus.capitalize(result.trim());\n    },\n    undasherize: function(string) {\n      if (string) {\n        return string.split('-').map(plus.capitalize).join(' ');\n      } else {\n        return '';\n      }\n    },\n    underscore: function(string) {\n      if (!string) {\n        return '';\n      }\n      string = string[0].toLowerCase() + string.slice(1);\n      return string.replace(/([A-Z])|-+/g, function(match, letter) {\n        if (letter == null) {\n          letter = '';\n        }\n        return \"_\" + (letter.toLowerCase());\n      });\n    },\n    valueForKeyPath: function(object, keyPath) {\n      var key, keys, _i, _len;\n      keys = splitKeyPath(keyPath);\n      for (_i = 0, _len = keys.length; _i < _len; _i++) {\n        key = keys[_i];\n        object = object[key];\n        if (object == null) {\n          return;\n        }\n      }\n      return object;\n    },\n    isEqual: function(a, b, aStack, bStack) {\n      if (_.isArray(aStack) && _.isArray(bStack)) {\n        return isEqual(a, b, aStack, bStack);\n      } else {\n        return isEqual(a, b);\n      }\n    },\n    isEqualForProperties: function() {\n      var a, b, properties, property, _i, _len;\n      a = arguments[0], b = arguments[1], properties = 3 <= arguments.length ? __slice.call(arguments, 2) : [];\n      for (_i = 0, _len = properties.length; _i < _len; _i++) {\n        property = properties[_i];\n        if (!_.isEqual(a[property], b[property])) {\n          return false;\n        }\n      }\n      return true;\n    }\n  };\n\n  isEqual = function(a, b, aStack, bStack) {\n    var aCtor, aCtorValid, aElement, aKeyCount, aValue, bCtor, bCtorValid, bKeyCount, bValue, equal, i, key, stackIndex, _i, _len;\n    if (aStack == null) {\n      aStack = [];\n    }\n    if (bStack == null) {\n      bStack = [];\n    }\n    if (a === b) {\n      return _.isEqual(a, b);\n    }\n    if (_.isFunction(a) || _.isFunction(b)) {\n      return _.isEqual(a, b);\n    }\n    stackIndex = aStack.length;\n    while (stackIndex--) {\n      if (aStack[stackIndex] === a) {\n        return bStack[stackIndex] === b;\n      }\n    }\n    aStack.push(a);\n    bStack.push(b);\n    equal = false;\n    if (_.isFunction(a != null ? a.isEqual : void 0)) {\n      equal = a.isEqual(b, aStack, bStack);\n    } else if (_.isFunction(b != null ? b.isEqual : void 0)) {\n      equal = b.isEqual(a, bStack, aStack);\n    } else if (_.isArray(a) && _.isArray(b) && a.length === b.length) {\n      equal = true;\n      for (i = _i = 0, _len = a.length; _i < _len; i = ++_i) {\n        aElement = a[i];\n        if (!isEqual(aElement, b[i], aStack, bStack)) {\n          equal = false;\n          break;\n        }\n      }\n    } else if (_.isRegExp(a) && _.isRegExp(b)) {\n      equal = _.isEqual(a, b);\n    } else if (_.isElement(a) && _.isElement(b)) {\n      equal = a === b;\n    } else if (_.isObject(a) && _.isObject(b)) {\n      aCtor = a.constructor;\n      bCtor = b.constructor;\n      aCtorValid = _.isFunction(aCtor) && aCtor instanceof aCtor;\n      bCtorValid = _.isFunction(bCtor) && bCtor instanceof bCtor;\n      if (aCtor !== bCtor && !(aCtorValid && bCtorValid)) {\n        equal = false;\n      } else {\n        aKeyCount = 0;\n        equal = true;\n        for (key in a) {\n          aValue = a[key];\n          if (!_.has(a, key)) {\n            continue;\n          }\n          aKeyCount++;\n          if (!(_.has(b, key) && isEqual(aValue, b[key], aStack, bStack))) {\n            equal = false;\n            break;\n          }\n        }\n        if (equal) {\n          bKeyCount = 0;\n          for (key in b) {\n            bValue = b[key];\n            if (_.has(b, key)) {\n              bKeyCount++;\n            }\n          }\n          equal = aKeyCount === bKeyCount;\n        }\n      }\n    } else {\n      equal = _.isEqual(a, b);\n    }\n    aStack.pop();\n    bStack.pop();\n    return equal;\n  };\n\n  module.exports = _.extend({}, _, plus);\n\n}).call(this);\n","'use babel'\n'use strict'\n\n/**\n * @access private\n */\nexport default class CanvasLayer {\n  constructor () {\n    /**\n     * The onscreen canvas.\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas = document.createElement('canvas')\n\n    const desynchronized = process.platform !== 'linux'\n\n    /**\n     * The onscreen canvas context.\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context = this.canvas.getContext('2d', { desynchronized })\n    this.canvas.webkitImageSmoothingEnabled = false\n    this.context.imageSmoothingEnabled = false\n\n    /**\n    * The offscreen canvas.\n    * @type {HTMLCanvasElement}\n    * @access private\n    */\n    this.offscreenCanvas = document.createElement('canvas')\n    /**\n     * The offscreen canvas context.\n     * @type {CanvasRenderingContext2D}\n     * @access private\n     */\n    this.offscreenContext = this.offscreenCanvas.getContext('2d', { desynchronized })\n    this.offscreenCanvas.webkitImageSmoothingEnabled = false\n    this.offscreenContext.imageSmoothingEnabled = false\n  }\n\n  attach (parent) {\n    if (this.canvas.parentNode) { return }\n\n    parent.appendChild(this.canvas)\n  }\n\n  setSize (width = 0, height = 0) {\n    this.canvas.width = width\n    this.canvas.height = height\n    this.context.imageSmoothingEnabled = false\n    this.resetOffscreenSize()\n  }\n\n  getSize () {\n    return {\n      width: this.canvas.width,\n      height: this.canvas.height\n    }\n  }\n\n  resetOffscreenSize () {\n    this.offscreenCanvas.width = this.canvas.width\n    this.offscreenCanvas.height = this.canvas.height\n    this.offscreenContext.imageSmoothingEnabled = false\n  }\n\n  copyToOffscreen () {\n    if (this.canvas.width > 0 && this.canvas.height > 0) {\n      this.offscreenContext.drawImage(this.canvas, 0, 0)\n    }\n  }\n\n  copyFromOffscreen () {\n    if (this.offscreenCanvas.width > 0 && this.offscreenCanvas.height > 0) {\n      this.context.drawImage(this.offscreenCanvas, 0, 0)\n    }\n  }\n\n  copyPartFromOffscreen (srcY, destY, height) {\n    if (this.offscreenCanvas.width > 0 && this.offscreenCanvas.height > 0) {\n      this.context.drawImage(\n        this.offscreenCanvas,\n        0, srcY, this.offscreenCanvas.width, height,\n        0, destY, this.offscreenCanvas.width, height\n      )\n    }\n  }\n\n  clearCanvas () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n  }\n}\n","'use strict'\n\nimport { CompositeDisposable, Emitter } from 'atom'\nimport { EventsDelegation, SpacePenDSL } from 'atom-utils-plus'\n\nimport * as Main from './main'\nimport element from './decorators/element'\nimport include from './decorators/include'\n\n/**\n * @access private\n */\nclass MinimapQuickSettingsElement {\n  static initClass () {\n    include(this, EventsDelegation, SpacePenDSL.Babel)\n    return element(this, 'minimap-quick-settings')\n  }\n\n  static content () {\n    this.div({ class: 'select-list popover-list minimap-quick-settings' }, () => {\n      this.input({ type: 'text', class: 'hidden-input', outlet: 'hiddenInput' })\n      this.ol({ class: 'list-group mark-active', outlet: 'list' }, () => {\n        this.li({ class: 'separator', outlet: 'separator' })\n        this.li({ class: 'code-highlights', outlet: 'codeHighlights' }, 'code-highlights')\n        this.li({ class: 'absolute-mode', outlet: 'absoluteMode' }, 'absolute-mode')\n        this.li({ class: 'adjust-absolute-mode-height', outlet: 'adjustAbsoluteModeHeight' }, 'adjust-absolute-mode-height')\n      })\n      this.div({ class: 'btn-group' }, () => {\n        this.button({ class: 'btn btn-default', outlet: 'onLeftButton' }, 'On Left')\n        this.button({ class: 'btn btn-default', outlet: 'onRightButton' }, 'On Right')\n      })\n    })\n  }\n\n  createdCallback () {\n    this.buildContent()\n  }\n\n  setModel (minimap) {\n    this.selectedItem = null\n    this.minimap = minimap\n    this.emitter = new Emitter()\n    this.subscriptions = new CompositeDisposable()\n    this.plugins = {}\n    this.itemsActions = new WeakMap()\n\n    const subs = this.subscriptions\n\n    subs.add(Main.onDidAddPlugin(({ name, plugin }) => {\n      return this.addItemFor(name, plugin)\n    }))\n    subs.add(Main.onDidRemovePlugin(({ name, plugin }) => {\n      return this.removeItemFor(name, plugin)\n    }))\n    subs.add(Main.onDidActivatePlugin(({ name, plugin }) => {\n      return this.activateItem(name, plugin)\n    }))\n    subs.add(Main.onDidDeactivatePlugin(({ name, plugin }) => {\n      return this.deactivateItem(name, plugin)\n    }))\n\n    subs.add(atom.commands.add('minimap-quick-settings', {\n      'core:move-up': () => {\n        this.selectPreviousItem()\n      },\n      'core:move-down': () => {\n        this.selectNextItem()\n      },\n      'core:move-left': () => {\n        atom.config.set('minimap.displayMinimapOnLeft', true)\n      },\n      'core:move-right': () => {\n        atom.config.set('minimap.displayMinimapOnLeft', false)\n      },\n      'core:cancel': () => {\n        this.destroy()\n      },\n      'core:confirm': () => {\n        this.toggleSelectedItem()\n      }\n    }))\n\n    this.codeHighlights.classList.toggle('active', this.minimap.displayCodeHighlights)\n\n    subs.add(this.subscribeTo(this.codeHighlights, {\n      mousedown: (e) => {\n        e.preventDefault()\n        atom.config.set('minimap.displayCodeHighlights', !this.minimap.displayCodeHighlights)\n      }\n    }))\n\n    this.itemsActions.set(this.codeHighlights, () => {\n      atom.config.set('minimap.displayCodeHighlights', !this.minimap.displayCodeHighlights)\n    })\n\n    subs.add(this.subscribeTo(this.absoluteMode, {\n      mousedown: (e) => {\n        e.preventDefault()\n        atom.config.set('minimap.absoluteMode', !atom.config.get('minimap.absoluteMode'))\n      }\n    }))\n\n    this.itemsActions.set(this.absoluteMode, () => {\n      atom.config.set('minimap.absoluteMode', !atom.config.get('minimap.absoluteMode'))\n    })\n\n    subs.add(this.subscribeTo(this.adjustAbsoluteModeHeight, {\n      mousedown: (e) => {\n        e.preventDefault()\n        atom.config.set('minimap.adjustAbsoluteModeHeight', !atom.config.get('minimap.adjustAbsoluteModeHeight'))\n      }\n    }))\n\n    this.itemsActions.set(this.adjustAbsoluteModeHeight, () => {\n      atom.config.set('minimap.adjustAbsoluteModeHeight', !atom.config.get('minimap.adjustAbsoluteModeHeight'))\n    })\n\n    subs.add(this.subscribeTo(this.hiddenInput, {\n      focusout: (e) => { this.destroy() }\n    }, { passive: true }))\n\n    subs.add(this.subscribeTo(this.onLeftButton, {\n      mousedown: (e) => {\n        e.preventDefault()\n        atom.config.set('minimap.displayMinimapOnLeft', true)\n      }\n    }))\n\n    subs.add(this.subscribeTo(this.onRightButton, {\n      mousedown: (e) => {\n        e.preventDefault()\n        atom.config.set('minimap.displayMinimapOnLeft', false)\n      }\n    }))\n\n    subs.add(atom.config.observe('minimap.displayCodeHighlights', (bool) => {\n      this.codeHighlights.classList.toggle('active', bool)\n    }))\n\n    subs.add(atom.config.observe('minimap.absoluteMode', (bool) => {\n      this.absoluteMode.classList.toggle('active', bool)\n    }))\n\n    subs.add(atom.config.observe('minimap.adjustAbsoluteModeHeight', (bool) => {\n      this.adjustAbsoluteModeHeight.classList.toggle('active', bool)\n    }))\n\n    subs.add(atom.config.observe('minimap.displayMinimapOnLeft', (bool) => {\n      this.onLeftButton.classList.toggle('selected', bool)\n      this.onRightButton.classList.toggle('selected', !bool)\n    }))\n\n    this.initList()\n  }\n\n  onDidDestroy (callback) {\n    return this.emitter.on('did-destroy', callback)\n  }\n\n  attach () {\n    const workspaceElement = atom.views.getView(atom.workspace)\n    workspaceElement.appendChild(this)\n    this.hiddenInput.focus()\n  }\n\n  destroy () {\n    this.emitter.emit('did-destroy')\n    this.subscriptions.dispose()\n    this.parentNode.removeChild(this)\n  }\n\n  initList () {\n    this.itemsDisposables = new WeakMap()\n    for (const name in Main.plugins) {\n      this.addItemFor(name, Main.plugins[name])\n    }\n  }\n\n  toggleSelectedItem () {\n    const fn = this.itemsActions.get(this.selectedItem)\n    if (typeof fn === 'function') { fn() }\n  }\n\n  selectNextItem () {\n    this.selectedItem.classList.remove('selected')\n    if ((this.selectedItem.nextSibling != null)) {\n      this.selectedItem = this.selectedItem.nextSibling\n      if (this.selectedItem.matches('.separator')) {\n        this.selectedItem = this.selectedItem.nextSibling\n      }\n    } else {\n      this.selectedItem = this.list.firstChild\n    }\n    this.selectedItem.classList.add('selected')\n  }\n\n  selectPreviousItem () {\n    this.selectedItem.classList.remove('selected')\n    if ((this.selectedItem.previousSibling != null)) {\n      this.selectedItem = this.selectedItem.previousSibling\n      if (this.selectedItem.matches('.separator')) {\n        this.selectedItem = this.selectedItem.previousSibling\n      }\n    } else {\n      this.selectedItem = this.list.lastChild\n    }\n    this.selectedItem.classList.add('selected')\n  }\n\n  addItemFor (name, plugin) {\n    const item = document.createElement('li')\n    const action = () => { Main.togglePluginActivation(name) }\n\n    if (plugin.isActive()) { item.classList.add('active') }\n\n    item.textContent = name\n\n    this.itemsActions.set(item, action)\n    this.itemsDisposables.set(item, this.addDisposableEventListener(item, 'mousedown', (e) => {\n      e.preventDefault()\n      action()\n    }))\n\n    this.plugins[name] = item\n    this.list.insertBefore(item, this.separator)\n\n    if (!(this.selectedItem != null)) {\n      this.selectedItem = item\n      this.selectedItem.classList.add('selected')\n    }\n  }\n\n  removeItemFor (name, plugin) {\n    try {\n      this.list.removeChild(this.plugins[name])\n    } catch (error) {}\n\n    delete this.plugins[name]\n  }\n\n  activateItem (name, plugin) {\n    this.plugins[name].classList.add('active')\n  }\n\n  deactivateItem (name, plugin) {\n    this.plugins[name].classList.remove('active')\n  }\n}\n\nconst minimapQuickSettingsElement = MinimapQuickSettingsElement.initClass()\nexport default minimapQuickSettingsElement\n","\"use strict\";\n\nmodule.exports = function() {\n    var idCount = 1;\n\n    /**\n     * Generates a new unique id in the context.\n     * @public\n     * @returns {number} A unique id in the context.\n     */\n    function generate() {\n        return idCount++;\n    }\n\n    return {\n        generate: generate\n    };\n};\n","\"use strict\";\n\nmodule.exports = function(options) {\n    var idGenerator     = options.idGenerator;\n    var getState        = options.stateHandler.getState;\n\n    /**\n     * Gets the resize detector id of the element.\n     * @public\n     * @param {element} element The target element to get the id of.\n     * @returns {string|number|null} The id of the element. Null if it has no id.\n     */\n    function getId(element) {\n        var state = getState(element);\n\n        if (state && state.id !== undefined) {\n            return state.id;\n        }\n\n        return null;\n    }\n\n    /**\n     * Sets the resize detector id of the element. Requires the element to have a resize detector state initialized.\n     * @public\n     * @param {element} element The target element to set the id of.\n     * @returns {string|number|null} The id of the element.\n     */\n    function setId(element) {\n        var state = getState(element);\n\n        if (!state) {\n            throw new Error(\"setId required the element to have a resize detection state.\");\n        }\n\n        var id = idGenerator.generate();\n\n        state.id = id;\n\n        return id;\n    }\n\n    return {\n        get: getId,\n        set: setId\n    };\n};\n","\"use strict\";\n\n/* global console: false */\n\n/**\n * Reporter that handles the reporting of logs, warnings and errors.\n * @public\n * @param {boolean} quiet Tells if the reporter should be quiet or not.\n */\nmodule.exports = function(quiet) {\n    function noop() {\n        //Does nothing.\n    }\n\n    var reporter = {\n        log: noop,\n        warn: noop,\n        error: noop\n    };\n\n    if(!quiet && window.console) {\n        var attachFunction = function(reporter, name) {\n            //The proxy is needed to be able to call the method with the console context,\n            //since we cannot use bind.\n            reporter[name] = function reporterProxy() {\n                var f = console[name];\n                if (f.apply) { //IE9 does not support console.log.apply :)\n                    f.apply(console, arguments);\n                } else {\n                    for (var i = 0; i < arguments.length; i++) {\n                        f(arguments[i]);\n                    }\n                }\n            };\n        };\n\n        attachFunction(reporter, \"log\");\n        attachFunction(reporter, \"warn\");\n        attachFunction(reporter, \"error\");\n    }\n\n    return reporter;\n};","\"use strict\";\n\nmodule.exports = function(idHandler) {\n    var eventListeners = {};\n\n    /**\n     * Gets all listeners for the given element.\n     * @public\n     * @param {element} element The element to get all listeners for.\n     * @returns All listeners for the given element.\n     */\n    function getListeners(element) {\n        var id = idHandler.get(element);\n\n        if (id === undefined) {\n            return [];\n        }\n\n        return eventListeners[id] || [];\n    }\n\n    /**\n     * Stores the given listener for the given element. Will not actually add the listener to the element.\n     * @public\n     * @param {element} element The element that should have the listener added.\n     * @param {function} listener The callback that the element has added.\n     */\n    function addListener(element, listener) {\n        var id = idHandler.get(element);\n\n        if(!eventListeners[id]) {\n            eventListeners[id] = [];\n        }\n\n        eventListeners[id].push(listener);\n    }\n\n    function removeListener(element, listener) {\n        var listeners = getListeners(element);\n        for (var i = 0, len = listeners.length; i < len; ++i) {\n            if (listeners[i] === listener) {\n              listeners.splice(i, 1);\n              break;\n            }\n        }\n    }\n\n    function removeAllListeners(element) {\n      var listeners = getListeners(element);\n      if (!listeners) { return; }\n      listeners.length = 0;\n    }\n\n    return {\n        get: getListeners,\n        add: addListener,\n        removeListener: removeListener,\n        removeAllListeners: removeAllListeners\n    };\n};\n","\"use strict\";\n\nmodule.exports = function(options) {\n    var getState = options.stateHandler.getState;\n\n    /**\n     * Tells if the element has been made detectable and ready to be listened for resize events.\n     * @public\n     * @param {element} The element to check.\n     * @returns {boolean} True or false depending on if the element is detectable or not.\n     */\n    function isDetectable(element) {\n        var state = getState(element);\n        return state && !!state.isDetectable;\n    }\n\n    /**\n     * Marks the element that it has been made detectable and ready to be listened for resize events.\n     * @public\n     * @param {element} The element to mark.\n     */\n    function markAsDetectable(element) {\n        getState(element).isDetectable = true;\n    }\n\n    /**\n     * Tells if the element is busy or not.\n     * @public\n     * @param {element} The element to check.\n     * @returns {boolean} True or false depending on if the element is busy or not.\n     */\n    function isBusy(element) {\n        return !!getState(element).busy;\n    }\n\n    /**\n     * Marks the object is busy and should not be made detectable.\n     * @public\n     * @param {element} element The element to mark.\n     * @param {boolean} busy If the element is busy or not.\n     */\n    function markBusy(element, busy) {\n        getState(element).busy = !!busy;\n    }\n\n    return {\n        isDetectable: isDetectable,\n        markAsDetectable: markAsDetectable,\n        isBusy: isBusy,\n        markBusy: markBusy\n    };\n};\n","/**\n * Resize detection strategy that injects objects to elements in order to detect resize events.\n * Heavily inspired by: http://www.backalleycoder.com/2013/03/18/cross-browser-event-based-element-resize-detection/\n */\n\n\"use strict\";\n\nvar browserDetector = require(\"../browser-detector\");\n\nmodule.exports = function(options) {\n    options             = options || {};\n    var reporter        = options.reporter;\n    var batchProcessor  = options.batchProcessor;\n    var getState        = options.stateHandler.getState;\n\n    if(!reporter) {\n        throw new Error(\"Missing required dependency: reporter.\");\n    }\n\n    /**\n     * Adds a resize event listener to the element.\n     * @public\n     * @param {element} element The element that should have the listener added.\n     * @param {function} listener The listener callback to be called for each resize event of the element. The element will be given as a parameter to the listener callback.\n     */\n    function addListener(element, listener) {\n        function listenerProxy() {\n            listener(element);\n        }\n\n        if(browserDetector.isIE(8)) {\n            //IE 8 does not support object, but supports the resize event directly on elements.\n            getState(element).object = {\n                proxy: listenerProxy\n            };\n            element.attachEvent(\"onresize\", listenerProxy);\n        } else {\n            var object = getObject(element);\n\n            if(!object) {\n                throw new Error(\"Element is not detectable by this strategy.\");\n            }\n\n            object.contentDocument.defaultView.addEventListener(\"resize\", listenerProxy);\n        }\n    }\n\n    function buildCssTextString(rules) {\n        var seperator = options.important ? \" !important; \" : \"; \";\n\n        return (rules.join(seperator) + seperator).trim();\n    }\n\n    /**\n     * Makes an element detectable and ready to be listened for resize events. Will call the callback when the element is ready to be listened for resize changes.\n     * @private\n     * @param {object} options Optional options object.\n     * @param {element} element The element to make detectable\n     * @param {function} callback The callback to be called when the element is ready to be listened for resize changes. Will be called with the element as first parameter.\n     */\n    function makeDetectable(options, element, callback) {\n        if (!callback) {\n            callback = element;\n            element = options;\n            options = null;\n        }\n\n        options = options || {};\n        var debug = options.debug;\n\n        function injectObject(element, callback) {\n            var OBJECT_STYLE = buildCssTextString([\"display: block\", \"position: absolute\", \"top: 0\", \"left: 0\", \"width: 100%\", \"height: 100%\", \"border: none\", \"padding: 0\", \"margin: 0\", \"opacity: 0\", \"z-index: -1000\", \"pointer-events: none\"]);\n\n            //The target element needs to be positioned (everything except static) so the absolute positioned object will be positioned relative to the target element.\n\n            // Position altering may be performed directly or on object load, depending on if style resolution is possible directly or not.\n            var positionCheckPerformed = false;\n\n            // The element may not yet be attached to the DOM, and therefore the style object may be empty in some browsers.\n            // Since the style object is a reference, it will be updated as soon as the element is attached to the DOM.\n            var style = window.getComputedStyle(element);\n            var width = element.offsetWidth;\n            var height = element.offsetHeight;\n\n            getState(element).startSize = {\n                width: width,\n                height: height\n            };\n\n            function mutateDom() {\n                function alterPositionStyles() {\n                    if(style.position === \"static\") {\n                        element.style.setProperty(\"position\", \"relative\", options.important ? \"important\" : \"\");\n\n                        var removeRelativeStyles = function(reporter, element, style, property) {\n                            function getNumericalValue(value) {\n                                return value.replace(/[^-\\d\\.]/g, \"\");\n                            }\n\n                            var value = style[property];\n\n                            if(value !== \"auto\" && getNumericalValue(value) !== \"0\") {\n                                reporter.warn(\"An element that is positioned static has style.\" + property + \"=\" + value + \" which is ignored due to the static positioning. The element will need to be positioned relative, so the style.\" + property + \" will be set to 0. Element: \", element);\n                                element.style.setProperty(property, \"0\", options.important ? \"important\" : \"\");\n                            }\n                        };\n\n                        //Check so that there are no accidental styles that will make the element styled differently now that is is relative.\n                        //If there are any, set them to 0 (this should be okay with the user since the style properties did nothing before [since the element was positioned static] anyway).\n                        removeRelativeStyles(reporter, element, style, \"top\");\n                        removeRelativeStyles(reporter, element, style, \"right\");\n                        removeRelativeStyles(reporter, element, style, \"bottom\");\n                        removeRelativeStyles(reporter, element, style, \"left\");\n                    }\n                }\n\n                function onObjectLoad() {\n                    // The object has been loaded, which means that the element now is guaranteed to be attached to the DOM.\n                    if (!positionCheckPerformed) {\n                        alterPositionStyles();\n                    }\n\n                    /*jshint validthis: true */\n\n                    function getDocument(element, callback) {\n                        //Opera 12 seem to call the object.onload before the actual document has been created.\n                        //So if it is not present, poll it with an timeout until it is present.\n                        //TODO: Could maybe be handled better with object.onreadystatechange or similar.\n                        if(!element.contentDocument) {\n                            var state = getState(element);\n                            if (state.checkForObjectDocumentTimeoutId) {\n                                window.clearTimeout(state.checkForObjectDocumentTimeoutId);\n                            }\n                            state.checkForObjectDocumentTimeoutId = setTimeout(function checkForObjectDocument() {\n                                state.checkForObjectDocumentTimeoutId = 0;\n                                getDocument(element, callback);\n                            }, 100);\n\n                            return;\n                        }\n\n                        callback(element.contentDocument);\n                    }\n\n                    //Mutating the object element here seems to fire another load event.\n                    //Mutating the inner document of the object element is fine though.\n                    var objectElement = this;\n\n                    //Create the style element to be added to the object.\n                    getDocument(objectElement, function onObjectDocumentReady(objectDocument) {\n                        //Notify that the element is ready to be listened to.\n                        callback(element);\n                    });\n                }\n\n                // The element may be detached from the DOM, and some browsers does not support style resolving of detached elements.\n                // The alterPositionStyles needs to be delayed until we know the element has been attached to the DOM (which we are sure of when the onObjectLoad has been fired), if style resolution is not possible.\n                if (style.position !== \"\") {\n                    alterPositionStyles(style);\n                    positionCheckPerformed = true;\n                }\n\n                //Add an object element as a child to the target element that will be listened to for resize events.\n                var object = document.createElement(\"object\");\n                object.style.cssText = OBJECT_STYLE;\n                object.tabIndex = -1;\n                object.type = \"text/html\";\n                object.setAttribute(\"aria-hidden\", \"true\");\n                object.onload = onObjectLoad;\n\n                //Safari: This must occur before adding the object to the DOM.\n                //IE: Does not like that this happens before, even if it is also added after.\n                if(!browserDetector.isIE()) {\n                    object.data = \"about:blank\";\n                }\n\n                if (!getState(element)) {\n                    // The element has been uninstalled before the actual loading happened.\n                    return;\n                }\n\n                element.appendChild(object);\n                getState(element).object = object;\n\n                //IE: This must occur after adding the object to the DOM.\n                if(browserDetector.isIE()) {\n                    object.data = \"about:blank\";\n                }\n            }\n\n            if(batchProcessor) {\n                batchProcessor.add(mutateDom);\n            } else {\n                mutateDom();\n            }\n        }\n\n        if(browserDetector.isIE(8)) {\n            //IE 8 does not support objects properly. Luckily they do support the resize event.\n            //So do not inject the object and notify that the element is already ready to be listened to.\n            //The event handler for the resize event is attached in the utils.addListener instead.\n            callback(element);\n        } else {\n            injectObject(element, callback);\n        }\n    }\n\n    /**\n     * Returns the child object of the target element.\n     * @private\n     * @param {element} element The target element.\n     * @returns The object element of the target.\n     */\n    function getObject(element) {\n        return getState(element).object;\n    }\n\n    function uninstall(element) {\n        if (!getState(element)) {\n            return;\n        }\n\n        var object = getObject(element);\n\n        if (!object) {\n            return;\n        }\n\n        if (browserDetector.isIE(8)) {\n            element.detachEvent(\"onresize\", object.proxy);\n        } else {\n            element.removeChild(object);\n        }\n\n        if (getState(element).checkForObjectDocumentTimeoutId) {\n            window.clearTimeout(getState(element).checkForObjectDocumentTimeoutId);\n        }\n\n        delete getState(element).object;\n    }\n\n    return {\n        makeDetectable: makeDetectable,\n        addListener: addListener,\n        uninstall: uninstall\n    };\n};\n","'use strict'\n\n/**\n * @access private\n */\nexport default class LegacyAdapter {\n  constructor (textEditor) { this.textEditor = textEditor }\n\n  enableCache () { this.useCache = true }\n\n  clearCache () {\n    this.useCache = false\n    delete this.heightCache\n    delete this.scrollTopCache\n    delete this.scrollLeftCache\n    delete this.maxScrollTopCache\n  }\n\n  onDidChangeScrollTop (callback) {\n    return this.textEditor.onDidChangeScrollTop(callback)\n  }\n\n  onDidChangeScrollLeft (callback) {\n    return this.textEditor.onDidChangeScrollLeft(callback)\n  }\n\n  getHeight () {\n    if (this.useCache) {\n      if (!this.heightCache) {\n        this.heightCache = this.textEditor.getHeight()\n      }\n      return this.heightCache\n    }\n    return this.textEditor.getHeight()\n  }\n\n  getScrollTop () {\n    if (this.useCache) {\n      if (!this.scrollTopCache) {\n        this.scrollTopCache = this.textEditor.getScrollTop()\n      }\n      return this.scrollTopCache\n    }\n    return this.textEditor.getScrollTop()\n  }\n\n  setScrollTop (scrollTop) {\n    return this.textEditor.setScrollTop(scrollTop)\n  }\n\n  getScrollLeft () {\n    if (this.useCache) {\n      if (!this.scrollLeftCache) {\n        this.scrollLeftCache = this.textEditor.getScrollLeft()\n      }\n      return this.scrollLeftCache\n    }\n\n    return this.textEditor.getScrollLeft()\n  }\n\n  getMaxScrollTop () {\n    if (this.maxScrollTopCache != null && this.useCache) {\n      return this.maxScrollTopCache\n    }\n    let maxScrollTop = this.textEditor.displayBuffer.getMaxScrollTop()\n    const lineHeight = this.textEditor.getLineHeightInPixels()\n\n    if (this.scrollPastEnd) {\n      maxScrollTop -= this.getHeight() - 3 * lineHeight\n    }\n    if (this.useCache) { this.maxScrollTopCache = maxScrollTop }\n    return maxScrollTop\n  }\n\n  editorDestroyed () {\n    return !this.textEditor || this.textEditor.isDestroyed()\n  }\n}\n","'use strict'\n\nimport { Emitter } from 'atom'\n\nlet idCounter = 0\nconst nextId = function () { return idCounter++ }\n\n/**\n * The `Decoration` class represents a decoration in the Minimap.\n *\n * It has the same API than the `Decoration` class of a text editor.\n */\nexport default class Decoration {\n  /**\n   * Returns `true` if the passed-in decoration properties matches the\n   * specified type.\n   *\n   * @param  {Object} decorationProperties the decoration properties to match\n   * @param  {string} type the decoration type to match\n   * @return {boolean} whether the decoration properties match the type\n   */\n  static isType (decorationProperties, type) {\n    if (Array.isArray(decorationProperties.type)) {\n      if (decorationProperties.type.indexOf(type) >= 0) { return true }\n      return false\n    } else {\n      return type === decorationProperties.type\n    }\n  }\n\n  /**\n   * Creates a new decoration.\n   *\n   * @param  {Marker} marker the target marker for the decoration\n   * @param  {Minimap} minimap the Minimap where the decoration will\n   *                           be displayed\n   * @param  {Object} properties the decoration's properties\n   */\n  constructor (marker, minimap, properties) {\n    /**\n     * @access private\n     */\n    this.marker = marker\n    /**\n     * @access private\n     */\n    this.minimap = minimap\n    /**\n     * @access private\n     */\n    this.emitter = new Emitter()\n    /**\n     * @access private\n     */\n    this.id = nextId()\n    /**\n     * @access private\n     */\n    this.properties = null\n    this.setProperties(properties)\n    this.properties.id = this.id\n    /**\n     * @access private\n     */\n    this.destroyed = false\n    /**\n     * @access private\n     */\n    this.markerDestroyDisposable = this.marker.onDidDestroy(() => {\n      this.destroy()\n    })\n\n    this.screenRange = marker.getScreenRange()\n  }\n\n  /**\n   * Destroy this marker.\n   *\n   * If you own the marker, you should use `Marker#destroy` which will destroy\n   * this decoration.\n   */\n  destroy () {\n    if (this.destroyed) { return }\n\n    this.markerDestroyDisposable.dispose()\n    this.markerDestroyDisposable = null\n    this.destroyed = true\n    this.emitter.emit('did-destroy')\n    this.emitter.dispose()\n  }\n\n  /**\n   * Returns whether this decoration is destroyed or not.\n   *\n   * @return {boolean} whether this decoration is destroyed or not\n   */\n  isDestroyed () { return this.destroyed }\n\n  /**\n   * Registers an event listener to the `did-change-properties` event.\n   *\n   * This event is triggered when the decoration update method is called.\n   *\n   * @param  {function(change:Object):void} callback a function to call\n   *                                        when the event is triggered\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidChangeProperties (callback) {\n    return this.emitter.on('did-change-properties', callback)\n  }\n\n  /**\n   * Registers an event listener to the `did-destroy` event.\n   *\n   * @param  {function():void} callback a function to call when the event\n   *                                    is triggered\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidDestroy (callback) {\n    return this.emitter.on('did-destroy', callback)\n  }\n\n  /**\n   * An id unique across all Decoration objects.\n   *\n   * @return {number} the decoration id\n   */\n  getId () { return this.id }\n\n  /**\n   * Returns the marker associated with this Decoration.\n   *\n   * @return {Marker} the decoration's marker\n   */\n  getMarker () { return this.marker }\n\n  /**\n   * Check if this decoration is of type `type`.\n   *\n   * @param  {string|Array} type a type like `'line-number'`, `'line'`, etc.\n   *                             `type` can also be an Array of Strings, where\n   *                             it will return true if the decoration's type\n   *                             matches any in the array.\n   * @return {boolean} whether this decoration match the passed-in type\n   */\n  isType (type) {\n    return Decoration.isType(this.properties, type)\n  }\n\n  /**\n   * Returns the Decoration's properties.\n   *\n   * @return {Object} the decoration's properties\n   */\n  getProperties () {\n    return this.properties\n  }\n\n  /**\n   * Update the marker with new properties. Allows you to change the\n   * decoration's class.\n   *\n   * @param {Object} newProperties the new properties for the decoration\n   */\n  setProperties (newProperties) {\n    if (this.destroyed) { return }\n\n    const oldProperties = this.properties\n    this.properties = newProperties\n    this.properties.id = this.id\n\n    this.emitter.emit('did-change-properties', { oldProperties, newProperties })\n  }\n}\n","'use strict'\n\nimport { Emitter } from 'atom'\nimport { escapeRegExp } from 'underscore-plus'\nimport path from 'path'\nimport Decoration from './decoration'\n\n/**\n * The mixin that provides the decorations API to the minimap editor\n * view.\n *\n * This mixin is injected into the `Minimap` prototype, so every methods defined\n * in this file will be available on any `Minimap` instance.\n */\nexport default class DecorationManagement {\n  /**\n   * Initializes the decorations related properties.\n   */\n  initializeDecorations () {\n    if (this.emitter == null) {\n      /**\n       * The minimap emitter, lazily created if not created yet.\n       * @type {Emitter}\n       * @access private\n       */\n      this.emitter = new Emitter()\n    }\n\n    /**\n     * A map with the decoration id as key and the decoration as value.\n     * @type {Object}\n     * @access private\n     */\n    this.decorationsById = new Map()\n    /**\n     * The decorations stored in an array indexed with their marker id.\n     * @type {Object}\n     * @access private\n     */\n    this.decorationsByMarkerId = new Map()\n    /**\n     * The subscriptions to the markers `did-change` event indexed using the\n     * marker id.\n     * @type {Object}\n     * @access private\n     */\n    this.decorationMarkerChangedSubscriptions = new Map()\n    /**\n     * The subscriptions to the markers `did-destroy` event indexed using the\n     * marker id.\n     * @type {Object}\n     * @access private\n     */\n    this.decorationMarkerDestroyedSubscriptions = new Map()\n    /**\n     * The subscriptions to the decorations `did-change-properties` event\n     * indexed using the decoration id.\n     * @type {Object}\n     * @access private\n     */\n    this.decorationUpdatedSubscriptions = new Map()\n    /**\n     * The subscriptions to the decorations `did-destroy` event indexed using\n     * the decoration id.\n     * @type {Object}\n     * @access private\n     */\n    this.decorationDestroyedSubscriptions = new Map()\n  }\n\n  /**\n   * Returns all the decorations registered in the current `Minimap`.\n   *\n   * @return {Array<Decoration>} all the decorations in this `Minimap`\n   */\n  getDecorations () {\n    return this.decorationsById.values()\n  }\n\n  /**\n   * Registers an event listener to the `did-add-decoration` event.\n   *\n   * @param  {function(event:Object):void} callback a function to call when the\n   *                                               event is triggered.\n   *                                               the callback will be called\n   *                                               with an event object with\n   *                                               the following properties:\n   * - marker: the marker object that was decorated\n   * - decoration: the decoration object that was created\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidAddDecoration (callback) {\n    return this.emitter.on('did-add-decoration', callback)\n  }\n\n  /**\n   * Registers an event listener to the `did-remove-decoration` event.\n   *\n   * @param  {function(event:Object):void} callback a function to call when the\n   *                                               event is triggered.\n   *                                               the callback will be called\n   *                                               with an event object with\n   *                                               the following properties:\n   * - marker: the marker object that was decorated\n   * - decoration: the decoration object that was created\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidRemoveDecoration (callback) {\n    return this.emitter.on('did-remove-decoration', callback)\n  }\n\n  /**\n   * Registers an event listener to the `did-change-decoration` event.\n   *\n   * This event is triggered when the marker targeted by the decoration\n   * was changed.\n   *\n   * @param  {function(event:Object):void} callback a function to call when the\n   *                                               event is triggered.\n   *                                               the callback will be called\n   *                                               with an event object with\n   *                                               the following properties:\n   * - marker: the marker object that was decorated\n   * - decoration: the decoration object that was created\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidChangeDecoration (callback) {\n    return this.emitter.on('did-change-decoration', callback)\n  }\n\n  /**\n   * Registers an event listener to the `did-change-decoration-range` event.\n   *\n   * This event is triggered when the marker range targeted by the decoration\n   * was changed.\n   *\n   * @param  {function(event:Object):void} callback a function to call when the\n   *                                               event is triggered.\n   *                                               the callback will be called\n   *                                               with an event object with\n   *                                               the following properties:\n   * - marker: the marker object that was decorated\n   * - decoration: the decoration object that was created\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidChangeDecorationRange (callback) {\n    return this.emitter.on('did-change-decoration-range', callback)\n  }\n\n  /**\n   * Registers an event listener to the `did-update-decoration` event.\n   *\n   * This event is triggered when the decoration itself is modified.\n   *\n   * @param  {function(decoration:Decoration):void} callback a function to call\n   *                                                         when the event is\n   *                                                         triggered\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidUpdateDecoration (callback) {\n    return this.emitter.on('did-update-decoration', callback)\n  }\n\n  /**\n   * Returns the decoration with the passed-in id.\n   *\n   * @param  {number} id the decoration id\n   * @return {Decoration} the decoration with the given id\n   */\n  decorationForId (id) {\n    return this.decorationsById.get(id)\n  }\n\n  /**\n   * Returns all the decorations that intersect the passed-in row range.\n   *\n   * @param  {number} startScreenRow the first row of the range\n   * @param  {number} endScreenRow the last row of the range\n   * @return {Array<Decoration>} the decorations that intersect the passed-in\n   *                             range\n   */\n  decorationsForScreenRowRange (startScreenRow, endScreenRow) {\n    const decorationsByMarkerId = {}\n    const markers = this.findMarkers({\n      intersectsScreenRowRange: [startScreenRow, endScreenRow]\n    })\n\n    for (let i = 0, len = markers.length; i < len; i++) {\n      const marker = markers[i]\n      const decorations = this.decorationsByMarkerId.get(marker.id)\n\n      if (decorations !== undefined) {\n        decorationsByMarkerId[marker.id] = decorations\n      }\n    }\n\n    return decorationsByMarkerId\n  }\n\n  /**\n   * Returns the decorations that intersects the passed-in row range\n   * in a structured way.\n   *\n   * At the first level, the keys are the available decoration types.\n   * At the second level, the keys are the row index for which there\n   * are decorations available. The value is an array containing the\n   * decorations that intersects with the corresponding row.\n   *\n   * @return {Object} the decorations grouped by type and then rows\n   * @property {Object} line all the line decorations by row\n   * @property {Array<Decoration>} line[row] all the line decorations\n   *                                    at a given row\n   * @property {Object} highlight-under all the highlight-under decorations\n   *                                    by row\n   * @property {Array<Decoration>} highlight-under[row] all the highlight-under\n   *                                    decorations at a given row\n   * @property {Object} highlight-over all the highlight-over decorations\n   *                                    by row\n   * @property {Array<Decoration>} highlight-over[row] all the highlight-over\n   *                                    decorations at a given row\n   * @property {Object} highlight-outine all the highlight-outine decorations\n   *                                    by row\n   * @property {Array<Decoration>} highlight-outine[row] all the\n   *                                    highlight-outine decorations at a given\n   *                                    row\n   */\n  decorationsByTypeThenRows () {\n    if (this.decorationsByTypeThenRowsCache != null) {\n      return this.decorationsByTypeThenRowsCache\n    }\n\n    const cache = {}\n\n    const decorations = this.decorationsById.values()\n    for (const decoration of decorations) {\n      const range = decoration.marker.getScreenRange()\n      const type = decoration.getProperties().type\n\n      if (cache[type] == null) { cache[type] = {} }\n\n      for (let row = range.start.row, len = range.end.row; row <= len; row++) {\n        if (cache[type][row] == null) { cache[type][row] = [] }\n\n        cache[type][row].push(decoration)\n      }\n    }\n\n    /**\n     * The grouped decorations cache.\n     * @type {Object}\n     * @access private\n     */\n    this.decorationsByTypeThenRowsCache = cache\n    return cache\n  }\n\n  /**\n   * Invalidates the decoration by screen rows cache.\n   */\n  invalidateDecorationForScreenRowsCache () {\n    this.decorationsByTypeThenRowsCache = null\n  }\n\n  /**\n   * Adds a decoration that tracks a `Marker`. When the marker moves,\n   * is invalidated, or is destroyed, the decoration will be updated to reflect\n   * the marker's state.\n   *\n   * @param  {Marker} marker the marker you want this decoration to follow\n   * @param  {Object} decorationParams the decoration properties\n   * @param  {string} decorationParams.type the decoration type in the following\n   *                                        list:\n   * - __line__: Fills the line background with the decoration color.\n   * - __highlight__: Renders a colored rectangle on the minimap. The highlight\n   *   is rendered above the line's text.\n   * - __highlight-over__: Same as __highlight__.\n   * - __highlight-under__: Renders a colored rectangle on the minimap. The\n   *   highlight is rendered below the line's text.\n   * - __highlight-outline__: Renders a colored outline on the minimap. The\n   *   highlight box is rendered above the line's text.\n   * - __foreground-custom__: A decoration type for which you have the control\n   *   over the render routine. Note that your routine should implement a render\n   *   on a per-line basis to avoid any side-effect with the offset bitmap cache\n   *   mechanism. These decorations are rendred on the foreground decorations\n   *   layer.\n   * - __background-custom__: A decoration type for which you have the control\n   *   over the render routine. Note that your routine should implement a render\n   *   on a per-line basis to avoid any side-effect with the offset bitmap cache\n   *   mechanism. These decorations are rendred on the background decorations\n   *   layer.\n   * @param  {string} [decorationParams.class] the CSS class to use to retrieve\n   *                                        the background color of the\n   *                                        decoration by building a scop\n   *                                        corresponding to\n   *                                        `.minimap .editor <your-class>`\n   * @param  {string} [decorationParams.scope] the scope to use to retrieve the\n   *                                        decoration background. Note that if\n   *                                        the `scope` property is set, the\n   *                                        `class` won't be used.\n   * @param  {string} [decorationParams.color] the CSS color to use to render\n   *                                           the decoration. When set, neither\n   *                                           `scope` nor `class` are used.\n   * @param  {string} [decorationParams.plugin] the name of the plugin that\n   *                                            created this decoration. It'll\n   *                                            be used to order the decorations\n   *                                            on the same layer and that are\n   *                                            overlapping. If the parameter is\n   *                                            omitted the Minimap will attempt\n   *                                            to infer the plugin origin from\n   *                                            the path of the caller function.\n   * @param  {function} [decorationParams.render] the render routine for custom\n   *                                              decorations. The function\n   *                                              receives the decoration and\n   *                                              the render data for the\n   *                                              current render pass.\n   * @return {Decoration} the created decoration\n   * @emits  {did-add-decoration} when the decoration is created successfully\n   * @emits  {did-change} when the decoration is created successfully\n   */\n  decorateMarker (marker, decorationParams) {\n    if (this.destroyed || marker == null) { return }\n\n    const { id } = marker\n\n    if (decorationParams.type === 'highlight') {\n      decorationParams.type = 'highlight-over'\n    }\n\n    const { type, plugin } = decorationParams\n\n    if (plugin == null) {\n      decorationParams.plugin = getOriginatorPackageName()\n    }\n\n    if (decorationParams.scope == null && decorationParams.class != null) {\n      const cls = decorationParams.class.split(' ').join('.')\n      decorationParams.scope = `.minimap .${cls}`\n    }\n\n    if (!this.decorationMarkerDestroyedSubscriptions.has(id)) {\n      this.decorationMarkerDestroyedSubscriptions.set(id,\n        marker.onDidDestroy(() => {\n          this.removeAllDecorationsForMarker(marker)\n        }))\n    }\n\n    if (!this.decorationMarkerChangedSubscriptions.has(id)) {\n      this.decorationMarkerChangedSubscriptions.set(id,\n        marker.onDidChange((event) => {\n          const decorations = this.decorationsByMarkerId.get(id)\n          const screenRange = marker.getScreenRange()\n\n          this.invalidateDecorationForScreenRowsCache()\n\n          if (decorations !== undefined) {\n            for (let i = 0, len = decorations.length; i < len; i++) {\n              const decoration = decorations[i]\n              this.emitter.emit('did-change-decoration', {\n                marker,\n                decoration,\n                event\n              })\n              this.emitDecorationChanges(decoration.type, decoration)\n\n              decoration.screenRange = screenRange\n            }\n          }\n          let oldStart = event.oldTailScreenPosition\n          let oldEnd = event.oldHeadScreenPosition\n          let newStart = event.newTailScreenPosition\n          let newEnd = event.newHeadScreenPosition\n\n          if (oldStart.row > oldEnd.row) {\n            [oldStart, oldEnd] = [oldEnd, oldStart]\n          }\n          if (newStart.row > newEnd.row) {\n            [newStart, newEnd] = [newEnd, newStart]\n          }\n\n          const rangesDiffs = computeRangesDiffs(\n            oldStart, oldEnd,\n            newStart, newEnd\n          )\n\n          for (let i = 0, len = rangesDiffs.length; i < len; i++) {\n            const [start, end] = rangesDiffs[i]\n            this.emitRangeChanges(type, {\n              start,\n              end\n            }, 0)\n          }\n        }))\n    }\n\n    const decoration = new Decoration(marker, this, decorationParams)\n\n    if (!this.decorationsByMarkerId.has(id)) {\n      this.decorationsByMarkerId.set(id, [])\n    }\n\n    this.decorationsByMarkerId.get(id).push(decoration)\n    this.decorationsById.set(decoration.id, decoration)\n\n    if (!this.decorationUpdatedSubscriptions.has(decoration.id)) {\n      this.decorationUpdatedSubscriptions.set(decoration.id,\n        decoration.onDidChangeProperties((event) => {\n          this.emitDecorationChanges(type, decoration)\n        }))\n    }\n\n    this.decorationDestroyedSubscriptions.set(decoration.id,\n      decoration.onDidDestroy(() => {\n        this.removeDecoration(decoration)\n      }))\n\n    this.emitDecorationChanges(type, decoration)\n    this.emitter.emit('did-add-decoration', {\n      marker,\n      decoration\n    })\n\n    return decoration\n  }\n\n  /**\n   * Emits a change in the `Minimap` corresponding to the\n   * passed-in decoration.\n   *\n   * @param  {string} type the type of decoration that changed\n   * @param  {Decoration} decoration the decoration for which emitting an event\n   * @access private\n   */\n  emitDecorationChanges (type, decoration) {\n    if (this.editorDestroyed()) { return }\n\n    this.invalidateDecorationForScreenRowsCache()\n\n    const range = decoration.screenRange\n    if (!range.start || !range.end) { return }\n\n    this.emitRangeChanges(type, range, 0)\n  }\n\n  /**\n   * Emits a change for the specified range.\n   *\n   * @param  {string} type the type of decoration that changed\n   * @param  {Object} range the range where changes occured\n   * @param  {number} [screenDelta] an optional screen delta for the\n   *                                change object\n   * @access private\n   */\n  emitRangeChanges (type, range, screenDelta) {\n    const startScreenRow = range.start.row\n    const endScreenRow = range.end.row\n    const lastRenderedScreenRow = this.getLastVisibleScreenRow()\n    const firstRenderedScreenRow = this.getFirstVisibleScreenRow()\n\n    if (screenDelta == null) {\n      screenDelta = (lastRenderedScreenRow - firstRenderedScreenRow) -\n                    (endScreenRow - startScreenRow)\n    }\n\n    const changeEvent = {\n      start: startScreenRow,\n      end: endScreenRow,\n      screenDelta,\n      type\n    }\n\n    this.emitter.emit('did-change-decoration-range', changeEvent)\n  }\n\n  /**\n   * Removes a `Decoration` from this minimap.\n   *\n   * @param  {Decoration} decoration the decoration to remove\n   * @emits  {did-change} when the decoration is removed\n   * @emits  {did-remove-decoration} when the decoration is removed\n   */\n  removeDecoration (decoration) {\n    if (decoration == null) { return }\n\n    const marker = decoration.marker\n    let subscription\n\n    this.decorationsById.delete(decoration.id)\n\n    subscription = this.decorationUpdatedSubscriptions.get(decoration.id)\n    if (subscription !== undefined) { subscription.dispose() }\n\n    subscription = this.decorationDestroyedSubscriptions.get(decoration.id)\n    if (subscription !== undefined) { subscription.dispose() }\n\n    this.decorationUpdatedSubscriptions.delete(decoration.id)\n    this.decorationDestroyedSubscriptions.delete(decoration.id)\n\n    const decorations = this.decorationsByMarkerId.get(marker.id)\n    if (decorations === undefined) { return }\n\n    this.emitDecorationChanges(decoration.getProperties().type, decoration)\n\n    const index = decorations.indexOf(decoration)\n    if (index > -1) {\n      decorations.splice(index, 1)\n\n      this.emitter.emit('did-remove-decoration', {\n        marker,\n        decoration\n      })\n\n      if (decorations.length === 0) {\n        this.removedAllMarkerDecorations(marker)\n      }\n    }\n  }\n\n  /**\n   * Removes all the decorations registered for the passed-in marker.\n   *\n   * @param  {Marker} marker the marker for which removing its decorations\n   * @emits  {did-change} when a decoration have been removed\n   * @emits  {did-remove-decoration} when a decoration have been removed\n   */\n  removeAllDecorationsForMarker (marker) {\n    if (marker == null) { return }\n\n    const decorations = this.decorationsByMarkerId.get(marker.id)\n    if (decorations === undefined) { return }\n\n    for (let i = 0, len = decorations.length; i < len; i++) {\n      const decoration = decorations[i]\n\n      if (!this.adapter.editorDestroyed()) {\n        this.emitDecorationChanges(decoration.getProperties().type, decoration)\n      }\n      this.emitter.emit('did-remove-decoration', {\n        marker,\n        decoration\n      })\n    }\n\n    this.removedAllMarkerDecorations(marker)\n  }\n\n  /**\n   * Performs the removal of a decoration for a given marker.\n   *\n   * @param  {Marker} marker the marker for which removing decorations\n   * @access private\n   */\n  removedAllMarkerDecorations (marker) {\n    if (marker == null) { return }\n\n    this.decorationMarkerChangedSubscriptions.get(marker.id).dispose()\n    this.decorationMarkerDestroyedSubscriptions.get(marker.id).dispose()\n\n    this.decorationsByMarkerId.delete(marker.id)\n    this.decorationMarkerChangedSubscriptions.delete(marker.id)\n    this.decorationMarkerDestroyedSubscriptions.delete(marker.id)\n  }\n\n  /**\n   * Removes all the decorations that was created in the current `Minimap`.\n   */\n  removeAllDecorations () {\n    const decorationMarkerChangedSubscriptionsValues = this.decorationMarkerChangedSubscriptions.values()\n    for (const decoration of decorationMarkerChangedSubscriptionsValues) {\n      decoration.dispose()\n    }\n\n    const decorationMarkerDestroyedSubscriptionsValues = this.decorationMarkerDestroyedSubscriptions.values()\n    for (const decoration of decorationMarkerDestroyedSubscriptionsValues) {\n      decoration.dispose()\n    }\n\n    const decorationUpdatedSubscriptionsValues = this.decorationUpdatedSubscriptions.values()\n    for (const decoration of decorationUpdatedSubscriptionsValues) {\n      decoration.dispose()\n    }\n\n    const decorationDestroyedSubscriptionsValues = this.decorationDestroyedSubscriptions.values()\n    for (const decoration of decorationDestroyedSubscriptionsValues) {\n      decoration.dispose()\n    }\n\n    const decorationsByIdValues = this.decorationsById.values()\n    for (const decoration of decorationsByIdValues) {\n      decoration.destroy()\n    }\n\n    this.decorationsById.clear()\n    this.decorationsByMarkerId.clear()\n    this.decorationMarkerChangedSubscriptions.clear()\n    this.decorationMarkerDestroyedSubscriptions.clear()\n    this.decorationUpdatedSubscriptions.clear()\n    this.decorationDestroyedSubscriptions.clear()\n  }\n}\n\nfunction getOriginatorPackageName () {\n  const line = new Error().stack.split('\\n')[3]\n  const filePath = line.split('(')[1].replace(')', '')\n  const re = new RegExp(\n    atom.packages.getPackageDirPaths().join('|') + escapeRegExp(path.sep)\n  )\n  const plugin = filePath.replace(re, '').split(path.sep)[0].replace(/minimap-|-minimap/, '')\n  return plugin.indexOf(path.sep) < 0 ? plugin : undefined\n}\n\n/**\n * Given two ranges, it returns an array of ranges representing the\n * differences between them.\n *\n * @param  {number} oldStart the row index of the first range start\n * @param  {number} oldEnd the row index of the first range end\n * @param  {number} newStart the row index of the second range start\n * @param  {number} newEnd the row index of the second range end\n * @return {Array<Object>} the array of diff ranges\n * @access private\n */\nfunction computeRangesDiffs (oldStart, oldEnd, newStart, newEnd) {\n  const diffs = []\n\n  if (oldStart.isLessThan(newStart)) {\n    diffs.push([oldStart, newStart])\n  } else if (newStart.isLessThan(oldStart)) {\n    diffs.push([newStart, oldStart])\n  }\n\n  if (oldEnd.isLessThan(newEnd)) {\n    diffs.push([oldEnd, newEnd])\n  } else if (newEnd.isLessThan(oldEnd)) {\n    diffs.push([newEnd, oldEnd])\n  }\n\n  return diffs\n}\n","'use strict'\n\n/**\n * @access private\n */\nexport default class StableAdapter {\n  constructor (textEditor) {\n    this.textEditor = textEditor\n    this.textEditorElement = atom.views.getView(this.textEditor)\n  }\n\n  enableCache () { this.useCache = true }\n\n  clearCache () {\n    this.useCache = false\n    delete this.heightCache\n    delete this.scrollTopCache\n    delete this.scrollLeftCache\n    delete this.maxScrollTopCache\n  }\n\n  onDidChangeScrollTop (callback) {\n    return this.textEditorElement.onDidChangeScrollTop(callback)\n  }\n\n  onDidChangeScrollLeft (callback) {\n    return this.textEditorElement.onDidChangeScrollLeft(callback)\n  }\n\n  getHeight () {\n    if (this.editorDestroyed()) { return 0 }\n\n    if (this.useCache) {\n      if (!this.heightCache) {\n        this.heightCache = this.textEditorElement.getHeight()\n      }\n      return this.heightCache\n    }\n    return this.textEditorElement.getHeight()\n  }\n\n  getScrollTop () {\n    if (this.editorDestroyed()) { return 0 }\n\n    if (this.useCache) {\n      if (!this.scrollTopCache) {\n        this.scrollTopCache = this.computeScrollTop()\n      }\n      return this.scrollTopCache\n    }\n    return this.computeScrollTop()\n  }\n\n  computeScrollTop () {\n    if (this.editorDestroyed()) { return 0 }\n\n    const scrollTop = this.textEditorElement.getScrollTop()\n    const lineHeight = this.textEditor.getLineHeightInPixels()\n    let firstRow = this.textEditorElement.getFirstVisibleScreenRow()\n\n    if (Number.isNaN(firstRow)) {\n      // Guard against their being no visible screen row\n      return 0\n    }\n\n    let lineTop = this.textEditorElement.pixelPositionForScreenPosition([firstRow, 0]).top\n\n    if (lineTop > scrollTop) {\n      firstRow -= 1\n      lineTop = this.textEditorElement.pixelPositionForScreenPosition([firstRow, 0]).top\n    }\n\n    const lineY = firstRow * lineHeight\n    const offset = Math.min(scrollTop - lineTop, lineHeight)\n    return lineY + offset\n  }\n\n  setScrollTop (scrollTop) {\n    if (this.editorDestroyed()) { return }\n\n    this.textEditorElement.setScrollTop(scrollTop)\n  }\n\n  getScrollLeft () {\n    if (this.editorDestroyed()) { return 0 }\n\n    if (this.useCache) {\n      if (!this.scrollLeftCache) {\n        this.scrollLeftCache = this.textEditorElement.getScrollLeft()\n      }\n      return this.scrollLeftCache\n    }\n    return this.textEditorElement.getScrollLeft()\n  }\n\n  getMaxScrollTop () {\n    if (this.editorDestroyed()) { return 0 }\n\n    if (this.maxScrollTopCache != null && this.useCache) {\n      return this.maxScrollTopCache\n    }\n\n    let maxScrollTop\n    if (this.textEditorElement.getMaxScrollTop) {\n      maxScrollTop = this.textEditorElement.getMaxScrollTop()\n\n      if (parseFloat(atom.getVersion()) >= 1.13) {\n        if (this.scrollPastEnd) {\n          const lineHeight = this.textEditor.getLineHeightInPixels()\n          maxScrollTop -= this.getHeight() - 3 * lineHeight\n        }\n      }\n    } else {\n      maxScrollTop = this.textEditorElement.getScrollHeight() - this.getHeight()\n\n      if (this.scrollPastEnd) {\n        const lineHeight = this.textEditor.getLineHeightInPixels()\n        maxScrollTop -= this.getHeight() - 3 * lineHeight\n      }\n    }\n\n    if (this.useCache) {\n      this.maxScrollTopCache = maxScrollTop\n    }\n\n    return maxScrollTop\n  }\n\n  editorDestroyed () {\n    return !this.textEditor ||\n           this.textEditor.isDestroyed() ||\n           !this.textEditorElement.component ||\n           !this.textEditorElement.getModel() ||\n           !this.textEditorElement.parentNode\n  }\n}\n","'use strict'\n\nimport include from './decorators/include'\nimport DecorationManagement from './decoration-management'\n\nimport { Emitter, CompositeDisposable } from 'atom'\nimport StableAdapter from './adapters/stable-adapter'\n\nlet nextModelId = 1\n\n/**\n * The Minimap class is the underlying model of a <MinimapElement>.\n * Most manipulations of the minimap is done through the model.\n *\n * Any Minimap instance is tied to a `TextEditor`.\n * Their lifecycle follow the one of their target `TextEditor`, so they are\n * destroyed whenever their `TextEditor` is destroyed.\n */\nexport default class Minimap {\n  static initClass () {\n    include(this, DecorationManagement)\n    return this\n  }\n\n  /**\n   * Creates a new Minimap instance for the given `TextEditor`.\n   *\n   * @param  {Object} options an object with the new Minimap properties\n   * @param  {TextEditor} options.textEditor the target text editor for\n   *                                         the minimap\n   * @param  {boolean} [options.standAlone] whether this minimap is in\n   *                                        stand-alone mode or not\n   * @param  {number} [options.width] the minimap width in pixels\n   * @param  {number} [options.height] the minimap height in pixels\n   * @throws {Error} Cannot create a minimap without an editor\n   */\n  constructor (options = {}) {\n    if (!options.textEditor) {\n      throw new Error('Cannot create a minimap without an editor')\n    }\n\n    /**\n     * The Minimap's text editor.\n     *\n     * @type {TextEditor}\n     * @access private\n     */\n    this.textEditor = options.textEditor\n\n    /**\n    * The Minimap's text editor element.\n     * @access private\n     */\n    this.editorElement = undefined\n\n    /**\n     * The stand-alone state of the current Minimap.\n     *\n     * @type {boolean}\n     * @access private\n     */\n    this.standAlone = options.standAlone\n    /**\n     * The width of the current Minimap.\n     *\n     * @type {number}\n     * @access private\n     */\n    this.width = options.width\n    /**\n     * The height of the current Minimap.\n     *\n     * @type {number}\n     * @access private\n     */\n    this.height = options.height\n    /**\n     * The id of the current Minimap.\n     *\n     * @type {Number}\n     * @access private\n     */\n    this.id = nextModelId++\n    /**\n     * The events emitter of the current Minimap.\n     *\n     * @type {Emitter}\n     * @access private\n     */\n    this.emitter = new Emitter()\n    /**\n     * The Minimap's subscriptions.\n     *\n     * @type {CompositeDisposable}\n     * @access private\n     */\n    this.subscriptions = new CompositeDisposable()\n    /**\n     * The adapter object leverage the access to several properties from\n     * the `TextEditor`/`TextEditorElement` to support the different APIs\n     * between different version of Atom.\n     *\n     * @type {Object}\n     * @access private\n     */\n    this.adapter = null\n    /**\n     * The char height of the current Minimap, will be `undefined` unless\n     * `setCharWidth` is called.\n     *\n     * @type {number}\n     * @access private\n     */\n    this.charHeight = null\n    /**\n     * The char height from the package's configuration. Will be overriden\n     * by the instance value.\n     *\n     * @type {number}\n     * @access private\n     */\n    this.configCharHeight = null\n    /**\n     * The char width of the current Minimap, will be `undefined` unless\n     * `setCharWidth` is called.\n     *\n     * @type {number}\n     * @access private\n     */\n    this.charWidth = null\n    /**\n     * The char width from the package's configuration. Will be overriden\n     * by the instance value.\n     *\n     * @type {number}\n     * @access private\n     */\n    this.configCharWidth = null\n    /**\n     * The interline of the current Minimap, will be `undefined` unless\n     * `setCharWidth` is called.\n     *\n     * @type {number}\n     * @access private\n     */\n    this.interline = null\n    /**\n     * The interline from the package's configuration. Will be overriden\n     * by the instance value.\n     *\n     * @type {number}\n     * @access private\n     */\n    this.configInterline = null\n    /**\n     * The devicePixelRatioRounding of the current Minimap, will be\n     * `undefined` unless `setDevicePixelRatioRounding` is called.\n     *\n     * @type {boolean}\n     * @access private\n     */\n    this.devicePixelRatioRounding = null\n    /**\n     * The devicePixelRatioRounding from the package's configuration.\n     * Will be overriden by the instance value.\n     *\n     * @type {boolean}\n     * @access private\n     */\n    this.configDevicePixelRatioRounding = null\n    /**\n     * A number of milliseconds which determines how often the minimap should redraw itself after\n     * detecting changes in the text editor. A value of 0 will cause the minimap to redraw\n     * immediately.\n     *\n     * @type {number}\n     * @access private\n     */\n    this.redrawDelay = 0\n    /**\n     * A boolean value to store whether this Minimap have been destroyed or not.\n     *\n     * @type {boolean}\n     * @access private\n     */\n    this.destroyed = false\n    /**\n     * A boolean value to store whether the `scrollPastEnd` setting is enabled\n     * or not.\n     *\n     * @type {boolean}\n     * @access private\n     */\n    this.scrollPastEnd = false\n\n    /**\n     * An array of changes registered with textEditor.onDidChange() which have not yet been handled\n     *\n     * @type {Array}\n     * @access private\n     */\n    this.pendingChangeEvents = []\n\n    /**\n     * Timer reference which, once fired, will flush all the pending changes stored in\n     * this.pendingChangeEvents array.\n     *\n     * @type {Timer?}\n     * @access private\n     */\n    this.flushChangesTimer = null\n\n    this.initializeDecorations()\n\n    if (atom.views.getView(this.textEditor).getScrollTop != null) {\n      this.adapter = new StableAdapter(this.textEditor)\n    } else {\n      // TODO remove LegacyAdapter in the next major version\n      atom.notifications.addWarning('LegacyAdapter of Minimap is deprecated and will be removed in the next major version. Please upgrade Atom to the latest version.')\n      const LegacyAdapter = require('./adapters/legacy-adapter')\n      this.adapter = new LegacyAdapter(this.textEditor)\n    }\n\n    /**\n     * When in stand-alone or independent scrolling mode, this value can be used\n     * instead of the computed scroll.\n     *\n     * @type {number}\n     * @access private\n     */\n    this.scrollTop = 0\n\n    const subs = this.subscriptions\n    let configSubscription = this.subscribeToConfig()\n\n    subs.add(configSubscription)\n\n    subs.add(this.textEditor.onDidChangeGrammar(() => {\n      subs.remove(configSubscription)\n      configSubscription.dispose()\n\n      configSubscription = this.subscribeToConfig()\n      subs.add(configSubscription)\n    }))\n\n    subs.add(this.adapter.onDidChangeScrollTop(() => {\n      if (!this.standAlone && !this.ignoreTextEditorScroll && !this.inChangeScrollTop) {\n        this.inChangeScrollTop = true\n        this.updateScrollTop()\n        this.emitter.emit('did-change-scroll-top', this)\n        this.inChangeScrollTop = false\n      }\n\n      if (this.ignoreTextEditorScroll) {\n        this.ignoreTextEditorScroll = false\n      }\n    }))\n    subs.add(this.adapter.onDidChangeScrollLeft(() => {\n      if (!this.standAlone) {\n        this.emitter.emit('did-change-scroll-left', this)\n      }\n    }))\n\n    subs.add(this.textEditor.onDidChange((changes) => {\n      this.scheduleChanges(changes)\n    }))\n    subs.add(this.textEditor.onDidDestroy(() => { this.destroy() }))\n\n    /*\n    FIXME Some changes occuring during the tokenization produces\n    ranges that deceive the canvas rendering by making some\n    lines at the end of the buffer intact while they are in fact not,\n    resulting in extra lines appearing at the end of the minimap.\n    Forcing a whole repaint to fix that bug is suboptimal but works.\n    */\n    subs.add(this.textEditor.onDidTokenize(() => {\n      this.emitter.emit('did-change-config')\n    }))\n  }\n\n  /**\n   * Destroys the model.\n   */\n  destroy () {\n    if (this.destroyed) { return }\n\n    clearTimeout(this.flushChangesTimer)\n    this.flushChangesTimer = null\n    this.pendingChangeEvents = []\n    this.removeAllDecorations()\n    this.subscriptions.dispose()\n    this.subscriptions = null\n    this.textEditor = null\n    this.emitter.emit('did-destroy')\n    this.emitter.dispose()\n    this.destroyed = true\n  }\n\n  /**\n   * Returns `true` when this `Minimap` has benn destroyed.\n   *\n   * @return {boolean} whether this Minimap has been destroyed or not\n   */\n  isDestroyed () { return this.destroyed }\n\n  /**\n   * Schedule changes from textEditor.onDidChange() to be handled at a later time\n   *\n   * @param  {Array} changes The changes to be scheduled\n   * @return void\n   * @access private\n   */\n  scheduleChanges (changes) {\n    this.pendingChangeEvents = this.pendingChangeEvents.concat(changes)\n\n    // Optimisation: If the redraw delay is set to 0, do not even schedule a timer\n    if (!this.redrawDelay) {\n      this.requestFlushChanges()\n    }\n\n    if (!this.flushChangesTimer) {\n      // If any changes happened within the timeout's delay, a timeout will already have been\n      // scheduled -> no need to schedule again\n      this.flushChangesTimer = setTimeout(() => { this.requestFlushChanges() }, this.redrawDelay)\n    }\n  }\n\n  /**\n   * Flush all changes which have been scheduled for later processing by this.scheduleChanges()\n   *\n   * @return void\n   * @access private\n   */\n  flushChanges () {\n    clearTimeout(this.flushChangesTimer)\n    this.flushChangesTimer = null\n    this.emitChanges(this.pendingChangeEvents)\n    this.pendingChangeEvents = []\n  }\n\n  /**\n   * Requests flush changes if not already requested\n   *\n   * @return void\n   * @access private\n   */\n  requestFlushChanges () {\n    if (!this.requestedFlushChanges) {\n      this.requestedFlushChanges = requestAnimationFrame(() => {\n        this.flushChanges()\n        if (this.requestedFlushChanges) {\n          cancelAnimationFrame(this.requestedFlushChanges)\n          this.requestedFlushChanges = null\n        }\n      })\n    }\n  }\n\n  /**\n   * Registers an event listener to the `did-change` event.\n   *\n   * @param  {function(event:Object):void} callback a function to call when the\n   *                                                event is triggered.\n   *                                                the callback will be called\n   *                                                with an event object with\n   *                                                the following properties:\n   * - start: The change's start row number\n   * - end: The change's end row number\n   * - screenDelta: the delta in buffer rows between the versions before and\n   *   after the change\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidChange (callback) {\n    return this.emitter.on('did-change', callback)\n  }\n\n  /**\n   * Registers an event listener to the `did-change-config` event.\n   *\n   * @param  {function():void} callback a function to call when the event\n   *                                    is triggered.\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidChangeConfig (callback) {\n    return this.emitter.on('did-change-config', callback)\n  }\n\n  /**\n   * Registers an event listener to the `did-change-scroll-top` event.\n   *\n   * The event is dispatched when the text editor `scrollTop` value have been\n   * changed or when the minimap scroll top have been changed in stand-alone\n   * mode.\n   *\n   * @param  {function(minimap:Minimap):void} callback a function to call when\n   *                                                   the event is triggered.\n   *                                                   The current Minimap is\n   *                                                   passed as argument to\n   *                                                   the callback.\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidChangeScrollTop (callback) {\n    return this.emitter.on('did-change-scroll-top', callback)\n  }\n\n  /**\n   * Registers an event listener to the `did-change-scroll-left` event.\n   *\n   * @param  {function(minimap:Minimap):void} callback a function to call when\n   *                                                   the event is triggered.\n   *                                                   The current Minimap is\n   *                                                   passed as argument to\n   *                                                   the callback.\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidChangeScrollLeft (callback) {\n    return this.emitter.on('did-change-scroll-left', callback)\n  }\n\n  /**\n   * Registers an event listener to the `did-change-stand-alone` event.\n   *\n   * This event is dispatched when the stand-alone of the current Minimap\n   * is either enabled or disabled.\n   *\n   * @param  {function(minimap:Minimap):void} callback a function to call when\n   *                                                   the event is triggered.\n   *                                                   The current Minimap is\n   *                                                   passed as argument to\n   *                                                   the callback.\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidChangeStandAlone (callback) {\n    return this.emitter.on('did-change-stand-alone', callback)\n  }\n\n  /**\n   * Registers an event listener to the `did-destroy` event.\n   *\n   * This event is dispatched when this Minimap have been destroyed. It can\n   * occurs either because the {@link destroy} method have been called on the\n   * Minimap or because the target text editor have been destroyed.\n   *\n   * @param  {function():void} callback a function to call when the event\n   *                                    is triggered.\n   * @return {Disposable} a disposable to stop listening to the event\n   */\n  onDidDestroy (callback) {\n    return this.emitter.on('did-destroy', callback)\n  }\n\n  /**\n   * Registers to the config changes for the current editor scope.\n   *\n   * @return {Disposable} the disposable to dispose all the registered events\n   * @access private\n   */\n  subscribeToConfig () {\n    const subs = new CompositeDisposable()\n    const opts = { scope: this.textEditor.getRootScopeDescriptor() }\n\n    subs.add(atom.config.observe('editor.scrollPastEnd', opts, (scrollPastEnd) => {\n      this.scrollPastEnd = scrollPastEnd\n      this.adapter.scrollPastEnd = this.scrollPastEnd\n      this.emitter.emit('did-change-config')\n    }))\n    subs.add(atom.config.observe('minimap.charHeight', opts, (configCharHeight) => {\n      this.configCharHeight = configCharHeight\n      this.updateScrollTop()\n      this.emitter.emit('did-change-config')\n    }))\n    subs.add(atom.config.observe('minimap.charWidth', opts, (configCharWidth) => {\n      this.configCharWidth = configCharWidth\n      this.updateScrollTop()\n      this.emitter.emit('did-change-config')\n    }))\n    subs.add(atom.config.observe('minimap.interline', opts, (configInterline) => {\n      this.configInterline = configInterline\n      this.updateScrollTop()\n      this.emitter.emit('did-change-config')\n    }))\n    subs.add(atom.config.observe('minimap.independentMinimapScroll', opts, (independentMinimapScroll) => {\n      this.independentMinimapScroll = independentMinimapScroll\n      this.updateScrollTop()\n    }))\n    subs.add(atom.config.observe('minimap.scrollSensitivity', opts, (scrollSensitivity) => {\n      this.scrollSensitivity = scrollSensitivity\n    }))\n    subs.add(atom.config.observe('minimap.redrawDelay', opts, (redrawDelay) => {\n      this.redrawDelay = redrawDelay\n    }))\n    // cdprr is shorthand for configDevicePixelRatioRounding\n    subs.add(atom.config.observe(\n      'minimap.devicePixelRatioRounding',\n      opts,\n      (cdprr) => {\n        this.configDevicePixelRatioRounding = cdprr\n        this.updateScrollTop()\n        this.emitter.emit('did-change-config')\n      }\n    ))\n\n    return subs\n  }\n\n  /**\n   * Returns `true` when the current Minimap is a stand-alone minimap.\n   *\n   * @return {boolean} whether this Minimap is in stand-alone mode or not.\n   */\n  isStandAlone () { return this.standAlone }\n\n  /**\n   * Sets the stand-alone mode for this minimap.\n   *\n   * @param {boolean} standAlone the new state of the stand-alone mode for this\n   *                             Minimap\n   * @emits {did-change-stand-alone} if the stand-alone mode have been toggled\n   *        on or off by the call\n   */\n  setStandAlone (standAlone) {\n    if (standAlone !== this.standAlone) {\n      this.standAlone = standAlone\n      this.emitter.emit('did-change-stand-alone', this)\n    }\n  }\n\n  /**\n   * Returns the `TextEditor` that this minimap represents.\n   *\n   * @return {TextEditor} this Minimap's text editor\n   */\n  getTextEditor () { return this.textEditor }\n\n  /**\n   * Returns the `TextEditorElement` for the Minimap's `TextEditor`.\n   *\n   * @return {TextEditorElement} the minimap's text editor element\n   */\n  getTextEditorElement () {\n    if (this.editorElement) { return this.editorElement }\n\n    this.editorElement = atom.views.getView(this.getTextEditor())\n    return this.editorElement\n  }\n\n  /**\n   * Returns the height of the `TextEditor` at the Minimap scale.\n   *\n   * @return {number} the scaled height of the text editor\n   */\n  getTextEditorScaledHeight () {\n    return this.adapter.getHeight() * this.getVerticalScaleFactor()\n  }\n\n  /**\n   * Returns the `TextEditor` scroll top value at the Minimap scale.\n   *\n   * @return {number} the scaled scroll top of the text editor\n   */\n  getTextEditorScaledScrollTop () {\n    return this.adapter.getScrollTop() * this.getVerticalScaleFactor()\n  }\n\n  /**\n   * Returns the `TextEditor` scroll left value at the Minimap scale.\n   *\n   * @return {number} the scaled scroll left of the text editor\n   */\n  getTextEditorScaledScrollLeft () {\n    return this.adapter.getScrollLeft() * this.getHorizontalScaleFactor()\n  }\n\n  /**\n   * Returns the `TextEditor` maximum scroll top value.\n   *\n   * When the `scrollPastEnd` setting is enabled, the method compensate the\n   * extra scroll by removing the same height as added by the editor from the\n   * final value.\n   *\n   * @return {number} the maximum scroll top of the text editor\n   */\n  getTextEditorMaxScrollTop () { return this.adapter.getMaxScrollTop() }\n\n  /**\n   * Returns the `TextEditor` scroll top value.\n   *\n   * @return {number} the scroll top of the text editor\n   */\n  getTextEditorScrollTop () { return this.adapter.getScrollTop() }\n\n  /**\n   * Sets the scroll top of the `TextEditor`.\n   *\n   * @param {number} scrollTop the new scroll top value\n   */\n  setTextEditorScrollTop (scrollTop, ignoreTextEditorScroll = false) {\n    this.ignoreTextEditorScroll = ignoreTextEditorScroll\n    this.adapter.setScrollTop(scrollTop)\n  }\n\n  /**\n   * Returns the `TextEditor` scroll left value.\n   *\n   * @return {number} the scroll left of the text editor\n   */\n  getTextEditorScrollLeft () { return this.adapter.getScrollLeft() }\n\n  /**\n   * Returns the height of the `TextEditor`.\n   *\n   * @return {number} the height of the text editor\n   */\n  getTextEditorHeight () { return this.adapter.getHeight() }\n\n  /**\n   * Returns the `TextEditor` scroll as a value normalized between `0` and `1`.\n   *\n   * When the `scrollPastEnd` setting is enabled the value may exceed `1` as the\n   * maximum scroll value used to compute this ratio compensate for the extra\n   * height in the editor. **Use {@link getCapedTextEditorScrollRatio} when\n   * you need a value that is strictly between `0` and `1`.**\n   *\n   * @return {number} the scroll ratio of the text editor\n   */\n  getTextEditorScrollRatio () {\n    return this.adapter.getScrollTop() / (this.getTextEditorMaxScrollTop() || 1)\n  }\n\n  /**\n   * Returns the `TextEditor` scroll as a value normalized between `0` and `1`.\n   *\n   * The returned value will always be strictly between `0` and `1`.\n   *\n   * @return {number} the scroll ratio of the text editor strictly between\n   *                  0 and 1\n   */\n  getCapedTextEditorScrollRatio () {\n    return Math.min(1, this.getTextEditorScrollRatio())\n  }\n\n  /**\n   * Returns the height of the whole minimap in pixels based on the `minimap`\n   * settings.\n   *\n   * @return {number} the height of the minimap\n   */\n  getHeight () {\n    return this.textEditor.getScreenLineCount() * this.getLineHeight()\n  }\n\n  /**\n   * Returns the width of the whole minimap in pixels based on the `minimap`\n   * settings.\n   *\n   * @return {number} the width of the minimap\n   */\n  getWidth () {\n    return this.textEditor.getMaxScreenLineLength() * this.getCharWidth()\n  }\n\n  /**\n   * Returns the height the Minimap content will take on screen.\n   *\n   * When the Minimap height is greater than the `TextEditor` height, the\n   * `TextEditor` height is returned instead.\n   *\n   * @return {number} the visible height of the Minimap\n   */\n  getVisibleHeight () {\n    return Math.min(this.getScreenHeight(), this.getHeight())\n  }\n\n  /**\n   * Returns the height the minimap should take once displayed, it's either\n   * the height of the `TextEditor` or the provided `height` when in stand-alone\n   * mode.\n   *\n   * @return {number} the total height of the Minimap\n   */\n  getScreenHeight () {\n    if (this.isStandAlone()) {\n      if (this.height != null) {\n        return this.height\n      } else {\n        return this.getHeight()\n      }\n    } else {\n      return this.adapter.getHeight()\n    }\n  }\n\n  /**\n   * Returns the width the whole Minimap will take on screen.\n   *\n   * @return {number} the width of the Minimap when displayed\n   */\n  getVisibleWidth () {\n    return Math.min(this.getScreenWidth(), this.getWidth())\n  }\n\n  /**\n   * Returns the width the Minimap should take once displayed, it's either the\n   * width of the Minimap content or the provided `width` when in standAlone\n   * mode.\n   *\n   * @return {number} the Minimap screen width\n   */\n  getScreenWidth () {\n    if (this.isStandAlone() && this.width != null) {\n      return this.width\n    } else {\n      return this.getWidth()\n    }\n  }\n\n  /**\n   * Sets the preferred height and width when in stand-alone mode.\n   *\n   * This method is called by the <MinimapElement> for this Minimap so that\n   * the model is kept in sync with the view.\n   *\n   * @param {number} height the new height of the Minimap\n   * @param {number} width the new width of the Minimap\n   */\n  setScreenHeightAndWidth (height, width) {\n    if (this.width !== width || this.height !== height) {\n      this.height = height\n      this.width = width\n      this.updateScrollTop()\n    }\n  }\n\n  /**\n   * Returns the vertical scaling factor when converting coordinates from the\n   * `TextEditor` to the Minimap.\n   *\n   * @return {number} the Minimap vertical scaling factor\n   */\n  getVerticalScaleFactor () {\n    return this.getLineHeight() / this.textEditor.getLineHeightInPixels()\n  }\n\n  /**\n   * Returns the horizontal scaling factor when converting coordinates from the\n   * `TextEditor` to the Minimap.\n   *\n   * @return {number} the Minimap horizontal scaling factor\n   */\n  getHorizontalScaleFactor () {\n    return this.getCharWidth() / this.textEditor.getDefaultCharWidth()\n  }\n\n  /**\n   * Returns the height of a line in the Minimap in pixels.\n   *\n   * @return {number} a line's height in the Minimap\n   */\n  getLineHeight () { return this.getCharHeight() + this.getInterline() }\n\n  /**\n   * Returns the width of a character in the Minimap in pixels.\n   *\n   * @return {number} a character's width in the Minimap\n   */\n  getCharWidth () {\n    if (this.charWidth != null) {\n      return this.charWidth\n    } else {\n      return this.configCharWidth\n    }\n  }\n\n  /**\n   * Sets the char width for this Minimap. This value will override the\n   * value from the config for this instance only. A `did-change-config`\n   * event is dispatched.\n   *\n   * @param {number} charWidth the new width of a char in the Minimap\n   * @emits {did-change-config} when the value is changed\n   */\n  setCharWidth (charWidth) {\n    this.charWidth = Math.floor(charWidth)\n    this.emitter.emit('did-change-config')\n  }\n\n  /**\n   * Returns the height of a character in the Minimap in pixels.\n   *\n   * @return {number} a character's height in the Minimap\n   */\n  getCharHeight () {\n    if (this.charHeight != null) {\n      return this.charHeight\n    } else {\n      return this.configCharHeight\n    }\n  }\n\n  /**\n   * Sets the char height for this Minimap. This value will override the\n   * value from the config for this instance only. A `did-change-config`\n   * event is dispatched.\n   *\n   * @param {number} charHeight the new height of a char in the Minimap\n   * @emits {did-change-config} when the value is changed\n   */\n  setCharHeight (charHeight) {\n    this.charHeight = Math.floor(charHeight)\n    this.emitter.emit('did-change-config')\n  }\n\n  /**\n   * Returns the height of an interline in the Minimap in pixels.\n   *\n   * @return {number} the interline's height in the Minimap\n   */\n  getInterline () {\n    if (this.interline != null) {\n      return this.interline\n    } else {\n      return this.configInterline\n    }\n  }\n\n  /**\n   * Sets the interline height for this Minimap. This value will override the\n   * value from the config for this instance only. A `did-change-config`\n   * event is dispatched.\n   *\n   * @param {number} interline the new height of an interline in the Minimap\n   * @emits {did-change-config} when the value is changed\n   */\n  setInterline (interline) {\n    this.interline = Math.floor(interline)\n    this.emitter.emit('did-change-config')\n  }\n\n  /**\n   * Returns the status of devicePixelRatioRounding in the Minimap.\n   *\n   * @return {boolean} the devicePixelRatioRounding status in the Minimap\n   */\n  getDevicePixelRatioRounding () {\n    if (this.devicePixelRatioRounding != null) {\n      return this.devicePixelRatioRounding\n    } else {\n      return this.configDevicePixelRatioRounding\n    }\n  }\n\n  /**\n   * Sets the devicePixelRatioRounding status for this Minimap.\n   * This value will override the value from the config for this instance only.\n   * A `did-change-config` event is dispatched.\n   *\n   * @param {boolean} devicePixelRatioRounding the new status of\n   *                                           devicePixelRatioRounding\n   *                                           in the Minimap\n   * @emits {did-change-config} when the value is changed\n   */\n  setDevicePixelRatioRounding (devicePixelRatioRounding) {\n    this.devicePixelRatioRounding = devicePixelRatioRounding\n    this.emitter.emit('did-change-config')\n  }\n\n  /**\n   * Returns the devicePixelRatio in the Minimap in pixels.\n   *\n   * @return {number} the devicePixelRatio in the Minimap\n   */\n  getDevicePixelRatio () {\n    return this.getDevicePixelRatioRounding()\n      ? Math.floor(devicePixelRatio)\n      : devicePixelRatio\n  }\n\n  /**\n   * Returns the index of the first visible row in the Minimap.\n   *\n   * @return {number} the index of the first visible row\n   */\n  getFirstVisibleScreenRow () {\n    return Math.floor(this.getScrollTop() / this.getLineHeight())\n  }\n\n  /**\n   * Returns the index of the last visible row in the Minimap.\n   *\n   * @return {number} the index of the last visible row\n   */\n  getLastVisibleScreenRow () {\n    return Math.ceil(\n      (this.getScrollTop() + this.getScreenHeight()) / this.getLineHeight()\n    )\n  }\n\n  /**\n   * Returns true when the `independentMinimapScroll` setting have been enabled.\n   *\n   * @return {boolean} whether the minimap can scroll independently\n   */\n  scrollIndependentlyOnMouseWheel () { return this.independentMinimapScroll }\n\n  /**\n   * Returns the current scroll of the Minimap.\n   *\n   * The Minimap can scroll only when its height is greater that the height\n   * of its `TextEditor`.\n   *\n   * @return {number} the scroll top of the Minimap\n   */\n  getScrollTop () {\n    return this.standAlone || this.independentMinimapScroll\n      ? this.scrollTop\n      : this.getScrollTopFromEditor()\n  }\n\n  /**\n   * Sets the minimap scroll top value when in stand-alone mode.\n   *\n   * @param {number} scrollTop the new scroll top for the Minimap\n   * @emits {did-change-scroll-top} if the Minimap's stand-alone mode is enabled\n   */\n  setScrollTop (scrollTop) {\n    this.scrollTop = Math.max(0, Math.min(this.getMaxScrollTop(), scrollTop))\n\n    if (this.standAlone || this.independentMinimapScroll) {\n      this.emitter.emit('did-change-scroll-top', this)\n    }\n  }\n\n  /**\n   * Returns the minimap scroll as a ration between 0 and 1.\n   *\n   * @return {number} the minimap scroll ratio\n   */\n  getScrollRatio () {\n    return this.getScrollTop() / this.getMaxScrollTop()\n  }\n\n  /**\n   * Updates the scroll top value with the one computed from the text editor\n   * when the minimap is in the independent scrolling mode.\n   *\n   * @access private\n   */\n  updateScrollTop () {\n    if (this.independentMinimapScroll) {\n      try {\n        this.setScrollTop(this.getScrollTopFromEditor())\n      } catch (err) {\n\n      }\n      this.emitter.emit('did-change-scroll-top', this)\n    }\n  }\n\n  /**\n   * Returns the scroll top as computed from the text editor scroll top.\n   *\n   * @return {number} the computed scroll top value\n   */\n  getScrollTopFromEditor () {\n    return Math.abs(\n      this.getCapedTextEditorScrollRatio() * this.getMaxScrollTop()\n    )\n  }\n\n  /**\n   * Returns the maximum scroll value of the Minimap.\n   *\n   * @return {number} the maximum scroll top for the Minimap\n   */\n  getMaxScrollTop () {\n    return Math.max(0, this.getHeight() - this.getScreenHeight())\n  }\n\n  /**\n   * Returns `true` when the Minimap can scroll.\n   *\n   * @return {boolean} whether this Minimap can scroll or not\n   */\n  canScroll () { return this.getMaxScrollTop() > 0 }\n\n  /**\n   * Updates the minimap scroll top value using a mouse event when the\n   * independent scrolling mode is enabled\n   *\n   * @param  {MouseEvent} event the mouse wheel event\n   * @access private\n   */\n  onMouseWheel (event) {\n    if (this.scrollIndependentlyOnMouseWheel()) {\n      event.stopPropagation()\n\n      if (!this.canScroll()) { return }\n\n      const { wheelDeltaY } = event\n      const previousScrollTop = this.getScrollTop()\n      const updatedScrollTop = previousScrollTop - Math.round(wheelDeltaY * this.scrollSensitivity)\n\n      event.preventDefault()\n      this.setScrollTop(updatedScrollTop)\n    }\n  }\n\n  /**\n   * Delegates to `TextEditor#getMarker`.\n   *\n   * @access private\n   */\n  getMarker (id) { return this.textEditor.getMarker(id) }\n\n  /**\n   * Delegates to `TextEditor#findMarkers`.\n   *\n   * @access private\n   */\n  findMarkers (o) {\n    try {\n      return this.textEditor.findMarkers(o)\n    } catch (error) {\n      return []\n    }\n  }\n\n  /**\n   * Delegates to `TextEditor#markBufferRange`.\n   *\n   * @access private\n   */\n  markBufferRange (range) { return this.textEditor.markBufferRange(range) }\n\n  /**\n   * Emits a change events with the passed-in changes as data.\n   *\n   * @param  {Object} changes a change to dispatch\n   * @access private\n   */\n  emitChanges (changes) { this.emitter.emit('did-change', changes) }\n\n  /**\n   * Enables the cache at the adapter level to avoid consecutive access to the\n   * text editor API during a render phase.\n   *\n   * @access private\n   */\n  enableCache () { this.adapter.enableCache() }\n\n  /**\n   * Disable the adapter cache.\n   *\n   * @access private\n   */\n  clearCache () { this.adapter.clearCache() }\n\n  editorDestroyed () { this.adapter.editorDestroyed() }\n}\n\nMinimap.initClass()\n","'use strict'\n\n/**\n * This class is used by the `CanvasDrawer` in `MinimapElement` to\n * read the styles informations (color and background-color) from the DOM to use when rendering\n * the `Minimap`.\n *\n * It attaches a dummyNode to the targetNode, renders them, and finds the computed style back.\n * TODO: find a better way to get the token colors\n */\nexport default class DOMStylesReader {\n  constructor () {\n    /**\n     * The cache object\n     * @access private\n     */\n    this.domStylesCache = new Map()\n\n    /**\n     * @access private\n     */\n    this.dummyNode = undefined\n\n    // used to check if the dummyNode is on the current targetNode\n    this.targetNode = undefined\n\n    /**\n     * Set to true once tokenized\n     * @access private\n     * unused\n     */\n    // this.hasTokenizedOnce = false\n  }\n\n  /**\n   * Returns the computed values for the given property and scope in the DOM.\n   *\n   * This function insert a dummy element in the DOM to compute\n   * its style, return the specified property, and clear the content of the\n   * dummy element.\n   *\n   * @param  {Array<string>} scopes a list of classes reprensenting the scope\n   *                                to build\n   * @param  {string} property the name of the style property to compute\n   * @param  {Node} targetNode\n   * @param  {boolean} getFromCache whether to cache the computed value or not\n   * @return {string} the computed property's value\n   * used in CanvasDrawer\n   */\n  retrieveStyleFromDom (scopes, property, targetNode, getFromCache) {\n    if (!scopes.length) { return '' } // no scopes\n    const key = scopes.join(' ')\n    let cachedData = this.domStylesCache.get(key)\n\n    if (cachedData !== undefined) {\n      if (getFromCache) { // if should get the value from the cache\n        const value = cachedData[property]\n        if (value !== undefined) {\n          // value exists\n          return value\n        } // value not in the cache - get fresh value\n      } // don't use cache - get fresh value\n    } else {\n      // key did not exist. create it\n      cachedData = {}\n    }\n\n    this.ensureDummyNodeExistence(targetNode)\n\n    let parent = this.dummyNode\n    for (let i = 0, len = scopes.length; i < len; i++) {\n      const scope = scopes[i]\n      const node = document.createElement('span')\n      node.className = scope.replace(dotRegexp, ' ') // TODO why replace is needed?\n      parent.appendChild(node)\n      parent = node\n    }\n\n    const style = window.getComputedStyle(parent)\n    let value = style.getPropertyValue(property)\n\n    // rotate hue if webkit-filter available\n    const filter = style.getPropertyValue('-webkit-filter')\n    if (filter.indexOf('hue-rotate') > -1) {\n      value = rotateHue(value, filter)\n    }\n\n    if (value !== '') {\n      cachedData[property] = value\n      this.domStylesCache.set(key, cachedData)\n    }\n\n    this.dummyNode.innerHTML = ''\n    return value\n  }\n\n  /**\n   * Creates a DOM node container for all the operations that need to read\n   * styles properties from DOM.\n   * @param {Node} targetNode\n   *\n   * @access private\n   */\n  ensureDummyNodeExistence (targetNode) {\n    if (this.targetNode !== targetNode || this.dummyNode === undefined) {\n      this.dummyNode = document.createElement('span')\n      this.dummyNode.style.visibility = 'hidden'\n\n      // attach to the target node\n      targetNode.appendChild(this.dummyNode)\n      this.targetNode = targetNode\n    }\n  }\n\n  /**\n   * Invalidates the cache by emptying the cache object.\n   * used in MinimapElement\n   */\n  invalidateDOMStylesCache () {\n    this.domStylesCache.clear()\n  }\n\n  /**\n   * Invalidates the cache only for the first tokenization event.\n   *\n   * @access private\n   * unused\n   */\n  /*\n  invalidateIfFirstTokenization () {\n    if (this.hasTokenizedOnce) { return }\n    this.invalidateDOMStylesCache()\n    this.hasTokenizedOnce = true\n  }\n  */\n}\n\n//    ##     ## ######## ##       ########  ######## ########   ######\n//    ##     ## ##       ##       ##     ## ##       ##     ## ##    ##\n//    ##     ## ##       ##       ##     ## ##       ##     ## ##\n//    ######### ######   ##       ########  ######   ########   ######\n//    ##     ## ##       ##       ##        ##       ##   ##         ##\n//    ##     ## ##       ##       ##        ##       ##    ##  ##    ##\n//    ##     ## ######## ######## ##        ######## ##     ##  ######\n\nconst dotRegexp = /\\.+/g\nconst rgbExtractRegexp = /rgb(a?)\\((\\d+), (\\d+), (\\d+)(, (\\d+(\\.\\d+)?))?\\)/\nconst hueRegexp = /hue-rotate\\((\\d+)deg\\)/\n\n/**\n * Computes the output color of `value` with a rotated hue defined\n * in `filter`.\n *\n * @param  {string} value the CSS color to apply the rotation on\n * @param  {string} filter the CSS hue rotate filter declaration\n * @return {string} the rotated CSS color\n * @access private\n */\nfunction rotateHue (value, filter) {\n  const match = value.match(rgbExtractRegexp)\n  let [, , r, g, b, , a] = match\n\n  let [, hue] = filter.match(hueRegexp)\n\n  ;[r, g, b, a, hue] = [r, g, b, a, hue].map(Number)\n  ;[r, g, b] = rotate(r, g, b, hue)\n\n  if (isNaN(a)) {\n    return `rgb(${r}, ${g}, ${b})`\n  } else {\n    return `rgba(${r}, ${g}, ${b}, ${a})`\n  }\n}\n\n/**\n * Computes the hue rotation on the provided `r`, `g` and `b` channels\n * by the amount of `angle`.\n *\n * @param  {number} r the red channel of the color to rotate\n * @param  {number} g the green channel of the color to rotate\n * @param  {number} b the blue channel of the color to rotate\n * @param  {number} angle the angle to rotate the hue with\n * @return {Array<number>} the rotated color channels\n * @access private\n */\nfunction rotate (r, g, b, angle) {\n  const matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1]\n  const lumR = 0.2126\n  const lumG = 0.7152\n  const lumB = 0.0722\n  const hueRotateR = 0.143\n  const hueRotateG = 0.140\n  const hueRotateB = 0.283\n  const cos = Math.cos(angle * Math.PI / 180)\n  const sin = Math.sin(angle * Math.PI / 180)\n\n  matrix[0] = lumR + (1 - lumR) * cos - (lumR * sin)\n  matrix[1] = lumG - (lumG * cos) - (lumG * sin)\n  matrix[2] = lumB - (lumB * cos) + (1 - lumB) * sin\n  matrix[3] = lumR - (lumR * cos) + hueRotateR * sin\n  matrix[4] = lumG + (1 - lumG) * cos + hueRotateG * sin\n  matrix[5] = lumB - (lumB * cos) - (hueRotateB * sin)\n  matrix[6] = lumR - (lumR * cos) - ((1 - lumR) * sin)\n  matrix[7] = lumG - (lumG * cos) + lumG * sin\n  matrix[8] = lumB + (1 - lumB) * cos + lumB * sin\n\n  return [\n    clamp(matrix[0] * r + matrix[1] * g + matrix[2] * b),\n    clamp(matrix[3] * r + matrix[4] * g + matrix[5] * b),\n    clamp(matrix[6] * r + matrix[7] * g + matrix[8] * b)\n  ]\n\n  function clamp (num) {\n    return Math.ceil(Math.max(0, Math.min(255, num)))\n  }\n}\n"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","assertDisposable","disposable","Disposable","require$$0","isDisposable","Batch","batch","size","topLevel","bottomLevel","[object Object]","level","fn","push","fns","getState","element","isCollection","obj","Array","isArray","undefined","toArray","collection","array","forEach","isElement","nodeType","getOption","options","name","defaultValue","value","restArguments","func","startIndex","Math","max","arguments","rest","index","call","this","args","apply","isObject","type","isNull","isUndefined","isBoolean","toString","tagTester","has","hasOwnProperty","isFinite","isSymbol","_isFinite","isNaN","parseFloat","isNumber","_isNaN","constant","createSizePropertyCheck","getSizeProperty","sizeProperty","shallowProperty","collectNonEnumProps","keys","hash","l","emulatedSet","nonEnumIdx","nonEnumerableProps","constructor","proto","isFunction","ObjProto","prop","contains","nativeKeys","hasEnumBug","isEmpty","isArrayLike","isString","isArguments","isMatch","object","attrs","_keys","_","_wrapped","eq","a","b","aStack","bStack","deepEq","className","SymbolProto","valueOf","DataView","byteLength","getByteLength","getUint8","isTypedArray","buffer","areArrays","aCtor","bCtor","pop","isEqual","allKeys","values","pairs","invert","result","functions","names","sort","createAssigner","keysFunc","defaults","source","baseCreate","nativeCreate","Ctor","create","extendOwn","clone","slice","extend","tap","interceptor","path","_has","identity","matcher","deepGet","property","optimizeCb","context","argCount","accumulator","baseIteratee","iteratee","Infinity","cb","mapObject","results","currentKey","noop","propertyOf","times","n","accum","random","min","floor","createEscaper","map","escaper","match","join","testRegexp","RegExp","replaceRegexp","string","test","replace","escapeChar","escapes","template","text","settings","oldSettings","templateSettings","render","escape","interpolate","evaluate","offset","variable","Function","e","data","fallback","uniqueId","prefix","id","idCounter","chain","_chain","executeBound","sourceFunc","boundFunc","callingContext","self","flatten","input","depth","strict","output","concat","idx","getLength","j","len","memoize","hasher","cache","address","throttle","wait","timeout","previous","later","leading","now","throttled","_now","remaining","clearTimeout","trailing","setTimeout","cancel","debounce","immediate","debounced","callNow","delay","wrap","wrapper","partial","negate","predicate","compose","start","after","before","memo","findKey","createPredicateIndexFinder","dir","sortedIndex","low","high","mid","createIndexFinder","predicateFind","item","find","findIndex","findWhere","each","createReduce","reducer","initial","filter","list","reject","every","some","fromIndex","guard","indexOf","pluck","where","computed","lastComputed","v","sample","last","rand","temp","shuffle","sortBy","criteria","left","right","group","behavior","partition","keyInObj","first","compact","Boolean","_flatten","uniq","isSorted","seen","intersection","argsLength","unzip","range","stop","step","ceil","chunk","count","chainResult","mixin","drawToken","color","x","y","charWidth","charHeight","ignoreWhitespacesInTokens","fillStyle","fillRect","chars","drawLines","firstRow","lastRow","offsetRow","lineHeight","canvasWidth","editor","editorScreenLineCount","invisibleRegExp","getTokenColor","maxTokensInOneLine","lastLine","line","editorTokensForScreenRow","tokensForScreenRow","numTokenToRender","iToken","token","tokenText","tokenScopes","scopes","clearRect","whitespaceTokenRegex","fill","drawHighlightDecoration","decoration","decorationColor","getMarker","getScreenRange","rowSpan","end","row","column","yRow","screenRow","transparentize","opacity","computeIntactRanges","changes","offscreenFirstRow","offscreenLastRow","intactRanges","offscreenRow","change","newIntactRanges","intactLen","screenDelta","bufferDelta","splice","truncateIntactRanges","include","cls","mixins","getOwnPropertyNames","k","getOwnPropertyDescriptor","elementName","registerOrUpdateElement","class","updateOverlayStyle","basis","overlayStyle","textContent","extractMouseEventData","mouseEvent","pageX","pageY","isLeftMouse","button","isMiddleMouse","extractTouchEventData","touchEvent","touch","changedTouches","applyStyles","styles","cssText","style","makeTranslate","useHardwareAcceleration","makeScale","animate","from","to","duration","getTime","progress","update","passed","delta","cos","PI","swing","requestAnimationFrame","Date","registerPlugin","plugin","plugins","pluginsSubscriptions","CompositeDisposable","emitter","emit","atom","config","get","settingsKey","orderSettingsKey","getConfigSchema","properties","title","description","default","set","add","observe","updatesPluginActivationState","order","updatePluginsOrderMap","commands","togglePluginActivation","registerPluginControls","unregisterPlugin","dispose","unregisterPluginControls","boolean","deactivateAllPlugins","eachPlugin","deactivatePlugin","pluginActive","isActive","settingActive","activatePlugin","event","pluginsOrderMap","getPluginsOrder","minimapViewProvider","model","Minimap","MinimapElement","setModel","packages","getLoadedPackage","metadata","configSchema","toggle","configName","active","toggled","editorsMinimaps","destroy","delete","subscriptions","workspace","observeTextEditors","textEditor","minimap","minimapForEditor","minimapElement","views","getView","attach","themes","onDidChangeActiveThemes","domStylesReader","invalidateDOMStylesCache","requestForcedUpdate","storageName","today","previousWarning","window","localStorage","getItem","previousWarningDay","parse","getDay","setItem","notification","notifications","addWarning","dismissable","buttons","dismiss","removeItem","reload","async","generatePlugin","MinimapPluginGeneratorElement","Promise","view","onDidActivate","callback","on","onDidDeactivate","onDidCreateMinimap","onDidAddPlugin","onDidRemovePlugin","onDidActivatePlugin","onDidDeactivatePlugin","onDidChangePluginOrder","minimapClass","minimapForEditorElement","editorElement","getModel","editorSubscription","onDidDestroy","standAloneMinimapForEditor","standAlone","getActiveMinimap","getActiveTextEditor","observeMinimaps","iterator","module","Deprecation","message","fileName","lineNumber","callCount","stackCount","stacks","stackCallCounts","getFunctionNameFromCallsite","callsite","deserialize","_arg","deprecation","stack","_i","_len","addStack","_ref","_ref1","_ref2","functionName","isToplevel","getFunctionName","isConstructor","getMethodName","getTypeName","getLocationFromCallsite","location","isNative","isEval","getEvalOrigin","getFileName","getLineNumber","getColumnNumber","getFileNameFromCallSite","getOriginName","originName","getMessage","getStacks","parsedStack","parsedStacks","parseStack","getStackCount","getCallCount","callerLocation","_base","_base1","_this","serialize","disposalAction","disposed","disposables","Set","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","next","done","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","remove","clear","Emitter","exceptionHandler","exceptionHandlers","dispatch","exceptionHandlingDispatch","simpleDispatch","handler","exception","handlersByEventName","eventName","unshift","_this2","Error","cleanup","off","handlerToRemove","handlers","handlerIndex","handlersCopy","_this3","promises","all","then","resolve","_arr","require$$1","require$$2","getRawStack","grim","global","__grim__","deprecations","includeDeprecatedAPIs","deprecationsByLineNumber","deprecationsByPackage","packageName","getDeprecations","console","warn","deprecationSite","error","originalStackTraceLimit","_base2","stackTraceLimit","serializedDeprecation","originalPrepareStackTrace","prepareStackTrace","captureStackTrace","callbackProperties","decorateElementClass","decorateElementPrototype","deprecate","__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__","__CUSTOM_HTML_ELEMENTS_CLASSES__","ref","nodeName","elementClass","elementPrototype","klass","HTMLElement","document","registerElement","ExcludedClassProperties","ExcludedPrototypeProperties","Mixin","extended","includeInto","included","Ancestors","node","selector","parents","eachParent","parent","matches","block","parentNode","queryParentSelectorAll","listener","addEventListener","removeEventListener","DisposableEvents","NO_SELECTOR","eachPair","EventsDelegation","events","disposablesForObject","eventsForObject","eventsMap","WeakMap","disposablesMap","createEventListener","unsubscribeFrom","addDisposableEventListener","decorateEvent","eachSelectorFromTarget","isPropagationStopped","nodeAndItsAncestors","eachSelector","matched","targetMatch","isImmediatePropagationStopped","split","overriddenStop","overriddenStopImmediate","Event","stopPropagation","stopImmediatePropagation","BabelSpacePenDSL","Builder","SelfClosingTags","SpacePenDSL","Tags","Template","tag","buildContent","content","__content__","__create__","__createdCallback__","useShadowRoot","__useShadowRoot__","html","root","buildHtml","shadowRoot","createShadowRoot","innerHTML","wireOutlets","getAttribute","removeAttribute","Babel","currentBuilder","subview","tagName","raw","postProcessingSteps","extractOptions","openTag","attributes","closeTag","attributeName","attributePairs","attributesString","escapedString","outletName","subviewId","parentView","replaceWith","arg","failures","remains","required","solved","pkg","failHandler","promise","reason","activatePackage","activatedPackage","mainModule","fail","catch","AncestorsMethods","require$$3","require$$4","detector","isIE","version","agent","navigator","userAgent","toLowerCase","div","createElement","getElementsByTagName","undef","isLegacyOpera","opera","initState","ArrayProto","supportsArrayBuffer","ArrayBuffer","nativeIsArray","nativeIsView","isView","propertyIsEnumerable","Int8Array","childNodes","typedArrayPattern","isDataView","isBufferLike","VERSION","toJSON","String","&","<",">","\"","'","`","escapeMap","\\","\r","\n"," "," ","boundArgs","placeholder","bound","position","callArgs","bind","findLastIndex","contextPath","method","pass","pick","otherArrays","difference","arrays","isPlainObject","macModifierKeyMap","nonMacModifierKeyMap","plus","shiftKeyMap","splitKeyPath","__slice","cmd","ctrl","alt","option","shift","enter","up","down","~","+","|","{","}",":","?","keyPath","keyPathArray","substring","substr","methodName","advice","original","camelize","m","toUpperCase","capitalize","word","newObject","dasherize","letter","deepClone","deepExtend","endsWith","suffix","escapeAttribute","escapeRegExp","eventDoc","namespace","namespaceDoc","undasherize","platform","modifierKeyMap","process","keystroke","humanizedKeystrokes","keystrokes","splitKeystroke","_j","_len1","humanizeKey","isSubset","potentialSubset","potentialSuperset","inverted","finalString","pluralize","singular","plural","originalArray","insertedArray","chunkSize","chunkStart","_results","sum","trim","underscore","aCtorValid","aKeyCount","aValue","bCtorValid","bKeyCount","equal","stackIndex","isRegExp","CanvasLayer","canvas","desynchronized","getContext","webkitImageSmoothingEnabled","imageSmoothingEnabled","offscreenCanvas","offscreenContext","appendChild","width","height","resetOffscreenSize","drawImage","srcY","destY","CanvasDrawer","tokensLayer","backLayer","frontLayer","pendingChanges","pendingBackDecorationChanges","pendingFrontDecorationChanges","setSize","getFirstVisibleScreenRow","getLastVisibleScreenRow","devicePixelRatio","getDevicePixelRatio","getLineHeight","getCharHeight","getCharWidth","canvasHeight","getSize","getTextEditor","getTextEditorElement","displayCodeHighlights","getDefaultColor","clearCanvas","intact","copyPartFromOffscreen","currentRow","copyToOffscreen","updateTokensLayer","getScreenLineCount","invisibles","getInvisibles","regexp","cr","eol","space","tab","s","getInvisibleRegExp","decorations","decorationsByTypeThenRows","renderData","orders","Main.getPluginsOrder","drawCustomDecorationLambda","renderRoutine","getProperties","drawCustomDecoration","backgroundDecorationDispatcher","frontDecorationDispatcher","updateBackDecorationsLayer","updateFrontDecorationsLayer","drawBackDecorationsForLines","drawFrontDecorationsForLines","retrieveStyleFromDom","textOpacity","scope","scopeString","oneOrMoreWhiteSpaceRegexp","drawDecorations","types","decorationsToRender","decorationDrawer","getDecorationColor","highlight-under","highlight-over","bottomWidth","colSpan","xBottomStart","xEnd","xStart","yStart","yEnd","minimapQuickSettingsElement","outlet","ol","li","selectedItem","itemsActions","subs","Main.onDidAddPlugin","addItemFor","Main.onDidRemovePlugin","removeItemFor","Main.onDidActivatePlugin","activateItem","Main.onDidDeactivatePlugin","deactivateItem","core:move-up","selectPreviousItem","core:move-down","selectNextItem","core:cancel","core:confirm","toggleSelectedItem","codeHighlights","classList","subscribeTo","mousedown","preventDefault","absoluteMode","adjustAbsoluteModeHeight","hiddenInput","focusout","passive","onLeftButton","onRightButton","bool","initList","focus","removeChild","itemsDisposables","Main.plugins","nextSibling","firstChild","previousSibling","lastChild","action","Main.togglePluginActivation","insertBefore","separator","initClass","elementResizeDetector","idHandler","idCount","defaultIdHandler","idGenerator","stateHandler","state","generate","idHandlerMaker","reporter","quiet","log","attachFunction","f","reporterMaker","batchProcessor","processBatch","isProcessing","processingBatch","processBatchAsync","asyncFrameHandler","asyncProcess","utils","autoProcess","localAsyncProcess","batchProcessorMaker","globalOptions","callOnAdd","debug","detectionStrategy","eventListenerHandler","getListeners","eventListeners","listeners","listenerHandlerMaker","elementUtils","isDetectable","busy","elementUtilsMaker","desiredStrategy","importantCssRules","strategyOptions","important","browserDetector","initDocument","targetDocument","styleId","containerClass","getElementById","containerAnimationClass","containerAnimationActiveClass","buildCssTextString","head","styleElement","injectStyle","injectScrollStyle","detectionContainerClass","rules","seperator","addEvent","el","attachEvent","removeEvent","detachEvent","getExpandElement","container","getShrinkElement","scrollbarSizes","child","body","widthSize","clientWidth","heightSize","clientHeight","getScrollbarSizes","isUnrendered","getComputedStyle","getStyle","elementStyle","offsetWidth","offsetHeight","top","bottom","widthCSS","heightCSS","storeStyle","storeCurrentSize","lastWidth","lastHeight","getWidthOffset","getHeightOffset","getExpandWidth","getExpandHeight","positionScrollbars","expand","shrink","expandWidth","expandHeight","shrinkWidth","getShrinkWidth","shrinkHeight","getShrinkHeight","scrollLeft","scrollTop","injectContainerElement","addAnimationClass","onAnimationStart","onRendered","injectScrollElements","onExpandScroll","onExpand","onShrinkScroll","onShrink","setProperty","removeRelativeStyles","getNumericalValue","alterPositionStyles","rootContainer","scrollbarWidth","scrollbarHeight","containerContainerStyle","containerStyle","expandStyle","shrinkStyle","expandChildStyle","shrinkChildStyle","containerContainer","expandChild","shrinkChild","registerListenersAndPositionElements","updateChildSizes","getExpandChildElement","updateDetectorElements","sizeChanged","areElementsInjected","notifyListenersIfNeeded","lastNotifiedWidth","startSize","lastNotifiedHeight","handleScroll","finalizeDomMutation","ready","install","ownerDocument","isInDocument","isDetached","scrollStrategyMaker","getObject","mutateDom","positionCheckPerformed","OBJECT_STYLE","tabIndex","setAttribute","onload","getDocument","contentDocument","checkForObjectDocumentTimeoutId","objectDocument","injectObject","listenerProxy","proxy","defaultView","objectStrategyMaker","onReadyCallbacks","elements","onResizeCallback","addListener","elementsReady","onReadyCallback","isBusy","markBusy","makeDetectable","markAsDetectable","removeListener","removeAllListeners","uninstall","cleanState","elementResizeDetectorImport","strategy","visibleAreaSubscription","quickSettingsSubscription","dragSubscription","openQuickSettingSubscription","displayMinimapOnLeft","minimapScrollIndicator","displayPluginsControls","adjustToSoftWrap","visibleArea","controls","scrollIndicator","openQuickSettings","quickSettingsElement","attached","attachedToTextEditor","wasVisible","frameRequested","flexBasis","initializeContent","updateMinimapFlexPosition","measureHeightAndWidth","initializeScrollIndicator","disposeScrollIndicator","requestUpdate","initializeOpenQuickSettings","disposeOpenQuickSettings","smoothScrolling","adjustOnlyIfSmaller","pollDocument","pollDOM","intersectionObserver","IntersectionObserver","entries","intersectionRect","isVisible","measureDimensions","listenTo","queryParentSelector","subscribeToMediaQuery","minimaps","querySelectorAll","detach","initializeCanvas","attachCanvases","createVisibleArea","createControls","mousewheel","onMouseWheel","getFrontCanvas","canvasPressed","touchstart","startDrag","MinimapQuickSettingsElement","getBoundingClientRect","onDidChangeScrollTop","onDidChangeScrollLeft","onDidChangeConfig","onDidChangeStandAlone","setStandAlone","isStandAlone","onDidChange","onDidChangeDecorationRange","Main.onDidChangePluginOrder","setScreenHeightAndWidth","removeControls","removeVisibleArea","enableCache","visibleAreaLeft","getTextEditorScaledScrollLeft","visibleAreaTop","getTextEditorScaledScrollTop","getScrollTop","visibleWidth","round","getTextEditorScaledHeight","transform","border-left-width","canvasTop","canvasTransform","scale","canScroll","minimapScreenHeight","getScreenHeight","indicatorHeight","getHeight","indicatorScroll","getScrollRatio","updateCanvasesSize","updateCanvas","clearCache","visibilityChanged","checkForVisibilityChange","forceUpdate","safeFlexBasis","wasResized","lineLength","softWrap","softWrapAtPreferredLineLength","maxCanvasHeight","newHeight","setCanvasesSize","canvasLeftMousePressed","canvasMiddleMousePressed","deltaY","textEditorElement","getLineHeightInPixels","getTextEditorHeight","textEditorScrollTop","pixelPositionForScreenPosition","setCursorScreenPosition","independentScroll","scrollIndependentlyOnMouseWheel","getTextEditorScrollTop","minimapFrom","minimapTo","getTextEditorMaxScrollTop","getMaxScrollTop","t","setTextEditorScrollTop","setScrollTop","offsetTop","ratio","getVisibleHeight","mediaQuery","matchMedia","mediaListener","dragOffset","mousemoveHandler","drag","dragendHandler","endDrag","touchmoveHandler","useCache","heightCache","scrollTopCache","scrollLeftCache","maxScrollTopCache","getScrollLeft","maxScrollTop","displayBuffer","scrollPastEnd","isDestroyed","Decoration","decorationProperties","marker","setProperties","destroyed","markerDestroyDisposable","screenRange","isType","newProperties","oldProperties","DecorationManagement","decorationsById","Map","decorationsByMarkerId","decorationMarkerChangedSubscriptions","decorationMarkerDestroyedSubscriptions","decorationUpdatedSubscriptions","decorationDestroyedSubscriptions","startScreenRow","endScreenRow","markers","findMarkers","intersectsScreenRowRange","decorationsByTypeThenRowsCache","decorationParams","filePath","re","getPackageDirPaths","sep","getOriginatorPackageName","removeAllDecorationsForMarker","invalidateDecorationForScreenRowsCache","emitDecorationChanges","oldStart","oldTailScreenPosition","oldEnd","oldHeadScreenPosition","newStart","newTailScreenPosition","newEnd","newHeadScreenPosition","rangesDiffs","diffs","isLessThan","computeRangesDiffs","emitRangeChanges","onDidChangeProperties","removeDecoration","editorDestroyed","lastRenderedScreenRow","firstRenderedScreenRow","subscription","removedAllMarkerDecorations","adapter","decorationMarkerChangedSubscriptionsValues","decorationMarkerDestroyedSubscriptionsValues","decorationUpdatedSubscriptionsValues","decorationDestroyedSubscriptionsValues","decorationsByIdValues","StableAdapter","computeScrollTop","Number","lineTop","getVersion","getScrollHeight","component","nextModelId","configCharHeight","configCharWidth","interline","configInterline","devicePixelRatioRounding","configDevicePixelRatioRounding","redrawDelay","pendingChangeEvents","flushChangesTimer","initializeDecorations","configSubscription","subscribeToConfig","onDidChangeGrammar","ignoreTextEditorScroll","inChangeScrollTop","updateScrollTop","scheduleChanges","onDidTokenize","removeAllDecorations","requestFlushChanges","emitChanges","requestedFlushChanges","flushChanges","cancelAnimationFrame","opts","getRootScopeDescriptor","independentMinimapScroll","scrollSensitivity","cdprr","getVerticalScaleFactor","getHorizontalScaleFactor","getTextEditorScrollRatio","getMaxScreenLineLength","getScreenWidth","getWidth","getDefaultCharWidth","getInterline","getDevicePixelRatioRounding","getScrollTopFromEditor","abs","getCapedTextEditorScrollRatio","wheelDeltaY","updatedScrollTop","o","markBufferRange","DOMStylesReader","domStylesCache","dummyNode","targetNode","getFromCache","cachedData","ensureDummyNodeExistence","dotRegexp","getPropertyValue","r","g","hue","angle","clamp","num","matrix","lumR","lumG","lumB","sin","rotate","rotateHue","visibility","subscriptionsOfCommands","MinimapServiceV1","PluginManagement.registerPlugin","PluginManagement.unregisterPlugin","PluginManagement.togglePluginActivation","PluginManagement.deactivateAllPlugins","PluginManagement.activatePlugin","PluginManagement.deactivatePlugin","PluginManagement.getPluginsOrder"],"mappings":"wYAIA,SAASA,EAAkBC,EAAQC,GAAS,IAAK,IAAIC,EAAI,EAAOD,EAAME,OAAVD,EAAkBA,IAAK,CAAE,IAAIE,EAAaH,EAAMC,GAAIE,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAE7S,SAASO,EAAaC,EAAaC,EAAYC,GAAmJ,OAAhID,GAAYd,EAAkBa,EAAYG,UAAWF,GAAiBC,GAAaf,EAAkBa,EAAaE,GAAqBF,ECJzM,SAASI,EAAgBC,EAAUL,GAAe,KAAMK,aAAoBL,GAAgB,MAAM,IAAIM,UAAU,qCAEhH,SAASnB,EAAkBC,EAAQC,GAAS,IAAK,IAAIC,EAAI,EAAOD,EAAME,OAAVD,EAAkBA,IAAK,CAAE,IAAIE,EAAaH,EAAMC,GAAIE,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAuJ7S,SAASe,EAAiBC,GAKxB,GAJkB,MAAdC,KACFA,GAAaC,KAGVD,GAAWE,aAAaH,GAC3B,MAAM,IAAIF,UAAU,sEC7JxB,SAASnB,EAAkBC,EAAQC,GAAS,IAAK,IAAIC,EAAI,EAAOD,EAAME,OAAVD,EAAkBA,IAAK,CAAE,IAAIE,EAAaH,EAAMC,GAAIE,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAE7S,SAASO,EAAaC,EAAaC,EAAYC,GAAmJ,OAAhID,GAAYd,EAAkBa,EAAYG,UAAWF,GAAiBC,GAAaf,EAAkBa,EAAaE,GAAqBF,ECqFzM,SAASY,IACL,IAAIC,EAAc,GACdC,EAAc,EACdC,EAAc,EACdC,EAAc,EAqClB,MAAO,CACHC,IApCSC,EAAOC,GACZA,IACAA,EAAKD,EACLA,EAAQ,GAGTA,EAAQH,EACPA,EAAWG,EACGF,EAARE,IACNF,EAAcE,GAGdL,EAAMK,KACNL,EAAMK,GAAS,IAGnBL,EAAMK,GAAOE,KAAKD,GAClBL,KAoBAG,UAhBA,IAAI,IAAIC,EAAQF,EAAsBD,GAATG,EAAmBA,IAG5C,IAFA,IAAIG,EAAMR,EAAMK,GAER5B,EAAI,EAAO+B,EAAI9B,OAARD,EAAgBA,KAE3B6B,EADSE,EAAI/B,OAarBwB,KAPJ,IACWA,GCxHf,SAASQ,EAASC,GACd,OAAOA,EAAY,KCMvB,SAASC,EAAaC,GAClB,OAAOC,MAAMC,QAAQF,SAAuBG,IAAfH,EAAIlC,OAGrC,SAASsC,EAAQC,GACb,GAAKJ,MAAMC,QAAQG,GAOf,OAAOA,EANP,IAAIC,EAAQ,GAIZ,OAHAC,GAAQF,GAAsBL,IAC1BM,EAAMX,KAAKK,MAERM,EAMf,SAASE,EAAUR,GACf,OAAOA,GAAwB,IAAjBA,EAAIS,SA8RtB,SAASC,EAAUC,EAASC,EAAMC,GAC9B,IAAIC,EAAQH,EAAQC,GAEpB,OAAG,MAACE,QAA2DX,IAAjBU,EACnCA,EAGJC,ECjUI,SAASC,EAAcC,EAAMC,GAE1C,OADAA,EAA2B,MAAdA,EAAqBD,EAAKlD,OAAS,GAAKmD,EAC9C,WAIL,IAHA,IAAInD,EAASoD,KAAKC,IAAIC,UAAUtD,OAASmD,EAAY,GACjDI,EAAOpB,MAAMnC,GACbwD,EAAQ,EACGxD,EAARwD,EAAgBA,IACrBD,EAAKC,GAASF,UAAUE,EAAQL,GAElC,OAAQA,GACN,KAAK,EAAG,OAAOD,EAAKO,KAAKC,KAAMH,GAC/B,KAAK,EAAG,OAAOL,EAAKO,KAAKC,KAAMJ,UAAU,GAAIC,GAC7C,KAAK,EAAG,OAAOL,EAAKO,KAAKC,KAAMJ,UAAU,GAAIA,UAAU,GAAIC,GAE7D,IAAII,EAAOxB,MAAMgB,EAAa,GAC9B,IAAKK,EAAQ,EAAWL,EAARK,EAAoBA,IAClCG,EAAKH,GAASF,UAAUE,GAG1B,OADAG,EAAKR,GAAcI,EACZL,EAAKU,MAAMF,KAAMC,ICvBb,SAASE,EAAS3B,GAC/B,IAAI4B,SAAc5B,EAClB,MAAgB,aAAT4B,GAAgC,WAATA,KAAuB5B,ECFxC,SAAS6B,EAAO7B,GAC7B,OAAe,OAARA,ECDM,SAAS8B,EAAY9B,GAClC,YAAe,IAARA,ECCM,SAAS+B,EAAU/B,GAChC,OAAe,IAARA,IAAwB,IAARA,GAAwC,qBAAvBgC,GAAST,KAAKvB,GCHzC,SAASQ,EAAUR,GAChC,SAAUA,GAAwB,IAAjBA,EAAIS,UCCR,SAASwB,EAAUrB,GAChC,OAAgBZ,GACPgC,GAAST,KAAKvB,KAAS,WAAaY,EAAO,ICFvC,SAASsB,EAAIlC,EAAK3B,GAC/B,OAAc,MAAP2B,GAAemC,GAAeZ,KAAKvB,EAAK3B,GCAlC,SAAS+D,EAASpC,GAC/B,OAAQqC,GAASrC,IAAQsC,GAAUtC,KAASuC,MAAMC,WAAWxC,ICDhD,SAASuC,EAAMvC,GAC5B,OAAOyC,GAASzC,IAAQ0C,GAAO1C,GCJlB,SAAS2C,EAAS7B,GAC/B,MAAO,IACEA,ECAI,SAAS8B,EAAwBC,GAC9C,OAAgBxC,IACd,IAAIyC,EAAeD,EAAgBxC,GACnC,MAA8B,iBAAhByC,GAA4BA,GAAgB,GCmCjC5B,kBDnCsC4B,GELpD,SAASC,EAAgB1E,GACtC,OAAgB2B,GACA,MAAPA,OAAc,EAASA,EAAI3B,GCoBvB,SAAS2E,EAAoBhD,EAAKiD,GAC/CA,EAhBF,CAAqBA,IAEnB,IADA,IAAIC,EAAO,GACFC,EAAIF,EAAKnF,OAAQD,EAAI,EAAOsF,EAAJtF,IAASA,EAAGqF,EAAKD,EAAKpF,KAAM,EAC7D,MAAO,CACL2B,SAAmBnB,GAAO,OAAO6E,EAAK7E,IACtCmB,KAAenB,GAEb,OADA6E,EAAK7E,IAAO,EACL4E,EAAKtD,KAAKtB,MASd+E,CAAYH,GACnB,IAAII,EAAaC,GAAmBxF,OAChCyF,EAAcvD,EAAIuD,YAClBC,EAAQC,GAAWF,IAAgBA,EAAY7E,WAAagF,GAG5DC,EAAO,cAGX,IAFIzB,EAAIlC,EAAK2D,KAAUV,EAAKW,SAASD,IAAOV,EAAKtD,KAAKgE,GAE/CN,MACLM,EAAOL,GAAmBD,MACdrD,GAAOA,EAAI2D,KAAUH,EAAMG,KAAUV,EAAKW,SAASD,IAC7DV,EAAKtD,KAAKgE,GC7BD,SAASV,EAAKjD,GAC3B,IAAK2B,EAAS3B,GAAM,MAAO,GAC3B,GAAI6D,GAAY,OAAOA,GAAW7D,GAClC,IAAIiD,EAAO,GACX,IAAK,IAAI5E,KAAO2B,EAASkC,EAAIlC,EAAK3B,IAAM4E,EAAKtD,KAAKtB,GAGlD,OADIyF,IAAYd,EAAoBhD,EAAKiD,GAClCA,ECNM,SAASc,EAAQ/D,GAC9B,OAAW,MAAPA,IAGAgE,GAAYhE,KAASE,GAAQF,IAAQiE,GAASjE,IAAQkE,GAAYlE,IAA6B,IAAfA,EAAIlC,OAC5D,IAArBmF,EAAKjD,GAAKlC,QCVJ,SAASqG,EAAQC,EAAQC,GACtC,IAAIC,EAAQrB,EAAKoB,GAAQvG,EAASwG,EAAMxG,OACxC,GAAc,MAAVsG,EAAgB,OAAQtG,EAE5B,IADA,IAAIkC,EAAM7B,OAAOiG,GACRvG,EAAI,EAAOC,EAAJD,EAAYA,IAAK,CAC/B,IAAIQ,EAAMiG,EAAMzG,GAChB,GAAIwG,EAAMhG,KAAS2B,EAAI3B,MAAUA,KAAO2B,GAAM,OAAO,EAEvD,OAAO,ECNM,SAASuE,EAAEvE,GACxB,OAAIA,aAAeuE,EAAUvE,EACvBwB,gBAAgB+C,OACtB/C,KAAKgD,SAAWxE,GADiB,IAAIuE,EAAEvE,GCEzC,SAASyE,EAAGC,EAAGC,EAAGC,EAAQC,GAGxB,GAAIH,IAAMC,EAAG,OAAa,IAAND,GAAW,EAAIA,GAAM,EAAIC,EAE7C,GAAS,MAALD,GAAkB,MAALC,EAAW,OAAO,EAEnC,GAAID,GAAMA,EAAG,OAAOC,GAAMA,EAE1B,IAAI/C,SAAc8C,EAClB,OAAa,aAAT9C,GAAgC,WAATA,GAAiC,iBAAL+C,IAChDG,EAAOJ,EAAGC,EAAGC,EAAQC,GAI9B,SAASC,EAAOJ,EAAGC,EAAGC,EAAQC,GAExBH,aAAaH,IAAGG,EAAIA,EAAEF,UACtBG,aAAaJ,IAAGI,EAAIA,EAAEH,UAE1B,IAAIO,EAAY/C,GAAST,KAAKmD,GAC9B,GAAIK,IAAc/C,GAAST,KAAKoD,GAAI,OAAO,EAC3C,OAAQI,GAEN,IAAK,kBAEL,IAAK,kBAGH,MAAO,GAAKL,GAAM,GAAKC,EACzB,IAAK,kBAGH,OAAKD,IAAOA,GAAWC,IAAOA,EAEhB,IAAND,EAAU,GAAKA,GAAM,EAAIC,GAAKD,IAAOC,EAC/C,IAAK,gBACL,IAAK,mBAIH,OAAQD,IAAOC,EACjB,IAAK,kBACH,OAAOK,GAAYC,QAAQ1D,KAAKmD,KAAOM,GAAYC,QAAQ1D,KAAKoD,GAClE,IAAK,uBAEH,OAAOG,EAAO,IAAII,SAASR,GAAI,IAAIQ,SAASP,GAAIC,EAAQC,GAC1D,IAAK,oBACH,IAAIM,EAAaC,GAAcV,GAC/B,GAAIS,IAAeC,GAAcT,GAC/B,OAAO,EAET,KAAOQ,KACL,GAAIT,EAAEW,SAASF,KAAgBR,EAAEU,SAASF,GACxC,OAAO,EAGX,OAAO,EAGX,GAAIG,GAAaZ,GAEf,OAAOI,EAAO,IAAII,SAASR,EAAEa,QAAS,IAAIL,SAASP,EAAEY,QAASX,EAAQC,GAGxE,IAAIW,EAA0B,mBAAdT,EAChB,IAAKS,EAAW,CACd,GAAgB,iBAALd,GAA6B,iBAALC,EAAe,OAAO,EAIzD,IAAIc,EAAQf,EAAEnB,YAAamC,EAAQf,EAAEpB,YACrC,GAAIkC,IAAUC,KAAWjC,GAAWgC,IAAUA,aAAiBA,GACtChC,GAAWiC,IAAUA,aAAiBA,IACvC,gBAAiBhB,GAAK,gBAAiBC,EAC7D,OAAO,EASXE,EAASA,GAAU,GAEnB,IADA,IAAI/G,GAFJ8G,EAASA,GAAU,IAEC9G,OACbA,KAGL,GAAI8G,EAAO9G,KAAY4G,EAAG,OAAOG,EAAO/G,KAAY6G,EAQtD,GAJAC,EAAOjF,KAAK+E,GACZG,EAAOlF,KAAKgF,GAGRa,EAAW,CAGb,IADA1H,EAAS4G,EAAE5G,UACI6G,EAAE7G,OAAQ,OAAO,EAEhC,KAAOA,KACL,IAAK2G,EAAGC,EAAE5G,GAAS6G,EAAE7G,GAAS8G,EAAQC,GAAS,OAAO,MAEnD,CAEL,IAAqBxG,EAAjBiG,EAAQrB,EAAKyB,GAGjB,GAFA5G,EAASwG,EAAMxG,OAEXmF,EAAK0B,GAAG7G,SAAWA,EAAQ,OAAO,EACtC,KAAOA,KAGL,IAAMoE,EAAIyC,EADVtG,EAAMiG,EAAMxG,MACS2G,EAAGC,EAAErG,GAAMsG,EAAEtG,GAAMuG,EAAQC,GAAU,OAAO,EAMrE,OAFAD,EAAOe,MACPd,EAAOc,OACA,EAIM,SAASC,EAAQlB,EAAGC,GACjC,OAAOF,EAAGC,EAAGC,GCjIA,SAASkB,EAAQ7F,GAC9B,IAAK2B,EAAS3B,GAAM,MAAO,GAC3B,IAAIiD,EAAO,GACX,IAAK,IAAI5E,KAAO2B,EAAKiD,EAAKtD,KAAKtB,GAG/B,OADIyF,IAAYd,EAAoBhD,EAAKiD,GAClCA,ECRM,SAAS6C,EAAO9F,GAI7B,IAHA,IAAIsE,EAAQrB,EAAKjD,GACblC,EAASwG,EAAMxG,OACfgI,EAAS7F,MAAMnC,GACVD,EAAI,EAAOC,EAAJD,EAAYA,IAC1BiI,EAAOjI,GAAKmC,EAAIsE,EAAMzG,IAExB,OAAOiI,ECNM,SAASC,EAAM/F,GAI5B,IAHA,IAAIsE,EAAQrB,EAAKjD,GACblC,EAASwG,EAAMxG,OACfiI,EAAQ9F,MAAMnC,GACTD,EAAI,EAAOC,EAAJD,EAAYA,IAC1BkI,EAAMlI,GAAK,CAACyG,EAAMzG,GAAImC,EAAIsE,EAAMzG,KAElC,OAAOkI,ECRM,SAASC,EAAOhG,GAG7B,IAFA,IAAIiG,EAAS,GACT3B,EAAQrB,EAAKjD,GACRnC,EAAI,EAAGC,EAASwG,EAAMxG,OAAYA,EAAJD,EAAYA,IACjDoI,EAAOjG,EAAIsE,EAAMzG,KAAOyG,EAAMzG,GAEhC,OAAOoI,ECNM,SAASC,EAAUlG,GAChC,IAAImG,EAAQ,GACZ,IAAK,IAAI9H,KAAO2B,EACVyD,GAAWzD,EAAI3B,KAAO8H,EAAMxG,KAAKtB,GAEvC,OAAO8H,EAAMC,OCPA,SAASC,EAAeC,EAAUC,GAC/C,OAAO,SAASvG,GACd,IAAIlC,EAASsD,UAAUtD,OAEvB,GADIyI,IAAUvG,EAAM7B,OAAO6B,IACd,EAATlC,GAAqB,MAAPkC,EAAa,OAAOA,EACtC,IAAK,IAAIsB,EAAQ,EAAWxD,EAARwD,EAAgBA,IAIlC,IAHA,IAAIkF,EAASpF,UAAUE,GACnB2B,EAAOqD,EAASE,GAChBrD,EAAIF,EAAKnF,OACJD,EAAI,EAAOsF,EAAJtF,EAAOA,IAAK,CAC1B,IAAIQ,EAAM4E,EAAKpF,GACV0I,QAAyB,IAAbvG,EAAI3B,KAAiB2B,EAAI3B,GAAOmI,EAAOnI,IAG5D,OAAO2B,GCNI,SAASyG,EAAW/H,GACjC,IAAKiD,EAASjD,GAAY,MAAO,GACjC,GAAIgI,GAAc,OAAOA,GAAahI,GACtC,IAAIiI,EAPG,OAQPA,EAAKjI,UAAYA,EACjB,IAAIuH,EAAS,IAAIU,EAEjB,OADAA,EAAKjI,UAAY,KACVuH,ECVM,SAASW,EAAOlI,EAAWd,GACxC,IAAIqI,EAASQ,EAAW/H,GAExB,OADId,GAAOiJ,GAAUZ,EAAQrI,GACtBqI,ECJM,SAASa,EAAM9G,GAC5B,OAAK2B,EAAS3B,GACPE,GAAQF,GAAOA,EAAI+G,QAAUC,GAAO,GAAIhH,GADpBA,ECHd,SAASiH,EAAIjH,EAAKkH,GAE/B,OADAA,EAAYlH,GACLA,ECEM,SAASkC,EAAIlC,EAAKmH,GAC/B,IAAKjH,GAAQiH,GACX,OAAOC,EAAKpH,EAAKmH,GAGnB,IADA,IAAIrJ,EAASqJ,EAAKrJ,OACTD,EAAI,EAAOC,EAAJD,EAAYA,IAAK,CAC/B,IAAIQ,EAAM8I,EAAKtJ,GACf,GAAW,MAAPmC,IAAgBmC,GAAeZ,KAAKvB,EAAK3B,GAC3C,OAAO,EAET2B,EAAMA,EAAI3B,GAEZ,QAASP,EClBI,SAASuJ,EAASvG,GAC/B,OAAOA,ECGM,SAASwG,EAAQjD,GAE9B,OADAA,EAAQwC,GAAU,GAAIxC,GACNrE,GACPmE,EAAQnE,EAAKqE,GCPT,SAASkD,EAAQvH,EAAKmH,GAEnC,IADA,IAAIrJ,EAASqJ,EAAKrJ,OACTD,EAAI,EAAOC,EAAJD,EAAYA,IAAK,CAC/B,GAAW,MAAPmC,EAAa,OACjBA,EAAMA,EAAImH,EAAKtJ,IAEjB,OAAOC,EAASkC,OAAM,ECDT,SAASwH,EAASL,GAC/B,OAAKjH,GAAQiH,GAGGnH,GACPuH,EAAQvH,EAAKmH,GAHbpE,EAAgBoE,GCLZ,SAASM,EAAWzG,EAAM0G,EAASC,GAChD,QAAgB,IAAZD,EAAoB,OAAO1G,EAC/B,OAAoB,MAAZ2G,EAAmB,EAAIA,GAC7B,KAAK,EAAG,OAAgB7G,GACfE,EAAKO,KAAKmG,EAAS5G,GAG5B,KAAK,EAAG,MAAO,CAASA,EAAOQ,EAAOjB,IAC7BW,EAAKO,KAAKmG,EAAS5G,EAAOQ,EAAOjB,GAE1C,KAAK,EAAG,MAAO,CAASuH,EAAa9G,EAAOQ,EAAOjB,IAC1CW,EAAKO,KAAKmG,EAASE,EAAa9G,EAAOQ,EAAOjB,GAGzD,OAAO,WACL,OAAOW,EAAKU,MAAMgG,EAAStG,YCPhB,SAASyG,EAAa/G,EAAO4G,EAASC,GACnD,OAAa,MAAT7G,EAAsBuG,EACtB5D,GAAW3C,GAAe2G,EAAW3G,EAAO4G,EAASC,GACrDhG,EAASb,KAAWZ,GAAQY,GAAewG,EAAQxG,GAChD0G,EAAS1G,GCTH,SAASgH,GAAShH,EAAO4G,GACtC,OAAOG,EAAa/G,EAAO4G,EAASK,EAAAA,GCDvB,SAASC,GAAGlH,EAAO4G,EAASC,GACzC,OAAIpD,EAAEuD,WAAaA,GAAiBvD,EAAEuD,SAAShH,EAAO4G,GAC/CG,EAAa/G,EAAO4G,EAASC,GCHvB,SAASM,GAAUjI,EAAK8H,EAAUJ,GAC/CI,EAAWE,GAAGF,EAAUJ,GAIxB,IAHA,IAAIpD,EAAQrB,EAAKjD,GACblC,EAASwG,EAAMxG,OACfoK,EAAU,GACL5G,EAAQ,EAAWxD,EAARwD,EAAgBA,IAAS,CAC3C,IAAI6G,EAAa7D,EAAMhD,GACvB4G,EAAQC,GAAcL,EAAS9H,EAAImI,GAAaA,EAAYnI,GAE9D,OAAOkI,ECbM,SAASE,MCGT,SAASC,GAAWrI,GACjC,OAAW,MAAPA,EACK,OAEOmH,GACNjH,GAAQiH,GAAoBI,EAAQvH,EAAKmH,GAAzBnH,EAAImH,GCNjB,SAASmB,GAAMC,EAAGT,EAAUJ,GACzC,IAAIc,EAAQvI,MAAMiB,KAAKC,IAAI,EAAGoH,IAC9BT,EAAWL,EAAWK,EAAUJ,EAAS,GACzC,IAAK,IAAI7J,EAAI,EAAO0K,EAAJ1K,EAAOA,IAAK2K,EAAM3K,GAAKiK,EAASjK,GAChD,OAAO2K,ECNM,SAASC,GAAOC,EAAKvH,GAKlC,OAJW,MAAPA,IACFA,EAAMuH,EACNA,EAAM,GAEDA,EAAMxH,KAAKyH,MAAMzH,KAAKuH,UAAYtH,EAAMuH,EAAM,ICFxC,SAASE,GAAcC,GACpC,IAAIC,EAAmBC,GACdF,EAAIE,GAGTvC,EAAS,MAAQvD,EAAK4F,GAAKG,KAAK,KAAO,IACvCC,EAAaC,OAAO1C,GACpB2C,EAAgBD,OAAO1C,EAAQ,KACnC,OAAgB4C,GAEPH,EAAWI,KADlBD,EAAmB,MAAVA,EAAiB,GAAK,GAAKA,GACHA,EAAOE,QAAQH,EAAeL,GAAWM,ECQ9E,SAASG,GAAWR,GAClB,MAAO,KAAOS,GAAQT,GAOT,SAASU,GAASC,EAAMC,EAAUC,IAC1CD,GAAYC,IAAaD,EAAWC,GACzCD,EAAWpD,GAAS,GAAIoD,EAAUpF,EAAEsF,kBAGpC,IAiCIC,EAjCAxC,EAAU4B,OAAO,EAClBS,EAASI,QA7BA,QA6BmBvD,QAC5BmD,EAASK,aA9BA,QA8BwBxD,QACjCmD,EAASM,UA/BA,QA+BqBzD,QAC/BwC,KAAK,KAAO,KAAM,KAGhB1H,EAAQ,EACRkF,EAAS,SACbkD,EAAKJ,QAAQhC,GAAS,CAASyB,EAAOgB,EAAQC,EAAaC,EAAUC,KACnE1D,GAAUkD,EAAK3C,MAAMzF,EAAO4I,GAAQZ,QAzBrB,4BAyB2CC,IAC1DjI,EAAQ4I,EAASnB,EAAMjL,OAEnBiM,EACFvD,GAAU,cAAgBuD,EAAS,iCAC1BC,EACTxD,GAAU,cAAgBwD,EAAc,uBAC/BC,IACTzD,GAAU,OAASyD,EAAW,YAIzBlB,KAETvC,GAAU,OAGLmD,EAASQ,WAAU3D,EAAS,mBAAqBA,EAAS,OAE/DA,EAAS,4FAEPA,EAAS,gBAGX,IACEsD,EAAaM,SAAST,EAASQ,UAAY,MAAO,IAAK3D,GACvD,MAAO6D,GAEP,MADAA,EAAE7D,OAASA,EACL6D,EAGR,IAAIZ,EAAW,SAASa,GACtB,OAAOR,EAAOvI,KAAKC,KAAM8I,EAAM/F,IAOjC,OAFAkF,EAASjD,OAAS,aADHmD,EAASQ,UAAY,OACO,OAAS3D,EAAS,IAEtDiD,EC9EM,SAASxD,GAAOjG,EAAKmH,EAAMoD,GACnCrK,GAAQiH,KAAOA,EAAO,CAACA,IAC5B,IAAIrJ,EAASqJ,EAAKrJ,OAClB,IAAKA,EACH,OAAO2F,GAAW8G,GAAYA,EAAShJ,KAAKvB,GAAOuK,EAErD,IAAK,IAAI1M,EAAI,EAAOC,EAAJD,EAAYA,IAAK,CAC/B,IAAI8F,EAAc,MAAP3D,OAAc,EAASA,EAAImH,EAAKtJ,SAC9B,IAAT8F,IACFA,EAAO4G,EACP1M,EAAIC,GAENkC,EAAMyD,GAAWE,GAAQA,EAAKpC,KAAKvB,GAAO2D,EAE5C,OAAO3D,ECjBM,SAASwK,GAASC,GAC/B,IAAIC,IAAOC,GAAY,GACvB,OAAOF,EAASA,EAASC,EAAKA,ECFjB,SAASE,GAAM5K,GAC5B,IAAIpB,EAAW2F,EAAEvE,GAEjB,OADApB,EAASiM,QAAS,EACXjM,ECAM,SAASkM,GAAaC,EAAYC,EAAWtD,EAASuD,EAAgBxJ,GACnF,KAAMwJ,aAA0BD,GAAY,OAAOD,EAAWrJ,MAAMgG,EAASjG,GAC7E,IAAIyJ,EAAOzE,EAAWsE,EAAWrM,WAC7BuH,EAAS8E,EAAWrJ,MAAMwJ,EAAMzJ,GACpC,OAAIE,EAASsE,GAAgBA,EACtBiF,ECLM,SAASC,GAAQC,EAAOC,EAAOC,EAAQC,GAEpD,GADAA,EAASA,GAAU,GACdF,GAAmB,IAAVA,GAEP,GAAa,GAATA,EACT,OAAOE,EAAOC,OAAOJ,QAFrBC,EAAQtD,EAAAA,EAKV,IADA,IAAI0D,EAAMF,EAAOzN,OACRD,EAAI,EAAGC,EAAS4N,GAAUN,GAAYtN,EAAJD,EAAYA,IAAK,CAC1D,IAAIiD,EAAQsK,EAAMvN,GAClB,GAAImG,GAAYlD,KAAWZ,GAAQY,IAAUoD,GAAYpD,IAEvD,GAAIuK,EAAQ,EACVF,GAAQrK,EAAOuK,EAAQ,EAAGC,EAAQC,GAClCE,EAAMF,EAAOzN,YAGb,IADA,IAAI6N,EAAI,EAAGC,EAAM9K,EAAMhD,OACZ8N,EAAJD,GAASJ,EAAOE,KAAS3K,EAAM6K,UAE9BL,IACVC,EAAOE,KAAS3K,GAGpB,OAAOyK,EC1BM,SAASM,GAAQ7K,EAAM8K,GACpC,IAAID,EAAU,SAASxN,GACrB,IAAI0N,EAAQF,EAAQE,MAChBC,EAAU,IAAMF,EAASA,EAAOpK,MAAMF,KAAMJ,WAAa/C,GAE7D,OADK6D,EAAI6J,EAAOC,KAAUD,EAAMC,GAAWhL,EAAKU,MAAMF,KAAMJ,YACrD2K,EAAMC,IAGf,OADAH,EAAQE,MAAQ,GACTF,ECJM,SAASI,GAASjL,EAAMkL,EAAMvL,GAC3C,IAAIwL,EAASzE,EAASjG,EAAMwE,EACxBmG,EAAW,EACVzL,IAASA,EAAU,IAExB,IAAI0L,EAAQ,KACVD,GAA+B,IAApBzL,EAAQ2L,QAAoB,EAAIC,KAC3CJ,EAAU,KACVlG,EAASjF,EAAKU,MAAMgG,EAASjG,GACxB0K,IAASzE,EAAUjG,EAAO,OAG7B+K,EAAY,WACd,IAAIC,EAAOF,KACNH,IAAgC,IAApBzL,EAAQ2L,UAAmBF,EAAWK,GACvD,IAAIC,EAAYR,GAAQO,EAAOL,GAc/B,OAbA1E,EAAUlG,KACVC,EAAOL,UACU,GAAbsL,GAAkBA,EAAYR,GAC5BC,IACFQ,aAAaR,GACbA,EAAU,MAEZC,EAAWK,EACXxG,EAASjF,EAAKU,MAAMgG,EAASjG,GACxB0K,IAASzE,EAAUjG,EAAO,OACrB0K,IAAgC,IAArBxL,EAAQiM,WAC7BT,EAAUU,WAAWR,EAAOK,IAEvBzG,GAST,OANAuG,EAAUM,OAAS,KACjBH,aAAaR,GACbC,EAAW,EACXD,EAAUzE,EAAUjG,EAAO,MAGtB+K,ECtCM,SAASO,GAAS/L,EAAMkL,EAAMc,GAC3C,IAAIb,EAASlG,EAEToG,EAAQ,CAAS3E,EAASjG,KAC5B0K,EAAU,KACN1K,IAAMwE,EAASjF,EAAKU,MAAMgG,EAASjG,KAGrCwL,EAAYlM,GAAc,SAASU,GAErC,GADI0K,GAASQ,aAAaR,GACtBa,EAAW,CACb,IAAIE,GAAWf,EACfA,EAAUU,WAAWR,EAAOH,GACxBgB,IAASjH,EAASjF,EAAKU,MAAMF,KAAMC,SAEvC0K,EAAUgB,GAAMd,EAAOH,EAAM1K,KAAMC,GAGrC,OAAOwE,KAQT,OALAgH,EAAUH,OAAS,KACjBH,aAAaR,GACbA,EAAU,MAGLc,EC5BM,SAASG,GAAKpM,EAAMqM,GACjC,OAAOC,GAAQD,EAASrM,GCLX,SAASuM,GAAOC,GAC7B,OAAO,WACL,OAAQA,EAAU9L,MAAMF,KAAMJ,YCDnB,SAASqM,KACtB,IAAIhM,EAAOL,UACPsM,EAAQjM,EAAK3D,OAAS,EAC1B,OAAO,WAGL,IAFA,IAAID,EAAI6P,EACJzH,EAASxE,EAAKiM,GAAOhM,MAAMF,KAAMJ,WAC9BvD,KAAKoI,EAASxE,EAAK5D,GAAG0D,KAAKC,KAAMyE,GACxC,OAAOA,GCRI,SAAS0H,GAAMrF,EAAOtH,GACnC,OAAO,WACL,GAAc,IAARsH,EACJ,OAAOtH,EAAKU,MAAMF,KAAMJ,YCFf,SAASwM,GAAOtF,EAAOtH,GACpC,IAAI6M,EACJ,OAAO,WAKL,QAJMvF,EAAQ,IACZuF,EAAO7M,EAAKU,MAAMF,KAAMJ,YAEtBkH,EAAS,IAAGtH,EAAO,MAChB6M,GCLI,SAASC,GAAQ9N,EAAKwN,EAAW9F,GAC9C8F,EAAYxF,GAAGwF,EAAW9F,GAE1B,IADA,IAAuBrJ,EAAnBiG,EAAQrB,EAAKjD,GACRnC,EAAI,EAAGC,EAASwG,EAAMxG,OAAYA,EAAJD,EAAYA,IAEjD,GAAI2P,EAAUxN,EADd3B,EAAMiG,EAAMzG,IACYQ,EAAK2B,GAAM,OAAO3B,ECL/B,SAAS0P,GAA2BC,GACjD,MAAO,CAAS1N,EAAOkN,EAAW9F,KAChC8F,EAAYxF,GAAGwF,EAAW9F,GAG1B,IAFA,IAAI5J,EAAS4N,GAAUpL,GACnBgB,EAAQ0M,EAAM,EAAI,EAAIlQ,EAAS,EAC5BwD,GAAS,GAAaxD,EAARwD,EAAgBA,GAAS0M,EAC5C,GAAIR,EAAUlN,EAAMgB,GAAQA,EAAOhB,GAAQ,OAAOgB,EAEpD,OAAQ,GCPG,SAAS2M,GAAY3N,EAAON,EAAK8H,EAAUJ,GAIxD,IAFA,IAAI5G,GADJgH,EAAWE,GAAGF,EAAUJ,EAAS,IACZ1H,GACjBkO,EAAM,EAAGC,EAAOzC,GAAUpL,GACjB6N,EAAND,GAAY,CACjB,IAAIE,EAAMlN,KAAKyH,OAAOuF,EAAMC,GAAQ,GAChCrG,EAASxH,EAAM8N,IAAQtN,EAAOoN,EAAME,EAAM,EAAQD,EAAOC,EAE/D,OAAOF,ECRM,SAASG,GAAkBL,EAAKM,EAAeL,GAC5D,MAAO,CAAS3N,EAAOiO,EAAM9C,KAC3B,IAAI5N,EAAI,EAAGC,EAAS4N,GAAUpL,GAC9B,GAAkB,iBAAPmL,EACLuC,EAAM,EACRnQ,EAAW,EAAP4N,EAAiBvK,KAAKC,IAAIsK,EAAM3N,EAAQD,GAA7B4N,EAEf3N,EAAgB,EAAP2N,EAAuCA,EAAM3N,EAAS,EAA3CoD,KAAKwH,IAAI+C,EAAM,EAAG3N,QAEnC,GAAImQ,GAAexC,GAAO3N,EAE/B,OAAOwC,EADPmL,EAAMwC,EAAY3N,EAAOiO,MACHA,EAAO9C,GAAO,EAEtC,GAAI8C,GAASA,EAEX,OAAc,GADd9C,EAAM6C,EAAcvH,GAAMxF,KAAKjB,EAAOzC,EAAGC,GAASyE,KACrB,EAAXkJ,EAAM5N,EAE1B,IAAK4N,EAAMuC,EAAM,EAAInQ,EAAIC,EAAS,EAAG2N,GAAO,GAAW3N,EAAN2N,EAAcA,GAAOuC,EACpE,GAAI1N,EAAMmL,KAAS8C,EAAM,OAAO9C,EAElC,OAAQ,GCpBG,SAAS+C,GAAKxO,EAAKwN,EAAW9F,GAC3C,IACIrJ,GADY2F,GAAYhE,GAAOyO,GAAYX,IAC3B9N,EAAKwN,EAAW9F,GACpC,QAAY,IAARrJ,IAA2B,IAATA,EAAY,OAAO2B,EAAI3B,GCHhC,SAASqQ,GAAU1O,EAAKqE,GACrC,OAAOmK,GAAKxO,EAAKsH,EAAQjD,ICEZ,SAASsK,GAAK3O,EAAK8H,EAAUJ,GAE1C,IAAI7J,EAAGC,EACP,GAFAgK,EAAWL,EAAWK,EAAUJ,GAE5B1D,GAAYhE,GACd,IAAKnC,EAAI,EAAGC,EAASkC,EAAIlC,OAAYA,EAAJD,EAAYA,IAC3CiK,EAAS9H,EAAInC,GAAIA,EAAGmC,OAEjB,CACL,IAAIsE,EAAQrB,EAAKjD,GACjB,IAAKnC,EAAI,EAAGC,EAASwG,EAAMxG,OAAYA,EAAJD,EAAYA,IAC7CiK,EAAS9H,EAAIsE,EAAMzG,IAAKyG,EAAMzG,GAAImC,GAGtC,OAAOA,EChBM,SAAS6I,GAAI7I,EAAK8H,EAAUJ,GACzCI,EAAWE,GAAGF,EAAUJ,GAIxB,IAHA,IAAIpD,GAASN,GAAYhE,IAAQiD,EAAKjD,GAClClC,GAAUwG,GAAStE,GAAKlC,OACxBoK,EAAUjI,MAAMnC,GACXwD,EAAQ,EAAWxD,EAARwD,EAAgBA,IAAS,CAC3C,IAAI6G,EAAa7D,EAAQA,EAAMhD,GAASA,EACxC4G,EAAQ5G,GAASwG,EAAS9H,EAAImI,GAAaA,EAAYnI,GAEzD,OAAOkI,ECTM,SAAS0G,GAAaZ,GAGnC,IAAIa,EAAU,CAAS7O,EAAK8H,EAAU+F,EAAMiB,KAC1C,IAAIxK,GAASN,GAAYhE,IAAQiD,EAAKjD,GAClClC,GAAUwG,GAAStE,GAAKlC,OACxBwD,EAAQ0M,EAAM,EAAI,EAAIlQ,EAAS,EAKnC,IAJKgR,IACHjB,EAAO7N,EAAIsE,EAAQA,EAAMhD,GAASA,GAClCA,GAAS0M,GAEJ1M,GAAS,GAAaxD,EAARwD,EAAgBA,GAAS0M,EAAK,CACjD,IAAI7F,EAAa7D,EAAQA,EAAMhD,GAASA,EACxCuM,EAAO/F,EAAS+F,EAAM7N,EAAImI,GAAaA,EAAYnI,GAErD,OAAO6N,GAGT,OAAO,SAAS7N,EAAK8H,EAAU+F,EAAMnG,GACnC,IAAIoH,EAAU1N,UAAUtD,QAAU,EAClC,OAAO+Q,EAAQ7O,EAAKyH,EAAWK,EAAUJ,EAAS,GAAImG,EAAMiB,ICrBjD,SAASC,GAAO/O,EAAKwN,EAAW9F,GAC7C,IAAIQ,EAAU,GAKd,OAJAsF,EAAYxF,GAAGwF,EAAW9F,GAC1BiH,GAAK3O,GAAK,CAASc,EAAOQ,EAAO0N,KAC3BxB,EAAU1M,EAAOQ,EAAO0N,IAAO9G,EAAQvI,KAAKmB,MAE3CoH,ECLM,SAAS+G,GAAOjP,EAAKwN,EAAW9F,GAC7C,OAAOqH,GAAO/O,EAAKuN,GAAOvF,GAAGwF,IAAa9F,GCD7B,SAASwH,GAAMlP,EAAKwN,EAAW9F,GAC5C8F,EAAYxF,GAAGwF,EAAW9F,GAG1B,IAFA,IAAIpD,GAASN,GAAYhE,IAAQiD,EAAKjD,GAClClC,GAAUwG,GAAStE,GAAKlC,OACnBwD,EAAQ,EAAWxD,EAARwD,EAAgBA,IAAS,CAC3C,IAAI6G,EAAa7D,EAAQA,EAAMhD,GAASA,EACxC,IAAKkM,EAAUxN,EAAImI,GAAaA,EAAYnI,GAAM,OAAO,EAE3D,OAAO,ECRM,SAASmP,GAAKnP,EAAKwN,EAAW9F,GAC3C8F,EAAYxF,GAAGwF,EAAW9F,GAG1B,IAFA,IAAIpD,GAASN,GAAYhE,IAAQiD,EAAKjD,GAClClC,GAAUwG,GAAStE,GAAKlC,OACnBwD,EAAQ,EAAWxD,EAARwD,EAAgBA,IAAS,CAC3C,IAAI6G,EAAa7D,EAAQA,EAAMhD,GAASA,EACxC,GAAIkM,EAAUxN,EAAImI,GAAaA,EAAYnI,GAAM,OAAO,EAE1D,OAAO,ECRM,SAAS4D,GAAS5D,EAAKuO,EAAMa,EAAWC,GAGrD,OAFKrL,GAAYhE,KAAMA,EAAM8F,EAAO9F,KACZ,iBAAboP,GAAyBC,KAAOD,EAAY,GAChDE,GAAQtP,EAAKuO,EAAMa,IAAc,ECJ3B,SAASG,GAAMvP,EAAK3B,GACjC,OAAOwK,GAAI7I,EAAKwH,EAASnJ,ICAZ,SAASmR,GAAMxP,EAAKqE,GACjC,OAAO0K,GAAO/O,EAAKsH,EAAQjD,ICAd,SAASlD,GAAInB,EAAK8H,EAAUJ,GACzC,IACI5G,EAAO2O,EADPxJ,GAAS,EAAA,EAAWyJ,GAAe,EAAA,EAEvC,GAAgB,MAAZ5H,GAAuC,iBAAZA,GAAyC,iBAAV9H,EAAI,IAAyB,MAAPA,EAElF,IAAK,IAAInC,EAAI,EAAGC,GADhBkC,EAAMgE,GAAYhE,GAAOA,EAAM8F,EAAO9F,IACTlC,OAAYA,EAAJD,EAAYA,IAElC,OADbiD,EAAQd,EAAInC,KACSiD,EAAQmF,IAC3BA,EAASnF,QAIbgH,EAAWE,GAAGF,EAAUJ,GACxBiH,GAAK3O,GAAK,CAAS2P,EAAGrO,EAAO0N,OAC3BS,EAAW3H,EAAS6H,EAAGrO,EAAO0N,IACfU,GAAgBD,KAAa,EAAA,GAAaxJ,KAAW,EAAA,KAClEA,EAAS0J,EACTD,EAAeD,MAIrB,OAAOxJ,ECrBM,SAASyC,GAAI1I,EAAK8H,EAAUJ,GACzC,IACI5G,EAAO2O,EADPxJ,EAAS8B,EAAAA,EAAU2H,EAAe3H,EAAAA,EAEtC,GAAgB,MAAZD,GAAuC,iBAAZA,GAAyC,iBAAV9H,EAAI,IAAyB,MAAPA,EAElF,IAAK,IAAInC,EAAI,EAAGC,GADhBkC,EAAMgE,GAAYhE,GAAOA,EAAM8F,EAAO9F,IACTlC,OAAYA,EAAJD,EAAYA,IAElC,OADbiD,EAAQd,EAAInC,KACiBoI,EAARnF,IACnBmF,EAASnF,QAIbgH,EAAWE,GAAGF,EAAUJ,GACxBiH,GAAK3O,GAAK,CAAS2P,EAAGrO,EAAO0N,KAC3BS,EAAW3H,EAAS6H,EAAGrO,EAAO0N,IACfU,EAAXD,GAA2BA,IAAa1H,EAAAA,GAAY9B,IAAW8B,EAAAA,KACjE9B,EAAS0J,EACTD,EAAeD,MAIrB,OAAOxJ,ECjBM,SAAS2J,GAAO5P,EAAKuI,EAAG8G,GACrC,GAAS,MAAL9G,GAAa8G,EAEf,OADKrL,GAAYhE,KAAMA,EAAM8F,EAAO9F,IAC7BA,EAAIyI,GAAOzI,EAAIlC,OAAS,IAEjC,IAAI8R,EAAS5L,GAAYhE,GAAO8G,EAAM9G,GAAO8F,EAAO9F,GAChDlC,EAAS4N,GAAUkE,GACvBrH,EAAIrH,KAAKC,IAAID,KAAKwH,IAAIH,EAAGzK,GAAS,GAElC,IADA,IAAI+R,EAAO/R,EAAS,EACXwD,EAAQ,EAAWiH,EAARjH,EAAWA,IAAS,CACtC,IAAIwO,EAAOrH,GAAOnH,EAAOuO,GACrBE,EAAOH,EAAOtO,GAClBsO,EAAOtO,GAASsO,EAAOE,GACvBF,EAAOE,GAAQC,EAEjB,OAAOH,EAAO7I,MAAM,EAAGwB,GCtBV,SAASyH,GAAQhQ,GAC9B,OAAO4P,GAAO5P,EAAK+H,EAAAA,GCCN,SAASkI,GAAOjQ,EAAK8H,EAAUJ,GAC5C,IAAIpG,EAAQ,EAEZ,OADAwG,EAAWE,GAAGF,EAAUJ,GACjB6H,GAAM1G,GAAI7I,GAAK,CAASc,EAAOzC,EAAK2Q,KAClC,CACLlO,MAAOA,EACPQ,MAAOA,IACP4O,SAAUpI,EAAShH,EAAOzC,EAAK2Q,OAEhC5I,MAAK,CAAS+J,EAAMC,KACrB,IAAI1L,EAAIyL,EAAKD,SACTvL,EAAIyL,EAAMF,SACd,GAAIxL,IAAMC,EAAG,CACX,GAAID,EAAIC,QAAW,IAAND,EAAc,OAAO,EAClC,GAAQC,EAAJD,QAAe,IAANC,EAAc,OAAQ,EAErC,OAAOwL,EAAK7O,MAAQ8O,EAAM9O,SACxB,SClBS,SAAS+O,GAAMC,EAAUC,GACtC,MAAO,CAASvQ,EAAK8H,EAAUJ,KAC7B,IAAIzB,EAASsK,EAAY,CAAC,GAAI,IAAM,GAMpC,OALAzI,EAAWE,GAAGF,EAAUJ,GACxBiH,GAAK3O,GAAK,CAASc,EAAOQ,KACxB,IAAIjD,EAAMyJ,EAAShH,EAAOQ,EAAOtB,GACjCsQ,EAASrK,EAAQnF,EAAOzC,MAEnB4H,GCFI,SAAS7F,GAAQJ,GAC9B,OAAKA,EACDE,GAAQF,GAAa+G,GAAMxF,KAAKvB,GAChCiE,GAASjE,GAEJA,EAAI+I,MANG,oEAQZ/E,GAAYhE,GAAa6I,GAAI7I,EAAKqH,GAC/BvB,EAAO9F,GAPG,GCPJ,SAASX,GAAKW,GAC3B,OAAW,MAAPA,EAAoB,EACjBgE,GAAYhE,GAAOA,EAAIlC,OAASmF,EAAKjD,GAAKlC,OCJpC,SAAS0S,GAAS1P,EAAOzC,EAAK2B,GAC3C,OAAO3B,KAAO2B,ECED,SAAS8O,GAAQxO,EAAOiI,EAAG8G,GACxC,OAAOtI,GAAMxF,KAAKjB,EAAO,EAAGY,KAAKC,IAAI,EAAGb,EAAMxC,QAAe,MAALyK,GAAa8G,EAAQ,EAAI9G,KCFpE,SAASkI,GAAMnQ,EAAOiI,EAAG8G,GACtC,OAAa,MAAT/O,GAAgC,EAAfA,EAAMxC,OAAwB,MAALyK,GAAa8G,OAAQ,EAAS,GACnE,MAAL9G,GAAa8G,EAAc/O,EAAM,GAC9BwO,GAAQxO,EAAOA,EAAMxC,OAASyK,GCFxB,SAASlH,GAAKf,EAAOiI,EAAG8G,GACrC,OAAOtI,GAAMxF,KAAKjB,EAAY,MAALiI,GAAa8G,EAAQ,EAAI9G,GCFrC,SAASsH,GAAKvP,EAAOiI,EAAG8G,GACrC,OAAa,MAAT/O,GAAgC,EAAfA,EAAMxC,OAAwB,MAALyK,GAAa8G,OAAQ,EAAS,GACnE,MAAL9G,GAAa8G,EAAc/O,EAAMA,EAAMxC,OAAS,GAC7CuD,GAAKf,EAAOY,KAAKC,IAAI,EAAGb,EAAMxC,OAASyK,ICJjC,SAASmI,GAAQpQ,GAC9B,OAAOyO,GAAOzO,EAAOqQ,SCAR,SAASxF,GAAQ7K,EAAO+K,GACrC,OAAOuF,GAAStQ,EAAO+K,GAAO,GCKjB,SAASwF,GAAKvQ,EAAOwQ,EAAUhJ,EAAUJ,GACjD3F,EAAU+O,KACbpJ,EAAUI,EACVA,EAAWgJ,EACXA,GAAW,GAEG,MAAZhJ,IAAkBA,EAAWE,GAAGF,EAAUJ,IAG9C,IAFA,IAAIzB,EAAS,GACT8K,EAAO,GACFlT,EAAI,EAAGC,EAAS4N,GAAUpL,GAAYxC,EAAJD,EAAYA,IAAK,CAC1D,IAAIiD,EAAQR,EAAMzC,GACd4R,EAAW3H,EAAWA,EAAShH,EAAOjD,EAAGyC,GAASQ,EAClDgQ,IAAahJ,GACVjK,GAAKkT,IAAStB,GAAUxJ,EAAOtG,KAAKmB,GACzCiQ,EAAOtB,GACE3H,EACJlE,GAASmN,EAAMtB,KAClBsB,EAAKpR,KAAK8P,GACVxJ,EAAOtG,KAAKmB,IAEJ8C,GAASqC,EAAQnF,IAC3BmF,EAAOtG,KAAKmB,GAGhB,OAAOmF,EC7BM,SAAS+K,GAAa1Q,GAGnC,IAFA,IAAI2F,EAAS,GACTgL,EAAa7P,UAAUtD,OAClBD,EAAI,EAAGC,EAAS4N,GAAUpL,GAAYxC,EAAJD,EAAYA,IAAK,CAC1D,IAAI0Q,EAAOjO,EAAMzC,GACjB,IAAI+F,GAASqC,EAAQsI,GAArB,CACA,IAAI5C,EACJ,IAAKA,EAAI,EAAOsF,EAAJtF,GACL/H,GAASxC,UAAUuK,GAAI4C,GADF5C,KAGxBA,IAAMsF,GAAYhL,EAAOtG,KAAK4O,IAEpC,OAAOtI,ECXM,SAASiL,GAAM5Q,GAI5B,IAHA,IAAIxC,EAASwC,GAASa,GAAIb,EAAOoL,IAAW5N,QAAU,EAClDmI,EAAShG,MAAMnC,GAEVwD,EAAQ,EAAWxD,EAARwD,EAAgBA,IAClC2E,EAAO3E,GAASiO,GAAMjP,EAAOgB,GAE/B,OAAO2E,ECRM,SAAS7B,GAAO4K,EAAMlJ,GAEnC,IADA,IAAIG,EAAS,GACJpI,EAAI,EAAGC,EAAS4N,GAAUsD,GAAWlR,EAAJD,EAAYA,IAChDiI,EACFG,EAAO+I,EAAKnR,IAAMiI,EAAOjI,GAEzBoI,EAAO+I,EAAKnR,GAAG,IAAMmR,EAAKnR,GAAG,GAGjC,OAAOoI,ECXM,SAASkL,GAAMzD,EAAO0D,EAAMC,GAC7B,MAARD,IACFA,EAAO1D,GAAS,EAChBA,EAAQ,GAEL2D,IACHA,EAAc3D,EAAP0D,GAAgB,EAAI,GAM7B,IAHA,IAAItT,EAASoD,KAAKC,IAAID,KAAKoQ,MAAMF,EAAO1D,GAAS2D,GAAO,GACpDF,EAAQlR,MAAMnC,GAET2N,EAAM,EAAS3N,EAAN2N,EAAcA,IAAOiC,GAAS2D,EAC9CF,EAAM1F,GAAOiC,EAGf,OAAOyD,ECfM,SAASI,GAAMjR,EAAOkR,GACnC,GAAa,MAATA,GAAyB,EAARA,EAAW,MAAO,GAGvC,IAFA,IAAIvL,EAAS,GACTpI,EAAI,EAAGC,EAASwC,EAAMxC,OACfA,EAAJD,GACLoI,EAAOtG,KAAKoH,GAAMxF,KAAKjB,EAAOzC,EAAGA,GAAK2T,IAExC,OAAOvL,ECRM,SAASwL,GAAY7S,EAAUoB,GAC5C,OAAOpB,EAASiM,OAAStG,EAAEvE,GAAK4K,QAAU5K,ECG7B,SAAS0R,GAAM1R,GAS5B,OARA2O,GAAKzI,EAAUlG,IAAM,SAASY,GAC5B,IAAII,EAAOuD,EAAE3D,GAAQZ,EAAIY,GACzB2D,EAAE7F,UAAUkC,GAAQ,WAClB,IAAIa,EAAO,CAACD,KAAKgD,UAEjB,OADA7E,GAAK+B,MAAMD,EAAML,WACVqQ,GAAYjQ,KAAMR,EAAKU,MAAM6C,EAAG9C,QAGpC8C,EC+lBT,SAASoN,GAAWjK,EAASgC,EAAMkI,EAAOC,EAAGC,EAAGC,EAAWC,EAAYC,GAGrE,GAFAvK,EAAQwK,UAAYN,EAEhBK,EAA2B,CAC7B,MAAMnU,EAAS4L,EAAK5L,OAASiU,EAG7B,OAFArK,EAAQyK,SAASN,EAAGC,EAAGhU,EAAQkU,GAExBH,EAAI/T,EACN,CACL,IAAIsU,EAAQ,EACZ,IAAK,IAAIzG,EAAI,EAAGC,EAAMlC,EAAK5L,OAAY8N,EAAJD,EAASA,IAE7B,MADAjC,EAAKiC,IAEZyG,EAAQ,GACV1K,EAAQyK,SAASN,EAAKO,EAAQL,EAAYD,EAAGM,EAAQL,EAAWC,GAElEI,EAAQ,GAERA,IAEFP,GAAKE,EAKP,OAHIK,EAAQ,GACV1K,EAAQyK,SAASN,EAAKO,EAAQL,EAAYD,EAAGM,EAAQL,EAAWC,GAE3DH,GA2BX,SAASQ,GAAWC,EAAUC,EAASC,EAAWC,EAAYT,EAAYD,EAAWW,EAAahL,EAASiL,EAAQC,EAAuBC,EAAiBC,EAAeb,EAA2Bc,GAGnM,GAAIT,EAAWC,EAAW,OAE1B,IAAIS,EAAUnB,EACVC,EAAKU,EAAYC,EAAcA,EAGnCF,EAAUrR,KAAKwH,IAAI6J,EAASK,GAE5B,IAAK,IAAIK,EAAOX,EAAiBC,EAAPU,EAAgBA,IAAQ,CAChD,MAAMC,EAA2BP,EAAOQ,mBAAmBF,GAErDG,EAAmBlS,KAAKwH,IADbwK,EAAyBpV,OACEiV,GAC5C,IAAK,IAAIM,EAAS,EAAYD,EAATC,EAA2BA,IAAU,CACxD,MAAMC,EAAQJ,EAAyBG,GACjCE,EAAYD,EAAM5J,KAAKJ,QAAQuJ,EAAiB,KAChDW,EAAcF,EAAMG,OAEtBT,IAAaC,IACfpB,EAAI,EACJC,GAAKW,EACLO,EAAWC,EACXvL,EAAQgM,UAAU7B,EAAGC,EAAGY,EAAaD,IAEnCZ,EAAIa,IAEJiB,GAAqBtK,KAAKkK,GAC5B1B,GAAK0B,EAAUzV,OAASiU,EAExBF,EAAIF,GACFjK,EAAS6L,EAAWT,EAAcU,GAAc3B,EAAGC,EAAGC,EAAWC,EAAYC,KAMrFvK,EAAQkM,OAqFV,SAASC,GAAyBC,EAAYxJ,EAAMyJ,GAClD,MAAM5C,EAAQ2C,EAAWE,YAAYC,iBAC/BC,EAAU/C,EAAMgD,IAAIC,IAAMjD,EAAMzD,MAAM0G,IAI5C,GAFA9J,EAAK5C,QAAQwK,UAAY6B,EAET,IAAZG,EAEF5J,EAAK5C,QAAQyK,SAAShB,EAAMzD,MAAM2G,OAAS/J,EAAKyH,UAAWzH,EAAKgK,MADhDnD,EAAMgD,IAAIE,OAASlD,EAAMzD,MAAM2G,QACiC/J,EAAKyH,UAAWzH,EAAKmI,iBAChG,GAAInI,EAAKiK,YAAcpD,EAAMzD,MAAM0G,IAAK,CAC7C,MAAMvC,EAAIV,EAAMzD,MAAM2G,OAAS/J,EAAKyH,UACpCzH,EAAK5C,QAAQyK,SAASN,EAAGvH,EAAKgK,KAAMhK,EAAKoI,YAAcb,EAAGvH,EAAKmI,iBAE/DnI,EAAK5C,QAAQyK,SAAS,EAAG7H,EAAKgK,KADrBhK,EAAKiK,YAAcpD,EAAMgD,IAAIC,IACFjD,EAAMgD,IAAIE,OAAS/J,EAAKyH,UAExBzH,EAAKoI,YAF8BpI,EAAKmI,YA6HhF,SAAS+B,GAAgB5C,EAAO6C,GAE9B,MAAO,QAAQ7C,EAAM7K,MAAM,GAAI,OAAO0N,KAqBxC,SAASC,GAAqBpC,EAAUC,EAASoC,EAASC,EAAmBC,GAE3E,GAA0B,MAArBD,GAAmD,MAApBC,EAClC,MAAO,GAIT,IAAIC,EAAe,CACjB,CACEpH,MAAOkH,EACPT,IAAKU,EACLE,aAAc,IAIlB,IAAK,IAAIlX,EAAI,EAAG+N,EAAM+I,EAAQ7W,OAAY8N,EAAJ/N,EAASA,IAAK,CAClD,MAAMmX,EAASL,EAAQ9W,GACjBoX,EAAkB,GAExB,IAAK,IAAItJ,EAAI,EAAGuJ,EAAYJ,EAAahX,OAAYoX,EAAJvJ,EAAeA,IAAK,CACnE,MAAMwF,EAAQ2D,EAAanJ,GAEVwF,EAAMzD,MAAnBsH,EAAOb,KAA4C,IAAvBa,EAAOG,YAGrCF,EAAgBtV,KAAK,CACnB+N,MAAOyD,EAAMzD,MAAQsH,EAAOG,YAC5BhB,IAAKhD,EAAMgD,IAAMa,EAAOG,YACxBJ,aAAc5D,EAAM4D,eAEA5D,EAAMzD,MAAnBsH,EAAOb,KAAqBa,EAAOtH,MAAQyD,EAAMgD,IAG1Dc,EAAgBtV,KAAKwR,IAIjB6D,EAAOtH,MAAQyD,EAAMzD,OACvBuH,EAAgBtV,KAAK,CACnB+N,MAAOyD,EAAMzD,MACbyG,IAAKa,EAAOtH,MAAQ,EACpBqH,aAAc5D,EAAM4D,eAGP5D,EAAMgD,IAAnBa,EAAOb,KAKPc,EAAgBtV,KAHS,IAAvBqV,EAAOI,aAQuB,IAAvBJ,EAAOG,YALK,CACnBzH,MAAOsH,EAAOb,IAAMa,EAAOG,YAAc,EACzChB,IAAKhD,EAAMgD,IAAMa,EAAOG,YACxBJ,aAAc5D,EAAM4D,aAAeC,EAAOb,IAAM,EAAIhD,EAAMzD,OAcvC,CACnBA,MAAOsH,EAAOb,IAAM,EACpBA,IAAKhD,EAAMgD,IACXY,aAAc5D,EAAM4D,aAAeC,EAAOb,IAAM,EAAIhD,EAAMzD,SAMpEoH,EAAeG,EAGjB,MAaF,EAA+BH,EAAcxC,EAAUC,KACrD,IAAI1U,EAAI,EACR,KAAWiX,EAAahX,OAAjBD,GAAyB,CAC9B,MAAMsT,EAAQ2D,EAAajX,GAETyU,EAAdnB,EAAMzD,QACRyD,EAAM4D,cAAgBzC,EAAWnB,EAAMzD,MACvCyD,EAAMzD,MAAQ4E,GAGZnB,EAAMgD,IAAM5B,IAAWpB,EAAMgD,IAAM5B,GAEpBpB,EAAMgD,IAArBhD,EAAMzD,OAAsBoH,EAAaO,OAAOxX,IAAK,GAEzDA,IAGF,OAAOiX,EAAa1O,MAAK,CAAC1B,EAAGC,IACpBD,EAAEqQ,aAAepQ,EAAEoQ,gBA/BrBO,CAAqBR,EAAcxC,EAAUC,GC//BvC,SAASgD,GAASC,KAAQC,GACvCA,EAAOlV,SAASmR,IAGlB,IAAuB/T,EAAQ6I,EAAR7I,EAHoB6X,EAIzCrX,OAAOuX,oBADsBlP,EAHiBkL,GAIXnR,SAASoV,IAC8C,EAApF,CAAC,SAAU,OAAQ,YAAa,SAAU,YAAa,eAAerG,QAAQqG,IAGlFxX,OAAOC,eAAeT,EAAQgY,EADXxX,OAAOyX,yBAAyBpP,EAAQmP,OAI7DxX,OAAOuX,oBAAoBlP,EAAO9H,WAAW6B,SAASoV,IAC1C,gBAANA,GAGJxX,OAAOC,eAAeT,EAAOe,UAAWiX,EADrBxX,OAAOyX,yBAAyBpP,EAAO9H,UAAWiX,UCO1D,SAAS7V,GAAS0V,EAAKK,GACpC,OAAOC,2BAAwBD,EAAa,CAAEE,MAAOP,ICNvD,SAASQ,GAAoBC,GACvBC,KACFA,GAAaC,YAAc,sHAGVF,qBAyqCrB,SAASG,GAAuBC,GAC9B,MAAO,CACLxE,EAAGwE,EAAWC,MACdxE,EAAGuE,EAAWE,MACdC,YAAmC,IAAtBH,EAAWI,OACxBC,cAAqC,IAAtBL,EAAWI,QAc9B,SAASE,GAAuBC,GAG9B,MAAMC,EAAQD,EAAWE,eAAe,GAExC,MAAO,CACLjF,EAAGgF,EAAMP,MACTxE,EAAG+E,EAAMN,MACTC,aAAa,EACbE,eAAe,GAmBnB,SAASK,GAAajX,EAASkX,GAC7B,IAAKlX,EAAW,OAEhB,IAAImX,EAAU,GACd,IAAK,MAAMzP,KAAYwP,EACrBC,GAAW,GAAGzP,MAAawP,EAAOxP,OAGpC1H,EAAQoX,MAAMD,QAAUA,EAY1B,SAASE,GAAetF,EAAI,EAAGC,EAAI,EAAGsF,GAA0B,GAC9D,OAAIA,EACK,eAAevF,QAAQC,UAEvB,aAAaD,QAAQC,OAahC,SAASuF,GAAWxF,EAAI,EAAGC,EAAID,EAAGuF,GAA0B,GAC1D,OAAIA,EACK,WAAWvF,MAAMC,QAEjB,SAASD,MAAMC,KAe1B,SAASwF,IAASC,KAAEA,EAAIC,GAAEA,EAAEC,SAAEA,EAAQpG,KAAEA,IACtC,MAAM3D,EAAQgK,KACd,IAAIC,EAEJ,MAAMC,EAAS,KACb,MAAMC,EAASH,KAAYhK,EAEzBiK,EADe,IAAbF,EACS,EAEAI,EAASJ,EAElBE,EAAW,IAAKA,EAAW,GAC/B,MAAMG,EAUV,CAAgBH,GACP,GAAMzW,KAAK6W,IAAIJ,EAAWzW,KAAK8W,IAAM,EAX5BC,CAAMN,GAEpBtG,EADckG,GAAQC,EAAKD,GAAQO,EACvBA,GAEG,EAAXH,GAAgBO,sBAAsBN,IAG5CA,IAeF,SAASF,KAAa,OAAO,IAAIS,KC7xC1B,SAASC,GAAgBxX,EAAMyX,GACpCC,GAAQ1X,GAAQyX,EAChBE,GAAqB3X,GAAQ,IAAI4X,uBAGjCC,GAAQC,KAAK,iBADC,CAAE9X,KAAAA,EAAMyX,OAAAA,IAGlBM,KAAKC,OAAOC,IAAI,mCAkItB,EAAiCjY,EAAMyX,KACrC,MAAMS,EAAc,mBAAmBlY,EACjCmY,EAAmB,mBAAmBnY,qBAEtCgY,EAASI,KAEfJ,EAAON,QAAQW,WAAWrY,GAAQ,CAChCgB,KAAM,UACNsX,MAAOtY,EACPuY,YAAa,eAAevY,sDAC5BwY,SAAS,GAGXR,EAAON,QAAQW,WAAcrY,EAAH,qBAA8B,CACtDgB,KAAM,UACNsX,MAAUtY,EAAH,qBACPuY,YAAa,6BAA6BvY,yOAC1CwY,QAAS,QAG0BjZ,IAAjCwY,KAAKC,OAAOC,IAAIC,IAClBH,KAAKC,OAAOS,IAAIP,GAAa,QAGW3Y,IAAtCwY,KAAKC,OAAOC,IAAIE,IAClBJ,KAAKC,OAAOS,IAAIN,EAAkB,GAGpCR,GAAqB3X,GAAM0Y,IAAIX,KAAKC,OAAOW,QAAQT,GAAa,KAC9DU,GAA6B5Y,OAG/B2X,GAAqB3X,GAAM0Y,IAAIX,KAAKC,OAAOW,QAAQR,GAAmBU,IACpEC,GAAsB9Y,GAEtB6X,GAAQC,KAAK,0BADC,CAAE9X,KAAAA,EAAMyX,OAAAA,EAAQoB,MAAAA,QAIhClB,GAAqB3X,GAAM0Y,IAAIX,KAAKgB,SAASL,IAAI,iBAAkB,CACjE9Z,CAAC,kBAAkBoB,KACjBgZ,GAAuBhZ,OAI3B8Y,GAAsB9Y,IA7KpBiZ,CAAuBjZ,EAAMyX,GAG/BmB,GAA6B5Y,GAUxB,SAASkZ,GAAkBlZ,GAChC,MAAMyX,EAASC,GAAQ1X,GAEnB+X,KAAKC,OAAOC,IAAI,mCA2LtB,CAAmCjY,IACjC2X,GAAqB3X,GAAMmZ,iBACpBxB,GAAqB3X,UACrBoY,KAAkBV,QAAQW,WAAWrY,IA7L1CoZ,CAAyBpZ,UAGpB0X,GAAQ1X,GAGf6X,GAAQC,KAAK,oBADC,CAAE9X,KAAAA,EAAMyX,OAAAA,IAejB,SAASuB,GAAwBhZ,EAAMqZ,GAC5C,MAAMnB,EAAc,mBAAmBlY,EAEnCqZ,MAAAA,EACFtB,KAAKC,OAAOS,IAAIP,EAAamB,GAE7BtB,KAAKC,OAAOS,IAAIP,GAAcH,KAAKC,OAAOC,IAAIC,IAGhDU,GAA6B5Y,GAQxB,SAASsZ,KACd,IAAK,MAAOtZ,EAAMyX,KAYpB,YACE,IAAK,MAAMzX,KAAQ0X,QACX,CAAC1X,EAAM0X,GAAQ1X,IAdMuZ,GAC3B9B,EAAO+B,mBACP3B,GAAQC,KAAK,wBAAyB,CAAE9X,KAAAA,EAAMyX,OAAAA,IAwBlD,SAASmB,GAA8B5Y,GACrC,MAAMyX,EAASC,GAAQ1X,GACjByZ,EAAehC,EAAOiC,WACtBC,EAAgB5B,KAAKC,OAAOC,IAAI,mBAAmBjY,GAErD+X,KAAKC,OAAOC,IAAI,kCACd0B,IAAkBF,EACpBG,GAAe5Z,EAAMyX,GACZgC,IAAiBE,GAC1BH,GAAiBxZ,EAAMyX,GAGpBgC,EAEMA,GACTD,GAAiBxZ,EAAMyX,GAFvBmC,GAAe5Z,EAAMyX,GAOpB,SAASmC,GAAgB5Z,EAAMyX,GACpC,MAAMoC,EAAQ,CAAE7Z,KAAAA,EAAMyX,OAAAA,GAEtBA,EAAOmC,iBACP/B,GAAQC,KAAK,sBAAuB+B,GAG/B,SAASL,GAAkBxZ,EAAMyX,GACtC,MAAMoC,EAAQ,CAAE7Z,KAAAA,EAAMyX,OAAAA,GAEtBA,EAAO+B,mBACP3B,GAAQC,KAAK,wBAAyB+B,GAsExC,SAASf,GAAuB9Y,GAG9B8Z,GAAgB9Z,GAAQ+X,KAAKC,OAAOC,IAFX,mBAAmBjY,sBAUvC,SAAS+Z,KAAqB,OAAOD,GCtJrC,SAASE,GAAqBC,GACnC,GAAIA,aAAiBC,GAAS,CAC5B,MAAMhb,EAAU,IAAIib,GAEpB,OADAjb,EAAQkb,SAASH,GACV/a,GA6BJ,SAASkZ,KACd,OAAOJ,IAAUD,KAAKsC,SAASC,iBAAiB,WAAWC,SAASC,aAM/D,SAASC,KClJT,IAWkBC,EDwIlBC,KAEDC,IACFA,IAAU,EAENC,IACFA,GAAgBlb,SAAQ,CAACO,EAAOzC,KAC9ByC,EAAM4a,UACND,GAAgBE,OAAOtd,MAG3Bud,GAAc7B,YAEdyB,IAAU,EAyMZI,GAActC,IACZX,KAAKkD,UAAUC,oBAAoBC,IACjC,MAAMC,EAAUC,GAAiBF,GAC3BG,EAAiBvD,KAAKwD,MAAMC,QAAQJ,GAE1CvD,GAAQC,KAAK,qBAAsBsD,GACnCE,EAAeG,YAGjB1D,KAAK2D,OAAOC,yBAAwB,KAClCC,wBAAgBC,2BAChBhB,GAAgBlb,SAASyb,IAAcrD,KAAKwD,MAAMC,QAAQJ,GAASU,6BCzWhDpB,EATrB,4BAUK3C,KAAKC,OAAOW,QAAQ+B,GAAYxa,IACrC,IAVA,IAUIA,EAA4B,CAC9B,MAAM6b,EAAc,WAAWrB,EACzBsB,EAAQ,IAAIzE,KACZ0E,EAAkBC,OAAOC,aAAaC,QAAQL,GACpD,IAAIM,EAAqB,KAKzB,GAJIJ,IACFI,EAAqB,IAAK9E,KAAKA,KAAK+E,MAAML,IAAmBM,WAG1DF,GAC4B,iBAAvBA,GAAoCA,EAAqBL,EAAMO,UAAY,EACnF,CACAL,OAAOC,aAAaK,QAAQT,EAAaC,GAEzC,MAAMS,EAAe1E,KAAK2E,cAAcC,WAvB5C,gDAwBoB,CACZpE,YAxBR,mNAyBQqE,aAAa,EACbC,QAAS,CACP,CACE/T,KAAM,+BACNlK,aACEmZ,KAAKC,OAAOS,IAAIiC,GAAY,GAC5B+B,EAAaK,UACbZ,OAAOC,aAAaY,WAAWhB,GAC/B9P,YAAW,KACT8L,KAAKiF,WACJ,mBD2HnBpB,wBAAgBC,4BAQlBoB,eAAeC,GAAgBrU,GAC7B,MAAQ2P,QAAS2E,SAAwCC,oCAAO,oDAC1DC,EAAO,IAAIF,EACjBE,EAAKxU,SAAWA,EAChBwU,EAAK5B,SASA,SAAS6B,GAAeC,GAC7B,OAAO1F,GAAQ2F,GAAG,eAAgBD,GAU7B,SAASE,GAAiBF,GAC/B,OAAO1F,GAAQ2F,GAAG,iBAAkBD,GAU/B,SAASG,GAAoBH,GAClC,OAAO1F,GAAQ2F,GAAG,qBAAsBD,GAUnC,SAASI,GAAgBJ,GAC9B,OAAO1F,GAAQ2F,GAAG,iBAAkBD,GAU/B,SAASK,GAAmBL,GACjC,OAAO1F,GAAQ2F,GAAG,oBAAqBD,GAUlC,SAASM,GAAqBN,GACnC,OAAO1F,GAAQ2F,GAAG,sBAAuBD,GAUpC,SAASO,GAAuBP,GACrC,OAAO1F,GAAQ2F,GAAG,wBAAyBD,GAUtC,SAASQ,GAAwBR,GACtC,OAAO1F,GAAQ2F,GAAG,0BAA2BD,GAQxC,SAASS,KACd,OAAO9D,GAUF,SAAS+D,GAAyBC,GACvC,GAAKA,EACL,OAAO7C,GAAiB6C,EAAcC,YAUjC,SAAS9C,GAAkBF,GAChC,IAAKA,EAAc,OACnB,IAAKN,GAAmB,OAExB,IAAIO,EAAUP,GAAgB5C,IAAIkD,GAElC,IAAKC,EAAS,CACZA,EAAU,IAAIlB,GAAQ,CAAEiB,WAAAA,IACxBN,GAAgBpC,IAAI0C,EAAYC,GAEhC,MAAMgD,EAAqBjD,EAAWkD,cAAa,KAChCxD,IAAAA,GACQE,OAAOI,GAChCiD,EAAmBjF,aAIvB,OAAOiC,EAUF,SAASkD,GAA4BnD,GAC1C,GAAKA,EAEL,OAAO,IAAIjB,GAAQ,CACjBiB,WAAAA,EACAoD,YAAY,IAST,SAASC,KACd,OAAOnD,GAAiBtD,KAAKkD,UAAUwD,uBAWlC,SAASC,GAAiBC,GAC/B,GAAKA,EAKL,OAHI9D,IACFA,GAAgBlb,SAASyb,IAAcuD,EAASvD,MAE3CsC,IAAoBtC,IAAcuD,EAASvD,wE5GzVhDhd,uK8GJFwgB,UAA+B,WAc7B,SAASC,EAAYC,EAASC,EAAUC,GACtCpe,KAAKke,QAAUA,EACfle,KAAKme,SAAWA,EAChBne,KAAKoe,WAAaA,EAClBpe,KAAKqe,UAAY,EACjBre,KAAKse,WAAa,EAClBte,KAAKue,OAAS,GACdve,KAAKwe,gBAAkB,GAyHzB,OA7IAP,EAAYQ,4BAAuCC,MAEnDT,EAAYU,YAAuBC,IACjC,IAAIC,EAA4CC,EAAOP,EAAQQ,EAAIC,EAGnE,IAFgFT,EAASK,EAAKL,OAC9FM,EAAc,IAAIZ,EADRW,EAAKV,QAAoBU,EAAKT,SAAuBS,EAAKR,YAE/DW,EAAK,EAAGC,EAAOT,EAAOjiB,OAAa0iB,EAALD,EAAWA,IAE5CF,EAAYI,SADZH,EAAQP,EAAOQ,GACaD,EAAMnF,UAEpC,OAAOkF,GAaTZ,EAAY/gB,UAAUuhB,4BAAuCC,IAC3D,IAAIQ,EAAMC,EAAOC,EACjB,OAA6B,MAAzBV,EAASW,aACJX,EAASW,aAEdX,EAASY,aACmC,OAAtCJ,EAAOR,EAASa,mBAA6BL,EAAO,YAExDR,EAASc,gBACJ,OAAUd,EAASa,kBACjBb,EAASe,kBAAoBf,EAASa,kBACxCb,EAASe,gBAEHf,EAASgB,cAAiB,KAAoG,OAA5FP,EAA8C,OAArCC,EAAQV,EAASe,iBAA2BL,EAAQV,EAASa,mBAA6BJ,EAAQ,gBAKhKlB,EAAY/gB,UAAUyiB,wBAA0B,SAASjB,GAEvD,OAAgB,MAAZA,EACK,UAEgB,MAArBA,EAASkB,SACJlB,EAASkB,SAEdlB,EAASmB,WACJ,SACEnB,EAASoB,SACX,WAAc9f,KAAK2f,wBAAwBjB,EAASqB,iBAEhDrB,EAASsB,cAGG,IAFhBtB,EAASuB,gBAEoB,IAD3BvB,EAASwB,mBAKtBjC,EAAY/gB,UAAUijB,wBAAmCzB,IACvD,IAAIQ,EACJ,OAAqC,OAA7BA,EAAOR,EAASP,UAAoBe,EAAOR,EAASsB,eAG9D/B,EAAY/gB,UAAUkjB,cAAgB,WACpC,OAAOpgB,KAAKqgB,YAGdpC,EAAY/gB,UAAUojB,WAAa,WACjC,OAAOtgB,KAAKke,SAGdD,EAAY/gB,UAAUqjB,UAAY,WAChC,IAAIX,EAAUY,EAAaC,EAAc3B,EAAOI,EAGhD,IAAKU,KAFLa,EAAe,GACfvB,EAAOlf,KAAKue,QAGViC,EAAcxgB,KAAK0gB,WADnB5B,EAAQI,EAAKU,KAEDvB,UAAYre,KAAKwe,gBAAgBoB,GAC7CY,EAAY7G,SAAWmF,EAAMnF,SAC7B8G,EAAatiB,KAAKqiB,GAEpB,OAAOC,GAGTxC,EAAY/gB,UAAUyjB,cAAgB,WACpC,OAAO3gB,KAAKse,YAGdL,EAAY/gB,UAAU0jB,aAAe,WACnC,OAAO5gB,KAAKqe,WAGdJ,EAAY/gB,UAAU+hB,SAAW,SAASH,EAAOnF,GAC/C,IAAIkH,EAAgBC,EAAOC,EAoB3B,OAnBuB,MAAnB/gB,KAAKqgB,aACPrgB,KAAKqgB,WAAargB,KAAKye,4BAA4BK,EAAM,KAEtC,MAAjB9e,KAAKme,WACPne,KAAKme,SAAWne,KAAKmgB,wBAAwBrB,EAAM,KAE9B,MAAnB9e,KAAKoe,aACPpe,KAAKoe,WAAyD,mBAApC0C,EAAQhC,EAAM,IAAImB,cAA+Ba,EAAMb,qBAAkB,GAErGjgB,KAAKqe,YACLS,EAAMnF,SAAWA,EACjBkH,EAAiB7gB,KAAK2f,wBAAwBb,EAAM,IACjB,MAA/B9e,KAAKue,OAAOsC,KACd7gB,KAAKue,OAAOsC,GAAkB/B,EAC9B9e,KAAKse,cAEgD,OAAlDyC,EAAS/gB,KAAKwe,iBAAiBqC,KAClCE,EAAOF,GAAkB,GAEpB7gB,KAAKwe,gBAAgBqC,MAG9B5C,EAAY/gB,UAAUwjB,WAAa,SAAS5B,GAC1C,OAAOA,EAAMzX,KAAc2Z,EAQxBhhB,KAPe0e,IACP,CACLW,aAAc2B,EAAMvC,4BAA4BC,GAChDkB,SAAUoB,EAAMrB,wBAAwBjB,GACxCP,SAAU6C,EAAMb,wBAAwBzB,OAL7B,IAAUsC,GAW7B/C,EAAY/gB,UAAU+jB,UAAY,WAChC,MAAO,CACL/C,QAASle,KAAKsgB,aACdlC,WAAYpe,KAAKoe,WACjBD,SAAUne,KAAKme,SACfI,OAAQve,KAAKugB,cAIVtC,EA9IsB,S/GOjC,WAsBE,SAASzgB,EAAW0jB,GAhCtB,EAAyB9jB,EAAUL,KAAe,KAAMK,aAAoBL,GAAgB,MAAM,IAAIM,UAAU,sCAiC5GF,CAAgB6C,KAAMxC,GAEtBwC,KAAKmhB,UAAW,EAChBnhB,KAAKkhB,eAAiBA,EAuBxB,OAhDApkB,EAAaU,EAAY,KAAM,CAAC,CAC9BX,IAAK,eAOLyC,MAA6BsD,GACqC,mBAAvC,MAAVA,EAAiBA,EAAO2V,aAAU5Z,MAwBrD7B,EAAaU,EAAY,CAAC,CACxBX,IAAK,UACLmB,QACOgC,KAAKmhB,WACRnhB,KAAKmhB,UAAW,EAEmB,mBAAxBnhB,KAAKkhB,gBACdlhB,KAAKkhB,iBAGPlhB,KAAKkhB,eAAiB,UAKrB1jB,EAjDT,MCuBA,WAKE,SAASwZ,IACP7Z,EAAgB6C,KAAMgX,GAEtBhX,KAAKmhB,UAAW,EAChBnhB,KAAKohB,YAAc,IAAIC,IACvB,IAAIC,GAA4B,EAC5BC,GAAoB,EACpBC,OAAiB7iB,EAErB,IACE,IAAK,IAA8C8iB,EAA1CC,EAAY9hB,UAAU+hB,OAAO5D,cAAsBuD,GAA6BG,EAAQC,EAAUE,QAAQC,MAAOP,GAA4B,EAAM,CAC1J,IAAI/jB,EAAakkB,EAAMniB,MACvBU,KAAK8X,IAAIva,IAEX,MAAOukB,GACPP,GAAoB,EACpBC,EAAiBM,UAEjB,IACOR,GAAiD,MAApBI,EAAUK,QAC1CL,EAAUK,iBAGZ,GAAIR,EACF,MAAMC,IA1DhB,IAAsBzkB,EAAaC,EAkJjC,OAlJoBD,EAmEPia,GAnEoBha,EAmEC,CAAC,CACjCH,IAAK,UACLmB,QACOgC,KAAKmhB,WACRnhB,KAAKmhB,UAAW,EAChBnhB,KAAKohB,YAAYriB,SAAkBxB,GAC1BA,EAAWgb,YAEpBvY,KAAKohB,YAAc,QAatB,CACDvkB,IAAK,MACLmB,QACE,IAAKgC,KAAKmhB,SAAU,CAClB,IAAIa,GAA6B,EAC7BC,GAAqB,EACrBC,OAAkBvjB,EAEtB,IACE,IAAK,IAA+CwjB,EAA3CC,EAAaxiB,UAAU+hB,OAAO5D,cAAuBiE,GAA8BG,EAASC,EAAWR,QAAQC,MAAOG,GAA6B,EAAM,CAChK,IAAIzkB,EAAa4kB,EAAO7iB,MACxBhC,EAAiBC,GACjByC,KAAKohB,YAAYtJ,IAAIva,IAEvB,MAAOukB,GACPG,GAAqB,EACrBC,EAAkBJ,UAElB,IACOE,GAAmD,MAArBI,EAAWL,QAC5CK,EAAWL,iBAGb,GAAIE,EACF,MAAMC,OAUf,CACDrlB,IAAK,SACLmB,MAAuBT,GAChByC,KAAKmhB,UACRnhB,KAAKohB,YAAYjH,OAAO5c,KAI3B,CACDV,IAAK,SACLmB,MAAwBT,GACtByC,KAAKqiB,OAAO9kB,KAIb,CACDV,IAAK,QACLmB,QACOgC,KAAKmhB,UACRnhB,KAAKohB,YAAYkB,aA7IqDpmB,EAAkBa,EAAYG,UAAWF,GAkJ9Gga,EArHT,GCIIuL,GAEJ,WA8CE,SAASA,IArFX,EAAyBnlB,EAAUL,KAAe,KAAMK,aAAoBL,GAAgB,MAAM,IAAIM,UAAU,sCAsF5GF,CAAgB6C,KAAMuiB,GAEtBviB,KAAKmhB,UAAW,EAChBnhB,KAAKsiB,QAoNP,OArQAxlB,EAAaylB,EAAS,KAAM,CAAC,CAC3B1lB,IAAK,0BACLmB,MAAwCwkB,GACtC,IAAIxB,EAAQhhB,KAOZ,OALsC,IAAlCA,KAAKyiB,kBAAkBnmB,SACzB0D,KAAK0iB,SAAW1iB,KAAK2iB,2BAGvB3iB,KAAKyiB,kBAAkBtkB,KAAKqkB,GACrB,IAAIhlB,IAAW,KAGpB,GAFAwjB,EAAMyB,kBAAkB5O,OAAOmN,EAAMyB,kBAAkB3U,QAAQ0U,GAAmB,GAE3C,IAAnCxB,EAAMyB,kBAAkBnmB,OAC1B,OAAO0kB,EAAM0B,SAAW1B,EAAM4B,oBAInC,CACD/lB,IAAK,iBACLyC,MAAO,CAAwBujB,EAASvjB,IAC/BujB,EAAQvjB,IAEhB,CACDzC,IAAK,4BACLmB,MAA0C6kB,EAASvjB,GACjD,IACE,OAAOujB,EAAQvjB,GACf,MAAOwjB,GACP,OAAO9iB,KAAKyiB,kBAAkBpb,KAAcmb,GACnCA,EAAiBM,UAuBhChmB,EAAaylB,EAAS,CAAC,CACrB1lB,IAAK,QACLmB,QAC4B,MAAtBgC,KAAKoa,eACPpa,KAAKoa,cAAc7B,UAGrBvY,KAAKoa,cAAgB,IAAIpD,GACzBhX,KAAK+iB,oBAAsB,KAG5B,CACDlmB,IAAK,UACLmB,QACEgC,KAAKoa,cAAc7B,UACnBvY,KAAK+iB,oBAAsB,KAC3B/iB,KAAKmhB,UAAW,IAejB,CACDtkB,IAAK,KACLmB,MAAmBglB,EAAWH,EAASI,GACrC,IAAIC,EAASljB,KAMb,GAJe,MAAXijB,IACFA,GAAU,GAGRjjB,KAAKmhB,SACP,MAAUgC,MAAM,6BAGlB,GAAuB,mBAAZN,EACT,MAAUM,MAAM,8BAGInjB,KAAK+iB,oBAAoBC,GAGzCC,EACFjjB,KAAK+iB,oBAAoBC,GAAWC,QAAQJ,GAE5C7iB,KAAK+iB,oBAAoBC,GAAW7kB,KAAK0kB,GAG3C7iB,KAAK+iB,oBAAoBC,GAAa,CAACH,GAOzC,IAAIO,EAAU,IAAI5lB,IAAW,KAC3B0lB,EAAO9I,cAAciI,OAAOe,GAErBF,EAAOG,IAAIL,EAAWH,MAG/B,OADA7iB,KAAKoa,cAActC,IAAIsL,GAChBA,IAWR,CACDvmB,IAAK,OACLmB,MAAqBglB,EAAWH,EAASI,GACxB,MAAXA,IACFA,GAAU,GAGZ,IAKI1lB,EAAayC,KAAK4c,GAAGoG,GALM1jB,IAC7B/B,EAAWgb,UACJsK,EAAQvjB,KAG4B2jB,GAC7C,OAAO1lB,IAmBR,CACDV,IAAK,UACLmB,MAAwBglB,EAAWH,GACjC,OAAO7iB,KAAK4c,GAAGoG,EAAWH,GAAS,KAGpC,CACDhmB,IAAK,MACLmB,MAAoBglB,EAAWM,GAC7B,IAAItjB,KAAKmhB,SAAT,CAIA,IAAIoC,EAAWvjB,KAAK+iB,oBAAoBC,GAExC,GAAIO,EAAU,CACZ,IAAIC,EAAeD,EAASzV,QAAQwV,GAEhB,EAAhBE,GACFD,EAAS1P,OAAO2P,EAAc,GAGR,IAApBD,EAASjnB,eACJ0D,KAAK+iB,oBAAoBC,OAarC,CACDnmB,IAAK,OACLmB,MAAqBglB,EAAW1jB,GAC9B,IAAIikB,EAAWvjB,KAAK+iB,qBAAuB/iB,KAAK+iB,oBAAoBC,GAEpE,GAAIO,EAMF,IAFA,IAAIE,EAAeF,EAAShe,QAEnBlJ,EAAI,EAAOonB,EAAannB,OAAjBD,EAAyBA,IACvC2D,KAAK+B,YAAY2gB,SAASe,EAAapnB,GAAIiD,KAIhD,CACDzC,IAAK,YACLmB,MAA0BglB,EAAW1jB,GACnC,IAAIokB,EAAS1jB,KAETujB,EAAWvjB,KAAK+iB,qBAAuB/iB,KAAK+iB,oBAAoBC,GAEpE,GAAIO,EAAU,CACZ,IAAII,EAAWJ,EAASlc,KAAcwb,GAC7Ba,EAAO3hB,YAAY2gB,SAASG,EAASvjB,KAE9C,OAAOkd,QAAQoH,IAAID,GAAUE,MAAK,SAGpC,OAAOrH,QAAQsH,YAEhB,CACDjnB,IAAK,gBACLmB,QACE,OAAOrB,OAAO8E,KAAKzB,KAAK+iB,uBAEzB,CACDlmB,IAAK,4BACLmB,MAA0CglB,GACxC,IAAIO,EAAWvjB,KAAK+iB,oBAAoBC,GACxC,OAAmB,MAAZO,EAAmB,EAAIA,EAASjnB,SAExC,CACDO,IAAK,wBACLmB,QAKE,IAJA,IAAIyG,EAAS,EAETsf,EAAOpnB,OAAO8E,KAAKzB,KAAK+iB,qBAEnBhE,EAAK,EAAQgF,EAAKznB,OAAVyiB,EAAkBA,IAEjCta,GAAUzE,KAAK+iB,oBADCgB,EAAKhF,IACyBziB,OAGhD,OAAOmI,MAIJ8d,EAtQT,GAyQAA,GAAQG,SAAWH,GAAQK,eAC3BL,GAAQE,kBAAoB,GAC5B,gBAAiBF,c8GjTIyB,uBACSC,uBCJ9B,WACE,IAAIhG,EAAsBiG,EAAaC,EAEvClG,EAAcxgB,GAES,MAAnB2mB,GAAOC,WAETF,EAAOC,GAAOC,SAAW,CACvBC,aAAc,GACdrN,QAAS,IAHXsL,EAAUyB,GAAqBzB,SAI7BgC,uBAAuB,EACvBvmB,kBACE,IAAiBsmB,EAAcE,EAA0BC,EAAuBtG,EAAUC,EAAYsG,EAAaxF,EAGnH,IAAKf,KAFLmG,EAAe,GACfpF,EAAOiF,EAAKG,aAGV,IAAKlG,KADLoG,EAA2BtF,EAAKf,GAG9B,IAAKuG,KADLD,EAAwBD,EAAyBpG,GAG/CkG,EAAanmB,KADCsmB,EAAsBC,IAK1C,OAAOJ,GAETtmB,wBACE,OAAOgC,KAAK2kB,kBAAkBroB,QAEhC0B,oBACEmmB,EAAKG,aAAe,IAEtBtmB,kBACE,IAAI6gB,EAAayF,EAAcvF,EAAIC,EAMnC,KALAsF,EAAetkB,KAAK2kB,mBACP/f,MAAK,CAAS1B,EAAGC,IACrBA,EAAEyd,eAAiB1d,EAAE0d,iBAE9BgE,QAAQC,KAAK,kEACR9F,EAAK,EAAGC,EAAOsF,EAAahoB,OAAa0iB,EAALD,EAAWA,IAElD6F,QAAQC,KAAK,KADbhG,EAAcyF,EAAavF,IACK6B,eAAkB,KAAQ/B,EAAYuB,gBAAmB,MAASvB,EAAYyB,aAAezB,IAGjI7gB,UAAoBkgB,EAASvE,GAC3B,IAAIkF,EAAaiG,EAAiBC,EAAO5G,EAAUC,EAAY4G,EAAyBN,EAAa5F,EAAOgC,EAAOC,EAAQkE,EAAQ/F,EAAMC,EACzI6F,EAA0B7B,MAAM+B,gBAChC,IACE/B,MAAM+B,gBAAkB,EAGxBpG,GADAA,EAA2F,OAAlFI,EAAoC,mBAD7C6F,EAAY5B,SACiBe,YAA6Ba,EAAMb,mBAAgB,GAAkBhF,EAAOgF,EAAYa,IACvGxf,MAAM,WAEpB4d,MAAM+B,gBAAkBF,EAG1B7G,GADA2G,EAAkBhG,EAAM,IACGkB,cAC3B5B,EAAa0G,EAAgB7E,gBAC7ByE,EAA4E,OAA7DvF,EAAoB,MAAZxF,EAAmBA,EAAS+K,iBAAc,GAAkBvF,EAAQ,GAC9C,OAAxC2B,EAAQqD,EAAKG,cAAcnG,KAC9B2C,EAAM3C,GAAY,IAEsC,OAArD4C,EAASoD,EAAKG,aAAanG,IAAWC,KACzC2C,EAAO3C,GAAc,IAEgD,OAAlE6G,EAASd,EAAKG,aAAanG,GAAUC,IAAasG,KACrDO,EAAOP,GAAe,IAAIzG,EAAYC,KAExCW,EAAcsF,EAAKG,aAAanG,GAAUC,GAAYsG,IAC1CzF,SAASH,EAAOnF,GAC5BwK,EAAKlN,QAAQC,KAAK,UAAW2H,IAE/B7gB,yBAAmCmnB,GACjC,IAAItG,EAAaV,EAAUC,EAAYF,EAASwG,EAAa5F,EAAOP,EAAQuC,EAAOC,EAAQkE,EAAQlG,EAAIC,EAAME,EAAMC,EAAOC,EAgB1H,IAdAlB,GADAW,EAAcZ,EAAYU,YAAYwG,IAChB7E,aACtBnC,EAAWU,EAAYV,SAAUC,EAAaS,EAAYT,WAE1DsG,EAA+H,OAAhHxF,EAA8B,OAAtBC,GADvBZ,EAASM,EAAY0B,aACiB,KAA0C,OAA3BnB,EAAQD,EAAMxF,UAAoByF,EAAMsF,iBAAuB,GAAkBxF,EAAO,GAChG,OAAxC4B,EAAQqD,EAAKG,cAAcnG,KAC9B2C,EAAM3C,GAAY,IAEsC,OAArD4C,EAASoD,EAAKG,aAAanG,IAAWC,KACzC2C,EAAO3C,GAAc,IAEgD,OAAlE6G,EAASd,EAAKG,aAAanG,GAAUC,IAAasG,KACrDO,EAAOP,GAAe,IAAIzG,EAAYC,EAASC,EAAUC,IAE3DS,EAAcsF,EAAKG,aAAanG,GAAUC,GAAYsG,GACjD3F,EAAK,EAAGC,EAAOT,EAAOjiB,OAAa0iB,EAALD,EAAWA,IAE5CF,EAAYI,SADZH,EAAQP,EAAOQ,GACaD,EAAMnF,UAEpCwK,EAAKlN,QAAQC,KAAK,UAAW2H,IAE/BjC,GAAI,CAASoG,EAAWrG,IACfwH,EAAKlN,QAAQ2F,GAAGoG,EAAWrG,KAKxCuH,EAAuBa,IACrB,IAAIK,EAA2B3gB,EAQ/B,OAPA2gB,EAA4BjC,MAAMkC,kBAClClC,MAAMkC,kBAAoB,CAASN,EAAOjG,IACjCA,EAETqE,MAAMmC,kBAAkBP,EAAOb,GAC/Bzf,EAASsgB,EAAMjG,MACfqE,MAAMkC,kBAAoBD,EACnB3gB,GAGTuZ,UAAiBoG,GAAOC,SAlH1B,wBCAA,IAAAkB,EAAAC,EAAAC,EAAAC,IAACA,UAAAA,GAAajoB,UAEX2mB,qCACDA,GAAOuB,sCAAwCvB,GAAOwB,wCAC/CxB,GAAOwB,mFAEdxB,GAAOuB,sCAAyC,IAElDJ,EAAqB,CACnB,kBACA,mBACA,mBACA,4BAGFE,EAA2B,SAACtpB,EAAQ6I,UAClCugB,EAAmBxmB,SAAQ,SAACoV,UAC1BxX,OAAOC,eAAeT,EAAQgY,EAAG,CAC/BnW,YAAS6nB,kCAAc3lB,MAAMF,KAAMJ,mBACnClD,UAAU,EACVF,YAAY,EACZC,cAAc,OAGlBE,OAAOuX,oBAAoBlP,GAAQjG,SAASoV,QAC9C5X,EAAI,GAAgB,gBAAN4X,EAGV,OADA5X,EAAaI,OAAOyX,yBAAyBpP,EAAQmP,GAClDoR,EAAmBzX,QAAQqG,IAAM,EAClCxX,OAAOC,eAAeT,EAAQ,KAAKgY,EAAK5X,GAExCI,OAAOC,eAAeT,EAAQgY,EAAG5X,OAEvCipB,EAAuB,CAACrpB,EAAQ6I,IAC9BrI,OAAOuX,oBAAoBlP,GAAQjG,SAASoV,IAC1C,GAAgB,WAANA,GAAgB,SAAhBA,GAAwB,cAAxBA,GAAqC,WAArCA,GAA+C,cAA/CA,SAGVxX,OAAOC,eAAeT,EAAQgY,EADjBxX,OAAOyX,yBAAyBpP,EAAQmP,OAGzD6J,UAAiB,CAAC8H,EAAU3mB,SAC5B4mB,EAAAC,EAAAC,EAAAjkB,EAAA6jB,EAUE,QAVCtR,MAAO0R,GAAS9mB,IAEf6C,QADCikB,EACOA,EAAM/oB,kCAEciC,KAElBA,GACVumB,EAAU,8FAGTC,sCAAsCG,IACvCC,EAAeJ,sCAAsCG,GAErDL,EAAyBM,EAAa7oB,UAAW8E,SACJikB,GAA7CT,EAAqBO,EAAcE,GAEnCF,IAEAC,EAAmBrpB,OAAOyI,OAAO8gB,YAAYhpB,WAC7CuoB,EAAyBO,EAAkBhkB,GAE3C+jB,EAAeI,SAASC,gBAAgBN,EAAU,CAAA5oB,UAAWP,OAAOyI,OAAO4gB,WAE9BC,GAA7CT,EAAqBO,EAAcE,GAEnCN,sCAAsCG,GAAYC,0BClEtD,WACE,IAAIM,EAAyBC,EAA6BC,EAAOnnB,EA2CjE,IAAKA,KAzCL4e,UAAiBuI,EAAQ,WA6BvB,SAASA,IACsB,mBAAlBvmB,KAAKwmB,UACdxmB,KAAKwmB,WAIT,OAlCAD,EAAME,YAAc,SAAS1kB,GAC3B,IAAI3C,EAAME,EAAO4f,EAEjB,IAAK9f,KADLY,KAAKwF,OAAOzD,EAAY7E,WACX8C,KACXV,EAAQU,KAAKZ,IACkC,IAA3CinB,EAAwBvY,QAAQ1O,KAC7B2C,EAAYpB,eAAevB,KAC9B2C,EAAY3C,GAAQE,IAI1B,OAAiC,OAAzB4f,EAAOlf,KAAK0mB,UAAoBxH,EAAKnf,KAAKgC,QAAe,GAGnEwkB,EAAM/gB,OAAS,SAAS5C,GACtB,IAAIxD,EAAM2f,EAAIC,EAAME,EAAMC,EAE1B,IAAKJ,EAAK,EAAGC,GADbE,EAAOviB,OAAOuX,oBAAoBlU,KAAK9C,YACdZ,OAAa0iB,EAALD,EAAWA,KAES,IAA/CuH,EAA4BxY,QADhC1O,EAAO8f,EAAKH,MAELnc,EAAOjC,eAAevB,KACzBwD,EAAOxD,GAAQY,KAAK9C,UAAUkC,KAIpC,OAA4C,OAApC+f,EAAQnf,KAAK9C,UAAUspB,UAAoBrH,EAAMpf,KAAK6C,QAAU,GASnE2jB,EAnCgB,GAuCzBF,EAA0B,CAAC,aAEdE,EACXF,EAAwBloB,KAAKiB,GAG/BknB,EAA8B,CAAC,cAAe,YAhDhD,wBCAA,IAAAC,EAAAA,EAAQ9oB,GAGRugB,UACA,MAAA2I,UAAwBJ,EAIZvoB,eAAC4oB,EAAMC,EAAS,SAC5BC,SAAIA,EAAU,GACV9mB,KAAC+mB,WAAWH,GAAOI,IAAW,gCAAwBA,EAAOC,QAASJ,iBAAxCC,EAAQ3oB,KAAK6oB,MAC3CF,EAEW9oB,kBAAC4oB,EAAMM,OACtBF,EAAAtgB,aAAIsgB,EAASJ,EAAKO,aAEdD,EAAMF,QACAA,EAASA,EAAOG,yBACHH,EAAjBE,EAAMF,oBAEVhpB,QAAU6oB,EAAS,YAAQF,EAAUG,QAAQ9mB,KAAM6mB,GAEnD7oB,uBAAyB6oB,GACvB,SAAOA,EACL,MAAU1D,MAAM,yEAClBnjB,KAAC8mB,QAAQD,GAEX7oB,oBAAsB6oB,GACpB,SAAOA,EACL,MAAU1D,MAAM,sEAClBnjB,KAAConB,uBAAuBP,GAAU,GAEpC7oB,WAAakpB,UAAUP,EAAUI,WAAW/mB,KAAMknB,kBChCpD,UAAA1pB,EAAA+oB,EAAAA,EAAQ9oB,KACPD,WAAAA,GAAcwmB,YAEfhG,UACA,cAA+BuI,EAC7BvoB,2BAA6B4E,EAAQqW,EAAOoO,EAAUloB,UACpDyD,EAAO0kB,iBAAiBrO,EAAOoO,EAAUloB,GACzC,IAAI3B,GAAW,IAAGoF,EAAO2kB,oBAAoBtO,EAAOoO,QAPxD,yBCAA,eAAArQ,EAAAxZ,EAAAgqB,EAAAjB,EAAAkB,EAAAC,EAAAnB,EAAQ9oB,GACR+pB,EAAmBxD,KAClBxmB,WAAAA,EAAYwZ,oBAAAA,GAAuBiN,YACpCyD,EAAW,CAAC9kB,EAAQ+Z,SAAYxI,EAAAzN,EAAC,IAAAyN,mBAAAwI,EAASxI,mBAE1CsT,EAAc,WAEdzJ,qBACA,MAAA2J,UAA+BpB,EAG7BvoB,YAAc4E,EAAQikB,EAAUe,EAAQzoB,OAC1C0oB,EAAAC,SAAWllB,aAAkBsjB,eACtBtjB,EAAQikB,EAAUe,EAAQzoB,GAAW,CAACa,KAAM4C,EAAQikB,EAAUe,IAEmB,iBAAZf,KAAvEe,EAAQf,EAAU1nB,GAAW,CAAC0nB,EAAUY,EAAaG,2BAEtD5nB,KAAC+nB,UAAa,IAAIC,qCAClBhoB,KAACioB,eAAkB,IAAID,eACWhoB,uBAAlCA,KAAC+nB,UAAUlQ,IAAIjV,EAAQ,UACgB5C,4BAAvCA,KAACioB,eAAepQ,IAAIjV,EAAQ,IAE5BklB,EAAkB9nB,KAAC+nB,UAAU1Q,IAAIzU,GACjCilB,EAAuB7nB,KAACioB,eAAe5Q,IAAIzU,GAE3C8kB,EAASE,GAAQ,CAAC3O,EAAO0D,WAChBmL,OACLA,EAAgB7O,GAAS,GACzB4O,EAAqB5O,GAASjZ,KAACkoB,oBAAoBtlB,EAAQqW,EAAO9Z,IAEpE2oB,EAAgB7O,GAAO4N,GAAYlK,KAErC,IAAInf,GAAW,IAAGwC,KAACmoB,gBAAgBvlB,EAAQikB,EAAUe,KAEvD5pB,gBAAkB4E,EAAQikB,EAAUe,OACtCC,EAAA5O,EAAA6O,EAKI,GALOllB,aAAkBsjB,eACtBtjB,EAAQikB,EAAUe,GAAU,CAAC5nB,KAAM4C,EAAQikB,IAEqB,iBAAZA,KAAtDe,EAAQf,GAAY,CAACA,EAAUY,IAElBK,EAAkB9nB,KAAC+nB,UAAU1Q,IAAIzU,GAA/C,CAEA,IAAAqW,cACS6O,EAAgB7O,GAAO4N,GAEmB,IAA9ClqB,OAAO8E,KAAKqmB,EAAgB7O,IAAQ3c,UACrCurB,EAAuB7nB,KAACioB,eAAe5Q,IAAIzU,IACtBqW,GAAOV,iBACrBsP,EAAqB5O,UACrB6O,EAAgB7O,IAE3B,OAA0C,IAAvCtc,OAAO8E,KAAKqmB,GAAiBxrB,QAC9B0D,KAAC+nB,UAAU5N,OAAOvX,GAClB5C,KAACioB,eAAe9N,OAAOvX,SAFzB,GAIF5E,oBAAsB4E,EAAQqW,EAAO9Z,UAWnCa,KAACooB,2BAA2BxlB,EAAQqW,GAVxBpQ,QAChBif,EAAAjC,EAAA1pB,EAAM,GAAc2rB,oCAA0C7O,kBAEvD9c,OAAAA,GAAU0M,GACX7I,KAACqoB,cAAcxf,GAEf7I,KAACsoB,uBAAuBzf,EAAG1M,EAAQ2rB,GACKjf,EAAE0f,qDAA1CT,EAAe,SAAejf,IACvB,IAE4C1J,GAEvDnB,uBAAyBib,EAAO9c,EAAQ2rB,UACtC9nB,KAACwoB,oBAAoBrsB,GAASyqB,IAC5B,IAAU3N,EAAMsP,4BAChBvoB,KAACyoB,aAAaX,GAAiB,CAACjB,EAASlK,SAC/C+L,EACQ,GADAA,EAAU1oB,KAAC2oB,YAAY/B,EAAMC,IACnB5N,EAAM2P,+BAAqCF,SACrD/L,EAAS1D,SAEfjb,aAAe8pB,EAAiBnL,OAClCtgB,EAAAQ,EAAA4E,EAAA2I,EAKI,KAJoC,KADpC3I,EAAO9E,OAAO8E,KAAKqmB,IACXha,QAAQ2Z,IACdhmB,EAAKoS,OAAOpS,EAAKqM,QAAQ2Z,GAAc,GACzChmB,EAAKmD,MAAK,CAAC1B,EAAEC,IAAMA,EAAE0lB,MAAM,KAAKvsB,OAAS4G,EAAE2lB,MAAM,KAAKvsB,SAEtDD,uBACE,GAAesgB,SAAcmL,EAAgBjrB,WAAtC,SACF,EAETmB,YAAc7B,EAAQ0qB,OACxBG,EAAI,GAAe7qB,EAAO8qB,QAAQJ,UAAvB,MAEPG,EAAS7qB,EAAOgrB,sCAEd,GAAeH,EAAOC,QAAQJ,UAAvB,EACPG,EAASA,EAAOG,kBAElB,EAEFnpB,oBAAsB4oB,EAAMjK,OAC9BqK,EAAAtgB,MAAIsgB,EAASJ,EAAKO,WAEdxK,EAASiK,kCAEPjK,EAASqK,UACTA,EAASA,EAAOG,qBAEpBnpB,cAAgB6K,OAClBigB,EAAAC,SAAID,EAAkBE,MAAK9rB,UAAE+rB,gBACzBpgB,EAAEogB,gBAAkB,kBAClBjpB,KAACuoB,sBAAuB,EACxBO,EAAe5oB,MAAMF,KAAMJ,YAE7BmpB,EAA2BC,MAAK9rB,UAAEgsB,yBAClCrgB,EAAEqgB,yBAA2B,kBAC3BlpB,KAAC4oB,+BAAgC,EACjCG,EAAwB7oB,MAAMF,KAAMJ,oBAxGxC4nB,EAAiBf,YAAYkB,QAT/B,wBCAA,IAAAwB,EAAAC,EAAA7C,EAAA8C,EAAAC,EAAAC,EAAAC,EAAAjD,EAAQ9oB,GAER8rB,EACE,mkBAOgDV,MAAM,OAExDQ,EAAkB,GAClB,sFACmBR,MAAM,OAAO9pB,SAAS0qB,GAAQJ,EAAgBI,IAAO,IAOlEN,EAAN,cAA+B5C,EAC7BvoB,eACE,SAAwDgC,gCAAxDspB,EAAYI,aAAa1pB,KAAMA,KAAC+B,YAAY4nB,WAEhD3L,UACMsL,aAAN,MAAAA,UAA0B/C,EAGVvoB,mBAACioB,gBAAdQ,YACOR,GAENtpB,OAAOC,eAAeqpB,EAAO,UAC3B,CAAAzpB,YAAY,EACZwB,aAAQgC,KAAC9C,UAAU0sB,aACnB5rB,IAAMsB,UAAUU,KAAC9C,UAAU0sB,YAActqB,KAE3C3C,OAAOC,eAAeqpB,EAAK/oB,UAAI,kBAC7B,CAAAV,YAAY,EACZwB,aAAQgC,KAAC6pB,YACT7rB,IAAMsB,UAAUU,KAAC8pB,oBAAsBxqB,KAEzC3C,OAAOC,eAAeqpB,EAAK/oB,UAAI,aAC7B,CAAAV,YAAY,EACZwB,QAGE,SAFgDgC,kBAAhDspB,EAAYI,aAAa1pB,KAAMA,KAAC4pB,mBAEL5pB,gCAAxBA,KAAC8pB,yBAER7D,EAAM8D,cAAgB,IACpB9D,EAAK/oB,UAAE8sB,mBAAoB,EAEhBhsB,oBAACM,EAASqrB,OAC3BM,EAAAC,EAAAjiB,SAAIA,EAAW,IAAIuhB,EAEfG,EAAQ5pB,KAAKkI,IAEZgiB,GAAQhiB,EAASkiB,aAClBD,EAEEA,EADC5rB,EAAQ0rB,kBACF1rB,EAAQ8rB,WAAa9rB,EAAQ+rB,mBAE7B/rB,GACJgsB,UAAYL,EAEjBjqB,KAACuqB,YAAYjsB,EAAS4rB,GAEVlsB,mBAACye,EAAMyN,OACvB5rB,EAAAjC,EAAA+N,EAAAyb,EAAI,IAAAxpB,wDAEEogB,WADiB+N,aAAa,WACflsB,EACfA,EAAQmsB,gBAAgB,kBA5C5BnB,EAACoB,MAAOvB,OAgDJK,aAAN,MAAAA,EACExrB,cAAgBgC,KAAC2qB,eAAiB,IAAIvB,EAKtCprB,QAAUoB,EAAMqd,UAASzc,KAAC2qB,eAAeC,QAAQxrB,EAAMqd,GAEvDze,KAAO4J,UAAW5H,KAAC2qB,eAAeziB,KAAKN,GAEvC5J,IAAM6sB,KAAS5qB,UAAYD,KAAC2qB,eAAelB,IAAIoB,KAAS5qB,GAExDjC,IAAM4J,UAAW5H,KAAC2qB,eAAeG,IAAIljB,GAErC5J,mBAAcgC,KAAC2qB,eAAeR,oBAX9BZ,EAAKxqB,SAAQ,SAAC8rB,UACZrB,EAAQtsB,UAAG2tB,GAAW,YAAC5qB,UAAYD,KAAC2qB,eAAelB,IAAIoB,KAAS5qB,YAY9DmpB,EAAN,MACEprB,cACEgC,KAACmmB,SAAW,GACZnmB,KAAC+qB,oBAAsB,GAEzB/sB,kBACE,CAACgC,KAACmmB,SAAS3e,KAAK,IAAKxH,KAAC+qB,qBAExB/sB,IAAMoB,KAAMa,OACdd,EAII,GAJAA,EAAUa,KAACgrB,eAAe/qB,GAE1BD,KAACirB,QAAQ7rB,EAAMD,EAAQ+rB,aAEpB7B,EAAgB1oB,eAAevB,uCAIhCD,EAAQwqB,UACexqB,EAAQ+I,MAA/BlI,KAACkI,KAAK/I,EAAQ+I,MACdlI,KAACmrB,SAAS/rB,GALV,iCACE,MAAU+jB,MAAM,oBAAoB/jB,iCAM1CpB,QAAUoB,EAAM8rB,OAClBE,EAAAC,EAAAC,SAA2B,IAApBtrB,KAACmmB,SAAS7pB,kBACX4uB,EAAc,IAMhBI,GAJAD,cACE,IAAAD,mBACE,GAAGA,6BAGa9uB,OAChB,IAAM+uB,EAAe7jB,KAAK,KAE1B,GAEJxH,KAACmmB,SAAShoB,KAAK,IAAIiB,IAAOksB,MAE5BttB,SAAWoB,UACTY,KAACmmB,SAAShoB,KAAK,KAAKiB,MAEtBpB,KAAO4J,OACT2jB,SAAIA,EAAgB3jB,EACbE,QAAQ,KAAM,SACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,QAEjB9H,KAACmmB,SAAShoB,KAAKotB,GAEjBvtB,IAAM4J,UACJ5H,KAACmmB,SAAShoB,KAAKyJ,GAEjB5J,QAAUwtB,EAAYZ,OACxBa,SAAIA,EAAY,cAAatiB,UACzBnJ,KAACypB,IAAI,MAAO,CAAAvgB,GAAIuiB,IAChBzrB,KAAC+qB,oBAAoB5sB,MAAMse,IACzBA,EAAK+O,GAAcZ,EACnBA,EAAQc,WAAajP,EACrBA,EAAKzP,KAAK,OAAOye,GAAaE,YAAYf,MAE9C5sB,eAAiBiC,OACnB2rB,EAAAvvB,EAAA+N,EAAAjL,EACI,IADAA,EAAU,GACV9C,kDAES,WACH8C,EAAQwqB,QAAUiC,YACf,aAAU,SACbzsB,EAAQ+I,KAAO0jB,GAAAA,gBAEfzsB,EAAQ+rB,WAAaU,SAC3BzsB,iBCjKJ6e,UACE,CAAAhgB,mBAAkByb,UAChB,IAAI+C,SAAQ,CAACsH,EAASrW,SAC1Boe,EAAAC,EAAAC,EAAAC,SAAMD,EAAW,GACXF,EAAW,GACXC,EAAUrS,EAASnd,OAEnB0vB,EAAS,KAEP,GAAyB,KADzBF,EAEA,OAA2BD,EAASvvB,OAAS,EAAtCmR,EAAOoe,GACd/H,EAAQiI,IAEVtS,EAAS1a,SAAQ,CAACktB,EAAK5vB,SAC7B6vB,EAAAC,EASQ,OATAD,EAAeE,IACbP,EAASxvB,GAAK+vB,EACdJ,YAEFG,EAAUhV,KAAKsC,SAAS4S,gBAAgBJ,GACvCpI,MAAMyI,IACLP,EAAS1vB,GAAKiwB,EAAiBC,WAC/BP,aAGAG,EAAQK,KAAKN,SACPC,QACNA,EAAQM,MAAMP,QADX,SAGX5X,wBAAyB7W,GACzBkpB,UAAW3C,GACX0I,iBAAkB1I,GAClBwD,iBAAkBvD,GAClB0D,iBAAkBgF,GAClBrD,YAAasD,kBChCH5O,UAAiB,IASvBjf,QAAU,CAASF,EAAY8d,KACjC,IAAI,IAAItgB,EAAI,EAAOwC,EAAWvC,OAAfD,EAAuBA,IAAK,CACvC,IAAIoI,EAASkY,EAAS9d,EAAWxC,IACjC,GAAGoI,EACC,OAAOA,iBCbnB,IAAIooB,EAAW7O,UAAiB,GAEhC6O,EAASC,KAAgBC,IAMrB,SAHsC,KAD9BC,EAAQC,UAAUC,UAAUC,eACnBrf,QAAQ,UAAgD,IAA9Bkf,EAAMlf,QAAQ,aAAkD,IAA7Bkf,EAAMlf,QAAQ,WAOxFif,GAmBGA,IAdU,MACb,IACI5e,EAAI,EACJif,EAAMjH,SAASkH,cAAc,OAC7BzJ,EAAMwJ,EAAIE,qBAAqB,KAEnC,GACIF,EAAI9C,UAAY,uBAAsBnc,EAAK,iCAExCyV,EAAI,IAEX,OAAOzV,EAAI,EAAIA,OAVXof,OAfR,IACQP,GA8BZH,EAASW,cAAgB,MACZlS,OAAOmS,oBCnCRzP,UAAiB,IAEvB9e,UAEN,CAAmBC,EAASC,EAAMC,KAC9B,IAAIC,EAAQH,EAAQC,GAEpB,OAAG,MAACE,QAA2DX,IAAjBU,EACnCA,EAGJC,SvHIM,CACbouB,UAdepvB,IACfA,EAAY,KAAI,GACTD,EAASC,IAahBD,SAAUA,EACVL,WAPgBM,UACTA,EAAY,OwHPnBS,GAAUtB,GAA+BsB,QvHLzCA,GAA0BtB,GAA8BsB,QaIjDmrB,GAAsB,iBAARxgB,MAAoBA,KAAKA,OAASA,MAAQA,MACxC,iBAAV0a,QAAsBA,OAAOA,SAAWA,QAAUA,QACzDxb,SAAAA,GAAS,cAATA,IACA,GAGC+kB,GAAalvB,MAAMvB,UAAWgF,GAAWvF,OAAOO,UAChDsG,GAAgC,oBAAXme,OAAyBA,OAAOzkB,UAAY,KAGjEiB,GAAOwvB,GAAWxvB,KACzBoH,GAAQooB,GAAWpoB,MACnB/E,GAAW0B,GAAS1B,SACpBG,GAAiBuB,GAASvB,eAGnBitB,GAA6C,oBAAhBC,YAI7BC,GAAgBrvB,MAAMC,QAC7B2D,GAAa1F,OAAO8E,KACpByD,GAAevI,OAAOyI,OACtB2oB,GAAeH,IAAuBC,YAAYG,OAG3C9sB,GAASH,MAChBD,GAAYF,SAGL0B,IAAc,CAAC9B,SAAU,MAAMytB,qBAAqB,YACpDnsB,GAAqB,CAAC,UAAW,gBAAiB,WAC3D,uBAAwB,iBAAkB,kB2GpC5C,SAAerB,EAAU,aCAVA,EAAU,aCAVA,EAAU,WCAVA,EAAU,aCAVA,EAAU,YCAVA,EAAU,aCAVA,EAAU,UCAVA,EAAU,cCAVA,EAAU,UCAVA,EAAU,cCAVA,EAAU,kBCAVA,EAAU,eCGVqtB,IAAiBrtB,EAAU,SCF1C,IAAIwB,GAAaxB,EAAU,YAKT,kBAAP,KAAyC,iBAAbytB,WAA4C,mBADpEhE,GAAK/D,UAAY+D,GAAK/D,SAASgI,cAE5ClsB,GAAsBzD,GACC,mBAAPA,IAAqB,GAIvC,SAAeyD,GCXf,IAAIS,GAAcjC,EAAU,cAI3B,WACMiC,GAAY9C,aACf8C,GAAuBlE,GACdkC,EAAIlC,EAAK,WAHtB,GAQA,SAAekE,MCZAnB,EAAgB,iBCEhBH,EAAwBwC,ICCvC,IAAIwqB,GAAoB,8EAQxB,SAAeR,GAPOpvB,GAGbuvB,GAAgBA,GAAavvB,KAAS6vB,GAAW7vB,GAC1C8vB,GAAa9vB,IAAQ4vB,GAAkBvmB,KAAKrH,GAAST,KAAKvB,IAGtB2C,GAAS,MCX9CI,EAAgB,aCIhBH,EAAwB8I,IxHIvCnH,EAAEwrB,QNVmB,SMmBrBxrB,EAAE7F,UAAUuG,QAAUV,EAAE7F,UAAUsxB,OANlCzrB,EAAE7F,UAAUoC,MAAQ,WAClB,OAAOU,KAAKgD,UAOdD,EAAE7F,UAAUsD,SAAW,WACrB,OAAcR,KAAKgD,SAAZyrB,IyHnBT,SAAe5pB,EAAeR,MCEfQ,EAAepD,MCFfoD,EAAeR,GAAS,GxGKvCtB,EAAEuD,SAAWA,GyGRb,SAAeqQ,KAAK5L,KAAO,MAClB,IAAI4L,MAAOT,cCDL,CACbwY,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,aCHQ3nB,GAAc4nB,OCAd5nB,GCAA5C,EAAOwqB,QCAPjsB,EAAEsF,iBAAmB,CAClCI,SAAU,kBACVD,YAAa,mBACbD,OAAQ,oBtGAV,IAIIP,GAAU,CACZ8mB,IAAK,IACLG,KAAM,KACNC,KAAM,IACNC,KAAM,IACNC,SAAU,QACVC,SAAU,SEfRlmB,GAAY,EqGMZ2C,GAAUvM,GAAc,SAASC,EAAM8vB,GACzC,IAAIC,EAAczjB,GAAQyjB,YACtBC,EAAQ,WAGV,IAFA,IAAIC,EAAW,EAAGnzB,EAASgzB,EAAUhzB,OACjC2D,EAAOxB,MAAMnC,GACRD,EAAI,EAAOC,EAAJD,EAAYA,IAC1B4D,EAAK5D,GAAKizB,EAAUjzB,KAAOkzB,EAAc3vB,UAAU6vB,KAAcH,EAAUjzB,GAE7E,KAAkBuD,UAAUtD,OAArBmzB,GAA6BxvB,EAAK9B,KAAKyB,UAAU6vB,MACxD,OAAOnmB,GAAa9J,EAAMgwB,EAAOxvB,KAAMA,KAAMC,IAE/C,OAAOuvB,KAGT1jB,GAAQyjB,YAAcxsB,EChBtB,SAAexD,GAAc,SAASC,EAAM0G,EAASjG,GACnD,IAAKgC,GAAWzC,GAAO,MAAM,IAAInC,UAAU,qCAC3C,IAAImyB,EAAQjwB,GAAc,SAASmwB,GACjC,OAAOpmB,GAAa9J,EAAMgwB,EAAOtpB,EAASlG,KAAMC,EAAK+J,OAAO0lB,OAE9D,OAAOF,QCJMjwB,GAAc,CAASf,EAAKiD,KAEzC,IAAI3B,GADJ2B,EAAOkI,GAAQlI,GAAM,GAAO,IACXnF,OACjB,GAAY,EAARwD,EAAW,MAAUqjB,MAAM,yCAC/B,KAAOrjB,KAAS,CACd,IAAIjD,EAAM4E,EAAK3B,GACftB,EAAI3B,GAAO8yB,GAAKnxB,EAAI3B,GAAM2B,GAE5B,OAAOA,QCXMe,GAAc,CAASC,EAAMkL,EAAMzK,IACzCoL,YAAW,IACT7L,EAAKU,MAAM,KAAMD,IACvByK,QCDUoB,GAAQH,GAAO5I,EAAG,MCDlB+I,GAAQM,GAAQ,MCFhBG,GAA2B,MCA3BA,IAA4B,MCK5BM,GAAkB,EAAGI,GAAWR,OCHhCI,IAAmB,EAAG+iB,OCDtBxiB,GAAa,MCDbA,IAAc,MCId7N,GAAc,CAASf,EAAKmH,EAAM1F,KAC/C,IAAI4vB,EAAarwB,EAOjB,OANIyC,GAAW0D,GACbnG,EAAOmG,EACEjH,GAAQiH,KACjBkqB,EAAclqB,EAAKJ,MAAM,GAAI,GAC7BI,EAAOA,EAAKA,EAAKrJ,OAAS,IAErB+K,GAAI7I,GAAc0H,IACvB,IAAI4pB,EAAStwB,EACb,IAAKswB,EAAQ,CAIX,GAHID,GAAeA,EAAYvzB,SAC7B4J,EAAUH,EAAQG,EAAS2pB,IAEd,MAAX3pB,EAAiB,OACrB4pB,EAAS5pB,EAAQP,GAEnB,OAAiB,MAAVmqB,EAAiBA,EAASA,EAAO5vB,MAAMgG,EAASjG,YCnB5C4O,IAAM,CAASpK,EAAQnF,EAAOzC,KACvC6D,EAAI+D,EAAQ5H,GAAM4H,EAAO5H,GAAKsB,KAAKmB,GAAamF,EAAO5H,GAAO,CAACyC,SCFtDuP,IAAM,CAASpK,EAAQnF,EAAOzC,KAC3C4H,EAAO5H,GAAOyC,QCCDuP,IAAM,CAASpK,EAAQnF,EAAOzC,KACvC6D,EAAI+D,EAAQ5H,GAAM4H,EAAO5H,KAAa4H,EAAO5H,GAAO,QCH3CgS,IAAM,CAASpK,EAAQnF,EAAOywB,KAC3CtrB,EAAOsrB,EAAO,EAAI,GAAG5xB,KAAKmB,MACzB,MCEYC,GAAc,CAASf,EAAKiD,KACzC,IAAIgD,EAAS,GAAI6B,EAAW7E,EAAK,GACjC,GAAW,MAAPjD,EAAa,OAAOiG,EACpBxC,GAAWqE,IACT7E,EAAKnF,OAAS,IAAGgK,EAAWL,EAAWK,EAAU7E,EAAK,KAC1DA,EAAO4C,EAAQ7F,KAEf8H,EAAW0I,GACXvN,EAAOkI,GAAQlI,GAAM,GAAO,GAC5BjD,EAAM7B,OAAO6B,IAEf,IAAK,IAAInC,EAAI,EAAGC,EAASmF,EAAKnF,OAAYA,EAAJD,EAAYA,IAAK,CACrD,IAAIQ,EAAM4E,EAAKpF,GACXiD,EAAQd,EAAI3B,GACZyJ,EAAShH,EAAOzC,EAAK2B,KAAMiG,EAAO5H,GAAOyC,GAE/C,OAAOmF,QCfMlF,GAAc,CAASf,EAAKiD,KACzC,IAAwByE,EAApBI,EAAW7E,EAAK,GAUpB,OATIQ,GAAWqE,IACbA,EAAWyF,GAAOzF,GACd7E,EAAKnF,OAAS,IAAG4J,EAAUzE,EAAK,MAEpCA,EAAO4F,GAAIsC,GAAQlI,GAAM,GAAO,GAAQgtB,QACxCnoB,EAAW,CAAShH,EAAOzC,KACjBuF,GAASX,EAAM5E,IAGpBmzB,GAAKxxB,EAAK8H,EAAUJ,SCbd3G,GAAc,CAAST,EAAOe,KAC3CA,EAAO8J,GAAQ9J,GAAM,GAAM,GACpB0N,GAAOzO,GAAgBQ,IACpB8C,GAASvC,EAAMP,WCNZC,GAAc,CAAST,EAAOmxB,IACpCC,GAAWpxB,EAAOmxB,QCCZ1wB,GAAuB4wB,GAC7B9gB,GAAK1F,GAAQwmB,GAAQ,GAAM,SCFrB5wB,EAAcmQ,ICC7BvC,GAAK,CAAC,MAAO,OAAQ,UAAW,QAAS,OAAQ,SAAU,YAAY,SAAS/N,GAC9E,IAAI0wB,EAASnC,GAAWvuB,GACxB2D,EAAE7F,UAAUkC,GAAQ,WAClB,IAAIZ,EAAMwB,KAAKgD,SAOf,OANW,MAAPxE,IACFsxB,EAAO5vB,MAAM1B,EAAKoB,WACJ,UAATR,GAA6B,WAATA,GAAqC,IAAfZ,EAAIlC,eAC1CkC,EAAI,IAGRyR,GAAYjQ,KAAMxB,OAK7B2O,GAAK,CAAC,SAAU,OAAQ,UAAU,SAAS/N,GACzC,IAAI0wB,EAASnC,GAAWvuB,GACxB2D,EAAE7F,UAAUkC,GAAQ,WAClB,IAAIZ,EAAMwB,KAAKgD,SAEf,OADW,MAAPxE,IAAaA,EAAMsxB,EAAO5vB,MAAM1B,EAAKoB,YAClCqQ,GAAYjQ,KAAMxB,OCJ7B,IAAIuE,GAAImN,yChKrBa,u+CgKuBrBnN,GAAEA,EAAIA,+DhKvBe,o/CiKDrB,WACE,IAAIqB,EAASgsB,EAAeC,EAAmBC,EAAsBC,EAAMC,EAAaC,EAAc1tB,EACpG2tB,EAAU,GAAGnrB,MAIf8qB,EAAoB,CAClBM,IAAK,IACLC,KAAM,IACNC,IAAK,IACLC,OAAQ,IACRC,MAAO,IACPC,MAAO,IACPriB,KAAM,IACNC,MAAO,IACPqiB,GAAI,IACJC,KAAM,KAGRZ,EAAuB,CACrBK,IAAK,MACLC,KAAM,OACNC,IAAK,MACLC,OAAQ,MACRC,MAAO,QACPC,MAAO,QACPriB,KAAM,OACNC,MAAO,QACPqiB,GAAI,KACJC,KAAM,QAGRV,EAAc,CACZW,IAAK,IACLpuB,EAAK,IACLquB,IAAK,IACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACL3C,IAAK,IACLF,IAAK,IACLC,IAAK,IACL6C,IAAK,KAGPhB,EAAwBiB,IACtB,IAAUr1B,EAAGs1B,EAAclyB,EAAYsf,EAAIC,EAG3C,GAFAvf,EAAa,EACbkyB,EAAe,GACA,MAAXD,EACF,OAAOC,EAET,IAAKt1B,EAAI0iB,EAAK,EAAGC,EAAO0S,EAAQp1B,OAAa0iB,EAALD,EAAW1iB,IAAM0iB,EAE1C,MADN2S,EAAQr1B,IACY,IAANA,GAA8B,OAAnBq1B,EAAQr1B,EAAI,KAC1Cs1B,EAAaxzB,KAAKuzB,EAAQE,UAAUnyB,EAAYpD,IAChDoD,EAAapD,EAAI,GAIrB,OADAs1B,EAAaxzB,KAAKuzB,EAAQG,OAAOpyB,EAAYiyB,EAAQp1B,SAC9Cq1B,GAGTvB,EAAyB9wB,GAChByD,EAAE5C,SAASb,KAAWyD,EAAErE,QAAQY,GAGzCixB,EAAO,CACLvyB,aAAuB4E,EAAQkvB,EAAYC,GACzC,IAAIC,EAEJ,OADAA,EAAWpvB,EAAOkvB,GACXlvB,EAAOkvB,GAAc,WAC1B,IAAI7xB,EAEJ,GADAA,EAAO,EAAKL,UAAUtD,OAAsC,GAA7Bo0B,EAAQ3wB,KAAKH,UAAW,IACtB,IAA7BmyB,EAAO7xB,MAAMF,KAAMC,GACrB,OAAO+xB,EAAS9xB,MAAMF,KAAMC,KAIlCgyB,SAAmBrqB,GACbA,EACKA,EAAOE,QAAQ,cAAuBoqB,GACpCA,EAAE,GAAGC,gBAGP,GAGXC,WAAqBC,GACdA,EAGsB,WAAvBA,EAAKlF,cACA,SAEAkF,EAAK,GAAGF,cAAgBE,EAAK9sB,MAAM,GALnC,GAQXvH,cAAwB4E,GACtB,IAAI/F,EAAKy1B,EAAWhzB,EAEpB,IAAKzC,KADLy1B,EAAY,GACA1vB,EAEG,OADbtD,EAAQsD,EAAO/F,MAEby1B,EAAUz1B,GAAOyC,GAGrB,OAAOgzB,GAETC,UAAoB3qB,GACbA,GAGLA,EAASA,EAAO,GAAGulB,cAAgBvlB,EAAOrC,MAAM,IAClCuC,QAAQ,gBAAgB,CAASoqB,EAAGM,IAC5CA,EACK,IAAMA,EAAOrF,cAEb,MAPF,GAWXsF,UAAoB7vB,GACdG,EAAErE,QAAQkE,GACLA,EAAOyE,KAAa/H,GAClBixB,EAAKkC,UAAUnzB,KAEfyD,EAAE5C,SAASyC,KAAYG,EAAEd,WAAWW,GACtC2tB,EAAK9pB,UAAU7D,GACb,CAAS/F,EAAKyC,IACZ,CAACzC,EAAK0zB,EAAKkC,UAAUnzB,MAIzBsD,EAGX5E,WAAqB7B,GACnB,IAAIE,EAAGQ,EAAK+F,EAAQ6B,EAAQsa,EAAIC,EAAME,EAGtC,IAFAza,EAAStI,EACTE,EAAI,IACKA,EAAIuD,UAAUtD,QAErB,GADAsG,EAAShD,UAAUvD,GACf+zB,EAAc3rB,IAAW2rB,EAAcxtB,GAEzC,IAAKmc,EAAK,EAAGC,GADbE,EAAOviB,OAAO8E,KAAKmB,IACMtG,OAAa0iB,EAALD,EAAWA,IAE1Cta,EADA5H,EAAMqiB,EAAKH,IACGwR,EAAKmC,WAAWjuB,EAAO5H,GAAM+F,EAAO/F,SAGpD4H,EAAS8rB,EAAKkC,UAAU7vB,GAG5B,OAAO6B,GAETzG,aAAuBc,EAAO3C,GAC5B,IAAY4iB,EAAIC,EAChB,GAAa,MAATlgB,EACF,OAAO,EAET,IAAKigB,EAAK,EAAGC,EAAOlgB,EAAMxC,OAAa0iB,EAALD,EAAWA,IAE3C,GAAIhc,EAAEqB,QADGtF,EAAMigB,GACO5iB,GACpB,OAAO,EAGX,OAAO,GAETw2B,SAAU,CAAS/qB,EAAQgrB,KACX,MAAVA,IACFA,EAAS,MAEPhrB,IACgE,IAA3DA,EAAOkG,QAAQ8kB,EAAQhrB,EAAOtL,OAASs2B,EAAOt2B,SAKzDu2B,gBAA0BjrB,GACpBA,EACKA,EAAOE,QAAQ,KAAM,UAAUA,QAAQ,MAAO,IAAIA,QAAQ,MAAO,KAEjE,GAGXgrB,aAAuBlrB,GACjBA,EACKA,EAAOE,QAAQ,yBAA0B,QAEzC,GAGX9J,kBAA4BglB,EAAW+P,GACrC,IAAI9Z,EAAO+Z,EAAWC,EAAc/T,EAEpC,OAD6B8T,GAA7B9T,EAAO8D,EAAU6F,MAAM,MAAuB,GACjC,OADqC5P,EAAQiG,EAAK,IAEtDqR,EAAK2C,YAAYF,IAE1BC,EAAe1C,EAAK2C,YAAYF,GAChB,MAAZD,IACFA,EAAWxC,EAAK2C,YAAYja,IAElBga,EAAe,KAAOF,IAEpC/0B,YAAsBnB,EAAKs2B,GACzB,IAAIC,EAIJ,OAHgB,MAAZD,IACFA,EAAWE,QAAQF,UAEhBt2B,GAGLu2B,EAA8B,WAAbD,EAAwB9C,EAAoBC,GAC1CzzB,GACVu2B,EAAev2B,GACE,IAAfA,EAAIP,QAAqC,MAApBk0B,EAAY3zB,GACnC,CAACu2B,EAAerC,MAAOP,EAAY3zB,IAClB,IAAfA,EAAIP,QAAgBO,IAAQA,EAAIs1B,eAAiBt1B,EAAIs1B,gBAAkBt1B,EAAIswB,cAC7E,CAACiG,EAAerC,MAAOl0B,EAAIs1B,eACV,IAAft1B,EAAIP,QAAgB,cAAcuL,KAAKhL,GACzCA,EAAIs1B,cAEM,WAAbgB,EACKt2B,EAEA0zB,EAAK6B,WAAWv1B,GAflBA,GAmBXmB,kBAA4Bs1B,EAAWH,GACrC,IAAII,EAAqBzzB,EAAOjD,EAAK4E,EAAM+xB,EAAYC,EAAgB1U,EAAI2U,EAAI1U,EAAM2U,EAIrF,GAHgB,MAAZR,IACFA,EAAWE,QAAQF,WAEhBG,EACH,OAAOA,EAIT,IADAC,EAAsB,GACjBxU,EAAK,EAAGC,GAFbwU,EAAaF,EAAUzK,MAAM,MAEEvsB,OAAa0iB,EAALD,EAAWA,IAAM,CAItD,IAFAtd,EAAO,GAEF3B,EAAQ4zB,EAAK,EAAGC,GADrBF,GAFAH,EAAYE,EAAWzU,IAEI8J,MAAM,MACWvsB,OAAaq3B,EAALD,EAAY5zB,IAAU4zB,EAE5D,MADZ72B,EAAM42B,EAAe3zB,KAC2B,KAA9B2zB,EAAe3zB,EAAQ,KACvCjD,EAAM,KAEJA,GACF4E,EAAKtD,KAAKoyB,EAAKqD,YAAY/2B,EAAKs2B,IAKlC1xB,GAFFA,EAAOsB,EAAEsM,KAAKtM,EAAE4G,QAAQlI,KAEV+F,KADG,WAAb2rB,EACe,GAEA,KAEnBI,EAAoBp1B,KAAKsD,GAE3B,OAAO8xB,EAAoB/rB,KAAK,MAElCqsB,SAAU,CAASC,EAAiBC,IAC3BhxB,EAAE2K,MAAMomB,GAA0Bx1B,GAChCyE,EAAEgR,QAAQggB,EAAmBz1B,KAGxCN,eAAyB0D,GACvB,IAAIsyB,EAAUn3B,EAAKyC,EAEnB,IAAKzC,KADLm3B,EAAW,GACCtyB,EAEa,MAAnBsyB,EADJ10B,EAAQoC,EAAK7E,MAEXm3B,EAAS10B,GAAS,IAEpB00B,EAAS10B,GAAOnB,KAAKtB,GAEvB,OAAOm3B,GAETh2B,UAAoB4E,EAAQmb,GAC1B,IAAIlhB,EAAKy1B,EAAkBvT,EAAIC,EAAME,EAAMC,EAG3C,IAFAmT,EAAY,GAEPvT,EAAK,EAAGC,GADbE,EAAOviB,OAAO8E,KAAKmB,IACMtG,OAAa0iB,EAALD,EAAWA,IAG1CuT,EADoCz1B,GAApCsiB,EAAQpB,EADRlhB,EAAMqiB,EAAKH,GACWnc,EAAO/F,KAAmB,IAAYsiB,EAAM,GAGpE,OAAOmT,GAETt0B,eAAyB4J,EAAQb,GAC/B,IAAIktB,EAAa53B,EAGjB,IAFA43B,EAAc,GACd53B,EAAI,EACO0K,EAAJ1K,GACL43B,GAAersB,EACfvL,IAEF,OAAO43B,GAETC,UAAW,CAASlkB,EAAOmkB,EAAUC,KACtB,MAATpkB,IACFA,EAAQ,GAEI,MAAVokB,IACFA,EAASD,EAAW,KAER,IAAVnkB,EACUA,EAAQ,IAAMmkB,EAEdnkB,EAAQ,IAAMokB,GAG9Bp2B,OAAiBc,EAAOR,GACtB,IAAIwB,EAKJ,OAHa,GADbA,EAAQhB,EAAMgP,QAAQxP,KAEpBQ,EAAM+U,OAAO/T,EAAO,GAEfhB,GAETd,mBAA6B4E,EAAQ8uB,EAASpyB,GAC5C,IAAIzC,EAAK4E,EAET,IADAA,EAAOgvB,EAAaiB,GACbjwB,EAAKnF,OAAS,GAEA,MAAfsG,EADJ/F,EAAM4E,EAAKsvB,WAETnuB,EAAO/F,GAAO,IAEhB+F,EAASA,EAAO/F,GAElB,OAAa,MAATyC,EACKsD,EAAOnB,EAAKsvB,SAAWzxB,SAEhBsD,EAAOnB,EAAKsvB,UAG9B/yB,WAAqB4E,EAAQ8uB,GAC3B,IAAI70B,EAAK4E,EAAMsd,EAAIC,EAEnB,IAAKD,EAAK,EAAGC,GADbvd,EAAOgvB,EAAaiB,IACKp1B,OAAa0iB,EAALD,EAAWA,IAAM,CAEhD,IAAKnc,EAAOjC,eADZ9D,EAAM4E,EAAKsd,IAET,OAAO,EAETnc,EAASA,EAAO/F,GAElB,OAAO,GAETmB,gBAA0Bq2B,EAAenoB,EAAO5P,EAAQg4B,EAAeC,GACrE,IAAIC,EAAYzV,EAAIG,EAAMuV,EAI1B,GAHiB,MAAbF,IACFA,EAAY,KAEaA,EAAvBD,EAAch4B,OAChB,OAAO+3B,EAAcxgB,OAAO3T,MAAMm0B,EAAe,CAACnoB,EAAO5P,GAAQ0N,OAAO0mB,EAAQ3wB,KAAKu0B,KAIrF,IAFAD,EAAcxgB,OAAO3H,EAAO5P,GAC5Bm4B,EAAW,GACND,EAAazV,EAAK,EAAGG,EAAOoV,EAAch4B,OAAQi4B,EAAY,EAAUrV,GAANH,EAAaA,GAAMG,EAAMsV,EAAazV,GAAMwV,EACjHE,EAASt2B,KAAKk2B,EAAcxgB,OAAO3T,MAAMm0B,EAAe,CAACnoB,EAAQsoB,EAAY,GAAGxqB,OAAO0mB,EAAQ3wB,KAAKu0B,EAAc/uB,MAAMivB,EAAYA,EAAaD,OAEnJ,OAAOE,GAGXz2B,IAAcc,GACZ,IAAS41B,EAAK3V,EAAIC,EAElB,IADA0V,EAAM,EACD3V,EAAK,EAAGC,EAAOlgB,EAAMxC,OAAa0iB,EAALD,EAAWA,IAE3C2V,GADM51B,EAAMigB,GAGd,OAAO2V,GAET12B,YAAsB4J,GACpB,IAAInD,EACJ,OAAKmD,GAGLnD,EAASmD,EAAOE,QAAQ,eAAe,CAASP,EAAOirB,KACvC,MAAVA,IACFA,EAAS,IAEJ,IAAMA,KAERjC,EAAK6B,WAAW3tB,EAAOkwB,SARrB,IAUXzB,YAAsBtrB,GAChBA,EACKA,EAAOihB,MAAM,KAAKxhB,IAAIkpB,EAAK6B,YAAY5qB,KAAK,KAE5C,GAGXotB,WAAqBhtB,GACdA,GAGLA,EAASA,EAAO,GAAGulB,cAAgBvlB,EAAOrC,MAAM,IAClCuC,QAAQ,eAAe,CAASP,EAAOirB,KACrC,MAAVA,IACFA,EAAS,IAEJ,IAAOA,EAAOrF,iBAPd,GAUXnvB,gBAA0B4E,EAAQ8uB,GAChC,IAASjwB,EAAMsd,EAAIC,EAEnB,IAAKD,EAAK,EAAGC,GADbvd,EAAOgvB,EAAaiB,IACKp1B,OAAa0iB,EAALD,EAAWA,IAG1C,GAAc,OADdnc,EAASA,EADHnB,EAAKsd,KAGT,OAGJ,OAAOnc,GAETwB,QAAS,CAASlB,EAAGC,EAAGC,EAAQC,IAC1BN,EAAErE,QAAQ0E,IAAWL,EAAErE,QAAQ2E,GAC1Be,EAAQlB,EAAGC,EAAGC,EAAQC,GAEtBe,EAAQlB,EAAGC,GAGtBnF,uBACE,IAAIkF,EAAGC,EAAGsU,EAAYzR,EAAU+Y,EAAIC,EAEpC,IADA9b,EAAItD,UAAU,GAAIuD,EAAIvD,UAAU,GAC3Bmf,EAAK,EAAGC,GADuBvH,EAAa,EAAK7X,UAAUtD,OAAsC,GAA7Bo0B,EAAQ3wB,KAAKH,UAAW,IAClEtD,OAAa0iB,EAALD,EAAWA,IAEhD,IAAKhc,EAAEqB,QAAQlB,EADf8C,EAAWyR,EAAWsH,IACM5b,EAAE6C,IAC5B,OAAO,EAGX,OAAO,IAIX5B,EAAU,CAASlB,EAAGC,EAAGC,EAAQC,SAC3BY,EAAO4wB,EAAsBC,EAAWC,EAAQ7wB,EAAO8wB,EAAYC,EAAmBC,EAAO74B,EAAGQ,EAAKs4B,EAAYpW,EAAIC,EAOzH,GANc,MAAV5b,IACFA,EAAS,IAEG,MAAVC,IACFA,EAAS,IAEPH,IAAMC,EACR,OAAOJ,EAAEqB,QAAQlB,EAAGC,GAEtB,GAAIJ,EAAEd,WAAWiB,IAAMH,EAAEd,WAAWkB,GAClC,OAAOJ,EAAEqB,QAAQlB,EAAGC,GAGtB,IADAgyB,EAAa/xB,EAAO9G,OACb64B,KACL,GAAI/xB,EAAO+xB,KAAgBjyB,EACzB,OAAOG,EAAO8xB,KAAgBhyB,EAMlC,GAHAC,EAAOjF,KAAK+E,GACZG,EAAOlF,KAAKgF,GACZ+xB,GAAQ,EACJnyB,EAAEd,WAAgB,MAALiB,EAAYA,EAAEkB,aAAU,GACvC8wB,EAAQhyB,EAAEkB,QAAQjB,EAAGC,EAAQC,QACxB,GAAIN,EAAEd,WAAgB,MAALkB,EAAYA,EAAEiB,aAAU,GAC9C8wB,EAAQ/xB,EAAEiB,QAAQlB,EAAGG,EAAQD,QACxB,GAAIL,EAAErE,QAAQwE,IAAMH,EAAErE,QAAQyE,IAAMD,EAAE5G,SAAW6G,EAAE7G,QAExD,IADA44B,GAAQ,EACH74B,EAAI0iB,EAAK,EAAGC,EAAO9b,EAAE5G,OAAa0iB,EAALD,EAAW1iB,IAAM0iB,EAEjD,IAAK3a,EADMlB,EAAE7G,GACU8G,EAAE9G,GAAI+G,EAAQC,GAAS,CAC5C6xB,GAAQ,EACR,YAGC,GAAInyB,EAAEqyB,SAASlyB,IAAMH,EAAEqyB,SAASjyB,GACrC+xB,EAAQnyB,EAAEqB,QAAQlB,EAAGC,QAChB,GAAIJ,EAAE/D,UAAUkE,IAAMH,EAAE/D,UAAUmE,GACvC+xB,EAAQhyB,IAAMC,OACT,GAAIJ,EAAE5C,SAAS+C,IAAMH,EAAE5C,SAASgD,GAKrC,GAHAe,EAAQf,EAAEpB,YACV8yB,EAAa9xB,EAAEd,WAFfgC,EAAQf,EAAEnB,cAE0BkC,aAAiBA,EACrD+wB,EAAajyB,EAAEd,WAAWiC,IAAUA,aAAiBA,EACjDD,IAAUC,GAAW2wB,GAAcG,EAEhC,CAGL,IAAKn4B,KAFLi4B,EAAY,EACZI,GAAQ,EACIhyB,EAEV,GADA6xB,EAAS7xB,EAAErG,GACNkG,EAAErC,IAAIwC,EAAGrG,KAGdi4B,KACM/xB,EAAErC,IAAIyC,EAAGtG,KAAQuH,EAAQ2wB,EAAQ5xB,EAAEtG,GAAMuG,EAAQC,IAAU,CAC/D6xB,GAAQ,EACR,MAGJ,GAAIA,EAAO,CAET,IAAKr4B,KADLo4B,EAAY,EACA9xB,EAENJ,EAAErC,IAAIyC,EAAGtG,IACXo4B,IAGJC,EAAQJ,IAAcG,QAvBxBC,GAAQ,OA2BVA,EAAQnyB,EAAEqB,QAAQlB,EAAGC,GAIvB,OAFAC,EAAOe,MACPd,EAAOc,MACA+wB,GAGTlX,WAngBAjb,EAAItF,IAmgBe+H,OAAO,GAAIzC,EAAGwtB,GAvgBnC,MCMe,MAAM8E,GACnBr3B,cAKEgC,KAAKs1B,OAASnP,SAASkH,cAAc,UAErC,MAAMkI,EAAsC,UAArBlC,QAAQF,SAM/BnzB,KAAKkG,QAAUlG,KAAKs1B,OAAOE,WAAW,KAAM,CAAED,eAAAA,IAC9Cv1B,KAAKs1B,OAAOG,6BAA8B,EAC1Cz1B,KAAKkG,QAAQwvB,uBAAwB,EAOrC11B,KAAK21B,gBAAkBxP,SAASkH,cAAc,UAM9CrtB,KAAK41B,iBAAmB51B,KAAK21B,gBAAgBH,WAAW,KAAM,CAAED,eAAAA,IAChEv1B,KAAK21B,gBAAgBF,6BAA8B,EACnDz1B,KAAK41B,iBAAiBF,uBAAwB,EAGhD13B,OAAQgpB,GACFhnB,KAAKs1B,OAAOnO,YAEhBH,EAAO6O,YAAY71B,KAAKs1B,QAG1Bt3B,QAAS83B,EAAQ,EAAGC,EAAS,GAC3B/1B,KAAKs1B,OAAOQ,MAAQA,EACpB91B,KAAKs1B,OAAOS,OAASA,EACrB/1B,KAAKkG,QAAQwvB,uBAAwB,EACrC11B,KAAKg2B,qBAGPh4B,UACE,MAAO,CACL83B,MAAO91B,KAAKs1B,OAAOQ,MACnBC,OAAQ/1B,KAAKs1B,OAAOS,QAIxB/3B,qBACEgC,KAAK21B,gBAAgBG,MAAQ91B,KAAKs1B,OAAOQ,MACzC91B,KAAK21B,gBAAgBI,OAAS/1B,KAAKs1B,OAAOS,OAC1C/1B,KAAK41B,iBAAiBF,uBAAwB,EAGhD13B,kBACMgC,KAAKs1B,OAAOQ,MAAQ,GAAK91B,KAAKs1B,OAAOS,OAAS,GAChD/1B,KAAK41B,iBAAiBK,UAAUj2B,KAAKs1B,OAAQ,EAAG,GAIpDt3B,oBACMgC,KAAK21B,gBAAgBG,MAAQ,GAAK91B,KAAK21B,gBAAgBI,OAAS,GAClE/1B,KAAKkG,QAAQ+vB,UAAUj2B,KAAK21B,gBAAiB,EAAG,GAIpD33B,sBAAuBk4B,EAAMC,EAAOJ,GAC9B/1B,KAAK21B,gBAAgBG,MAAQ,GAAK91B,KAAK21B,gBAAgBI,OAAS,GAClE/1B,KAAKkG,QAAQ+vB,UACXj2B,KAAK21B,gBACL,EAAGO,EAAMl2B,KAAK21B,gBAAgBG,MAAOC,EACrC,EAAGI,EAAOn2B,KAAK21B,gBAAgBG,MAAOC,GAK5C/3B,cACEgC,KAAKkG,QAAQgM,UAAU,EAAG,EAAGlS,KAAKs1B,OAAOQ,MAAO91B,KAAKs1B,OAAOS,S5EvEjD,MAAMK,WAAqB7P,GAIxCvoB,mBAgBEgC,KAAKq2B,YAAc,IAAIhB,GAKvBr1B,KAAKs2B,UAAY,IAAIjB,GAKrBr1B,KAAKu2B,WAAa,IAAIlB,GAEjBr1B,KAAKw2B,iBAMRx2B,KAAKw2B,eAAiB,IAGnBx2B,KAAKy2B,+BAMRz2B,KAAKy2B,6BAA+B,IAGjCz2B,KAAK02B,gCAMR12B,KAAK02B,8BAAgC,IAIvC12B,KAAKuR,mBAAqB4F,KAAKC,OAAOC,IAAI,8BAQ5CrZ,iBAAoB,OAAOgC,KAAKu2B,WAAWjB,OAQ3Ct3B,eAAgBgpB,GACdhnB,KAAKs2B,UAAUzb,OAAOmM,GACtBhnB,KAAKq2B,YAAYxb,OAAOmM,GACxBhnB,KAAKu2B,WAAW1b,OAAOmM,GAUzBhpB,gBAAiB83B,EAAOC,GACtB/1B,KAAKs2B,UAAUK,QAAQb,EAAOC,GAC9B/1B,KAAKq2B,YAAYM,QAAQb,EAAOC,GAChC/1B,KAAKu2B,WAAWI,QAAQb,EAAOC,GAOjC/3B,eACE,MAAM8S,EAAW9Q,KAAKwa,QAAQoc,2BACxB7lB,EAAU/Q,KAAKwa,QAAQqc,0BAEvBC,EAAmB92B,KAAKwa,QAAQuc,sBAChC9lB,EAAajR,KAAKwa,QAAQwc,gBAAkBF,EAC5CtmB,EAAaxQ,KAAKwa,QAAQyc,gBAAkBH,EAC5CvmB,EAAYvQ,KAAKwa,QAAQ0c,eAAiBJ,GACxChB,MAAO5kB,EAAa6kB,OAAQoB,GAAiBn3B,KAAKq2B,YAAYe,UAChEjmB,EAASnR,KAAKwa,QAAQ6c,gBACtB/Z,EAAgBtd,KAAKwa,QAAQ8c,uBAG7BhmB,EAAgBtR,KAAKu3B,sBAAyBtlB,GAAWjS,KAAKsR,cAAcW,EAAQqL,GAAiB,IAAMtd,KAAKw3B,gBAAgBla,GAob1I,EAA4B+Y,EAAavlB,EAAUC,EAASqC,EAAmBC,EAAkBmjB,EAAgBvlB,EAAYT,EAAYD,EAAWW,EAAaC,EAAQC,EAAuBC,EAAiBC,EAAeb,EAA2Bc,KAGzP,MAAM+B,EAAeJ,GAAoBpC,EAAUC,EAASylB,EAAgBpjB,EAAmBC,GAGzFnN,EAAUmwB,EAAYnwB,QAI5B,GAFAmwB,EAAYoB,cAEgB,IAAxBnkB,EAAahX,OACfuU,GAAUC,EAAUC,EAAS,EAAGE,EAAYT,EAAYD,EAAWW,EAAahL,EAASiL,EAAQC,EAAuBC,EAAiBC,EAAeb,EAA2Bc,OAC9K,CACL,IAAK,IAAIpH,EAAI,EAAGC,EAAMkJ,EAAahX,OAAY8N,EAAJD,EAASA,IAAK,CACvD,MAAMutB,EAASpkB,EAAanJ,GAE5BksB,EAAYsB,sBACVD,EAAOnkB,aAAetC,GACrBymB,EAAOxrB,MAAQ4E,GAAYG,GAC3BymB,EAAO/kB,IAAM+kB,EAAOxrB,OAAS+E,GAIlC,IAAI2mB,EAAa9mB,EACjB,IAAK,IAAIzU,EAAI,EAAG+N,EAAMkJ,EAAahX,OAAY8N,EAAJ/N,EAASA,IAAK,CACvD,MAAMsT,EAAQ2D,EAAajX,GAE3BwU,GAAU+mB,EAAYjoB,EAAMzD,MAAO0rB,EAAa9mB,EAAUG,EAAYT,EAAYD,EAAWW,EAAahL,EAASiL,EAAQC,EAAuBC,EAAiBC,EAAeb,EAA2Bc,GAE7MqmB,EAAajoB,EAAMgD,IAEjBilB,EAAc7mB,GAChBF,GAAU+mB,EAAY7mB,EAAS6mB,EAAa9mB,EAAUG,EAAYT,EAAYD,EAAWW,EAAahL,EAASiL,EAAQC,EAAuBC,EAAiBC,EAAeb,EAA2Bc,GAI7M8kB,EAAYL,qBACZK,EAAYwB,mBAvdVC,CAAkB93B,KAAKq2B,YAAavlB,EAAUC,EAAS/Q,KAAKoT,kBAAmBpT,KAAKqT,iBAAkBrT,KAAKw2B,eAAgBvlB,EAAYT,EAAYD,EAAWW,EAAaC,EAAQA,EAAO4mB,qBA+kB9L,CAA6B5mB,IAC3B,MAAM6mB,EAAa7mB,EAAO8mB,gBACpBC,EAAS,GAMf,OALqB,MAAjBF,EAAWG,IAAcD,EAAO/5B,KAAK65B,EAAWG,IAC9B,MAAlBH,EAAWI,KAAeF,EAAO/5B,KAAK65B,EAAWI,KAC7B,MAApBJ,EAAWK,OAAiBH,EAAO/5B,KAAK65B,EAAWK,OACjC,MAAlBL,EAAWM,KAAeJ,EAAO/5B,KAAK65B,EAAWM,KAE/B,IAAlBJ,EAAO57B,OACFoL,OAAOwwB,EAAO3qB,QAAQgrB,GACP,iBAANA,IACblxB,IAAIyrB,iBAActrB,KAAK,KAAM,KAEzB,MA5lByMgxB,CAAmBrnB,GAASG,EAAetR,KAAKyQ,0BAA2BzQ,KAAKuR,oBAOhS,MAAMknB,EAAcz4B,KAAKwa,QAAQke,0BAA0B5nB,EAAUC,GAE/D4nB,EAAa,CACjBzyB,QAASlG,KAAKs2B,UAAUpwB,QACxBgL,YAAAA,EACAimB,aAAAA,EACAlmB,WAAAA,EACAV,UAAAA,EACAC,WAAAA,EACAooB,OAAQC,MAGJC,EAA6B,CAACxmB,EAAYxJ,EAAMyJ,IAuvB1D,SAA+BD,EAAYxJ,EAAMyJ,EAAiB+K,GAChE,MAAMyb,EAAgBzmB,EAAW0mB,gBAAgB1wB,OAE7CywB,IACFjwB,EAAKsH,MAAQmC,EACbwmB,EAAczmB,EAAYxJ,EAAMwU,IA5vB0C2b,CAAqB3mB,EAAYxJ,EAAMyJ,EAAiB+K,GAClI4b,GAA+B,qBAAuBJ,EACtDK,GAA0B,qBAAuBL,EAEjD94B,KAAKo5B,2BAA2BtoB,EAAUC,EAAS4nB,EAAY1nB,EAAYqM,EAAemb,GAE1FE,EAAWzyB,QAAUlG,KAAKu2B,WAAWrwB,QAErClG,KAAKq5B,4BAA4BvoB,EAAUC,EAAS4nB,EAAY1nB,EAAYqM,EAAemb,GAE3Fz4B,KAAKw2B,eAAiB,GACtBx2B,KAAKy2B,6BAA+B,GACpCz2B,KAAK02B,8BAAgC,GAOrC12B,KAAKoT,kBAAoBtC,EAMzB9Q,KAAKqT,iBAAmBtC,EAgB1B/S,2BAA4B8S,EAAUC,EAAS4nB,EAAY1nB,EAAYqM,EAAemb,GACpF,MAAMnlB,EAAeJ,GAAoBpC,EAAUC,EAAS/Q,KAAKy2B,6BAA8Bz2B,KAAKoT,kBAAmBpT,KAAKqT,kBAQ5H,GAFArT,KAAKs2B,UAAUmB,cAEa,IAAxBnkB,EAAahX,OACf0D,KAAKs5B,4BAA4BxoB,EAAUC,EAAS,EAAG4nB,EAAY1nB,EAAYqM,EAAemb,OACzF,CACL,IAAK,IAAItuB,EAAI,EAAGC,EAAMkJ,EAAahX,OAAY8N,EAAJD,EAASA,IAAK,CACvD,MAAMutB,EAASpkB,EAAanJ,GAE5BnK,KAAKs2B,UAAUqB,sBACbD,EAAOnkB,aAAetC,GACrBymB,EAAOxrB,MAAQ4E,GAAYG,GAC3BymB,EAAO/kB,IAAM+kB,EAAOxrB,OAAS+E,GAIlC,IAAI2mB,EAAa9mB,EACjB,IAAK,IAAIzU,EAAI,EAAG+N,EAAMkJ,EAAahX,OAAY8N,EAAJ/N,EAASA,IAAK,CACvD,MAAMsT,EAAQ2D,EAAajX,GAE3B2D,KAAKs5B,4BAA4B1B,EAAYjoB,EAAMzD,MAAO0rB,EAAa9mB,EAAU6nB,EAAY1nB,EAAYqM,EAAemb,GAExHb,EAAajoB,EAAMgD,IAEjBilB,EAAc7mB,GAChB/Q,KAAKs5B,4BAA4B1B,EAAY7mB,EAAS6mB,EAAa9mB,EAAU6nB,EAAY1nB,EAAYqM,EAAemb,GAIxHz4B,KAAKs2B,UAAUN,qBACfh2B,KAAKs2B,UAAUuB,kBAgBjB75B,4BAA6B8S,EAAUC,EAAS4nB,EAAY1nB,EAAYqM,EAAemb,GACrF,MAAMnlB,EAAeJ,GAAoBpC,EAAUC,EAAS/Q,KAAK02B,8BAA+B12B,KAAKoT,kBAAmBpT,KAAKqT,kBAQ7H,GAFArT,KAAKu2B,WAAWkB,cAEY,IAAxBnkB,EAAahX,OACf0D,KAAKu5B,6BAA6BzoB,EAAUC,EAAS,EAAG4nB,EAAY1nB,EAAYqM,EAAemb,OAC1F,CACL,IAAK,IAAItuB,EAAI,EAAGC,EAAMkJ,EAAahX,OAAY8N,EAAJD,EAASA,IAAK,CACvD,MAAMutB,EAASpkB,EAAanJ,GAE5BnK,KAAKu2B,WAAWoB,sBACdD,EAAOnkB,aAAetC,GACrBymB,EAAOxrB,MAAQ4E,GAAYG,GAC3BymB,EAAO/kB,IAAM+kB,EAAOxrB,OAAS+E,GAIlC,IAAI2mB,EAAa9mB,EACjB,IAAK,IAAIzU,EAAI,EAAG+N,EAAMkJ,EAAahX,OAAY8N,EAAJ/N,EAASA,IAAK,CACvD,MAAMsT,EAAQ2D,EAAajX,GAE3B2D,KAAKu5B,6BAA6B3B,EAAYjoB,EAAMzD,MAAO0rB,EAAa9mB,EAAU6nB,EAAY1nB,EAAYqM,EAAemb,GAEzHb,EAAajoB,EAAMgD,IAEjBilB,EAAc7mB,GAChB/Q,KAAKu5B,6BAA6B3B,EAAY7mB,EAAS6mB,EAAa9mB,EAAU6nB,EAAY1nB,EAAYqM,EAAemb,GAIzHz4B,KAAKu2B,WAAWP,qBAChBh2B,KAAKu2B,WAAWsB,kBA0BlB75B,gBAAiBsf,GAEf,OAAOtK,GADOgI,wBAAgBwe,qBAAqB,CAAC,WAAY,QAASlc,GAAe,GAC3Dtd,KAAKy5B,aAapCz7B,cAAeiU,EAAQqL,GAGrB,OAAOtK,GAFOgI,wBAAgBwe,qBAAqBvnB,EAAQ,QAASqL,GAAe,GAEtDtd,KAAKy5B,aAcpCz7B,mBAAoBsU,EAAYgL,GAC9B,MAAM7F,EAAanF,EAAW0mB,gBAC9B,GAAIvhB,EAAWrH,MAAS,OAAOqH,EAAWrH,MAE1C,GAAIqH,EAAWiiB,MAAO,CACpB,MAAMC,EAAcliB,EAAWiiB,MAAM7Q,MAAM+Q,IAC3C,OAAO5e,wBAAgBwe,qBAAqBG,EAAa,mBAAoBrc,GAAe,GAE5F,OAAOtd,KAAKw3B,gBAAgBla,GA0FhCtf,4BAA6B8S,EAAUC,EAASC,EAAW2nB,EAAY1nB,EAAYqM,EAAemb,GAChG,GAAe1nB,GAAXD,EAAJ,CAEA,IAAK,IAAIiC,EAAYjC,EAAuBC,GAAbgC,EAAsBA,IACnD4lB,EAAW/lB,IAAM5B,GAAa+B,EAAYjC,GAC1C6nB,EAAW7lB,KAAO6lB,EAAW/lB,IAAM3B,EACnC0nB,EAAW5lB,UAAYA,EAEvB/S,KAAK65B,gBAAgB9mB,EAAW0lB,EAAaE,EAAYO,GAAgC5b,GAG3Fqb,EAAWzyB,QAAQkM,QAoBrBpU,6BAA8B8S,EAAUC,EAASC,EAAW2nB,EAAY1nB,EAAYqM,EAAemb,GACjG,GAAe1nB,GAAXD,EAAJ,CAEA,IAAK,IAAIiC,EAAYjC,EAAuBC,GAAbgC,EAAsBA,IACnD4lB,EAAW/lB,IAAM5B,GAAa+B,EAAYjC,GAC1C6nB,EAAW7lB,KAAO6lB,EAAW/lB,IAAM3B,EACnC0nB,EAAW5lB,UAAYA,EAEvB/S,KAAK65B,gBAAgB9mB,EAAW0lB,EAAaE,EAAYQ,GAA2B7b,GAGtFqb,EAAWzyB,QAAQkM,QAkBrBpU,gBAAiB+U,EAAW0lB,EAAaE,EAAYmB,EAAOxc,GAC1D,IAAIyc,EAAsB,GAE1BpB,EAAWzyB,QAAQgM,UACjB,EAAGymB,EAAW7lB,KACd6lB,EAAWznB,YAAaynB,EAAW1nB,YAGrC,IAAK,MAAM5U,KAAKy9B,EACdC,EAAsBA,EAAoB/vB,OACtB,MAAlByuB,EAAYp8B,IAAao8B,EAAYp8B,GAAG0W,IAAmB,IAQ/D,GAJAgnB,EAAoBn1B,MAAK,CAAC1B,EAAGC,KAC1Bw1B,EAAWC,OAAO11B,EAAEuU,WAAWZ,SAAW,IAAM8hB,EAAWC,OAAOz1B,EAAEsU,WAAWZ,SAAW,KAGlE,MAAvBkjB,EAA8BA,EAAoBz9B,YAASqC,EAC7D,IAAK,IAAItC,EAAI,EAAG+N,EAAM2vB,EAAoBz9B,OAAY8N,EAAJ/N,EAASA,IAAK,CAC9D,MAAMiW,EAAaynB,EAAoB19B,IAGrC29B,EAFuBF,EAAMxnB,EAAWmF,WAAWrX,OAGjDkS,EACAqmB,EACsB34B,KAAKi6B,mBAAmB3nB,EAAYgL,MAoFtE,MAAMnL,GAAuB,QACvBynB,GAA4B,MA0I5BV,GAAiC,CACrCl7B,KAuB2BsU,EAAYxJ,EAAMyJ,GAC7CzJ,EAAK5C,QAAQwK,UAAY6B,EACzBzJ,EAAK5C,QAAQyK,SAAS,EAAG7H,EAAKgK,KAAMhK,EAAKoI,YAAapI,EAAKmI,aAxB3DipB,kBAAmB7nB,IAQf8mB,GAA4B,CAChCn7B,OA0B6BsU,EAAYxJ,EAAMyJ,GAC/CzJ,EAAK5C,QAAQwK,UAAY6B,EACzBzJ,EAAK5C,QAAQyK,SAAS,EAAG7H,EAAKgK,KAAM,EAAGhK,EAAKmI,aA3B5CkpB,iBAAkB9nB,GAClBrU,oBAsEuCsU,EAAYxJ,EAAMyJ,GACzD,IAAI6nB,EAAaC,EAASvE,EAAOwE,EAAcC,EAAMC,EACrD,MAAMvpB,WAAEA,EAAUV,UAAEA,EAASW,YAAEA,EAAW6B,UAAEA,GAAcjK,EACpD6G,EAAQ2C,EAAWE,YAAYC,iBAC/BC,EAAU/C,EAAMgD,IAAIC,IAAMjD,EAAMzD,MAAM0G,IACtC6nB,EAAS3xB,EAAKgK,KACd4nB,EAAOD,EAASxpB,EAEtBnI,EAAK5C,QAAQwK,UAAY6B,EAET,IAAZG,GACF2nB,EAAU1qB,EAAMgD,IAAIE,OAASlD,EAAMzD,MAAM2G,OACzCijB,EAAQuE,EAAU9pB,EAClBiqB,EAAS7qB,EAAMzD,MAAM2G,OAAStC,EAC9BgqB,EAAOC,EAAS1E,EAEhBhtB,EAAK5C,QAAQyK,SAAS6pB,EAAQC,EAAQ3E,EAAO,GAC7ChtB,EAAK5C,QAAQyK,SAAS6pB,EAAQE,EAAO,EAAG5E,EAAO,GAC/ChtB,EAAK5C,QAAQyK,SAAS6pB,EAAQC,EAAQ,EAAGxpB,GACzCnI,EAAK5C,QAAQyK,SAAS4pB,EAAME,EAAQ,EAAGxpB,IAClB,IAAZyB,GACT8nB,EAAS7qB,EAAMzD,MAAM2G,OAAS/J,EAAKyH,UACnCgqB,EAAO5qB,EAAMgD,IAAIE,OAAS/J,EAAKyH,UAE3BwC,IAAcpD,EAAMzD,MAAM0G,KAC5BkjB,EAAQhtB,EAAKoI,YAAcspB,EAC3BF,EAAe56B,KAAKC,IAAI66B,EAAQD,GAChCH,EAActxB,EAAKoI,YAAcopB,EAEjCxxB,EAAK5C,QAAQyK,SAAS6pB,EAAQC,EAAQ3E,EAAO,GAC7ChtB,EAAK5C,QAAQyK,SAAS2pB,EAAcI,EAAO,EAAGN,EAAa,GAC3DtxB,EAAK5C,QAAQyK,SAAS6pB,EAAQC,EAAQ,EAAGxpB,GACzCnI,EAAK5C,QAAQyK,SAASO,EAAc,EAAGupB,EAAQ,EAAGxpB,KAElD6kB,EAAQ5kB,EAAcspB,EACtBJ,EAAclpB,EAAcqpB,EAE5BzxB,EAAK5C,QAAQyK,SAAS,EAAG8pB,EAAQD,EAAQ,GACzC1xB,EAAK5C,QAAQyK,SAAS,EAAG+pB,EAAO,EAAGH,EAAM,GACzCzxB,EAAK5C,QAAQyK,SAAS,EAAG8pB,EAAQ,EAAGxpB,GACpCnI,EAAK5C,QAAQyK,SAAS4pB,EAAME,EAAQ,EAAGxpB,MAGzCupB,EAAS7qB,EAAMzD,MAAM2G,OAAStC,EAC9BgqB,EAAO5qB,EAAMgD,IAAIE,OAAStC,EACtBwC,IAAcpD,EAAMzD,MAAM0G,KAC5BkjB,EAAQ5kB,EAAcspB,EAEtB1xB,EAAK5C,QAAQyK,SAAS6pB,EAAQC,EAAQ3E,EAAO,GAC7ChtB,EAAK5C,QAAQyK,SAAS6pB,EAAQC,EAAQ,EAAGxpB,GACzCnI,EAAK5C,QAAQyK,SAASO,EAAc,EAAGupB,EAAQ,EAAGxpB,IACzC8B,IAAcpD,EAAMgD,IAAIC,KACjCkjB,EAAQ5kB,EAAcspB,EAEtB1xB,EAAK5C,QAAQyK,SAAS,EAAG+pB,EAAO,EAAGH,EAAM,GACzCzxB,EAAK5C,QAAQyK,SAAS,EAAG8pB,EAAQ,EAAGxpB,GACpCnI,EAAK5C,QAAQyK,SAAS4pB,EAAME,EAAQ,EAAGxpB,KAEvCnI,EAAK5C,QAAQyK,SAAS,EAAG8pB,EAAQ,EAAGxpB,GACpCnI,EAAK5C,QAAQyK,SAASO,EAAc,EAAGupB,EAAQ,EAAGxpB,GAC9C8B,IAAcpD,EAAMzD,MAAM0G,IAAM,GAClC9J,EAAK5C,QAAQyK,SAAS,EAAG8pB,EAAQD,EAAQ,GAEvCznB,IAAcpD,EAAMgD,IAAIC,IAAM,GAChC9J,EAAK5C,QAAQyK,SAAS4pB,EAAMG,EAAO,EAAGxpB,EAAcqpB,EAAM,O6EnoB5DI,GA7ON,MACE38B,mBAEE,OADA+V,GAAQ/T,KAAM2nB,oBAAkB2B,eAAYoB,OACrCpsB,GAAQ0B,KAAM,0BAGvBhC,iBACEgC,KAAKotB,IAAI,CAAE7Y,MAAO,oDAAqD,KACrEvU,KAAK4J,MAAM,CAAExJ,KAAM,OAAQmU,MAAO,eAAgBqmB,OAAQ,gBAC1D56B,KAAK66B,GAAG,CAAEtmB,MAAO,yBAA0BqmB,OAAQ,SAAU,KAC3D56B,KAAK86B,GAAG,CAAEvmB,MAAO,YAAaqmB,OAAQ,cACtC56B,KAAK86B,GAAG,CAAEvmB,MAAO,kBAAmBqmB,OAAQ,kBAAoB,mBAChE56B,KAAK86B,GAAG,CAAEvmB,MAAO,gBAAiBqmB,OAAQ,gBAAkB,iBAC5D56B,KAAK86B,GAAG,CAAEvmB,MAAO,8BAA+BqmB,OAAQ,4BAA8B,kCAExF56B,KAAKotB,IAAI,CAAE7Y,MAAO,cAAe,KAC/BvU,KAAKiV,OAAO,CAAEV,MAAO,kBAAmBqmB,OAAQ,gBAAkB,WAClE56B,KAAKiV,OAAO,CAAEV,MAAO,kBAAmBqmB,OAAQ,iBAAmB,kBAKzE58B,kBACEgC,KAAK0pB,eAGP1rB,SAAUwc,GACRxa,KAAK+6B,aAAe,KACpB/6B,KAAKwa,QAAUA,EACfxa,KAAKiX,QAAU,IAAIsL,WACnBviB,KAAKoa,cAAgB,IAAIpD,uBACzBhX,KAAK8W,QAAU,GACf9W,KAAKg7B,aAAe,IAAIhT,QAExB,MAAMiT,EAAOj7B,KAAKoa,cAElB6gB,EAAKnjB,IAAIojB,IAAoB,EAAG97B,KAAAA,EAAMyX,OAAAA,KAC7B7W,KAAKm7B,WAAW/7B,EAAMyX,MAE/BokB,EAAKnjB,IAAIsjB,IAAuB,EAAGh8B,KAAAA,EAAMyX,OAAAA,KAChC7W,KAAKq7B,cAAcj8B,EAAMyX,MAElCokB,EAAKnjB,IAAIwjB,IAAyB,EAAGl8B,KAAAA,EAAMyX,OAAAA,KAClC7W,KAAKu7B,aAAan8B,EAAMyX,MAEjCokB,EAAKnjB,IAAI0jB,IAA2B,EAAGp8B,KAAAA,EAAMyX,OAAAA,KACpC7W,KAAKy7B,eAAer8B,EAAMyX,MAGnCokB,EAAKnjB,IAAIX,KAAKgB,SAASL,IAAI,yBAA0B,CACnD4jB,eAAgB,KACd17B,KAAK27B,sBAEPC,iBAAkB,KAChB57B,KAAK67B,kBAEP79B,mBACEmZ,KAAKC,OAAOS,IAAI,gCAAgC,IAElD7Z,oBACEmZ,KAAKC,OAAOS,IAAI,gCAAgC,IAElDikB,cAAe,KACb97B,KAAKka,WAEP6hB,eAAgB,KACd/7B,KAAKg8B,yBAITh8B,KAAKi8B,eAAeC,UAAUriB,OAAO,SAAU7Z,KAAKwa,QAAQ+c,uBAE5D0D,EAAKnjB,IAAI9X,KAAKm8B,YAAYn8B,KAAKi8B,eAAgB,CAC7CG,UAAYvzB,IACVA,EAAEwzB,iBACFllB,KAAKC,OAAOS,IAAI,iCAAkC7X,KAAKwa,QAAQ+c,2BAInEv3B,KAAKg7B,aAAanjB,IAAI7X,KAAKi8B,gBAAgB,KACzC9kB,KAAKC,OAAOS,IAAI,iCAAkC7X,KAAKwa,QAAQ+c,0BAGjE0D,EAAKnjB,IAAI9X,KAAKm8B,YAAYn8B,KAAKs8B,aAAc,CAC3Ct+B,UAAY6K,GACVA,EAAEwzB,iBACFllB,KAAKC,OAAOS,IAAI,wBAAyBV,KAAKC,OAAOC,IAAI,6BAI7DrX,KAAKg7B,aAAanjB,IAAI7X,KAAKs8B,cAAc,KACvCnlB,KAAKC,OAAOS,IAAI,wBAAyBV,KAAKC,OAAOC,IAAI,4BAG3D4jB,EAAKnjB,IAAI9X,KAAKm8B,YAAYn8B,KAAKu8B,yBAA0B,CACvDv+B,UAAY6K,GACVA,EAAEwzB,iBACFllB,KAAKC,OAAOS,IAAI,oCAAqCV,KAAKC,OAAOC,IAAI,yCAIzErX,KAAKg7B,aAAanjB,IAAI7X,KAAKu8B,0BAA0B,KACnDplB,KAAKC,OAAOS,IAAI,oCAAqCV,KAAKC,OAAOC,IAAI,wCAGvE4jB,EAAKnjB,IAAI9X,KAAKm8B,YAAYn8B,KAAKw8B,YAAa,CAC1CC,SAAW5zB,IAAQ7I,KAAKka,YACvB,CAAEwiB,SAAS,KAEdzB,EAAKnjB,IAAI9X,KAAKm8B,YAAYn8B,KAAK28B,aAAc,CAC3C3+B,UAAY6K,GACVA,EAAEwzB,iBACFllB,KAAKC,OAAOS,IAAI,gCAAgC,OAIpDojB,EAAKnjB,IAAI9X,KAAKm8B,YAAYn8B,KAAK48B,cAAe,CAC5C5+B,UAAY6K,GACVA,EAAEwzB,iBACFllB,KAAKC,OAAOS,IAAI,gCAAgC,OAIpDojB,EAAKnjB,IAAIX,KAAKC,OAAOW,QAAQ,iCAAkC8kB,IAC7D78B,KAAKi8B,eAAeC,UAAUriB,OAAO,SAAUgjB,OAGjD5B,EAAKnjB,IAAIX,KAAKC,OAAOW,QAAQ,wBAAyB8kB,IACpD78B,KAAKs8B,aAAaJ,UAAUriB,OAAO,SAAUgjB,OAG/C5B,EAAKnjB,IAAIX,KAAKC,OAAOW,QAAQ,oCAAqC8kB,IAChE78B,KAAKu8B,yBAAyBL,UAAUriB,OAAO,SAAUgjB,OAG3D5B,EAAKnjB,IAAIX,KAAKC,OAAOW,QAAQ,gCAAiC8kB,IAC5D78B,KAAK28B,aAAaT,UAAUriB,OAAO,WAAYgjB,GAC/C78B,KAAK48B,cAAcV,UAAUriB,OAAO,YAAagjB,OAGnD78B,KAAK88B,WAGP9+B,aAAc2e,GACZ,OAAO3c,KAAKiX,QAAQ2F,GAAG,cAAeD,GAGxC3e,SAC2BmZ,KAAKwD,MAAMC,QAAQzD,KAAKkD,WAChCwb,YAAY71B,MAC7BA,KAAKw8B,YAAYO,QAGnB/+B,UACEgC,KAAKiX,QAAQC,KAAK,eAClBlX,KAAKoa,cAAc7B,UACnBvY,KAAKmnB,WAAW6V,YAAYh9B,MAG9BhC,WACEgC,KAAKi9B,iBAAmB,IAAIjV,QAC5B,IAAK,MAAM5oB,KAAQ89B,GACjBl9B,KAAKm7B,WAAW/7B,EAAM89B,GAAa99B,IAIvCpB,qBACE,MAAME,EAAK8B,KAAKg7B,aAAa3jB,IAAIrX,KAAK+6B,cACpB,mBAAP78B,GAAqBA,IAGlCF,iBACEgC,KAAK+6B,aAAamB,UAAU7Z,OAAO,YACG,MAAjCriB,KAAK+6B,aAAaoC,aACrBn9B,KAAK+6B,aAAe/6B,KAAK+6B,aAAaoC,YAClCn9B,KAAK+6B,aAAa9T,QAAQ,gBAC5BjnB,KAAK+6B,aAAe/6B,KAAK+6B,aAAaoC,cAGxCn9B,KAAK+6B,aAAe/6B,KAAKwN,KAAK4vB,WAEhCp9B,KAAK+6B,aAAamB,UAAUpkB,IAAI,YAGlC9Z,qBACEgC,KAAK+6B,aAAamB,UAAU7Z,OAAO,YACO,MAArCriB,KAAK+6B,aAAasC,iBACrBr9B,KAAK+6B,aAAe/6B,KAAK+6B,aAAasC,gBAClCr9B,KAAK+6B,aAAa9T,QAAQ,gBAC5BjnB,KAAK+6B,aAAe/6B,KAAK+6B,aAAasC,kBAGxCr9B,KAAK+6B,aAAe/6B,KAAKwN,KAAK8vB,UAEhCt9B,KAAK+6B,aAAamB,UAAUpkB,IAAI,YAGlC9Z,WAAYoB,EAAMyX,GAChB,MAAM9J,EAAOoZ,SAASkH,cAAc,MAC9BkQ,EAAS,KAAQC,GAA4Bp+B,IAE/CyX,EAAOiC,YAAc/L,EAAKmvB,UAAUpkB,IAAI,UAE5C/K,EAAK4H,YAAcvV,EAEnBY,KAAKg7B,aAAanjB,IAAI9K,EAAMwwB,GAC5Bv9B,KAAKi9B,iBAAiBplB,IAAI9K,EAAM/M,KAAKooB,2BAA2Brb,EAAM,aAAclE,IAClFA,EAAEwzB,iBACFkB,QAGFv9B,KAAK8W,QAAQ1X,GAAQ2N,EACrB/M,KAAKwN,KAAKiwB,aAAa1wB,EAAM/M,KAAK09B,WAEP,MAArB19B,KAAK+6B,eACT/6B,KAAK+6B,aAAehuB,EACpB/M,KAAK+6B,aAAamB,UAAUpkB,IAAI,aAIpC9Z,cAAeoB,EAAMyX,GACnB,IACE7W,KAAKwN,KAAKwvB,YAAYh9B,KAAK8W,QAAQ1X,IACnC,MAAO2lB,WAEF/kB,KAAK8W,QAAQ1X,GAGtBpB,aAAcoB,EAAMyX,GAClB7W,KAAK8W,QAAQ1X,GAAM88B,UAAUpkB,IAAI,UAGnC9Z,eAAgBoB,EAAMyX,GACpB7W,KAAK8W,QAAQ1X,GAAM88B,UAAU7Z,OAAO,YAIwBsb,Y1E7O1DC,GtGkDW,SAASz+B,GAItB,IAAI0+B,EiL/DAC,EjLiEJ,IALA3+B,EAAUA,GAAW,IAKT0+B,UAGRA,EAAY,CACRxmB,IAAe/Y,GAAkBa,EAAQ0+B,UAAUxmB,IAAI/Y,GAAS,GAChEuZ,IAAK1Y,EAAQ0+B,UAAUhmB,SAExB,CACH,IACIkmB,EkL3EK,CAAS5+B,IACtB,IAAI6+B,EAAkB7+B,EAAQ6+B,YAC1B3/B,EAAkBc,EAAQ8+B,aAAa5/B,SAsC3C,MAAO,CACHL,IA/BWM,GACX,IAAI4/B,EAAQ7/B,EAASC,GAErB,OAAI4/B,QAAsBv/B,IAAbu/B,EAAMh1B,GACRg1B,EAAMh1B,GAGV,MAyBPlL,IAhBWM,GACX,IAAI4/B,EAAQ7/B,EAASC,GAErB,IAAK4/B,EACD,MAAU/a,MAAM,gEAGpB,IAAIja,EAAK80B,EAAYG,WAIrB,OAFAD,EAAMh1B,GAAKA,EAEJA,KlLsCgBk1B,CAAe,CAClCJ,aiL3EJF,EAAU,EAWP,CACHK,SALJ,IACWL,MjLoEHG,aAAcA,KAElBJ,EAAYE,EAIhB,IAAIM,EAAWl/B,EAAQk/B,SAEnBA,IAGAA,EmLjFS,CAASC,IACtB,SAAS13B,KAIT,IAAIy3B,EAAW,CACXE,IAAK33B,EACLie,KAAMje,EACNme,MAAOne,GAGX,IAAI03B,GAAShjB,OAAOsJ,QAAS,CACzB,IAAI4Z,EAAiB,CAASH,EAAUj/B,KAGpCi/B,EAASj/B,GAAQ,WACb,IAAIq/B,EAAI7Z,QAAQxlB,GAChB,GAAIq/B,EAAEv+B,MACFu+B,EAAEv+B,MAAM0kB,QAAShlB,gBAEjB,IAAK,IAAIvD,EAAI,EAAOuD,UAAUtD,OAAdD,EAAsBA,IAClCoiC,EAAE7+B,UAAUvD,MAM5BmiC,EAAeH,EAAU,OACzBG,EAAeH,EAAU,QACzBG,EAAeH,EAAU,SAG7B,OAAOA,GnLiDQK,EADc,IAAbL,IAKhB,IAAIM,EAAiBz/B,EAAUC,EAAS,iBF1F3B,CAA6BA,IAyB1C,SAASy/B,IAIL,IADAC,GAAe,EACRjhC,EAAMC,QAAQ,CACjB,IAAIihC,EAAkBlhC,EACtBA,EAAQD,IACRmhC,EAAgBzL,UAEpBwL,GAAe,EAwBnB,SAASE,IACLC,EAkBgC3zB,WAlBCuzB,EAkBc,GA3EnD,IAAIP,GADJl/B,EAAsBA,GAAW,IACHk/B,SAC1BY,EAAkBC,GAAMhgC,UAAUC,EAAS,SAAS,GACpDggC,EAAkBD,GAAMhgC,UAAUC,EAAS,QAAQ,GAEpDggC,IAAgBF,IACfZ,GAAYA,EAASxZ,KAAK,0FAC1Boa,GAAe,GAGnB,IACID,EADAphC,EAAQD,IAERkhC,GAAe,EAoEnB,MAAO,CACH7gC,IAnEiBC,EAAOC,IACpB2gC,GAAgBM,GAAeF,GAAiC,IAAjBrhC,EAAMC,QAGrDkhC,IAGJnhC,EAAMka,IAAI7Z,EAAOC,IA6DjBF,MA9CuBohC,GACnBP,SAIqBlgC,IAAtBygC,IACCA,EAAoBH,GAGrBD,IAyBU7zB,aAxBG6zB,GACZA,EAAoB,MAGrBI,EACCL,IAEAH,QEoCkDS,CAAoB,CAAEhB,SAAUA,KAGtFiB,EAAgB,GACpBA,EAAcC,YAAkBrgC,EAAUC,EAAS,aAAa,GAChEmgC,EAAcE,QAAkBtgC,EAAUC,EAAS,SAAS,GAE5D,IAMIsgC,EANAC,EoLnGS,CAAS7B,IAStB,SAAS8B,EAAarhC,GAClB,IAAI4K,EAAK20B,EAAUxmB,IAAI/Y,GAEvB,YAAWK,IAAPuK,EACO,GAGJ02B,EAAe12B,IAAO,GAfjC,IAAI02B,EAAiB,GAkDrB,MAAO,CACHvoB,IAAKsoB,EACL3hC,IA5BiBM,EAAS+oB,GAC1B,IAAIne,EAAK20B,EAAUxmB,IAAI/Y,GAEnBshC,EAAe12B,KACf02B,EAAe12B,GAAM,IAGzB02B,EAAe12B,GAAI/K,KAAKkpB,IAsBxBrpB,eAnBoBM,EAAS+oB,GAE7B,IADA,IAAIwY,EAAYF,EAAarhC,GACpBjC,EAAI,EAAG+N,EAAMy1B,EAAUvjC,OAAY8N,EAAJ/N,IAAWA,EAC/C,GAAIwjC,EAAUxjC,KAAOgrB,EAAU,CAC7BwY,EAAUhsB,OAAOxX,EAAG,GACpB,QAeN2B,mBAVwBM,GAC1B,IAAIuhC,EAAYF,EAAarhC,GACxBuhC,IACLA,EAAUvjC,OAAS,MpLmDSwjC,CAAqBjC,GAC/CkC,EqLpGS,CAAS5gC,IACtB,IAAId,ErLmG4C,CAC5C4/B,aAAcA,IqLpGKA,aAAa5/B,SA0CpC,MAAO,CACHL,aAnCkBM,GAClB,IAAI4/B,EAAQ7/B,EAASC,GACrB,OAAO4/B,KAAWA,EAAM8B,cAkCxBhiC,iBA1BsBM,GACtBD,EAASC,GAAS0hC,cAAe,GA0BjChiC,OAjBYM,GACZ,QAASD,EAASC,GAAS2hC,MAiB3BjiC,SARcM,EAAS2hC,GACvB5hC,EAASC,GAAS2hC,OAASA,KrL4DDC,GAM1BC,EAAkBjhC,EAAUC,EAAS,WAAY,UACjDihC,EAAoBlhC,EAAUC,EAAS,aAAa,GACpDkhC,EAAkB,CAClBhC,SAAUA,EACVM,eAAgBA,EAChBV,aAAcA,GACdJ,UAAWA,EACXyC,UAAWF,GAaf,GAVuB,WAApBD,IACKI,GAAgB/S,iBAChB6Q,EAASxZ,KAAK,kFACdsb,EAAkB,UACXI,GAAgBzT,KAAK,KAC5BuR,EAASxZ,KAAK,yEACdsb,EAAkB,WAIH,WAApBA,EACCV,EuHxHS,CAAStgC,IAsBtB,SAASqhC,EAAaC,GAuCtB,EAA2BA,EAAgBC,EAASC,KAahD,IAAKF,EAAeG,eAAeF,GAAU,CACzC,IAAIG,EAA0BF,EAAiB,aAC3CG,EAAgCH,EAAiB,oBACjDjrB,EAAQ,0DACZA,GAAS,IAAMirB,EAAiB,+BAAiCI,EAAmB,CAAC,kBAAoB,SACzGrrB,GAAS,IAAMorB,EAAgC,MAAQC,EAAmB,CAAC,mCAAoC,2BAA4B,2BAA6BF,EAAyB,mBAAqBA,IAA4B,OAClPnrB,GAAS,sBAAwBmrB,EAA2B,qEAlBhE,SAAqBnrB,EAAOoa,GACxBA,EAASA,GAAU,CAAUxxB,IACzBmiC,EAAeO,KAAKnL,YAAYv3B,KAGpC,IAAI2iC,EAAeR,EAAepT,cAAc,SAChD4T,EAAa3W,UAAY5U,EACzBurB,EAAa/3B,GAAKw3B,EAClB5Q,EAAOmR,GAYPC,CADAxrB,GAAS,cAAgBmrB,EAAmC,sEAxDhEM,CAAkBV,EANR,uCAMiCW,GAK/C,SAASL,EAAmBM,GACxB,IAAIC,EAAYniC,EAAQmhC,UAAY,gBAAkB,KAEtD,OAAQe,EAAM75B,KAAK85B,GAAaA,GAAW3M,OAyD/C,SAAS4M,EAASC,EAAIpiC,EAAMoH,GACxB,GAAIg7B,EAAGla,iBACHka,EAAGla,iBAAiBloB,EAAMoH,OACvB,CAAA,IAAGg7B,EAAGC,YAGT,OAAOpD,EAAStZ,MAAM,mDAFtByc,EAAGC,YAAY,KAAOriC,EAAMoH,IAMpC,SAASk7B,EAAYF,EAAIpiC,EAAMoH,GAC3B,GAAIg7B,EAAGja,oBACHia,EAAGja,oBAAoBnoB,EAAMoH,OAC1B,CAAA,IAAGg7B,EAAGG,YAGT,OAAOtD,EAAStZ,MAAM,sDAFtByc,EAAGG,YAAY,KAAOviC,EAAMoH,IAMpC,SAASo7B,EAAiBtjC,GACtB,OAAOD,EAASC,GAASujC,UAAU1T,WAAW,GAAGA,WAAW,GAAGA,WAAW,GAG9E,SAAS2T,EAAiBxjC,GACtB,OAAOD,EAASC,GAASujC,UAAU1T,WAAW,GAAGA,WAAW,GAAGA,WAAW,GAjH9E,IAAIkQ,GADJl/B,EAAsBA,GAAW,IACHk/B,SAC1BM,EAAkBx/B,EAAQw/B,eAC1BtgC,EAAkBc,EAAQ8+B,aAAa5/B,SAEvCw/B,EAAkB1+B,EAAQ0+B,UAE9B,IAAKc,EACD,MAAUxb,MAAM,+CAGpB,IAAKkb,EACD,MAAUlb,MAAM,0CAIpB,IAAI4e,EAmBJ,MACI,IAGIC,EAAQ7b,SAASkH,cAAc,OACnC2U,EAAMtsB,MAAMD,QAAUsrB,EAAmB,CAAC,qBAAsB,gBAA4B,iBAA8B,qBAAsB,YAAa,eAE7J,IAAIc,EAAY1b,SAASkH,cAAc,OACvCwU,EAAUnsB,MAAMD,QAAUsrB,EAAmB,CAAC,qBAAsB,eAA0B,gBAA4B,mBAAoB,mBAAoB,eAA2B,gBAA6B,qBAAsB,YAAa,eAE7Pc,EAAUhM,YAAYmM,GAEtB7b,SAAS8b,KAAKxE,aAAaoE,EAAW1b,SAAS8b,KAAK7E,YAEpD,IAAI8E,EAbQ,IAaYL,EAAUM,YAC9BC,EAbS,IAaaP,EAAUQ,aAIpC,OAFAlc,SAAS8b,KAAKjF,YAAY6E,GAEnB,CACH/L,MAAOoM,EACPnM,OAAQqM,IAxCKE,GAGjBlB,EAA0B,iCAinB9B,OAzmBAZ,EAAallB,OAAO6K,UAymBb,CACHnoB,eAzfoBmB,EAASb,EAASqe,GAStC,SAAS6iB,IACL,GAAIrgC,EAAQqgC,MAAO,CACf,IAAIv/B,EAAOxB,GAAgB8G,MAAMxF,KAAKH,WAEtC,GADAK,EAAKgjB,QAAQ4a,EAAUxmB,IAAI/Y,GAAU,YACjC+/B,EAASE,IAAIr+B,MACbm+B,EAASE,IAAIr+B,MAAM,KAAMD,QAEzB,IAAK,IAAI5D,EAAI,EAAO4D,EAAK3D,OAATD,EAAiBA,IAC7BgiC,EAASE,IAAIt+B,EAAK5D,KAuBlC,SAASkmC,EAAajkC,GAElB,IAAIujC,EAAYxjC,EAASC,GAASujC,UAAU1T,WAAW,GACnDzY,EAAQ4F,OAAOknB,iBAAiBX,GACpC,OAAQnsB,EAAMogB,QAAwC,IAA/BpgB,EAAMogB,MAAMhoB,QAAQ,MAG/C,SAAS20B,IAGL,IAAIC,EAA0BpnB,OAAOknB,iBAAiBlkC,GAClDoX,EAA0B,GAU9B,OATAA,EAAM+Z,SAAwBiT,EAAajT,SAC3C/Z,EAAMogB,MAAwBx3B,EAAQqkC,YACtCjtB,EAAMqgB,OAAwBz3B,EAAQskC,aACtCltB,EAAMmtB,IAAwBH,EAAaG,IAC3CntB,EAAM9G,MAAwB8zB,EAAa9zB,MAC3C8G,EAAMotB,OAAwBJ,EAAaI,OAC3CptB,EAAM/G,KAAwB+zB,EAAa/zB,KAC3C+G,EAAMqtB,SAAwBL,EAAa5M,MAC3CpgB,EAAMstB,UAAwBN,EAAa3M,OACpCrgB,EAgBX,SAASutB,IAEL,GADAzD,EAAM,uBACDnhC,EAASC,GAAd,CAKA,IAAIoX,EAAQ+sB,IACZpkC,EAASC,GAASoX,MAAQA,OALtB8pB,EAAM,iDAQd,SAAS0D,EAAiB5kC,EAASw3B,EAAOC,GACtC13B,EAASC,GAAS6kC,UAAYrN,EAC9Bz3B,EAASC,GAAS8kC,WAAcrN,EAOpC,SAASsN,IACL,OAAO,EAAItB,EAAejM,MAAQ,EAGtC,SAASwN,IACL,OAAO,EAAIvB,EAAehM,OAAS,EAGvC,SAASwN,EAAezN,GACpB,OAAOA,EAAQ,GAAKuN,IAGxB,SAASG,EAAgBzN,GACrB,OAAOA,EAAS,GAAKuN,IAWzB,SAASG,EAAmBnlC,EAASw3B,EAAOC,GACxC,IAAI2N,EAAkB9B,EAAiBtjC,GACnCqlC,EAAkB7B,EAAiBxjC,GACnCslC,EAAkBL,EAAezN,GACjC+N,EAAkBL,EAAgBzN,GAClC+N,EAbR,CAAwBhO,GACL,EAARA,EAAYuN,IAYGU,CAAejO,GACjCkO,EAVR,CAAyBjO,GACL,EAATA,EAAauN,IASEW,CAAgBlO,GACtC2N,EAAOQ,WAAeN,EACtBF,EAAOS,UAAeN,EACtBF,EAAOO,WAAeJ,EACtBH,EAAOQ,UAAeH,EAG1B,SAASI,IACL,IAAIvC,EAAYxjC,EAASC,GAASujC,UAElC,IAAKA,EAAW,EACZA,EAA8B1b,SAASkH,cAAc,QAC3C9pB,UAAoB69B,EAC9BS,EAAUnsB,MAAMD,QAAcsrB,EAAmB,CAAC,qBAAsB,kBAAmB,aAAc,cAAe,cAAe,mBAAoB,YAAa,eACxK1iC,EAASC,GAASujC,UAAYA,EApM1C,CAA2BvjC,IACvBA,EAAQiF,WAAa,IAAM69B,EAA0B,qBAoM7CiD,CAAkBxC,GAClBvjC,EAAQu3B,YAAYgM,GAEpB,IAAIyC,EAAmB,KACnBjmC,EAASC,GAASimC,YAAclmC,EAASC,GAASimC,cAGtDhD,EAASM,EAAW,iBAAkByC,GAItCjmC,EAASC,GAASgmC,iBAAmBA,EAGzC,OAAOzC,EAGX,SAAS2C,IAiGL,SAASC,IACLpmC,EAASC,GAASomC,UAAYrmC,EAASC,GAASomC,WAGpD,SAASC,IACLtmC,EAASC,GAASsmC,UAAYvmC,EAASC,GAASsmC,WA9DpD,GAFApF,EAAM,sBAEDnhC,EAASC,GAAd,CAvCA,MACI,IAAIoX,EAAQrX,EAASC,GAASoX,MAE9B,GAAsB,WAAnBA,EAAM+Z,SAAuB,CAC5BnxB,EAAQoX,MAAMmvB,YAAY,WAAY,WAAW1lC,EAAQmhC,UAAY,YAAc,IAEnF,IAAIwE,EAAuB,CAASzG,EAAU//B,EAASoX,EAAO1P,KAK1D,IAAI1G,EAAQoW,EAAM1P,GAEL,SAAV1G,GAAiD,MANpD,CAA2BA,GAChBA,EAAMwI,QAAQ,YAAa,IAKfi9B,CAAkBzlC,KACrC++B,EAASxZ,KAAK,kDAAoD7e,EAAW,IAAM1G,EAAQ,kHAAoH0G,EAAW,+BAAgC1H,GAC1PA,EAAQoX,MAAM1P,GAAY,IAMlC8+B,EAAqBzG,EAAU//B,EAASoX,EAAO,OAC/CovB,EAAqBzG,EAAU//B,EAASoX,EAAO,SAC/CovB,EAAqBzG,EAAU//B,EAASoX,EAAO,UAC/CovB,EAAqBzG,EAAU//B,EAASoX,EAAO,UAoBvDsvB,GAEA,IAAIC,EAAgB5mC,EAASC,GAASujC,UAEjCoD,IACDA,EAAgBb,KAWpB,IAhCsCz1B,EAAMk0B,EAAKC,EAAQl0B,EAgCrDs2B,EAA0BnD,EAAejM,MACzCqP,EAA0BpD,EAAehM,OACzCqP,EAA0BrE,EAAmB,CAAC,qBAAsB,aAAc,mBAAoB,cAAe,qBAAsB,cAAe,eAAgB,YAAa,aACvLsE,EAA0BtE,EAAmB,CAAC,qBAAsB,aAAc,mBAAoB,cAAe,sBAAsB/2B,OA7BpI,CAAC,UALR2E,GADkCA,IAmC+I,EAAIu2B,IAlC9Jv2B,EAAO,KAAd,KAKS,SAJzBk0B,GAFwCA,IAmCgK,EAAIsC,IAjCvLtC,EAAM,KAAb,KAI0B,WAFxCj0B,GAJqDA,GAmC4Ls2B,GA/BxNt2B,EAAQ,KAAf,KAEyC,YAH3Dk0B,GAH6CA,GAmCkLqC,GAhCpMrC,EAAS,KAAhB,QAiCpBwC,EAA0BvE,EAAmB,CAAC,qBAAsB,aAAc,mBAAoB,cAAe,qBAAsB,cAAe,iBAC1JwE,EAA0BxE,EAAmB,CAAC,qBAAsB,aAAc,mBAAoB,cAAe,qBAAsB,cAAe,iBAC1JyE,EAA0BzE,EAAmB,CAAC,qBAAsB,UAAW,WAC/E0E,EAA0B1E,EAAmB,CAAC,qBAAsB,cAAe,iBAEnF2E,EAA0Bvf,SAASkH,cAAc,OACjDwU,EAA0B1b,SAASkH,cAAc,OACjDqW,EAA0Bvd,SAASkH,cAAc,OACjDsY,EAA0Bxf,SAASkH,cAAc,OACjDsW,EAA0Bxd,SAASkH,cAAc,OACjDuY,EAA0Bzf,SAASkH,cAAc,OAIrDqY,EAAmBl5B,IAAmB,MAEtCk5B,EAAmBhwB,MAAMD,QAAa2vB,EACtCM,EAAmBniC,UAAmB69B,EACtCS,EAAUt+B,UAA4B69B,EACtCS,EAAUnsB,MAAMD,QAAsB4vB,EACtC3B,EAAOhuB,MAAMD,QAAyB6vB,EACtCK,EAAYjwB,MAAMD,QAAoB+vB,EACtC7B,EAAOjuB,MAAMD,QAAyB8vB,EACtCK,EAAYlwB,MAAMD,QAAoBgwB,EAEtC/B,EAAO7N,YAAY8P,GACnBhC,EAAO9N,YAAY+P,GACnB/D,EAAUhM,YAAY6N,GACtB7B,EAAUhM,YAAY8N,GACtB+B,EAAmB7P,YAAYgM,GAC/BoD,EAAcpP,YAAY6P,GAU1BnE,EAASmC,EAAQ,SAAUe,GAC3BlD,EAASoC,EAAQ,SAAUgB,GAI3BtmC,EAASC,GAASmmC,eAAiBA,EACnCpmC,EAASC,GAASqmC,eAAiBA,OAtE/BnF,EAAM,iDAyEd,SAASqG,IACL,SAASC,EAAiBxnC,EAASw3B,EAAOC,GACtC,IAAI4P,EAtLZ,CAA+BrnC,GACpBsjC,EAAiBtjC,GAAS6vB,WAAW,GAqLV4X,CAAsBznC,GAChDslC,EAA0BL,EAAezN,GACzC+N,EAA0BL,EAAgBzN,GAC9C4P,EAAYjwB,MAAMmvB,YAAY,QAASjB,EAAc,KAAMzkC,EAAQmhC,UAAY,YAAc,IAC7FqF,EAAYjwB,MAAMmvB,YAAY,SAAUhB,EAAe,KAAM1kC,EAAQmhC,UAAY,YAAc,IAGnG,SAAS0F,EAAuBnkB,GAC5B,IAAIiU,EAAkBx3B,EAAQqkC,YAC1B5M,EAAkBz3B,EAAQskC,aAG1BqD,EAAcnQ,IAAUz3B,EAASC,GAAS6kC,WAAapN,IAAW13B,EAASC,GAAS8kC,WAExF5D,EAAM,uBAAwB1J,EAAOC,GAIrCmN,EAAiB5kC,EAASw3B,EAAOC,GAKjC4I,EAAe7mB,IAAI,GAAG,KACbmuB,IAIA5nC,EAASC,GAKT4nC,KAKD/mC,EAAQqgC,QACAlhC,EAAQqkC,cAGN7M,GAFFx3B,EAAQskC,eAES7M,GACrBsI,EAASxZ,KAAKgZ,EAAUxmB,IAAI/Y,GAAU,4DAI9CwnC,EAAiBxnC,EAASw3B,EAAOC,IAb7ByJ,EAAM,+DALNA,EAAM,qDAqBdb,EAAe7mB,IAAI,GAAG,KAIbzZ,EAASC,GAKT4nC,IAKLzC,EAAmBnlC,EAASw3B,EAAOC,GAJ/ByJ,EAAM,+DALNA,EAAM,oDAYVyG,GAAepkB,GACf8c,EAAe7mB,IAAI,GAAG,KACbzZ,EAASC,GAKT4nC,IAKLrkB,IAJE2d,EAAM,+DALJA,EAAM,oDActB,SAAS0G,IACL,QAAS7nC,EAASC,GAASujC,UAG/B,SAASsE,IAKL3G,EAAM,mCAEN,IAAItB,EAAQ7/B,EAASC,GAGrB,YARmDK,IAAxCN,EAASC,GAAS8nC,mBAQNlI,EAAMiF,YAAcjF,EAAMmI,UAAUvQ,OAASoI,EAAMkF,aAAelF,EAAMmI,UAAUtQ,OAC9FyJ,EAAM,8FAIbtB,EAAMiF,YAAcjF,EAAMkI,mBAAqBlI,EAAMkF,aAAelF,EAAMoI,mBACnE9G,EAAM,yCAIjBA,EAAM,2CACNtB,EAAMkI,kBAAoBlI,EAAMiF,UAChCjF,EAAMoI,mBAAqBpI,EAAMkF,gBACjCrkC,GAAQV,EAASC,GAASuhC,WAAqBxY,IAC3CA,EAAS/oB,OAqBjB,SAASioC,IACL/G,EAAM,oBAEF+C,EAAajkC,GAEbkhC,EAAM,oDAIVwG,EAAuBG,GAK3B,GAFA3G,EAAM,iDAEDnhC,EAASC,GAAd,CAKAD,EAASC,GAASimC,WApClB,KAGI,GAFA/E,EAAM,6BAEF+C,EAAajkC,GACbkhC,EAAM,qDADV,CAKAA,EAAM,qBACN,IAAIkE,EAAS9B,EAAiBtjC,GAC1BqlC,EAAS7B,EAAiBxjC,GACJ,IAAtBolC,EAAOQ,YAAyC,IAArBR,EAAOS,WAAyC,IAAtBR,EAAOO,YAAyC,IAArBP,EAAOQ,YACvF3E,EAAM,yDACNwG,EAAuBG,MAwB/B9nC,EAASC,GAASomC,SAAW6B,EAC7BloC,EAASC,GAASsmC,SAAW2B,EAE7B,IAAI7wB,EAAQrX,EAASC,GAASoX,MAC9BowB,EAAiBxnC,EAASoX,EAAMogB,MAAOpgB,EAAMqgB,aATzCyJ,EAAM,iDAYd,SAASgH,IAGL,GAFAhH,EAAM,gCAEDnhC,EAASC,GAAd,CAKA,IAAIoX,EAAQrX,EAASC,GAASoX,MAC9BwtB,EAAiB5kC,EAASoX,EAAMogB,MAAOpgB,EAAMqgB,QAC7C0N,EAAmBnlC,EAASoX,EAAMogB,MAAOpgB,EAAMqgB,aAN3CyJ,EAAM,iDASd,SAASiH,IACL9pB,EAASre,GAGb,SAASooC,IApYT,IACQhxB,EAoYJ8pB,EAAM,iBA3XNnhC,EAASC,GAASuhC,UAAY,GAT1BnqB,EAAQ+sB,IACZpkC,EAASC,GAAS+nC,UAAY,CAC1BvQ,MAAOpgB,EAAMogB,MACbC,OAAQrgB,EAAMqgB,QAElByJ,EAAM,qBAAsBnhC,EAASC,GAAS+nC,WAmY9C1H,EAAe7mB,IAAI,EAAGmrB,GACtBtE,EAAe7mB,IAAI,EAAG0sB,GACtB7F,EAAe7mB,IAAI,EAAG+tB,GACtBlH,EAAe7mB,IAAI,EAAG0uB,GACtB7H,EAAe7mB,IAAI,EAAG2uB,GA5crB9pB,IACDA,EAAWre,EACXA,EAAUa,EACVA,EAAU,MAGdA,EAAUA,GAAW,GAycrBqgC,EAAM,wBAzbN,CAAoBlhC,IAChB,CAAsBA,GACXA,IAAYA,EAAQqoC,cAAc1E,MAAQ3jC,EAAQqoC,cAAc1E,KAAK7/B,SAAS9D,GAGpFsoC,CAAatoC,IAKuB,OAArCgd,OAAOknB,iBAAiBlkC,GAib5BuoC,CAAWvoC,IACXkhC,EAAM,uBAEN4E,IAEA5E,EAAM,wCAENnhC,EAASC,GAASimC,WAAa,KAC3B/E,EAAM,2BACNkH,MAGJA,KA4BJ1oC,YA3gBiBM,EAAS+oB,GAG1B,IAFgBhpB,EAASC,GAASuhC,UAEnB1hC,KACX,MAAUglB,MAAM,6DAGpB9kB,EAASC,GAASuhC,UAAU1hC,KAAKkpB,IAqgBjCrpB,UAzBeM,GACf,IAAI4/B,EAAQ7/B,EAASC,GAEhB4/B,IAYLA,EAAMuG,gBAAkB/C,EAAYE,EAAiBtjC,GAAU,SAAU4/B,EAAMuG,gBAC/EvG,EAAMyG,gBAAkBjD,EAAYI,EAAiBxjC,GAAU,SAAU4/B,EAAMyG,gBAC/EzG,EAAMoG,kBAAoB5C,EAAYxD,EAAM2D,UAAW,iBAAkB3D,EAAMoG,kBAE/EpG,EAAM2D,WAAavjC,EAAQ0+B,YAAYkB,EAAM2D,aAO7CrB,aAAcA,IvHjhBMsG,CAAoBzG,OACrC,CAAA,GAAuB,WAApBF,EAGN,MAAUhd,MAAM,0BAA4Bgd,GAF5CV,EsL1HS,SAAStgC,GAsCtB,SAAS4hC,EAAmBM,GACxB,IAAIC,EAAYniC,EAAQmhC,UAAY,gBAAkB,KAEtD,OAAQe,EAAM75B,KAAK85B,GAAaA,GAAW3M,OAmK/C,SAASoS,EAAUzoC,GACf,OAAOD,EAASC,GAASsE,OA3M7B,IAAIy7B,GADJl/B,EAAsBA,GAAW,IACHk/B,SAC1BM,EAAkBx/B,EAAQw/B,eAC1BtgC,EAAkBc,EAAQ8+B,aAAa5/B,SAE3C,IAAIggC,EACA,MAAUlb,MAAM,0CAiOpB,MAAO,CACHnlB,eAtLoBmB,EAASb,EAASqe,GACjCA,IACDA,EAAWre,EACXA,EAAUa,EACVA,EAAU,MAGdA,EAAUA,GAAW,GAkIlBohC,GAAgBzT,KAAK,GAIpBnQ,EAASre,GAnIb,SAAsBA,EAASqe,GAmB3B,SAASqqB,IACL,SAAShC,IACL,GAAsB,WAAnBtvB,EAAM+Z,SAAuB,CAC5BnxB,EAAQoX,MAAMmvB,YAAY,WAAY,WAAY1lC,EAAQmhC,UAAY,YAAc,IAEpF,IAAIwE,EAAuB,CAASzG,EAAU//B,EAASoX,EAAO1P,KAK1D,IAAI1G,EAAQoW,EAAM1P,GAEL,SAAV1G,GAAiD,MANpD,CAA2BA,GAChBA,EAAMwI,QAAQ,YAAa,IAKfi9B,CAAkBzlC,KACrC++B,EAASxZ,KAAK,kDAAoD7e,EAAW,IAAM1G,EAAQ,kHAAoH0G,EAAW,+BAAgC1H,GAC1PA,EAAQoX,MAAMmvB,YAAY7+B,EAAU,IAAK7G,EAAQmhC,UAAY,YAAc,MAMnFwE,EAAqBzG,EAAU//B,EAASoX,EAAO,OAC/CovB,EAAqBzG,EAAU//B,EAASoX,EAAO,SAC/CovB,EAAqBzG,EAAU//B,EAASoX,EAAO,UAC/CovB,EAAqBzG,EAAU//B,EAASoX,EAAO,SA6ChC,KAAnBA,EAAM+Z,WACNuV,IACAiC,GAAyB,GAI7B,IAAIrkC,EAASujB,SAASkH,cAAc,UACpCzqB,EAAO8S,MAAMD,QAAUyxB,EACvBtkC,EAAOukC,UAAY,EACnBvkC,EAAOxC,KAAO,YACdwC,EAAOwkC,aAAa,cAAe,QACnCxkC,EAAOykC,OApDP,WAESJ,GACDjC,IAKJ,SAASsC,EAAYhpC,EAASqe,GAI1B,IAAIre,EAAQipC,gBAAiB,CACzB,IAAIrJ,EAAQ7/B,EAASC,GASrB,OARI4/B,EAAMsJ,iCACNlsB,OAAOnQ,aAAa+yB,EAAMsJ,sCAE9BtJ,EAAMsJ,gCAAkCn8B,YAAW,KAC/C6yB,EAAMsJ,gCAAkC,EACxCF,EAAYhpC,EAASqe,KACtB,MAKPA,EAASre,EAAQipC,iBAQrBD,CAHoBtnC,MAGsCynC,IAEtD9qB,EAASre,OAqBbiiC,GAAgBzT,SAChBlqB,EAAOkG,KAAO,eAGbzK,EAASC,KAKdA,EAAQu3B,YAAYjzB,GACpBvE,EAASC,GAASsE,OAASA,EAGxB29B,GAAgBzT,SACflqB,EAAOkG,KAAO,gBAnHtB,IAAIo+B,EAAenG,EAAmB,CAAC,iBAAkB,qBAAsB,SAAU,UAAW,cAAe,eAAgB,eAAgB,aAAc,YAAa,aAAc,iBAAkB,yBAK1MkG,GAAyB,EAIzBvxB,EAAQ4F,OAAOknB,iBAAiBlkC,GAChCw3B,EAAQx3B,EAAQqkC,YAChB5M,EAASz3B,EAAQskC,aAErBvkC,EAASC,GAAS+nC,UAAY,CAC1BvQ,MAAOA,EACPC,OAAQA,GAwGT4I,EACCA,EAAe7mB,IAAIkvB,GAEnBA,IAUJU,CAAappC,EAASqe,IAwC1B3e,YA1NiBM,EAAS+oB,GAC1B,SAASsgB,IACLtgB,EAAS/oB,GAGb,GAAGiiC,GAAgBzT,KAAK,GAEpBzuB,EAASC,GAASsE,OAAS,CACvBglC,MAAOD,GAEXrpC,EAAQmjC,YAAY,WAAYkG,OAC7B,CACH,IAAI/kC,EAASmkC,EAAUzoC,GAEvB,IAAIsE,EACA,MAAUugB,MAAM,+CAGpBvgB,EAAO2kC,gBAAgBM,YAAYvgB,iBAAiB,SAAUqgB,KAyMlE3pC,UA3BeM,GACf,GAAKD,EAASC,GAAd,CAIA,IAAIsE,EAASmkC,EAAUzoC,GAElBsE,IAID29B,GAAgBzT,KAAK,GACrBxuB,EAAQqjC,YAAY,WAAY/+B,EAAOglC,OAEvCtpC,EAAQ0+B,YAAYp6B,GAGpBvE,EAASC,GAASkpC,iCAClBlsB,OAAOnQ,aAAa9M,EAASC,GAASkpC,wCAGnCnpC,EAASC,GAASsE,WtL3GLklC,CAAoBzH,GAU5C,IAAI0H,EAAmB,GAyKvB,MAAO,CACH/pC,SAjKcmB,EAAS6oC,EAAU3gB,GACjC,SAAS4gB,EAAiB3pC,GACtB,IAAIuhC,EAAYH,EAAqBroB,IAAI/Y,GACzCS,GAAQ8gC,GAAsCxY,IAC1CA,EAAS/oB,MAIjB,SAAS4pC,EAAY3I,EAAWjhC,EAAS+oB,GACrCqY,EAAqB5nB,IAAIxZ,EAAS+oB,GAE/BkY,GACClY,EAAS/oB,GAWjB,GANI+oB,IACAA,EAAW2gB,EACXA,EAAW7oC,EACXA,EAAU,KAGV6oC,EACA,MAAU7kB,MAAM,kCAGpB,IAAIkE,EACA,MAAUlE,MAAM,sBAGpB,GAAInkB,EAAUgpC,GAEVA,EAAW,CAACA,OACT,CAAA,IAAIzpC,EAAaypC,GAKpB,OAAO3J,EAAStZ,MAAM,6EAFtBijB,EAAWppC,EAAQopC,GAKvB,IAAIG,EAAgB,EAEhB5I,EAAYrgC,EAAUC,EAAS,YAAamgC,EAAcC,WAC1D6I,EAAkBlpC,EAAUC,EAAS,WAAW,SAChDqgC,EAAQtgC,EAAUC,EAAS,QAASmgC,EAAcE,OAEtDzgC,GAAQipC,GAA2C1pC,IAC1C2/B,GAAa5/B,SAASC,KACvB2/B,GAAavQ,UAAUpvB,GACvBu/B,EAAUhmB,IAAIvZ,IAGlB,IAAI4K,EAAK20B,EAAUxmB,IAAI/Y,GAIvB,GAFAkhC,GAASnB,EAASE,IAAI,gCAAiCr1B,EAAI5K,IAEvDyhC,EAAaC,aAAa1hC,GAE1B,OADAkhC,GAASnB,EAASE,IAAIr1B,EAAI,mBACvB62B,EAAasI,OAAO/pC,IACnBkhC,GAASnB,EAASE,IAAIr1B,EAAI,oCAI1Bg/B,EAAY3I,EAAWjhC,EAAS+oB,GAChC0gB,EAAiB7+B,GAAM6+B,EAAiB7+B,IAAO,QAC/C6+B,EAAiB7+B,GAAI/K,MAAK,OACtBgqC,IAEqBH,EAAS1rC,QAC1B8rC,SAMZ5I,GAASnB,EAASE,IAAIr1B,EAAI,wBAE1B62B,EAAauI,SAAShqC,GAAS,GACxBmhC,EAAkB8I,eAAe,CAAE/I,MAAOA,EAAOc,UAAWF,GAAqB9hC,GAAsCA,IAG1H,GAFAkhC,GAASnB,EAASE,IAAIr1B,EAAI,uBAEtB+0B,GAAa5/B,SAASC,GAAU,CAChCyhC,EAAayI,iBAAiBlqC,GAC9ByhC,EAAauI,SAAShqC,GAAS,GAC/BmhC,EAAkByI,YAAY5pC,EAAS2pC,GACvCC,EAAY3I,EAAWjhC,EAAS+oB,GAMhC,IAAI6W,EAAQD,GAAa5/B,SAASC,GAC9B4/B,GAASA,EAAMmI,YAGXnI,EAAMmI,UAAUvQ,QAFRx3B,EAAQqkC,aAEmBzE,EAAMmI,UAAUtQ,SAD1Cz3B,EAAQskC,cAEjBqF,EAAiB3pC,IAItBypC,EAAiB7+B,IAChBnK,GAAQgpC,EAAiB7+B,IAAcyT,IACnCA,YAKR6iB,GAASnB,EAASE,IAAIr1B,EAAI,uDAGvB6+B,EAAiB7+B,KAExBi/B,IACqBH,EAAS1rC,QAC1B8rC,QAKZ5I,GAASnB,EAASE,IAAIr1B,EAAI,uCAG1Bg/B,EAAY3I,EAAWjhC,EAAS+oB,GAChC8gB,OAGDA,IAAkBH,EAAS1rC,QAC1B8rC,KAiCJK,eAAgB/I,EAAqB+I,eACrCC,mBAAoBhJ,EAAqBgJ,mBACzC1qC,UA/BegqC,GACf,IAAIA,EACA,OAAO3J,EAAStZ,MAAM,qCAG1B,GAAI/lB,EAAUgpC,GAEVA,EAAW,CAACA,OACT,CAAA,IAAIzpC,EAAaypC,GAKpB,OAAO3J,EAAStZ,MAAM,6EAFtBijB,EAAWppC,EAAQopC,GAKvBjpC,GAAQipC,GAAoB1pC,IACxBohC,EAAqBgJ,mBAAmBpqC,GACxCmhC,EAAkBkJ,UAAUrqC,GAC5B2/B,GAAa2K,WAAWtqC,OAa5BN,aATkByiC,GAClBhB,EAAkBe,cAAgBf,EAAkBe,aAAaC,KsGvS3CoI,CAA4B,CAAEC,SAAU,WAEtE,IAAIp0B,GA0qCJ,MAAMgG,GA9nCN,MACE1c,mBAEE,OADA+V,GAAQ/T,KAAMo2B,GAAczO,oBAAkB+E,qBACvCpuB,GAAQ0B,KAAM,4BAgBvBhC,kBAMEgC,KAAKwa,aAAU7b,EAKfqB,KAAK81B,WAAQn3B,EAIbqB,KAAK+1B,YAASp3B,EAOdqB,KAAKoa,cAAgB,IAAIpD,uBAIzBhX,KAAK+oC,6BAA0BpqC,EAI/BqB,KAAKgpC,+BAA4BrqC,EAIjCqB,KAAKipC,sBAAmBtqC,EAIxBqB,KAAKkpC,kCAA+BvqC,EAOpCqB,KAAKmpC,sBAAuB,EAI5BnpC,KAAKopC,4BAAyBzqC,EAI9BqB,KAAKmpC,0BAAuBxqC,EAI5BqB,KAAKqpC,4BAAyB1qC,EAI9BqB,KAAKy5B,iBAAc96B,EAInBqB,KAAKu3B,2BAAwB54B,EAI7BqB,KAAKspC,sBAAmB3qC,EAIxBqB,KAAK4V,6BAA0BjX,EAI/BqB,KAAKs8B,kBAAe39B,EAOpBqB,KAAKupC,iBAAc5qC,EAInBqB,KAAKwpC,cAAW7qC,EAIhBqB,KAAKypC,qBAAkB9qC,EAIvBqB,KAAK0pC,uBAAoB/qC,EAIzBqB,KAAK2pC,0BAAuBhrC,EAO5BqB,KAAK4pC,cAAWjrC,EAIhBqB,KAAK6pC,0BAAuBlrC,EAI5BqB,KAAK2d,gBAAahf,EAIlBqB,KAAK8pC,gBAAanrC,EAOlBqB,KAAKoT,uBAAoBzU,EAIzBqB,KAAKqT,sBAAmB1U,EAIxBqB,KAAK+pC,oBAAiBprC,EAItBqB,KAAKgqC,eAAYrrC,EAEjBqB,KAAKiqC,oBAELjqC,KAAKoa,cAActC,IACjBX,KAAKC,OAAOW,QAAQ,gCAAiCoxB,IACnDnpC,KAAKmpC,qBAAuBA,EAE5BA,EA9MDz0B,KACHA,GAAeyR,SAASkH,cAAc,SACtC3Y,GAAa0yB,aAAa,UAAW,4BACrCjhB,SAAS6a,KAAKnL,YAAYnhB,KAKxBA,KACFA,GAAayS,WAAW6V,YAAYtoB,IACpCA,GAAe,MAuMX1U,KAAKkqC,4BACLlqC,KAAKmqC,uBAAsB,GAAM,MAGnChzB,KAAKC,OAAOW,QAAQ,kCAAmCqxB,IACrDppC,KAAKopC,uBAAyBA,EAE1BppC,KAAKopC,wBAAoD,MAAxBppC,KAAKypC,kBAA6BzpC,KAAK2d,WAC1E3d,KAAKoqC,4BAC6B,MAAxBpqC,KAAKypC,iBACfzpC,KAAKqqC,yBAGHrqC,KAAK4pC,UAAY5pC,KAAKsqC,mBAG5BnzB,KAAKC,OAAOW,QAAQ,kCAAmCsxB,IACrDrpC,KAAKqpC,uBAAyBA,EAE1BrpC,KAAKqpC,wBAAsD,MAA1BrpC,KAAK0pC,oBAA+B1pC,KAAK2d,WAC5E3d,KAAKuqC,8BAC+B,MAA1BvqC,KAAK0pC,mBACf1pC,KAAKwqC,8BAITrzB,KAAKC,OAAOW,QAAQ,uBAAwB0hB,IAC1Cz5B,KAAKy5B,YAAcA,EAEfz5B,KAAK4pC,UAAY5pC,KAAKkb,yBAG5B/D,KAAKC,OAAOW,QAAQ,iCAAkCwf,IACpDv3B,KAAKu3B,sBAAwBA,EAEzBv3B,KAAK4pC,UAAY5pC,KAAKkb,yBAG5B/D,KAAKC,OAAOW,QAAQ,2BAA4B0yB,IAC9CzqC,KAAKyqC,gBAAkBA,EAEnBzqC,KAAK4pC,WACF5pC,KAAKyqC,gBAKRzqC,KAAKsqC,iBAJLtqC,KAAKs2B,UAAUhB,OAAO5f,MAAMD,QAAU,GACtCzV,KAAKq2B,YAAYf,OAAO5f,MAAMD,QAAU,GACxCzV,KAAKu2B,WAAWjB,OAAO5f,MAAMD,QAAU,QAO7C0B,KAAKC,OAAOW,QAAQ,wCAAyCuxB,IAC3DtpC,KAAKspC,iBAAmBA,EAEpBtpC,KAAK4pC,UAAY5pC,KAAKmqC,2BAG5BhzB,KAAKC,OAAOW,QAAQ,2CAA4C2yB,IAC9D1qC,KAAK0qC,oBAAsBA,EAEvB1qC,KAAK4pC,UAAY5pC,KAAKmqC,2BAG5BhzB,KAAKC,OAAOW,QAAQ,mCAAoCnC,IACtD5V,KAAK4V,wBAA0BA,EAE3B5V,KAAK4pC,UAAY5pC,KAAKsqC,mBAG5BnzB,KAAKC,OAAOW,QAAQ,wBAAyBukB,IAC3Ct8B,KAAKs8B,aAAeA,EAEpBt8B,KAAKk8B,UAAUriB,OAAO,WAAY7Z,KAAKs8B,iBAGzCnlB,KAAKC,OAAOW,QAAQ,oCAAqCwkB,IACvDv8B,KAAKu8B,yBAA2BA,EAEhCv8B,KAAKk8B,UAAUriB,OAAO,yBAA0B7Z,KAAKu8B,0BAEjDv8B,KAAK4pC,UAAY5pC,KAAKmqC,2BAG5BhzB,KAAKC,OAAOW,QAAQ,qCAAsCtH,IACxDzQ,KAAKyQ,0BAA4BA,EAE7BzQ,KAAK4pC,UAAY5pC,KAAKkb,yBAG5B/D,KAAKC,OAAOW,QAAQ,8BAA8B,KAC5C/X,KAAK4pC,UAAY5pC,KAAKmqC,2BAG5BhzB,KAAKC,OAAOW,QAAQ,mBAAmB,KACjC/X,KAAK4pC,UAAY5pC,KAAKsqC,mBAG5BnzB,KAAKC,OAAOW,QAAQ,yBAAyB,KACvC/X,KAAK4pC,UAAY5pC,KAAKsqC,mBAG5BnzB,KAAKC,OAAOW,QAAQ,qBAAqB,KACnC/X,KAAK4pC,UAAY5pC,KAAKsqC,mBAG5BnzB,KAAKC,OAAOW,QAAQ,wCAAwC,KACtD/X,KAAK4pC,UAAY5pC,KAAKsqC,oBAUhCtsC,mBACE,GAAuC,mBAA5BmZ,KAAKwD,MAAMgwB,aACpB3qC,KAAKoa,cAActC,IAAIX,KAAKwD,MAAMgwB,cAAa,KAAQ3qC,KAAK4qC,kBACvD,CACL5qC,KAAK6qC,qBAAuB,IAAIC,sBAAsBC,IACpD,MAAMC,iBAAEA,GAAqBD,EAAQA,EAAQzuC,OAAS,IAClD0uC,EAAiBlV,MAAQ,GAAKkV,EAAiBjV,OAAS,IAC1D/1B,KAAKmqC,uBAAsB,GAAM,MAIrCnqC,KAAK6qC,qBAAqB9yB,QAAQ/X,MAC9BA,KAAKirC,aACPjrC,KAAKmqC,uBAAsB,GAAM,GAGnC,MAAMe,EAAoB,KAAQlrC,KAAKmqC,uBAAsB,GAAO,IACpEvM,GAAsBuN,SAASnrC,KAAMkrC,GACrC5vB,OAAOgM,iBAAiB,SAAU4jB,EAAmB,CAAExO,SAAS,IAEhE18B,KAAKoa,cAActC,IACjB,IAAIta,eAAW,KAAQogC,GAAsB6K,eAAezoC,KAAMkrC,MAClE,IAAI1tC,eAAW,KAAQ8d,OAAOiM,oBAAoB,SAAU2jB,OAIhElrC,KAAKmqC,wBACLnqC,KAAKkqC,4BACLlqC,KAAK4pC,UAAW,EAChB5pC,KAAK6pC,qBAAuB7pC,KAAKorC,oBAAoB,sBAAwBprC,KAAKwa,QAAQ8c,uBAEtFt3B,KAAK6pC,sBACP7pC,KAAKwa,QAAQ8c,uBAAuB8P,aAAa,eAAgB,IAGnEpnC,KAAKoa,cAActC,IACjB9X,KAAKqrC,yBASTrtC,mBACEgC,KAAKwa,QAAQ8c,uBAAuB7M,gBAAgB,gBACpDzqB,KAAK4pC,UAAW,EAmBlB5rC,YAAe,OAAOgC,KAAK2iC,YAAc,GAAK3iC,KAAK4iC,aAAe,EAWlE5kC,OAAQgpB,GACN,GAAIhnB,KAAK4pC,SAAY,OAErB,MAAM/H,EAAY7a,GAAUhnB,KAAKwa,QAAQ8c,uBACnCgU,EAAWzJ,EAAU0J,iBAAiB,4BACxCD,EAAShvC,QACXmC,GAAgBM,QAAQgB,KAAKurC,GAAW9J,IAASA,EAAGtnB,aAEtD2nB,EAAUhM,YAAY71B,MAMxBhC,SACOgC,KAAK4pC,UAA+B,MAAnB5pC,KAAKmnB,YAC3BnnB,KAAKmnB,WAAW6V,YAAYh9B,MAS9BhC,4BACEgC,KAAKk8B,UAAUriB,OAAO,OAAQ7Z,KAAKmpC,sBAMrCnrC,UACEgC,KAAKoa,cAAc7B,UACnBvY,KAAKwrC,SACLxrC,KAAKwa,QAAU,KAiBjBxc,oBACEgC,KAAKyrC,mBAELzrC,KAAK0rC,eAAe1rC,MAEpBA,KAAK2rC,oBACL3rC,KAAK4rC,iBAEL5rC,KAAKoa,cAActC,IAEjB9X,KAAKm8B,YACHn8B,KACA,CACE6rC,WAAahjC,KACN7I,KAAK2d,YAAc3d,KAAKwa,QAAQsxB,cACnC9rC,KAAKwa,QAAQsxB,aAAajjC,KAIhC,CAAE6zB,SAAS,IAGb18B,KAAKm8B,YACHn8B,KAAK+rC,iBACL,CACE3P,UAAYvzB,IAAQ7I,KAAKgsC,cAAcp3B,GAAsB/L,KAC7DojC,WAAapjC,IAAQ7I,KAAKgsC,cAAc72B,GAAsBtM,MAEhE,CAAE6zB,SAAS,KAWjB1+B,oBACMgC,KAAKupC,cAETvpC,KAAKupC,YAAcpjB,SAASkH,cAAc,OAC1CrtB,KAAKupC,YAAYrN,UAAUpkB,IAAI,wBAC/B9X,KAAK61B,YAAY71B,KAAKupC,aACtBvpC,KAAK+oC,wBAA0B/oC,KAAKm8B,YAAYn8B,KAAKupC,YAAa,CAChEnN,UAAYvzB,IAAQ7I,KAAKksC,UAAUt3B,GAAsB/L,KACzDojC,WAAapjC,IAAQ7I,KAAKksC,UAAU/2B,GAAsBtM,MACzD,CAAE6zB,SAAS,IAEd18B,KAAKoa,cAActC,IAAI9X,KAAK+oC,0BAQ9B/qC,oBACOgC,KAAKupC,cAEVvpC,KAAKoa,cAAciI,OAAOriB,KAAK+oC,yBAC/B/oC,KAAK+oC,wBAAwBxwB,UAC7BvY,KAAKg9B,YAAYh9B,KAAKupC,oBACfvpC,KAAKupC,aAQdvrC,iBACMgC,KAAKwpC,UAAYxpC,KAAK2d,aAE1B3d,KAAKwpC,SAAWrjB,SAASkH,cAAc,OACvCrtB,KAAKwpC,SAAStN,UAAUpkB,IAAI,oBAC5B9X,KAAK61B,YAAY71B,KAAKwpC,WAQxBxrC,iBACOgC,KAAKwpC,WAEVxpC,KAAKg9B,YAAYh9B,KAAKwpC,iBACfxpC,KAAKwpC,UASdxrC,4BACMgC,KAAKypC,iBAAmBzpC,KAAK2d,aAEjC3d,KAAKypC,gBAAkBtjB,SAASkH,cAAc,OAC9CrtB,KAAKypC,gBAAgBvN,UAAUpkB,IAAI,4BACnC9X,KAAKwpC,SAAS3T,YAAY71B,KAAKypC,kBASjCzrC,yBACOgC,KAAKypC,kBAEVzpC,KAAKwpC,SAASxM,YAAYh9B,KAAKypC,wBACxBzpC,KAAKypC,iBASdzrC,8BACMgC,KAAK0pC,mBAAqB1pC,KAAK2d,aAEnC3d,KAAK0pC,kBAAoBvjB,SAASkH,cAAc,OAChDrtB,KAAK0pC,kBAAkBxN,UAAUpkB,IAAI,+BACrC9X,KAAKwpC,SAAS3T,YAAY71B,KAAK0pC,mBAE/B1pC,KAAKkpC,6BAA+BlpC,KAAKm8B,YAAYn8B,KAAK0pC,kBAAmB,CAC3EtN,UAAYvzB,IAIV,GAHAA,EAAEwzB,iBACFxzB,EAAEogB,kBAEgC,MAA7BjpB,KAAK2pC,qBACR3pC,KAAK2pC,qBAAqBzvB,UAC1Bla,KAAKgpC,0BAA0BzwB,cAC1B,CACLvY,KAAK2pC,qBAAuB,IAAIwC,GAChCnsC,KAAK2pC,qBAAqBnwB,SAASxZ,MACnCA,KAAKgpC,0BAA4BhpC,KAAK2pC,qBAAqBlsB,cAAa,KACtEzd,KAAK2pC,qBAAuB,QAG9B,MAAM9G,IAAEA,EAAGl0B,KAAEA,EAAIC,MAAEA,GAAU5O,KAAK+rC,iBAAiBK,wBACnDpsC,KAAK2pC,qBAAqBj0B,MAAMmtB,IAASA,EAAH,KACtC7iC,KAAK2pC,qBAAqB9uB,SAGxB7a,KAAK2pC,qBAAqBj0B,MAAM/G,KAD9B3O,KAAKmpC,qBACmCv6B,EAAH,KAEGD,EAAO3O,KAAK2pC,qBAAqBxH,YAApC,UAajDnkC,2BACOgC,KAAK0pC,oBAEV1pC,KAAKwpC,SAASxM,YAAYh9B,KAAK0pC,mBAC/B1pC,KAAKkpC,6BAA6B3wB,iBAC3BvY,KAAK0pC,mBAgBd1rC,WAAc,OAAOgC,KAAKwa,QAQ1Bxc,SAAUwc,GAsDR,OArDAxa,KAAKwa,QAAUA,EAEfxa,KAAKoa,cAActC,IAEjB9X,KAAKwa,QAAQ6xB,sBAAqB,KAChCrsC,KAAKsqC,mBAGPtqC,KAAKwa,QAAQ8xB,uBAAsB,KACjCtsC,KAAKsqC,mBAGPtqC,KAAKwa,QAAQiD,cAAa,KACxBzd,KAAKka,aAGPla,KAAKwa,QAAQ+xB,mBAAkB,KAC7B,GAAIvsC,KAAK4pC,SAAY,OAAO5pC,KAAKkb,yBAGnClb,KAAKwa,QAAQgyB,uBAAsB,KACjCxsC,KAAKysC,cAAczsC,KAAKwa,QAAQkyB,gBAChC1sC,KAAKsqC,mBAGPtqC,KAAKwa,QAAQmyB,aAAan5B,IACxBxT,KAAKw2B,eAAer4B,KAAKqV,GACzBxT,KAAKsqC,mBAGPtqC,KAAKwa,QAAQoyB,4BAA4Bp5B,IACvC,MAAMpT,KAAEA,GAASoT,EACJ,SAATpT,GACS,oBAATA,GACS,sBAATA,EACFJ,KAAKy2B,6BAA6Bt4B,KAAKqV,GAEvCxT,KAAK02B,8BAA8Bv4B,KAAKqV,GAE1CxT,KAAKsqC,mBAGPuC,IAA4B,KAC1B7sC,KAAKkb,0BAITlb,KAAKysC,cAAczsC,KAAKwa,QAAQkyB,gBAEd,MAAd1sC,KAAK81B,OAAgC,MAAf91B,KAAK+1B,QAC7B/1B,KAAKwa,QAAQsyB,wBAAwB9sC,KAAK+1B,OAAQ/1B,KAAK81B,OAGlD91B,KAAKwa,QAQdxc,cAAe2f,GACb3d,KAAK2d,WAAaA,EAEd3d,KAAK2d,YACP3d,KAAKonC,aAAa,eAAe,GACjCpnC,KAAKqqC,yBACLrqC,KAAKwqC,2BACLxqC,KAAK+sC,iBACL/sC,KAAKgtC,sBAELhtC,KAAKyqB,gBAAgB,eACrBzqB,KAAK2rC,oBACL3rC,KAAK4rC,iBACD5rC,KAAKopC,wBAA0BppC,KAAKoqC,4BACpCpqC,KAAKqpC,wBAA0BrpC,KAAKuqC,+BAe5CvsC,gBACMgC,KAAK+pC,iBAET/pC,KAAK+pC,gBAAiB,EACtBrzB,uBAAsB,KACpB1W,KAAKoW,SACLpW,KAAK+pC,gBAAiB,MAQ1B/rC,sBACEgC,KAAKoT,kBAAoB,KACzBpT,KAAKqT,iBAAmB,KACxBrT,KAAKsqC,gBAQPtsC,SACE,KAAMgC,KAAK4pC,UAAY5pC,KAAKirC,aAAejrC,KAAKwa,SAAY,OAC5D,MAAMA,EAAUxa,KAAKwa,QACrBA,EAAQyyB,cACR,MAAM3X,EAASt1B,KAAK+rC,iBAEdjV,EAAmB92B,KAAKwa,QAAQuc,sBAChCmW,EAAkB1yB,EAAQ2yB,gCAC1BC,EAAiB5yB,EAAQ6yB,+BAAiC7yB,EAAQ8yB,eAClExX,EAAQp2B,KAAKwH,IAAIouB,EAAOQ,MAAQgB,EAAkB92B,KAAK81B,OACvDyX,EAAezX,EAAQoX,EAEzBltC,KAAKspC,kBAAoBtpC,KAAKgqC,WAChChqC,KAAK0V,MAAMs0B,UAAehqC,KAAKgqC,UAAR,KACvBhqC,KAAK0V,MAAMogB,MAAW91B,KAAKgqC,UAAR,OAEnBhqC,KAAK0V,MAAMs0B,UAAY,KACvBhqC,KAAK0V,MAAMogB,MAAQ,MAWnBvgB,GAAYvV,KAAKupC,YAAa,CAC5BzT,MAAUp2B,KAAK8tC,MAAMD,GAAd,KACPxX,OAAWr2B,KAAK8tC,MAAMhzB,EAAQizB,6BAAtB,KACRC,UAAW/3B,GAAc,EAAGy3B,EAAgBptC,KAAK4V,yBACjD+3B,oBAAwBjuC,KAAK8tC,MAAMN,GAAd,OAIzB33B,GAAYvV,KAAKwpC,SAAU,CAAE1T,MAAUp2B,KAAK8tC,MAAM1X,GAAd,OAEpC,MAAM8X,EAAYpzB,EAAQoc,2BAA6Bpc,EAAQwc,gBAAkBxc,EAAQ8yB,eAEzF,GAAIttC,KAAKyqC,gBAKA,CACL,IAAIoD,EAAkBl4B,GAAc,EAAGi4B,EAAW5tC,KAAK4V,yBACvD,GAAyB,IAArBkhB,EAAwB,CAC1B,MAAMgX,EAAQ,EAAIhX,EAClB+W,GAAmB,IAAIh4B,GAAUi4B,EAAOA,EAAO9tC,KAAK4V,yBAEtDL,GAAYvV,KAAKs2B,UAAUhB,OAAQ,CAAEoY,UAAWG,IAChDt4B,GAAYvV,KAAKq2B,YAAYf,OAAQ,CAAEoY,UAAWG,IAClDt4B,GAAYvV,KAAKu2B,WAAWjB,OAAQ,CAAEoY,UAAWG,QAE9C,CACL,MAAMC,EAAQ,EAAIhX,EACZ+W,EAAkBh4B,GAAUi4B,EAAOA,EAAO9tC,KAAK4V,yBACrDL,GAAYvV,KAAKs2B,UAAUhB,OAAQ,CAAEoY,UAAWG,IAChDt4B,GAAYvV,KAAKq2B,YAAYf,OAAQ,CAAEoY,UAAWG,IAClDt4B,GAAYvV,KAAKu2B,WAAWjB,OAAQ,CAAEoY,UAAWG,IAOnD,GAJI7tC,KAAKopC,yBAA2BppC,KAAKypC,iBAAmBjvB,EAAQuzB,aAClE/tC,KAAKoqC,4BAGqB,MAAxBpqC,KAAKypC,gBAAyB,CAChC,MAAMuE,EAAsBxzB,EAAQyzB,kBAC9BC,EAAkBF,GAAuBA,EAAsBxzB,EAAQ2zB,aACvEC,GAAmBJ,EAAsBE,GAAmB1zB,EAAQ6zB,iBAQxE94B,GAAYvV,KAAKypC,gBAAiB,CAChC1T,OAAWmY,EAAH,KACRR,UAAW/3B,GAAc,EAAGy4B,EAAiBpuC,KAAK4V,2BAIjD4E,EAAQuzB,aAAe/tC,KAAKqqC,yBAG/BrqC,KAAKs8B,cAAgBt8B,KAAKu8B,0BAA4Bv8B,KAAKsuC,qBAE/DtuC,KAAKuuC,eACL/zB,EAAQg0B,aASVxwC,yBAA0Bu5B,GACxBv3B,KAAKu3B,sBAAwBA,EACzBv3B,KAAK4pC,UAAY5pC,KAAKkb,sBAQ5Bld,UACE,MAAMywC,EAAoBzuC,KAAK0uC,2BAC3B1uC,KAAKirC,cACFjrC,KAAK8pC,YAAc9pC,KAAKkb,sBAE7Blb,KAAKmqC,sBAAsBsE,GAAmB,IAYlDzwC,2BACE,OAAIgC,KAAKirC,aACHjrC,KAAK8pC,aAGP9pC,KAAK8pC,YAAa,EACX9pC,KAAK8pC,YAGV9pC,KAAK8pC,YACP9pC,KAAK8pC,YAAa,GACX,IAEP9pC,KAAK8pC,YAAa,EACX9pC,KAAK8pC,YAelB9rC,sBAAuBywC,EAAmBE,GAAc,GACtD,IAAK3uC,KAAKwa,QAAW,OAErB,MAAMo0B,EAAgB5uC,KAAK0V,MAAMs0B,UACjChqC,KAAK0V,MAAMs0B,UAAY,GAEvB,MAAM6E,EAAa7uC,KAAK81B,QAAU91B,KAAKmiC,aAAeniC,KAAK+1B,SAAW/1B,KAAKqiC,aAE3EriC,KAAK+1B,OAAS/1B,KAAKqiC,aACnBriC,KAAK81B,MAAQ91B,KAAKmiC,YAClB,IAAIjxB,EAAclR,KAAK81B,MAUvB,GARqB,MAAhB91B,KAAKwa,SACRxa,KAAKwa,QAAQsyB,wBAAwB9sC,KAAK+1B,OAAQ/1B,KAAK81B,QAGrD+Y,GAAcJ,GAAqBE,IACrC3uC,KAAKkb,sBAGFlb,KAAKirC,YAEV,GAAI4D,GAAcF,EAAa,CAC7B,GAAI3uC,KAAKspC,iBAAkB,CACzB,MAAMwF,EAAa33B,KAAKC,OAAOC,IAAI,8BAC7B03B,EAAW53B,KAAKC,OAAOC,IAAI,mBAC3B23B,EAAgC73B,KAAKC,OAAOC,IAAI,wCAChDye,EAAQgZ,EAAa9uC,KAAKwa,QAAQ0c,iBAEpC6X,GAAYC,GAAiCF,IAAehZ,EAAS91B,KAAK81B,OAAU91B,KAAK0qC,qBAK3Fl2B,GAAmBtD,UACZlR,KAAKgqC,YALZhqC,KAAKgqC,UAAYlU,EACjB5kB,EAAc4kB,EACdthB,GAAmBshB,SAMrBthB,GAAmBtD,UACZlR,KAAKgqC,UAGdhqC,KAAKsuC,mBAAmBp9B,QAExBlR,KAAK0V,MAAMs0B,UAAY4E,EAI3B5wC,mBAAoBkT,GAClB,MAAM4lB,EAAmB92B,KAAKwa,QAAQuc,sBAChCkY,EAAkBjvC,KAAK+1B,OAAS/1B,KAAKwa,QAAQwc,gBAC7CkY,EAAYlvC,KAAKs8B,cAAgBt8B,KAAKu8B,yBAA2B78B,KAAKwH,IAAIlH,KAAKwa,QAAQ2zB,YAAac,GAAmBA,EACvH3Z,EAASt1B,KAAK+rC,iBAED,MAAf76B,IACFA,EAAcokB,EAAOQ,MAAQgB,GAG3B5lB,IAAgBokB,EAAOQ,OAASoZ,IAAc5Z,EAAOS,SACvD/1B,KAAKmvC,gBACHj+B,EAAc4lB,EACdoY,EAAYpY,GAEV92B,KAAKs8B,cAAgBt8B,KAAKu8B,2BAC5Bv8B,KAAKoT,kBAAoB,KACzBpT,KAAKqT,iBAAmB,OAqB9BrV,eAAesS,EAAEA,EAAC0E,YAAEA,EAAWE,cAAEA,IAC/B,IAAIlV,KAAKwa,QAAQkyB,eACjB,GAAI13B,EACFhV,KAAKovC,uBAAuB9+B,QACvB,GAAI4E,EAAe,CACxBlV,KAAKqvC,yBAAyB/+B,GAC9B,MAAMuyB,IAAEA,EAAG9M,OAAEA,GAAW/1B,KAAKupC,YAAY6C,wBACzCpsC,KAAKksC,UAAU,CAAE57B,EAAGuyB,EAAM9M,EAAS,EAAG/gB,aAAa,EAAOE,eAAe,KAa7ElX,uBAAwBsS,GACtB,MAAMg/B,EAASh/B,EAAItQ,KAAKosC,wBAAwBvJ,IAC1CjwB,EAAMlT,KAAKyH,MAAMmoC,EAAStvC,KAAKwa,QAAQwc,iBAAmBh3B,KAAKwa,QAAQoc,2BAEvErc,EAAava,KAAKwa,QAAQ6c,gBAC1BkY,EAAoBvvC,KAAKwa,QAAQ8c,uBAEjC6M,EAAYvxB,EAAM2H,EAAWi1B,wBAA0BxvC,KAAKwa,QAAQi1B,sBAAwB,EAC5FC,EAAsBH,EAAkBI,+BAA+B,CAAC/8B,EAAK,IAAIiwB,IAAM7iC,KAAKwa,QAAQi1B,sBAAwB,EAMlI,GAJIt4B,KAAKC,OAAOC,IAAI,qCAClBkD,EAAWq1B,wBAAwB,CAACh9B,EAAK,IAGvCuE,KAAKC,OAAOC,IAAI,2BAA4B,CAC9C,MAAMpB,EAAWkB,KAAKC,OAAOC,IAAI,mCAC3Bw4B,EAAoB7vC,KAAKwa,QAAQs1B,kCAEjC/5B,EAAO/V,KAAKwa,QAAQu1B,yBACpB/5B,EAAK05B,EACX,IAAI7/B,EAEJ,GAAIggC,EAAmB,CACrB,MAAMG,EAAchwC,KAAKwa,QAAQ8yB,eAC3B2C,EAAYvwC,KAAKwH,IAAI,EAAGi9B,GAAankC,KAAKwa,QAAQ01B,6BAA+B,IAAMlwC,KAAKwa,QAAQ21B,kBAE1GtgC,EAAO,CAAC9E,EAAKqlC,KACU,OAAjBpwC,KAAKwa,UACTxa,KAAKwa,QAAQ61B,uBAAuBtlC,GAAK,GACzC/K,KAAKwa,QAAQ81B,aAAaN,GAAeC,EAAYD,GAAeI,KAEtEt6B,GAAQ,CAAEC,KAAAA,EAAMC,GAAAA,EAAIC,SAAAA,EAAUpG,KAAAA,SAE9BA,EAAQ9E,IACe,OAAjB/K,KAAKwa,SACTxa,KAAKwa,QAAQ61B,uBAAuBtlC,IAEtC+K,GAAQ,CAAEC,KAAAA,EAAMC,GAAAA,EAAIC,SAAAA,EAAUpG,KAAAA,SAGhC7P,KAAKwa,QAAQ61B,uBAAuBX,GAYxC1xC,yBAA0BsS,GACxB,MAAQuyB,IAAK0N,GAAcvwC,KAAKosC,wBAG1BoE,GAFSlgC,EAAIigC,EAAYvwC,KAAKwa,QAAQizB,4BAA8B,IAElDztC,KAAKwa,QAAQi2B,mBAAqBzwC,KAAKwa,QAAQizB,6BAEvEztC,KAAKwa,QAAQ61B,uBAAuBG,EAAQxwC,KAAKwa,QAAQ01B,6BAU3DlyC,wBACE,MAAM0yC,EAAap1B,OAAOq1B,WAAW,oDAC/BC,EAAgB,KAAQ5wC,KAAKkb,uBAGnC,OAFAw1B,EAAWppB,iBAAiB,SAAUspB,GAE/B,IAAIpzC,eAAW,KACpBkzC,EAAWnpB,oBAAoB,SAAUqpB,MAqB7C5yC,WAAWsS,EAAEA,EAAC0E,YAAEA,EAAWE,cAAEA,IAC3B,IAAKlV,KAAKwa,QAAW,OACrB,IAAKxF,IAAgBE,EAAiB,OAEtC,MAAM5H,EAAU,CACdujC,WAAYvgC,EAAItQ,KAAKupC,YAAY6C,wBAAwBvJ,IACzD0N,UAAWvwC,KAAKosC,wBAAwBvJ,KAKpCiO,EAAoBjoC,GAAM7I,KAAK+wC,KAAKn8B,GAAsB/L,GAAIyE,GAC9D0jC,EAAiB,IAAMhxC,KAAKixC,UAE5BC,EAAoBroC,GAAM7I,KAAK+wC,KAAK57B,GAAsBtM,GAAIyE,GAEpE6Y,SAAS8b,KAAK3a,iBAAiB,YAAawpB,EAAkB,CAAEpU,SAAS,IACzEvW,SAAS8b,KAAK3a,iBAAiB,UAAW0pB,EAAgB,CAAEtU,SAAS,IACrEvW,SAAS8b,KAAK3a,iBAAiB,aAAc0pB,EAAgB,CAAEtU,SAAS,IAExEvW,SAAS8b,KAAK3a,iBAAiB,YAAa4pB,EAAkB,CAAExU,SAAS,IACzEvW,SAAS8b,KAAK3a,iBAAiB,WAAY0pB,EAAgB,CAAEtU,SAAS,IACtEvW,SAAS8b,KAAK3a,iBAAiB,cAAe0pB,EAAgB,CAAEtU,SAAS,IAEzE18B,KAAKipC,iBAAmB,IAAIzrC,eAAW,KACrC2oB,SAAS8b,KAAK1a,oBAAoB,YAAaupB,GAC/C3qB,SAAS8b,KAAK1a,oBAAoB,UAAWypB,GAC7C7qB,SAAS8b,KAAK1a,oBAAoB,aAAcypB,GAEhD7qB,SAAS8b,KAAK1a,oBAAoB,YAAa2pB,GAC/C/qB,SAAS8b,KAAK1a,oBAAoB,WAAYypB,GAC9C7qB,SAAS8b,KAAK1a,oBAAoB,cAAeypB,MAgBrDhzC,MAAMsS,EAAEA,EAAC0E,YAAEA,EAAWE,cAAEA,GAAiB5H,GACvC,IAAKtN,KAAKwa,QAAW,OACrB,IAAKxF,IAAgBE,EAAiB,OACtC,MAEMs7B,GAFSlgC,EAAIhD,EAAQijC,UAAYjjC,EAAQujC,aAEvB7wC,KAAKwa,QAAQi2B,mBAAqBzwC,KAAKwa,QAAQizB,6BAEvEztC,KAAKwa,QAAQ61B,uBAAuBG,EAAQxwC,KAAKwa,QAAQ01B,6BAQ3DlyC,UACOgC,KAAKwa,SACVxa,KAAKipC,iBAAiB1wB,YAIYolB,uDiFnrCvB,MACb3/B,YAAauc,GAAcva,KAAKua,WAAaA,EAE7Cvc,cAAiBgC,KAAKmxC,UAAW,EAEjCnzC,aACEgC,KAAKmxC,UAAW,SACTnxC,KAAKoxC,mBACLpxC,KAAKqxC,sBACLrxC,KAAKsxC,uBACLtxC,KAAKuxC,kBAGdvzC,qBAAsB2e,GACpB,OAAO3c,KAAKua,WAAW8xB,qBAAqB1vB,GAG9C3e,sBAAuB2e,GACrB,OAAO3c,KAAKua,WAAW+xB,sBAAsB3vB,GAG/C3e,YACE,OAAIgC,KAAKmxC,UACFnxC,KAAKoxC,cACRpxC,KAAKoxC,YAAcpxC,KAAKua,WAAW4zB,aAE9BnuC,KAAKoxC,aAEPpxC,KAAKua,WAAW4zB,YAGzBnwC,eACE,OAAIgC,KAAKmxC,UACFnxC,KAAKqxC,iBACRrxC,KAAKqxC,eAAiBrxC,KAAKua,WAAW+yB,gBAEjCttC,KAAKqxC,gBAEPrxC,KAAKua,WAAW+yB,eAGzBtvC,aAAcmmC,GACZ,OAAOnkC,KAAKua,WAAW+1B,aAAanM,GAGtCnmC,gBACE,OAAIgC,KAAKmxC,UACFnxC,KAAKsxC,kBACRtxC,KAAKsxC,gBAAkBtxC,KAAKua,WAAWi3B,iBAElCxxC,KAAKsxC,iBAGPtxC,KAAKua,WAAWi3B,gBAGzBxzC,kBACE,GAA8B,MAA1BgC,KAAKuxC,mBAA6BvxC,KAAKmxC,SACzC,OAAOnxC,KAAKuxC,kBAEd,IAAIE,EAAezxC,KAAKua,WAAWm3B,cAAcvB,kBACjD,MAAMl/B,EAAajR,KAAKua,WAAWi1B,wBAMnC,OAJIxvC,KAAK2xC,gBACPF,GAAgBzxC,KAAKmuC,YAAc,EAAIl9B,GAErCjR,KAAKmxC,WAAYnxC,KAAKuxC,kBAAoBE,GACvCA,EAGTzzC,kBACE,OAAQgC,KAAKua,YAAcva,KAAKua,WAAWq3B,mBCxE/C,IAAIzoC,GAAY,EAQD,MAAM0oC,GASnB7zC,cAAe8zC,EAAsB1xC,GACnC,OAAI3B,MAAMC,QAAQozC,EAAqB1xC,MACjC0xC,EAAqB1xC,KAAK0N,QAAQ1N,IAAS,EAGxCA,IAAS0xC,EAAqB1xC,KAYzCpC,YAAa+zC,EAAQv3B,EAAS/C,GAI5BzX,KAAK+xC,OAASA,EAId/xC,KAAKwa,QAAUA,EAIfxa,KAAKiX,QAAU,IAAIsL,WAInBviB,KAAKkJ,GAjD2BC,KAqDhCnJ,KAAKyX,WAAa,KAClBzX,KAAKgyC,cAAcv6B,GACnBzX,KAAKyX,WAAWvO,GAAKlJ,KAAKkJ,GAI1BlJ,KAAKiyC,WAAY,EAIjBjyC,KAAKkyC,wBAA0BlyC,KAAK+xC,OAAOt0B,cAAa,KACtDzd,KAAKka,aAGPla,KAAKmyC,YAAcJ,EAAOt/B,iBAS5BzU,UACMgC,KAAKiyC,YAETjyC,KAAKkyC,wBAAwB35B,UAC7BvY,KAAKkyC,wBAA0B,KAC/BlyC,KAAKiyC,WAAY,EACjBjyC,KAAKiX,QAAQC,KAAK,eAClBlX,KAAKiX,QAAQsB,WAQfva,cAAiB,OAAOgC,KAAKiyC,UAW7Bj0C,sBAAuB2e,GACrB,OAAO3c,KAAKiX,QAAQ2F,GAAG,wBAAyBD,GAUlD3e,aAAc2e,GACZ,OAAO3c,KAAKiX,QAAQ2F,GAAG,cAAeD,GAQxC3e,QAAW,OAAOgC,KAAKkJ,GAOvBlL,YAAe,OAAOgC,KAAK+xC,OAW3B/zC,OAAQoC,GACN,OAAOyxC,GAAWO,OAAOpyC,KAAKyX,WAAYrX,GAQ5CpC,gBACE,OAAOgC,KAAKyX,WASdzZ,cAAeq0C,GACb,GAAIryC,KAAKiyC,UAAa,OAEtB,MAAMK,EAAgBtyC,KAAKyX,WAC3BzX,KAAKyX,WAAa46B,EAClBryC,KAAKyX,WAAWvO,GAAKlJ,KAAKkJ,GAE1BlJ,KAAKiX,QAAQC,KAAK,wBAAyB,CAAEo7B,cAAAA,EAAeD,cAAAA,KC7JjD,MAAME,GAInBv0C,wBACsB,MAAhBgC,KAAKiX,UAMPjX,KAAKiX,QAAU,IAAIsL,YAQrBviB,KAAKwyC,gBAAkB,IAAIC,IAM3BzyC,KAAK0yC,sBAAwB,IAAID,IAOjCzyC,KAAK2yC,qCAAuC,IAAIF,IAOhDzyC,KAAK4yC,uCAAyC,IAAIH,IAOlDzyC,KAAK6yC,+BAAiC,IAAIJ,IAO1CzyC,KAAK8yC,iCAAmC,IAAIL,IAQ9Cz0C,iBACE,OAAOgC,KAAKwyC,gBAAgBluC,SAe9BtG,mBAAoB2e,GAClB,OAAO3c,KAAKiX,QAAQ2F,GAAG,qBAAsBD,GAe/C3e,sBAAuB2e,GACrB,OAAO3c,KAAKiX,QAAQ2F,GAAG,wBAAyBD,GAkBlD3e,sBAAuB2e,GACrB,OAAO3c,KAAKiX,QAAQ2F,GAAG,wBAAyBD,GAkBlD3e,2BAA4B2e,GAC1B,OAAO3c,KAAKiX,QAAQ2F,GAAG,8BAA+BD,GAaxD3e,sBAAuB2e,GACrB,OAAO3c,KAAKiX,QAAQ2F,GAAG,wBAAyBD,GASlD3e,gBAAiBkL,GACf,OAAOlJ,KAAKwyC,gBAAgBn7B,IAAInO,GAWlClL,6BAA8B+0C,EAAgBC,GAC5C,MAAMN,EAAwB,GACxBO,EAAUjzC,KAAKkzC,YAAY,CAC/BC,yBAA0B,CAACJ,EAAgBC,KAG7C,IAAK,IAAI32C,EAAI,EAAG+N,EAAM6oC,EAAQ32C,OAAY8N,EAAJ/N,EAASA,IAAK,CAClD,MAAM01C,EAASkB,EAAQ52C,GACjBo8B,EAAcz4B,KAAK0yC,sBAAsBr7B,IAAI06B,EAAO7oC,SAEtCvK,IAAhB85B,IACFia,EAAsBX,EAAO7oC,IAAMuvB,GAIvC,OAAOia,EA8BT10C,4BACE,GAA2C,MAAvCgC,KAAKozC,+BACP,OAAOpzC,KAAKozC,+BAGd,MAAM7oC,EAAQ,GAERkuB,EAAcz4B,KAAKwyC,gBAAgBluC,SACzC,IAAK,MAAMgO,KAAcmmB,EAAa,CACpC,MAAM9oB,EAAQ2C,EAAWy/B,OAAOt/B,iBAC1BrS,EAAOkS,EAAW0mB,gBAAgB54B,KAErB,MAAfmK,EAAMnK,KAAiBmK,EAAMnK,GAAQ,IAEzC,IAAK,IAAIwS,EAAMjD,EAAMzD,MAAM0G,IAAKxI,EAAMuF,EAAMgD,IAAIC,IAAYxI,GAAPwI,EAAYA,IACvC,MAApBrI,EAAMnK,GAAMwS,KAAgBrI,EAAMnK,GAAMwS,GAAO,IAEnDrI,EAAMnK,GAAMwS,GAAKzU,KAAKmU,GAU1B,OADAtS,KAAKozC,+BAAiC7oC,EAC/BA,EAMTvM,yCACEgC,KAAKozC,+BAAiC,KA2DxCp1C,eAAgB+zC,EAAQsB,GACtB,GAAIrzC,KAAKiyC,WAAuB,MAAVF,EAAkB,OAExC,MAAM7oC,GAAEA,GAAO6oC,EAEe,cAA1BsB,EAAiBjzC,OACnBizC,EAAiBjzC,KAAO,kBAG1B,MAAMA,KAAEA,EAAIyW,OAAEA,GAAWw8B,EAMzB,GAJc,MAAVx8B,IACFw8B,EAAiBx8B,OA6QvB,MACE,MACMy8B,EADWnwB,QAAQrE,MAAM+J,MAAM,MAAM,GACrBA,MAAM,KAAK,GAAG/gB,QAAQ,IAAK,IAC3CyrC,EAAS7rC,OACbyP,KAAKsC,SAAS+5B,qBAAqBhsC,KAAK,KAAOsrB,gBAAantB,WAAK8tC,MAE7D58B,EAASy8B,EAASxrC,QAAQyrC,EAAI,IAAI1qB,MAAMljB,WAAK8tC,KAAK,GAAG3rC,QAAQ,oBAAqB,IACxF,OAAkC,EAA3B+O,EAAO/I,QAAQnI,WAAK8tC,KAAW58B,OAASlY,GApRjB+0C,IAGE,MAA1BL,EAAiB3Z,OAA2C,MAA1B2Z,EAAiB9+B,MAAe,CACpE,MAAMP,EAAMq/B,EAAiB9+B,MAAMsU,MAAM,KAAKrhB,KAAK,KACnD6rC,EAAiB3Z,MAAQ,aAAa1lB,EAGnChU,KAAK4yC,uCAAuClyC,IAAIwI,IACnDlJ,KAAK4yC,uCAAuC/6B,IAAI3O,EAC9C6oC,EAAOt0B,cAAa,KAClBzd,KAAK2zC,8BAA8B5B,OAIpC/xC,KAAK2yC,qCAAqCjyC,IAAIwI,IACjDlJ,KAAK2yC,qCAAqC96B,IAAI3O,EAC5C6oC,EAAOpF,aAAa1zB,IAClB,MAAMwf,EAAcz4B,KAAK0yC,sBAAsBr7B,IAAInO,GAC7CipC,EAAcJ,EAAOt/B,iBAI3B,GAFAzS,KAAK4zC,8CAEej1C,IAAhB85B,EACF,IAAK,IAAIp8B,EAAI,EAAG+N,EAAMquB,EAAYn8B,OAAY8N,EAAJ/N,EAASA,IAAK,CACtD,MAAMiW,EAAammB,EAAYp8B,GAC/B2D,KAAKiX,QAAQC,KAAK,wBAAyB,CACzC66B,OAAAA,EACAz/B,WAAAA,EACA2G,MAAAA,IAEFjZ,KAAK6zC,sBAAsBvhC,EAAWlS,KAAMkS,GAE5CA,EAAW6/B,YAAcA,EAG7B,IAAI2B,EAAW76B,EAAM86B,sBACjBC,EAAS/6B,EAAMg7B,sBACfC,EAAWj7B,EAAMk7B,sBACjBC,EAASn7B,EAAMo7B,sBAEfP,EAASlhC,IAAMohC,EAAOphC,OACvBkhC,EAAUE,GAAU,CAACA,EAAQF,IAE5BI,EAASthC,IAAMwhC,EAAOxhC,OACvBshC,EAAUE,GAAU,CAACA,EAAQF,IAGhC,MAAMI,EAkPhB,EAA6BR,EAAUE,EAAQE,EAAUE,KACvD,MAAMG,EAAQ,GAcd,OAZIT,EAASU,WAAWN,GACtBK,EAAMp2C,KAAK,CAAC21C,EAAUI,IACbA,EAASM,WAAWV,IAC7BS,EAAMp2C,KAAK,CAAC+1C,EAAUJ,IAGpBE,EAAOQ,WAAWJ,GACpBG,EAAMp2C,KAAK,CAAC61C,EAAQI,IACXA,EAAOI,WAAWR,IAC3BO,EAAMp2C,KAAK,CAACi2C,EAAQJ,IAGfO,GAjQqBE,CAClBX,EAAUE,EACVE,EAAUE,GAGZ,IAAK,IAAI/3C,EAAI,EAAG+N,EAAMkqC,EAAYh4C,OAAY8N,EAAJ/N,EAASA,IAAK,CACtD,MAAO6P,EAAOyG,GAAO2hC,EAAYj4C,GACjC2D,KAAK00C,iBAAiBt0C,EAAM,CAC1B8L,MAAAA,EACAyG,IAAAA,GACC,QAKX,MAAML,EAAa,IAAIu/B,GAAWE,EAAQ/xC,KAAMqzC,GA2BhD,OAzBKrzC,KAAK0yC,sBAAsBhyC,IAAIwI,IAClClJ,KAAK0yC,sBAAsB76B,IAAI3O,EAAI,IAGrClJ,KAAK0yC,sBAAsBr7B,IAAInO,GAAI/K,KAAKmU,GACxCtS,KAAKwyC,gBAAgB36B,IAAIvF,EAAWpJ,GAAIoJ,GAEnCtS,KAAK6yC,+BAA+BnyC,IAAI4R,EAAWpJ,KACtDlJ,KAAK6yC,+BAA+Bh7B,IAAIvF,EAAWpJ,GACjDoJ,EAAWqiC,uBAAuB17B,IAChCjZ,KAAK6zC,sBAAsBzzC,EAAMkS,OAIvCtS,KAAK8yC,iCAAiCj7B,IAAIvF,EAAWpJ,GACnDoJ,EAAWmL,cAAa,KACtBzd,KAAK40C,iBAAiBtiC,OAG1BtS,KAAK6zC,sBAAsBzzC,EAAMkS,GACjCtS,KAAKiX,QAAQC,KAAK,qBAAsB,CACtC66B,OAAAA,EACAz/B,WAAAA,IAGKA,EAWTtU,sBAAuBoC,EAAMkS,GAC3B,GAAItS,KAAK60C,kBAAqB,OAE9B70C,KAAK4zC,yCAEL,MAAMjkC,EAAQ2C,EAAW6/B,YACpBxiC,EAAMzD,OAAUyD,EAAMgD,KAE3B3S,KAAK00C,iBAAiBt0C,EAAMuP,EAAO,GAYrC3R,iBAAkBoC,EAAMuP,EAAOgE,GAC7B,MAAMo/B,EAAiBpjC,EAAMzD,MAAM0G,IAC7BogC,EAAerjC,EAAMgD,IAAIC,IACzBkiC,EAAwB90C,KAAK62B,0BAC7Bke,EAAyB/0C,KAAK42B,2BAEjB,MAAfjjB,IACFA,EAAemhC,EAAwBC,GACxB/B,EAAeD,IAUhC/yC,KAAKiX,QAAQC,KAAK,8BAPE,CAClBhL,MAAO6mC,EACPpgC,IAAKqgC,EACLr/B,YAAAA,EACAvT,KAAAA,IAaJpC,iBAAkBsU,GAChB,GAAkB,MAAdA,EAAsB,OAE1B,MAAMy/B,EAASz/B,EAAWy/B,OAC1B,IAAIiD,EAEJh1C,KAAKwyC,gBAAgBr4B,OAAO7H,EAAWpJ,IAEvC8rC,EAAeh1C,KAAK6yC,+BAA+Bx7B,IAAI/E,EAAWpJ,SAC7CvK,IAAjBq2C,GAA8BA,EAAaz8B,UAE/Cy8B,EAAeh1C,KAAK8yC,iCAAiCz7B,IAAI/E,EAAWpJ,SAC/CvK,IAAjBq2C,GAA8BA,EAAaz8B,UAE/CvY,KAAK6yC,+BAA+B14B,OAAO7H,EAAWpJ,IACtDlJ,KAAK8yC,iCAAiC34B,OAAO7H,EAAWpJ,IAExD,MAAMuvB,EAAcz4B,KAAK0yC,sBAAsBr7B,IAAI06B,EAAO7oC,IAC1D,QAAoBvK,IAAhB85B,EAA6B,OAEjCz4B,KAAK6zC,sBAAsBvhC,EAAW0mB,gBAAgB54B,KAAMkS,GAE5D,MAAMxS,EAAQ24B,EAAY3qB,QAAQwE,GAC9BxS,GAAS,IACX24B,EAAY5kB,OAAO/T,EAAO,GAE1BE,KAAKiX,QAAQC,KAAK,wBAAyB,CACzC66B,OAAAA,EACAz/B,WAAAA,IAGyB,IAAvBmmB,EAAYn8B,QACd0D,KAAKi1C,4BAA4BlD,IAYvC/zC,8BAA+B+zC,GAC7B,GAAc,MAAVA,EAAkB,OAEtB,MAAMtZ,EAAcz4B,KAAK0yC,sBAAsBr7B,IAAI06B,EAAO7oC,IAC1D,QAAoBvK,IAAhB85B,EAAJ,CAEA,IAAK,IAAIp8B,EAAI,EAAG+N,EAAMquB,EAAYn8B,OAAY8N,EAAJ/N,EAASA,IAAK,CACtD,MAAMiW,EAAammB,EAAYp8B,GAE1B2D,KAAKk1C,QAAQL,mBAChB70C,KAAK6zC,sBAAsBvhC,EAAW0mB,gBAAgB54B,KAAMkS,GAE9DtS,KAAKiX,QAAQC,KAAK,wBAAyB,CACzC66B,OAAAA,EACAz/B,WAAAA,IAIJtS,KAAKi1C,4BAA4BlD,IASnC/zC,4BAA6B+zC,GACb,MAAVA,IAEJ/xC,KAAK2yC,qCAAqCt7B,IAAI06B,EAAO7oC,IAAIqP,UACzDvY,KAAK4yC,uCAAuCv7B,IAAI06B,EAAO7oC,IAAIqP,UAE3DvY,KAAK0yC,sBAAsBv4B,OAAO43B,EAAO7oC,IACzClJ,KAAK2yC,qCAAqCx4B,OAAO43B,EAAO7oC,IACxDlJ,KAAK4yC,uCAAuCz4B,OAAO43B,EAAO7oC,KAM5DlL,uBACE,MAAMm3C,EAA6Cn1C,KAAK2yC,qCAAqCruC,SAC7F,IAAK,MAAMgO,KAAc6iC,EACvB7iC,EAAWiG,UAGb,MAAM68B,EAA+Cp1C,KAAK4yC,uCAAuCtuC,SACjG,IAAK,MAAMgO,KAAc8iC,EACvB9iC,EAAWiG,UAGb,MAAM88B,EAAuCr1C,KAAK6yC,+BAA+BvuC,SACjF,IAAK,MAAMgO,KAAc+iC,EACvB/iC,EAAWiG,UAGb,MAAM+8B,EAAyCt1C,KAAK8yC,iCAAiCxuC,SACrF,IAAK,MAAMgO,KAAcgjC,EACvBhjC,EAAWiG,UAGb,MAAMg9B,EAAwBv1C,KAAKwyC,gBAAgBluC,SACnD,IAAK,MAAMgO,KAAcijC,EACvBjjC,EAAW4H,UAGbla,KAAKwyC,gBAAgBlwB,QACrBtiB,KAAK0yC,sBAAsBpwB,QAC3BtiB,KAAK2yC,qCAAqCrwB,QAC1CtiB,KAAK4yC,uCAAuCtwB,QAC5CtiB,KAAK6yC,+BAA+BvwB,QACpCtiB,KAAK8yC,iCAAiCxwB,SC/kB3B,MAAMkzB,GACnBx3C,YAAauc,GACXva,KAAKua,WAAaA,EAClBva,KAAKuvC,kBAAoBp4B,KAAKwD,MAAMC,QAAQ5a,KAAKua,YAGnDvc,cAAiBgC,KAAKmxC,UAAW,EAEjCnzC,aACEgC,KAAKmxC,UAAW,SACTnxC,KAAKoxC,mBACLpxC,KAAKqxC,sBACLrxC,KAAKsxC,uBACLtxC,KAAKuxC,kBAGdvzC,qBAAsB2e,GACpB,OAAO3c,KAAKuvC,kBAAkBlD,qBAAqB1vB,GAGrD3e,sBAAuB2e,GACrB,OAAO3c,KAAKuvC,kBAAkBjD,sBAAsB3vB,GAGtD3e,YACE,OAAIgC,KAAK60C,kBAA4B,EAEjC70C,KAAKmxC,UACFnxC,KAAKoxC,cACRpxC,KAAKoxC,YAAcpxC,KAAKuvC,kBAAkBpB,aAErCnuC,KAAKoxC,aAEPpxC,KAAKuvC,kBAAkBpB,YAGhCnwC,eACE,OAAIgC,KAAK60C,kBAA4B,EAEjC70C,KAAKmxC,UACFnxC,KAAKqxC,iBACRrxC,KAAKqxC,eAAiBrxC,KAAKy1C,oBAEtBz1C,KAAKqxC,gBAEPrxC,KAAKy1C,mBAGdz3C,mBACE,GAAIgC,KAAK60C,kBAAqB,OAAO,EAErC,MAAM1Q,EAAYnkC,KAAKuvC,kBAAkBjC,eACnCr8B,EAAajR,KAAKua,WAAWi1B,wBACnC,IAAI1+B,EAAW9Q,KAAKuvC,kBAAkB3Y,2BAEtC,GAAI8e,OAAO30C,MAAM+P,GAEf,OAAO,EAGT,IAAI6kC,EAAU31C,KAAKuvC,kBAAkBI,+BAA+B,CAAC7+B,EAAU,IAAI+xB,IASnF,OAPI8S,EAAUxR,IACZrzB,GAAY,EACZ6kC,EAAU31C,KAAKuvC,kBAAkBI,+BAA+B,CAAC7+B,EAAU,IAAI+xB,KAGnE/xB,EAAWG,EACVvR,KAAKwH,IAAIi9B,EAAYwR,EAAS1kC,GAI/CjT,aAAcmmC,GACRnkC,KAAK60C,mBAET70C,KAAKuvC,kBAAkBe,aAAanM,GAGtCnmC,gBACE,OAAIgC,KAAK60C,kBAA4B,EAEjC70C,KAAKmxC,UACFnxC,KAAKsxC,kBACRtxC,KAAKsxC,gBAAkBtxC,KAAKuvC,kBAAkBiC,iBAEzCxxC,KAAKsxC,iBAEPtxC,KAAKuvC,kBAAkBiC,gBAGhCxzC,kBACE,GAAIgC,KAAK60C,kBAAqB,OAAO,EAErC,GAA8B,MAA1B70C,KAAKuxC,mBAA6BvxC,KAAKmxC,SACzC,OAAOnxC,KAAKuxC,kBAGd,IAAIE,EACJ,GAAIzxC,KAAKuvC,kBAAkBY,iBAGzB,GAFAsB,EAAezxC,KAAKuvC,kBAAkBY,kBAElCnvC,WAAWmW,KAAKy+B,eAAiB,MAC/B51C,KAAK2xC,cAAe,CACtB,MAAM1gC,EAAajR,KAAKua,WAAWi1B,wBACnCiC,GAAgBzxC,KAAKmuC,YAAc,EAAIl9B,QAM3C,GAFAwgC,EAAezxC,KAAKuvC,kBAAkBsG,kBAAoB71C,KAAKmuC,YAE3DnuC,KAAK2xC,cAAe,CACtB,MAAM1gC,EAAajR,KAAKua,WAAWi1B,wBACnCiC,GAAgBzxC,KAAKmuC,YAAc,EAAIl9B,EAQ3C,OAJIjR,KAAKmxC,WACPnxC,KAAKuxC,kBAAoBE,GAGpBA,EAGTzzC,kBACE,OAAQgC,KAAKua,YACNva,KAAKua,WAAWq3B,gBACf5xC,KAAKuvC,kBAAkBuG,YACvB91C,KAAKuvC,kBAAkBhyB,aACvBvd,KAAKuvC,kBAAkBpoB,YC7HnC,IAAI4uB,GAAc,EAUH,MAAMz8B,GACnBtb,mBAEE,OADA+V,GAAQ/T,KAAMuyC,IACPvyC,KAeThC,YAAamB,EAAU,IACrB,IAAKA,EAAQob,WACX,MAAU4I,MAAM,6CASlBnjB,KAAKua,WAAapb,EAAQob,WAM1Bva,KAAKsd,mBAAgB3e,EAQrBqB,KAAK2d,WAAaxe,EAAQwe,WAO1B3d,KAAK81B,MAAQ32B,EAAQ22B,MAOrB91B,KAAK+1B,OAAS52B,EAAQ42B,OAOtB/1B,KAAKkJ,GAAK6sC,KAOV/1C,KAAKiX,QAAU,IAAIsL,WAOnBviB,KAAKoa,cAAgB,IAAIpD,uBASzBhX,KAAKk1C,QAAU,KAQfl1C,KAAKwQ,WAAa,KAQlBxQ,KAAKg2C,iBAAmB,KAQxBh2C,KAAKuQ,UAAY,KAQjBvQ,KAAKi2C,gBAAkB,KAQvBj2C,KAAKk2C,UAAY,KAQjBl2C,KAAKm2C,gBAAkB,KAQvBn2C,KAAKo2C,yBAA2B,KAQhCp2C,KAAKq2C,+BAAiC,KAStCr2C,KAAKs2C,YAAc,EAOnBt2C,KAAKiyC,WAAY,EAQjBjyC,KAAK2xC,eAAgB,EAQrB3xC,KAAKu2C,oBAAsB,GAS3Bv2C,KAAKw2C,kBAAoB,KAEzBx2C,KAAKy2C,wBAEmD,MAApDt/B,KAAKwD,MAAMC,QAAQ5a,KAAKua,YAAY+yB,aACtCttC,KAAKk1C,QAAU,IAAIM,GAAcx1C,KAAKua,aAGtCpD,KAAK2E,cAAcC,WAAW,oIAE9B/b,KAAKk1C,QAAU,IADOz3C,GACWuC,KAAKua,aAUxCva,KAAKmkC,UAAY,EAEjB,MAAMlJ,EAAOj7B,KAAKoa,cAClB,IAAIs8B,EAAqB12C,KAAK22C,oBAE9B1b,EAAKnjB,IAAI4+B,GAETzb,EAAKnjB,IAAI9X,KAAKua,WAAWq8B,oBAAmB,KAC1C3b,EAAK5Y,OAAOq0B,GACZA,EAAmBn+B,UAEnBm+B,EAAqB12C,KAAK22C,oBAC1B1b,EAAKnjB,IAAI4+B,OAGXzb,EAAKnjB,IAAI9X,KAAKk1C,QAAQ7I,sBAAqB,KACpCrsC,KAAK2d,YAAe3d,KAAK62C,wBAA2B72C,KAAK82C,oBAC5D92C,KAAK82C,mBAAoB,EACzB92C,KAAK+2C,kBACL/2C,KAAKiX,QAAQC,KAAK,wBAAyBlX,MAC3CA,KAAK82C,mBAAoB,GAGvB92C,KAAK62C,yBACP72C,KAAK62C,wBAAyB,OAGlC5b,EAAKnjB,IAAI9X,KAAKk1C,QAAQ5I,uBAAsB,KACrCtsC,KAAK2d,YACR3d,KAAKiX,QAAQC,KAAK,yBAA0BlX,UAIhDi7B,EAAKnjB,IAAI9X,KAAKua,WAAWoyB,aAAax5B,IACpCnT,KAAKg3C,gBAAgB7jC,OAEvB8nB,EAAKnjB,IAAI9X,KAAKua,WAAWkD,cAAa,KAAQzd,KAAKka,cASnD+gB,EAAKnjB,IAAI9X,KAAKua,WAAW08B,eAAc,KACrCj3C,KAAKiX,QAAQC,KAAK,yBAOtBlZ,UACMgC,KAAKiyC,YAET9mC,aAAanL,KAAKw2C,mBAClBx2C,KAAKw2C,kBAAoB,KACzBx2C,KAAKu2C,oBAAsB,GAC3Bv2C,KAAKk3C,uBACLl3C,KAAKoa,cAAc7B,UACnBvY,KAAKoa,cAAgB,KACrBpa,KAAKua,WAAa,KAClBva,KAAKiX,QAAQC,KAAK,eAClBlX,KAAKiX,QAAQsB,UACbvY,KAAKiyC,WAAY,GAQnBj0C,cAAiB,OAAOgC,KAAKiyC,UAS7Bj0C,gBAAiBmV,GACfnT,KAAKu2C,oBAAsBv2C,KAAKu2C,oBAAoBvsC,OAAOmJ,GAGtDnT,KAAKs2C,aACRt2C,KAAKm3C,sBAGFn3C,KAAKw2C,oBAGRx2C,KAAKw2C,kBAAoBnrC,YAAW,KAAQrL,KAAKm3C,wBAAyBn3C,KAAKs2C,cAUnFt4C,eACEmN,aAAanL,KAAKw2C,mBAClBx2C,KAAKw2C,kBAAoB,KACzBx2C,KAAKo3C,YAAYp3C,KAAKu2C,qBACtBv2C,KAAKu2C,oBAAsB,GAS7Bv4C,sBACOgC,KAAKq3C,wBACRr3C,KAAKq3C,sBAAwB3gC,uBAAsB,KACjD1W,KAAKs3C,eACDt3C,KAAKq3C,wBACPE,qBAAqBv3C,KAAKq3C,uBAC1Br3C,KAAKq3C,sBAAwB,UAoBrCr5C,YAAa2e,GACX,OAAO3c,KAAKiX,QAAQ2F,GAAG,aAAcD,GAUvC3e,kBAAmB2e,GACjB,OAAO3c,KAAKiX,QAAQ2F,GAAG,oBAAqBD,GAiB9C3e,qBAAsB2e,GACpB,OAAO3c,KAAKiX,QAAQ2F,GAAG,wBAAyBD,GAalD3e,sBAAuB2e,GACrB,OAAO3c,KAAKiX,QAAQ2F,GAAG,yBAA0BD,GAgBnD3e,sBAAuB2e,GACrB,OAAO3c,KAAKiX,QAAQ2F,GAAG,yBAA0BD,GAcnD3e,aAAc2e,GACZ,OAAO3c,KAAKiX,QAAQ2F,GAAG,cAAeD,GASxC3e,oBACE,MAAMi9B,EAAO,IAAIjkB,uBACXwgC,EAAO,CAAE9d,MAAO15B,KAAKua,WAAWk9B,0BA2CtC,OAzCAxc,EAAKnjB,IAAIX,KAAKC,OAAOW,QAAQ,uBAAwBy/B,GAAO7F,IAC1D3xC,KAAK2xC,cAAgBA,EACrB3xC,KAAKk1C,QAAQvD,cAAgB3xC,KAAK2xC,cAClC3xC,KAAKiX,QAAQC,KAAK,yBAEpB+jB,EAAKnjB,IAAIX,KAAKC,OAAOW,QAAQ,qBAAsBy/B,GAAOxB,IACxDh2C,KAAKg2C,iBAAmBA,EACxBh2C,KAAK+2C,kBACL/2C,KAAKiX,QAAQC,KAAK,yBAEpB+jB,EAAKnjB,IAAIX,KAAKC,OAAOW,QAAQ,oBAAqBy/B,GAAOvB,IACvDj2C,KAAKi2C,gBAAkBA,EACvBj2C,KAAK+2C,kBACL/2C,KAAKiX,QAAQC,KAAK,yBAEpB+jB,EAAKnjB,IAAIX,KAAKC,OAAOW,QAAQ,oBAAqBy/B,GAAOrB,IACvDn2C,KAAKm2C,gBAAkBA,EACvBn2C,KAAK+2C,kBACL/2C,KAAKiX,QAAQC,KAAK,yBAEpB+jB,EAAKnjB,IAAIX,KAAKC,OAAOW,QAAQ,mCAAoCy/B,GAAOE,IACtE13C,KAAK03C,yBAA2BA,EAChC13C,KAAK+2C,sBAEP9b,EAAKnjB,IAAIX,KAAKC,OAAOW,QAAQ,4BAA6By/B,GAAOG,IAC/D33C,KAAK23C,kBAAoBA,MAE3B1c,EAAKnjB,IAAIX,KAAKC,OAAOW,QAAQ,sBAAuBy/B,GAAOlB,IACzDt2C,KAAKs2C,YAAcA,MAGrBrb,EAAKnjB,IAAIX,KAAKC,OAAOW,QACnB,mCACAy/B,GACCI,IACC53C,KAAKq2C,+BAAiCuB,EACtC53C,KAAK+2C,kBACL/2C,KAAKiX,QAAQC,KAAK,yBAIf+jB,EAQTj9B,eAAkB,OAAOgC,KAAK2d,WAU9B3f,cAAe2f,GACTA,IAAe3d,KAAK2d,aACtB3d,KAAK2d,WAAaA,EAClB3d,KAAKiX,QAAQC,KAAK,yBAA0BlX,OAShDhC,gBAAmB,OAAOgC,KAAKua,WAO/Bvc,uBACE,OAAIgC,KAAKsd,gBAETtd,KAAKsd,cAAgBnG,KAAKwD,MAAMC,QAAQ5a,KAAKq3B,kBAFZr3B,KAAKsd,cAWxCtf,4BACE,OAAOgC,KAAKk1C,QAAQ/G,YAAcnuC,KAAK63C,yBAQzC75C,+BACE,OAAOgC,KAAKk1C,QAAQ5H,eAAiBttC,KAAK63C,yBAQ5C75C,gCACE,OAAOgC,KAAKk1C,QAAQ1D,gBAAkBxxC,KAAK83C,2BAY7C95C,4BAA+B,OAAOgC,KAAKk1C,QAAQ/E,kBAOnDnyC,yBAA4B,OAAOgC,KAAKk1C,QAAQ5H,eAOhDtvC,uBAAwBmmC,EAAW0S,GAAyB,GAC1D72C,KAAK62C,uBAAyBA,EAC9B72C,KAAKk1C,QAAQ5E,aAAanM,GAQ5BnmC,0BAA6B,OAAOgC,KAAKk1C,QAAQ1D,gBAOjDxzC,sBAAyB,OAAOgC,KAAKk1C,QAAQ/G,YAY7CnwC,2BACE,OAAOgC,KAAKk1C,QAAQ5H,gBAAkBttC,KAAKkwC,6BAA+B,GAW5ElyC,gCACE,OAAO0B,KAAKwH,IAAI,EAAGlH,KAAK+3C,4BAS1B/5C,YACE,OAAOgC,KAAKua,WAAWwd,qBAAuB/3B,KAAKg3B,gBASrDh5B,WACE,OAAOgC,KAAKua,WAAWy9B,yBAA2Bh4C,KAAKk3B,eAWzDl5B,mBACE,OAAO0B,KAAKwH,IAAIlH,KAAKiuC,kBAAmBjuC,KAAKmuC,aAU/CnwC,kBACE,OAAIgC,KAAK0sC,eACY,MAAf1sC,KAAK+1B,OACA/1B,KAAK+1B,OAEL/1B,KAAKmuC,YAGPnuC,KAAKk1C,QAAQ/G,YASxBnwC,kBACE,OAAO0B,KAAKwH,IAAIlH,KAAKi4C,iBAAkBj4C,KAAKk4C,YAU9Cl6C,iBACE,OAAIgC,KAAK0sC,gBAAgC,MAAd1sC,KAAK81B,MACvB91B,KAAK81B,MAEL91B,KAAKk4C,WAahBl6C,wBAAyB+3B,EAAQD,GAC3B91B,KAAK81B,QAAUA,GAAS91B,KAAK+1B,SAAWA,IAC1C/1B,KAAK+1B,OAASA,EACd/1B,KAAK81B,MAAQA,EACb91B,KAAK+2C,mBAUT/4C,yBACE,OAAOgC,KAAKg3B,gBAAkBh3B,KAAKua,WAAWi1B,wBAShDxxC,2BACE,OAAOgC,KAAKk3B,eAAiBl3B,KAAKua,WAAW49B,sBAQ/Cn6C,gBAAmB,OAAOgC,KAAKi3B,gBAAkBj3B,KAAKo4C,eAOtDp6C,eACE,OAAsB,MAAlBgC,KAAKuQ,UACAvQ,KAAKuQ,UAELvQ,KAAKi2C,gBAYhBj4C,aAAcuS,GACZvQ,KAAKuQ,UAAY7Q,KAAKyH,MAAMoJ,GAC5BvQ,KAAKiX,QAAQC,KAAK,qBAQpBlZ,gBACE,OAAuB,MAAnBgC,KAAKwQ,WACAxQ,KAAKwQ,WAELxQ,KAAKg2C,iBAYhBh4C,cAAewS,GACbxQ,KAAKwQ,WAAa9Q,KAAKyH,MAAMqJ,GAC7BxQ,KAAKiX,QAAQC,KAAK,qBAQpBlZ,eACE,OAAsB,MAAlBgC,KAAKk2C,UACAl2C,KAAKk2C,UAELl2C,KAAKm2C,gBAYhBn4C,aAAck4C,GACZl2C,KAAKk2C,UAAYx2C,KAAKyH,MAAM+uC,GAC5Bl2C,KAAKiX,QAAQC,KAAK,qBAQpBlZ,8BACE,OAAqC,MAAjCgC,KAAKo2C,yBACAp2C,KAAKo2C,yBAELp2C,KAAKq2C,+BAchBr4C,4BAA6Bo4C,GAC3Bp2C,KAAKo2C,yBAA2BA,EAChCp2C,KAAKiX,QAAQC,KAAK,qBAQpBlZ,sBACE,OAAOgC,KAAKq4C,8BACR34C,KAAKyH,MAAM2vB,kBACXA,iBAQN94B,2BACE,OAAO0B,KAAKyH,MAAMnH,KAAKstC,eAAiBttC,KAAKg3B,iBAQ/Ch5B,0BACE,OAAO0B,KAAKoQ,MACT9P,KAAKstC,eAAiBttC,KAAKiuC,mBAAqBjuC,KAAKg3B,iBAS1Dh5B,kCAAqC,OAAOgC,KAAK03C,yBAUjD15C,eACE,OAAOgC,KAAK2d,YAAc3d,KAAK03C,yBAC3B13C,KAAKmkC,UACLnkC,KAAKs4C,yBASXt6C,aAAcmmC,GACZnkC,KAAKmkC,UAAYzkC,KAAKC,IAAI,EAAGD,KAAKwH,IAAIlH,KAAKmwC,kBAAmBhM,KAE1DnkC,KAAK2d,YAAc3d,KAAK03C,2BAC1B13C,KAAKiX,QAAQC,KAAK,wBAAyBlX,MAS/ChC,iBACE,OAAOgC,KAAKstC,eAAiBttC,KAAKmwC,kBASpCnyC,kBACE,GAAIgC,KAAK03C,yBAA0B,CACjC,IACE13C,KAAKswC,aAAatwC,KAAKs4C,0BACvB,MAAOx2B,IAGT9hB,KAAKiX,QAAQC,KAAK,wBAAyBlX,OAS/ChC,yBACE,OAAO0B,KAAK64C,IACVv4C,KAAKw4C,gCAAkCx4C,KAAKmwC,mBAShDnyC,kBACE,OAAO0B,KAAKC,IAAI,EAAGK,KAAKmuC,YAAcnuC,KAAKiuC,mBAQ7CjwC,YAAe,OAAOgC,KAAKmwC,kBAAoB,EAS/CnyC,aAAcib,GACZ,GAAIjZ,KAAK8vC,kCAAmC,CAG1C,GAFA72B,EAAMgQ,mBAEDjpB,KAAK+tC,YAAe,OAEzB,MAAM0K,YAAEA,GAAgBx/B,EAElBy/B,EADoB14C,KAAKstC,eACc5tC,KAAK8tC,MAAMiL,EAAcz4C,KAAK23C,mBAE3E1+B,EAAMojB,iBACNr8B,KAAKswC,aAAaoI,IAStB16C,UAAWkL,GAAM,OAAOlJ,KAAKua,WAAW/H,UAAUtJ,GAOlDlL,YAAa26C,GACX,IACE,OAAO34C,KAAKua,WAAW24B,YAAYyF,GACnC,MAAO5zB,GACP,MAAO,IASX/mB,gBAAiB2R,GAAS,OAAO3P,KAAKua,WAAWq+B,gBAAgBjpC,GAQjE3R,YAAamV,GAAWnT,KAAKiX,QAAQC,KAAK,aAAc/D,GAQxDnV,cAAiBgC,KAAKk1C,QAAQjI,cAO9BjvC,aAAgBgC,KAAKk1C,QAAQ1G,aAE7BxwC,kBAAqBgC,KAAKk1C,QAAQL,mBAGpCv7B,GAAQqkB,o9IpFvgCK7mB,GAAU,GAOjBC,GAAuB,GAQvBmC,GAAkB,GqFlCT,MAAM2/B,GACnB76C,cAKEgC,KAAK84C,eAAiB,IAAIrG,IAK1BzyC,KAAK+4C,eAAYp6C,EAGjBqB,KAAKg5C,gBAAar6C,EAyBpBX,qBAAsBiU,EAAQjM,EAAUgzC,EAAYC,GAClD,IAAKhnC,EAAO3V,OAAU,MAAO,GAC7B,MAAMO,EAAMoV,EAAOzK,KAAK,KACxB,IAAI0xC,EAAal5C,KAAK84C,eAAezhC,IAAIxa,GAEzC,QAAmB8B,IAAfu6C,GACF,GAAID,EAAc,CAChB,MAAM35C,EAAQ45C,EAAWlzC,GACzB,QAAcrH,IAAVW,EAEF,OAAOA,QAKX45C,EAAa,GAGfl5C,KAAKm5C,yBAAyBH,GAE9B,IAAIhyB,EAAShnB,KAAK+4C,UAClB,IAAK,IAAI18C,EAAI,EAAG+N,EAAM6H,EAAO3V,OAAY8N,EAAJ/N,EAASA,IAAK,CACjD,MAAMq9B,EAAQznB,EAAO5V,GACfuqB,EAAOT,SAASkH,cAAc,QACpCzG,EAAKrjB,UAAYm2B,EAAM5xB,QAAQsxC,GAAW,KAC1CpyB,EAAO6O,YAAYjP,GACnBI,EAASJ,EAGX,MAAMlR,EAAQ4F,OAAOknB,iBAAiBxb,GACtC,IAAI1nB,EAAQoW,EAAM2jC,iBAAiBrzC,GAGnC,MAAMuH,EAASmI,EAAM2jC,iBAAiB,kBAWtC,OAVI9rC,EAAOO,QAAQ,eAAiB,IAClCxO,EA0EN,SAAoBA,EAAOiO,GACzB,MAAMhG,EAAQjI,EAAMiI,MAbG,oDAcvB,MAAS+xC,EAAGC,EAAGp2C,GAAKD,GAAKqE,IAElBiyC,GAAOjsC,EAAOhG,MAfL,0BAoBhB,OAHE+xC,EAAGC,EAAGp2C,EAAGD,EAAGs2C,GAAO,CAACF,EAAGC,EAAGp2C,EAAGD,EAAGs2C,GAAKnyC,IAAIquC,SACzC4D,EAAGC,EAAGp2C,GAoBV,EAAiBm2C,EAAGC,EAAGp2C,EAAGs2C,KA2BxB,SAASC,EAAOC,GACd,OAAOj6C,KAAKoQ,KAAKpQ,KAAKC,IAAI,EAAGD,KAAKwH,IAAI,IAAKyyC,KA3B7C,MAAMC,EAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAClCC,EAAO,MACPC,EAAO,MACPC,EAAO,MAIPxjC,EAAM7W,KAAK6W,IAAIkjC,EAAQ/5C,KAAK8W,GAAK,KACjCwjC,EAAMt6C,KAAKs6C,IAAIP,EAAQ/5C,KAAK8W,GAAK,KAYvC,OAVAojC,EAAO,GAAKC,EAAO,MAAatjC,EAAOsjC,EAAOG,EAC9CJ,EAAO,GAAKE,EAAQA,EAAOvjC,EAAQujC,EAAOE,EAC1CJ,EAAO,GAAKG,EAAQA,EAAOxjC,EAAO,MAAayjC,EAC/CJ,EAAO,GAAKC,EAAQA,EAAOtjC,EATR,KAS4ByjC,EAC/CJ,EAAO,GAAKE,GAAQ,EAAIA,GAAQvjC,EATb,IASgCyjC,EACnDJ,EAAO,GAAKG,EAAQA,EAAOxjC,EATR,KAS6ByjC,EAChDJ,EAAO,GAAKC,EAAQA,EAAOtjC,EAAQ,MAAayjC,EAChDJ,EAAO,GAAKE,EAAQA,EAAOvjC,EAAOujC,EAAOE,EACzCJ,EAAO,GAAKG,EAAO,MAAaxjC,EAAMwjC,EAAOC,EAEtC,CACLN,EAAME,EAAO,GAAKN,EAAIM,EAAO,GAAKL,EAAIK,EAAO,GAAKz2C,GAClDu2C,EAAME,EAAO,GAAKN,EAAIM,EAAO,GAAKL,EAAIK,EAAO,GAAKz2C,GAClDu2C,EAAME,EAAO,GAAKN,EAAIM,EAAO,GAAKL,EAAIK,EAAO,GAAKz2C,KA5CvC82C,CAAOX,EAAGC,EAAGp2C,EAAGq2C,GAEzBz4C,MAAMmC,GACD,OAAOo2C,MAAMC,MAAMp2C,KAEnB,QAAQm2C,MAAMC,MAAMp2C,MAAMD,KAtFvBg3C,CAAU56C,EAAOiO,IAGb,KAAVjO,IACF45C,EAAWlzC,GAAY1G,EACvBU,KAAK84C,eAAejhC,IAAIhb,EAAKq8C,IAG/Bl5C,KAAK+4C,UAAUzuB,UAAY,GACpBhrB,EAUTtB,yBAA0Bg7C,GACpBh5C,KAAKg5C,aAAeA,QAAiCr6C,IAAnBqB,KAAK+4C,YACzC/4C,KAAK+4C,UAAY5yB,SAASkH,cAAc,QACxCrtB,KAAK+4C,UAAUrjC,MAAMykC,WAAa,SAGlCnB,EAAWnjB,YAAY71B,KAAK+4C,WAC5B/4C,KAAKg5C,WAAaA,GAQtBh7C,2BACEgC,KAAK84C,eAAex2B,SA0BxB,MAAM82B,GAAY,OpFtHlB,IAAIr/B,IAAS,EAOTC,IAAU,EAQVC,GAAkB,KAOlBG,GAAgB,KAOhBggC,GAA0B,KAQlB,MAACnjC,GAAU,IAAIsL,WAMhBvH,wBAAkB,KAuT7B,MAAMq/B,GAAmB,CACvBjhC,oBAAAA,GACA5B,gBAAAA,GACAkF,cAAAA,GACAG,gBAAAA,GACAC,mBAAAA,GACAC,eAAAA,GACAC,kBAAAA,GACAC,oBAAAA,GACAC,sBAAAA,GACAC,uBAAAA,GACAC,aAAAA,GACAC,wBAAAA,GACA5C,iBAAAA,GACAiD,2BAAAA,GACAE,iBAAAA,GACAE,gBAAAA,GACAlH,eAAgB0jC,GAChBhiC,iBAAkBiiC,GAClBniC,uBAAwBoiC,GACxB9hC,qBAAsB+hC,GACtBzhC,eAAgB0hC,GAChB9hC,iBAAkB+hC,GAClBxhC,gBAAiByhC,wCAzUZ,KACD7gC,KAEJqgC,GAA0BjjC,KAAKgB,SAASL,IAAI,iBAAkB,CAC5D9Z,mBACE6b,MAEF7b,8CACQse,GAAe,WAEvBte,kDACQse,GAAe,eAEvBte,6CACQse,GAAe,YAIzBrC,GAAkB,IAAIw4B,IACtBz3B,wBAAkB,IAAI69B,GAEtBz+B,GAAgB,IAAIpD,uBACpB+C,IAAS,EAEL5C,KAAKC,OAAOC,IAAI,uBAAyBwC,+HAoBxC,KACAE,KAEL0gC,KAEIxgC,IACFA,GAAgBlb,SAAQ,CAACO,EAAOzC,KAC9ByC,EAAM4a,UACND,GAAgBE,OAAOtd,MAI3Bud,GAAc7B,UACd6B,GAAgB,KAChBggC,GAAwB7hC,UACxB6hC,GAA0B,KAC1BngC,QAAkBtb,EAClBqc,wBAAgBC,2BAChBjB,IAAU,EACVD,IAAS,umBAkRJ,IAA6CsgC"}