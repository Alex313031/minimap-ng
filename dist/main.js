function e(e){return e&&e.__esModule?e.default:e}function t(e){Object.defineProperty(e,"__esModule",{value:!0})}function i(e,t,i){Object.defineProperty(e,t,{get:i,enumerable:!0})}function n(e,t){return Object.keys(t).forEach((i=>{"default"!==i&&"__esModule"!==i&&Object.defineProperty(e,i,{enumerable:!0,get:()=>t[i]})})),e}function r(e,t){for(var i=0;t.length>i;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}function s(){return Sr||(Sr=!0,In={},In=function(){function e(t){((e,t)=>{if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")})(0,e),this.disposed=!1,this.disposalAction=t}return o(e,null,[{key:"isDisposable",value:e=>"function"==typeof(null!=e?e.dispose:void 0)}]),o(e,[{key:"dispose",value(){this.disposed||(this.disposed=!0,"function"==typeof this.disposalAction&&this.disposalAction(),this.disposalAction=null)}}]),e}()),In}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var i=0;t.length>i;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){if(null==Fn&&(Fn=s()),!Fn.isDisposable(e))throw new TypeError("Arguments to CompositeDisposable.add must have a .dispose() method")}function d(){return wr||(wr=!0,Hn={},Hn=function(){function e(){a(this,e),this.disposed=!1,this.disposables=new Set;var t=!0,i=!1,n=void 0;try{for(var r,o=arguments[Symbol.iterator]();!(t=(r=o.next()).done);t=!0)this.add(r.value)}catch(e){i=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(i)throw n}}}var t;return(t=[{key:"dispose",value(){this.disposed||(this.disposed=!0,this.disposables.forEach((e=>e.dispose())),this.disposables=null)}},{key:"add",value(){if(!this.disposed){var e=!0,t=!1,i=void 0;try{for(var n,r=arguments[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;c(o),this.disposables.add(o)}}catch(e){t=!0,i=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw i}}}}},{key:"remove",value(e){this.disposed||this.disposables.delete(e)}},{key:"delete",value(e){this.remove(e)}},{key:"clear",value(){this.disposed||this.disposables.clear()}}])&&l(e.prototype,t),e}()),Hn}function h(e,t){for(var i=0;t.length>i;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e}function p(){qn={},xr||(xr=!0,Nn={},jn=s(),Wn=d(),(Bn=function(){function e(){((e,t)=>{if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")})(0,e),this.disposed=!1,this.clear()}return u(e,null,[{key:"onEventHandlerException",value(e){var t=this;return 0===this.exceptionHandlers.length&&(this.dispatch=this.exceptionHandlingDispatch),this.exceptionHandlers.push(e),new jn((()=>{if(t.exceptionHandlers.splice(t.exceptionHandlers.indexOf(e),1),0===t.exceptionHandlers.length)return t.dispatch=t.simpleDispatch}))}},{key:"simpleDispatch",value:(e,t)=>e(t)},{key:"exceptionHandlingDispatch",value(e,t){try{return e(t)}catch(e){return this.exceptionHandlers.map((t=>t(e)))}}}]),u(e,[{key:"clear",value(){null!=this.subscriptions&&this.subscriptions.dispose(),this.subscriptions=new Wn,this.handlersByEventName={}}},{key:"dispose",value(){this.subscriptions.dispose(),this.handlersByEventName=null,this.disposed=!0}},{key:"on",value(e,t,i){var n=this;if(null==i&&(i=!1),this.disposed)throw Error("Emitter has been disposed");if("function"!=typeof t)throw Error("Handler must be a function");this.handlersByEventName[e]?i?this.handlersByEventName[e].unshift(t):this.handlersByEventName[e].push(t):this.handlersByEventName[e]=[t];var r=new jn((()=>(n.subscriptions.remove(r),n.off(e,t))));return this.subscriptions.add(r),r}},{key:"once",value(e,t,i){null==i&&(i=!1);var n=this.on(e,(e=>(n.dispose(),t(e))),i);return n}},{key:"preempt",value(e,t){return this.on(e,t,!0)}},{key:"off",value(e,t){if(!this.disposed){var i=this.handlersByEventName[e];if(i){var n=i.indexOf(t);0>n||i.splice(n,1),0===i.length&&delete this.handlersByEventName[e]}}}},{key:"emit",value(e,t){var i=this.handlersByEventName&&this.handlersByEventName[e];if(i)for(var n=i.slice(),r=0;n.length>r;r++)this.constructor.dispatch(n[r],t)}},{key:"emitAsync",value(e,t){var i=this,n=this.handlersByEventName&&this.handlersByEventName[e];if(n){var r=n.map((e=>i.constructor.dispatch(e,t)));return Promise.all(r).then((()=>{}))}return Promise.resolve()}},{key:"getEventNames",value(){return Object.keys(this.handlersByEventName)}},{key:"listenerCountForEventName",value(e){var t=this.handlersByEventName[e];return null==t?0:t.length}},{key:"getTotalListenerCount",value(){for(var e=0,t=Object.keys(this.handlersByEventName),i=0;t.length>i;i++)e+=this.handlersByEventName[t[i]].length;return e}}]),e}()).dispatch=Bn.simpleDispatch,Bn.exceptionHandlers=[],Nn=Bn),qn.Emitter=Nn,zn=s(),qn.Disposable=zn,Un=d(),qn.CompositeDisposable=Un}function f(){var e,t,i,n;Vn={},br||(br=!0,Rn={},Rn=function(){function e(e,t,i){this.message=e,this.fileName=t,this.lineNumber=i,this.callCount=0,this.stackCount=0,this.stacks={},this.stackCallCounts={}}return e.getFunctionNameFromCallsite=e=>{},e.deserialize=t=>{var i,n,r,o,s;for(r=t.stacks,i=new e(t.message,t.fileName,t.lineNumber),o=0,s=r.length;s>o;o++)i.addStack(n=r[o],n.metadata);return i},e.prototype.getFunctionNameFromCallsite=e=>{var t,i,n;return null!=e.functionName?e.functionName:e.isToplevel()?null!=(t=e.getFunctionName())?t:"<unknown>":e.isConstructor()?"new "+e.getFunctionName():e.getMethodName()&&!e.getFunctionName()?e.getMethodName():e.getTypeName()+"."+(null!=(i=null!=(n=e.getMethodName())?n:e.getFunctionName())?i:"<anonymous>")},e.prototype.getLocationFromCallsite=function(e){return null==e?"unknown":null!=e.location?e.location:e.isNative()?"native":e.isEval()?"eval at "+this.getLocationFromCallsite(e.getEvalOrigin()):e.getFileName()+":"+e.getLineNumber()+":"+e.getColumnNumber()},e.prototype.getFileNameFromCallSite=e=>{var t;return null!=(t=e.fileName)?t:e.getFileName()},e.prototype.getOriginName=function(){return this.originName},e.prototype.getMessage=function(){return this.message},e.prototype.getStacks=function(){var e,t,i,n,r;for(e in i=[],r=this.stacks)(t=this.parseStack(n=r[e])).callCount=this.stackCallCounts[e],t.metadata=n.metadata,i.push(t);return i},e.prototype.getStackCount=function(){return this.stackCount},e.prototype.getCallCount=function(){return this.callCount},e.prototype.addStack=function(e,t){var i,n,r;return null==this.originName&&(this.originName=this.getFunctionNameFromCallsite(e[0])),null==this.fileName&&(this.fileName=this.getFileNameFromCallSite(e[0])),null==this.lineNumber&&(this.lineNumber="function"==typeof(n=e[0]).getLineNumber?n.getLineNumber():void 0),this.callCount++,e.metadata=t,i=this.getLocationFromCallsite(e[1]),null==this.stacks[i]&&(this.stacks[i]=e,this.stackCount++),null==(r=this.stackCallCounts)[i]&&(r[i]=0),this.stackCallCounts[i]++},e.prototype.parseStack=function(e){return e.map((t=this,e=>({functionName:t.getFunctionNameFromCallsite(e),location:t.getLocationFromCallsite(e),fileName:t.getFileNameFromCallSite(e)})));var t},e.prototype.serialize=function(){return{message:this.getMessage(),lineNumber:this.lineNumber,fileName:this.fileName,stacks:this.getStacks()}},e}()),e=Rn,null==mr.__grim__&&(t=(Cr||(Cr=!0,p()),qn).Emitter,n=mr.__grim__={deprecations:{},emitter:new t,includeDeprecatedAPIs:!0,getDeprecations(){var e,t,i,r,o,s,a;for(r in e=[],a=n.deprecations)for(o in t=a[r])for(s in i=t[o])e.push(i[s]);return e},getDeprecationsLength(){return this.getDeprecations().length},clearDeprecations(){n.deprecations={}},logDeprecations(){var e,t,i,n;for((t=this.getDeprecations()).sort(((e,t)=>t.getCallCount()-e.getCallCount())),console.warn("\nCalls to deprecated functions\n-----------------------------"),i=0,n=t.length;n>i;i++)console.warn("("+(e=t[i]).getCallCount()+") "+e.getOriginName()+" : "+e.getMessage(),e)},deprecate(t,r){var o,s,a,l,c,d,h,u,p,f,g,m,v;d=Error.stackTraceLimit;try{Error.stackTraceLimit=7,u=(u=null!=(m="function"==typeof(a=Error()).getRawStack?a.getRawStack():void 0)?m:i(a)).slice(1)}finally{Error.stackTraceLimit=d}l=(s=u[0]).getFileName(),c=s.getLineNumber(),h=null!=(v=null!=r?r.packageName:void 0)?v:"",null==(p=n.deprecations)[l]&&(p[l]={}),null==(f=n.deprecations[l])[c]&&(f[c]={}),null==(g=n.deprecations[l][c])[h]&&(g[h]=new e(t)),(o=n.deprecations[l][c][h]).addStack(u,r),n.emitter.emit("updated",o)},addSerializedDeprecation(t){var i,r,o,s,a,l,c,d,h,u,p,f,g,m,v;for(s=(i=e.deserialize(t)).getMessage(),r=i.fileName,o=i.lineNumber,a=null!=(g=null!=(m=(c=i.getStacks())[0])&&null!=(v=m.metadata)?v.packageName:void 0)?g:"",null==(d=n.deprecations)[r]&&(d[r]={}),null==(h=n.deprecations[r])[o]&&(h[o]={}),null==(u=n.deprecations[r][o])[a]&&(u[a]=new e(s,r,o)),i=n.deprecations[r][o][a],p=0,f=c.length;f>p;p++)i.addStack(l=c[p],l.metadata);n.emitter.emit("updated",i)},on(e,t){return n.emitter.on(e,t)}}),i=e=>{var t,n;return t=Error.prepareStackTrace,Error.prepareStackTrace=(e,t)=>t,Error.captureStackTrace(e,i),n=e.stack,Error.prepareStackTrace=t,n},Vn=mr.__grim__}function g(){return Mr||(Mr=!0,Qn={},function(){var e,t,i,n;for(n in Qn=i=function(){function i(){"function"==typeof this.extended&&this.extended()}return i.includeInto=function(t){var i,n,r;for(i in this.extend(t.prototype),this)n=this[i],-1===e.indexOf(i)&&(t.hasOwnProperty(i)||(t[i]=n));return null!=(r=this.included)?r.call(t):void 0},i.extend=function(e){var i,n,r,o,s;for(n=0,r=(o=Object.getOwnPropertyNames(this.prototype)).length;r>n;n++)-1===t.indexOf(i=o[n])&&(e.hasOwnProperty(i)||(e[i]=this.prototype[i]));return null!=(s=this.prototype.extended)?s.call(e):void 0},i}(),e=["__super__"],i)e.push(n);t=["constructor","extended"]}()),Qn}function m(){var e;return Dr||(Dr=!0,Kn={},e=g(),Kn=class t extends e{static parents(e,t="*"){var i;return i=[],this.eachParent(e,(e=>{if("function"==typeof e.matches?e.matches(t):void 0)return i.push(e)})),i}static eachParent(e,t){var i,n;for(null!=(i=e.parentNode)&&t(i),n=[];i=i.parentNode;)n.push(null!=i?t(i):void 0);return n}parents(e="*"){return t.parents(this,e)}queryParentSelectorAll(e){if(null==e)throw Error("::queryParentSelectorAll requires a valid selector as argument");return this.parents(e)}queryParentSelector(e){if(null==e)throw Error("::queryParentSelector requires a valid selector as argument");return this.queryParentSelectorAll(e)[0]}eachParent(e){return t.eachParent(this,e)}}),Kn}function v(){var e,t;return kr||(kr=!0,Yn={},t=g(),({Disposable:e}=ur),Yn=class extends t{addDisposableEventListener(t,i,n,r){return t.addEventListener(i,n,r),new e((()=>t.removeEventListener(i,n)))}}),Yn}function y(){var e={},t=0,i=0,n=0;return{add(r,o){o||(o=r,r=0),r>i?i=r:n>r&&(n=r),e[r]||(e[r]=[]),e[r].push(o),t++},process(){for(var t=n;i>=t;t++)for(var r=e[t],o=0;r.length>o;o++)(0,r[o])()},size:()=>t}}function b(e){return e._erd}function S(e){return Array.isArray(e)||void 0!==e.length}function w(e){if(Array.isArray(e))return e;var t=[];return Hr(e,(e=>{t.push(e)})),t}function x(e){return e&&1===e.nodeType}function C(e,t,i){var n=e[t];return null==n&&void 0!==i?i:n}function E(){return hc||(hc=!0,$r="1.11.0",i(Vr={},"VERSION",(()=>$r)),Qr="object"==typeof self&&self.self===self&&self||"object"==typeof mr&&mr.global===mr&&mr||Function("","return this")()||{},i(Vr,"root",(()=>Qr)),Kr=Array.prototype,Yr=Object.prototype,i(Vr,"ObjProto",(()=>Yr)),i(Vr,"ArrayProto",(()=>Kr)),Zr="undefined"!=typeof Symbol?Symbol.prototype:null,i(Vr,"SymbolProto",(()=>Zr)),Gr=Kr.push,Xr=Kr.slice,Jr=Yr.toString,eo=Yr.hasOwnProperty,i(Vr,"hasOwnProperty",(()=>eo)),i(Vr,"toString",(()=>Jr)),i(Vr,"slice",(()=>Xr)),i(Vr,"push",(()=>Gr)),to="undefined"!=typeof ArrayBuffer,i(Vr,"supportsArrayBuffer",(()=>to)),io=Array.isArray,no=Object.keys,ro=Object.create,oo=to&&ArrayBuffer.isView,i(Vr,"nativeIsView",(()=>oo)),i(Vr,"nativeCreate",(()=>ro)),i(Vr,"nativeKeys",(()=>no)),i(Vr,"nativeIsArray",(()=>io)),so=isNaN,ao=isFinite,i(Vr,"_isFinite",(()=>ao)),i(Vr,"_isNaN",(()=>so)),lo=!{toString:null}.propertyIsEnumerable("toString"),i(Vr,"hasEnumBug",(()=>lo)),co=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],i(Vr,"nonEnumerableProps",(()=>co)),ho=9007199254740991,i(Vr,"MAX_ARRAY_INDEX",(()=>ho))),Vr}function T(e,t){return t=null==t?e.length-1:+t,function(){for(var i=Math.max(arguments.length-t,0),n=Array(i),r=0;i>r;r++)n[r]=arguments[r+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var o=Array(t+1);for(r=0;t>r;r++)o[r]=arguments[r];return o[t]=n,e.apply(this,o)}}function M(){return uc||(uc=!0,i(uo={},"default",(()=>T))),uo}function D(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function k(){return pc||(pc=!0,i(po={},"default",(()=>D))),po}function L(e){return null===e}function A(e){return void 0===e}function O(e){return!0===e||!1===e||"[object Boolean]"===Jr.call(e)}function _(){return mc||(mc=!0,fo={},E(),i(fo,"default",(()=>O))),fo}function P(e){return!(!e||1!==e.nodeType)}function R(e){return t=>Jr.call(t)==="[object "+e+"]"}function I(){return yc||(yc=!0,go={},E(),i(go,"default",(()=>R))),go}function H(){return bc||(bc=!0,mo={},I(),vo=R("String"),i(mo,"default",(()=>vo))),mo}function F(){return Sc||(Sc=!0,yo={},I(),bo=R("Number"),i(yo,"default",(()=>bo))),yo}function N(){return Ec||(Ec=!0,Mo={},I(),Do=R("Symbol"),i(Mo,"default",(()=>Do))),Mo}function j(){return Ac||(Ac=!0,No={},I(),jo=R("DataView"),i(No,"default",(()=>jo))),No}function W(){return Oc||(Oc=!0,Wo={},E(),I(),Bo=io||R("Array"),i(Wo,"default",(()=>Bo))),Wo}function B(){return _c||(_c=!0,qo={},I(),E(),zo=R("Function"),Uo=Qr.document&&Qr.document.childNodes,"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof Uo&&(zo=e=>"function"==typeof e||!1),Vo=zo,i(qo,"default",(()=>Vo))),qo}function q(e,t){return null!=e&&eo.call(e,t)}function z(){return Pc||(Pc=!0,$o={},E(),i($o,"default",(()=>q))),$o}function U(){return Rc||(Rc=!0,Qo={},I(),z(),Ko=R("Arguments"),function(){Ko(arguments)||(Ko=e=>q(e,"callee"))}(),Yo=Ko,i(Qo,"default",(()=>Yo))),Qo}function V(e){return!Do(e)&&ao(e)&&!isNaN(parseFloat(e))}function $(e){return bo(e)&&so(e)}function Q(){return Hc||(Hc=!0,Go={},E(),F(),i(Go,"default",(()=>$))),Go}function K(e){return()=>e}function Y(){return Fc||(Fc=!0,i(Xo={},"default",(()=>K))),Xo}function Z(e){return t=>{var i=e(t);return"number"==typeof i&&i>=0&&ho>=i}}function G(){return Nc||(Nc=!0,Jo={},E(),i(Jo,"default",(()=>Z))),Jo}function X(e){return t=>null==t?void 0:t[e]}function J(){return jc||(jc=!0,i(es={},"default",(()=>X))),es}function ee(){return Wc||(Wc=!0,ts={},J(),is=X("byteLength"),i(ts,"default",(()=>is))),ts}function te(e){return oo?oo(e)&&!jo(e):rs(e)&&ss.test(Jr.call(e))}function ie(){return qc||(qc=!0,os={},E(),j(),Y(),Bc||(Bc=!0,ns={},G(),ee(),rs=Z(is),i(ns,"default",(()=>rs))),ss=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,as=to?te:K(!1),i(os,"default",(()=>as))),os}function ne(){return zc||(zc=!0,ls={},J(),cs=X("length"),i(ls,"default",(()=>cs))),ls}function re(){return Uc||(Uc=!0,ds={},G(),ne(),hs=Z(cs),i(ds,"default",(()=>hs))),ds}function oe(e,t){t=(e=>{for(var t={},i=e.length,n=0;i>n;++n)t[e[n]]=!0;return{contains(e){return t[e]},push(i){return t[i]=!0,e.push(i)}}})(t);var i=co.length,n=e.constructor,r=Vo(n)&&n.prototype||Yr,o="constructor";for(q(e,o)&&!t.contains(o)&&t.push(o);i--;)(o=co[i])in e&&e[o]!==r[o]&&!t.contains(o)&&t.push(o)}function se(){return Vc||(Vc=!0,us={},E(),B(),z(),i(us,"default",(()=>oe))),us}function ae(e){if(!D(e))return[];if(no)return no(e);var t=[];for(var i in e)q(e,i)&&t.push(i);return lo&&oe(e,t),t}function le(){return $c||($c=!0,ps={},k(),E(),z(),se(),i(ps,"default",(()=>ae))),ps}function ce(e){return null==e||(hs(e)&&(Bo(e)||vo(e)||Yo(e))?0===e.length:0===ae(e).length)}function de(e,t){var i=ae(t),n=i.length;if(null==e)return!n;for(var r=Object(e),o=0;n>o;o++){var s=i[o];if(t[s]!==r[s]||!(s in r))return!1}return!0}function he(){return Kc||(Kc=!0,gs={},le(),i(gs,"default",(()=>de))),gs}function ue(e){return e instanceof ue?e:this instanceof ue?void(this._wrapped=e):new ue(e)}function pe(){return Yc||(Yc=!0,ms={},E(),i(ms,"default",(()=>ue)),ue.VERSION=$r,ue.prototype.valueOf=ue.prototype.toJSON=ue.prototype.value=function(){return this._wrapped},ue.prototype.toString=function(){return this._wrapped+""}),ms}function fe(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;return("function"===r||"object"===r||"object"==typeof t)&&ge(e,t,i,n)}function ge(e,t,i,n){e instanceof ue&&(e=e._wrapped),t instanceof ue&&(t=t._wrapped);var r=Jr.call(e);if(r!==Jr.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return Zr.valueOf.call(e)===Zr.valueOf.call(t);case"[object ArrayBuffer]":return ge(new DataView(e),new DataView(t),i,n);case"[object DataView]":var o=is(e);if(o!==is(t))return!1;for(;o--;)if(e.getUint8(o)!==t.getUint8(o))return!1;return!0}if(as(e))return ge(new DataView(e.buffer),new DataView(t.buffer),i,n);var s="[object Array]"===r;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,l=t.constructor;if(a!==l&&!(Vo(a)&&a instanceof a&&Vo(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}n=n||[];for(var c=(i=i||[]).length;c--;)if(i[c]===e)return n[c]===t;if(i.push(e),n.push(t),s){if((c=e.length)!==t.length)return!1;for(;c--;)if(!fe(e[c],t[c],i,n))return!1}else{var d,h=ae(e);if(c=h.length,ae(t).length!==c)return!1;for(;c--;)if(!q(t,d=h[c])||!fe(e[d],t[d],i,n))return!1}return i.pop(),n.pop(),!0}function me(e,t){return fe(e,t)}function ve(e){if(!D(e))return[];var t=[];for(var i in e)t.push(i);return lo&&oe(e,t),t}function ye(){return Gc||(Gc=!0,ys={},k(),E(),se(),i(ys,"default",(()=>ve))),ys}function be(e){for(var t=ae(e),i=t.length,n=Array(i),r=0;i>r;r++)n[r]=e[t[r]];return n}function Se(){return Xc||(Xc=!0,bs={},le(),i(bs,"default",(()=>be))),bs}function we(e){for(var t=ae(e),i=t.length,n=Array(i),r=0;i>r;r++)n[r]=[t[r],e[t[r]]];return n}function xe(e){for(var t={},i=ae(e),n=0,r=i.length;r>n;n++)t[e[i[n]]]=i[n];return t}function Ce(){return ed||(ed=!0,ws={},le(),i(ws,"default",(()=>xe))),ws}function Ee(e){var t=[];for(var i in e)Vo(e[i])&&t.push(i);return t.sort()}function Te(){return td||(td=!0,xs={},B(),i(xs,"default",(()=>Ee))),xs}function Me(e,t){return function(i){var n=arguments.length;if(t&&(i=Object(i)),2>n||null==i)return i;for(var r=1;n>r;r++)for(var o=arguments[r],s=e(o),a=s.length,l=0;a>l;l++){var c=s[l];t&&void 0!==i[c]||(i[c]=o[c])}return i}}function De(){return id||(id=!0,i(Cs={},"default",(()=>Me))),Cs}function ke(){return nd||(nd=!0,Es={},De(),ye(),Ts=Me(ve),i(Es,"default",(()=>Ts))),Es}function Le(){return rd||(rd=!0,Ms={},De(),le(),Ds=Me(ae),i(Ms,"default",(()=>Ds))),Ms}function Ae(){return od||(od=!0,ks={},De(),ye(),Ls=Me(ve,!0),i(ks,"default",(()=>Ls))),ks}function Oe(e){if(!D(e))return{};if(ro)return ro(e);var t=()=>{};t.prototype=e;var i=new t;return t.prototype=null,i}function _e(){return sd||(sd=!0,As={},k(),E(),i(As,"default",(()=>Oe))),As}function Pe(e,t){var i=Oe(e);return t&&Ds(i,t),i}function Re(e){return D(e)?Bo(e)?e.slice():Ts({},e):e}function Ie(){return ld||(ld=!0,_s={},k(),W(),ke(),i(_s,"default",(()=>Re))),_s}function He(e,t){return t(e),e}function Fe(e,t){if(!Bo(t))return q(e,t);for(var i=t.length,n=0;i>n;n++){var r=t[n];if(null==e||!eo.call(e,r))return!1;e=e[r]}return!!i}function Ne(e){return e}function je(){return hd||(hd=!0,i(Rs={},"default",(()=>Ne))),Rs}function We(e){return e=Ds({},e),t=>de(t,e)}function Be(){return ud||(ud=!0,Is={},Le(),he(),i(Is,"default",(()=>We))),Is}function qe(e,t){for(var i=t.length,n=0;i>n;n++){if(null==e)return;e=e[t[n]]}return i?e:void 0}function ze(){return pd||(pd=!0,i(Hs={},"default",(()=>qe))),Hs}function Ue(e){return Bo(e)?t=>qe(t,e):X(e)}function Ve(){return fd||(fd=!0,Fs={},W(),J(),ze(),i(Fs,"default",(()=>Ue))),Fs}function $e(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return i=>e.call(t,i);case 3:return(i,n,r)=>e.call(t,i,n,r);case 4:return(i,n,r,o)=>e.call(t,i,n,r,o)}return function(){return e.apply(t,arguments)}}function Qe(){return gd||(gd=!0,i(Ns={},"default",(()=>$e))),Ns}function Ke(e,t,i){return null==e?Ne:Vo(e)?$e(e,t,i):D(e)&&!Bo(e)?We(e):Ue(e)}function Ye(){return md||(md=!0,js={},je(),B(),k(),W(),Be(),Ve(),Qe(),i(js,"default",(()=>Ke))),js}function Ze(e,t){return Ke(e,t,1/0)}function Ge(){return vd||(vd=!0,Ws={},pe(),Ye(),i(Ws,"default",(()=>Ze)),ue.iteratee=Ze),Ws}function Xe(e,t,i){return ue.iteratee!==Ze?ue.iteratee(e,t):Ke(e,t,i)}function Je(){return yd||(yd=!0,Bs={},pe(),Ye(),Ge(),i(Bs,"default",(()=>Xe))),Bs}function et(e,t,i){t=Xe(t,i);for(var n=ae(e),r=n.length,o={},s=0;r>s;s++){var a=n[s];o[a]=t(e[a],a,e)}return o}function tt(){}function it(e){return null==e?()=>{}:t=>Bo(t)?qe(e,t):e[t]}function nt(e,t,i){var n=Array(Math.max(0,e));t=$e(t,i,1);for(var r=0;e>r;r++)n[r]=t(r);return n}function rt(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}function ot(){return Cd||(Cd=!0,i(Vs={},"default",(()=>rt))),Vs}function st(){return Ed||(Ed=!0,Qs=Date.now||(()=>(new Date).getTime()),i($s={},"default",(()=>Qs))),$s}function at(e){var t=t=>e[t],i="(?:"+ae(e).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return e=>n.test(e=null==e?"":""+e)?e.replace(r,t):e}function lt(){return Td||(Td=!0,Ks={},le(),i(Ks,"default",(()=>at))),Ks}function ct(){return Md||(Md=!0,Zs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i(Ys={},"default",(()=>Zs))),Ys}function dt(){return Ld||(Ld=!0,ta={},lt(),kd||(kd=!0,Js={},Ce(),ct(),ea=xe(Zs),i(Js,"default",(()=>ea))),ia=at(ea),i(ta,"default",(()=>ia))),ta}function ht(){return Ad||(Ad=!0,na={},pe(),ra=ue.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},i(na,"default",(()=>ra))),na}function ut(e){return"\\"+aa[e]}function pt(e,t,i){!t&&i&&(t=i),t=Ls({},t,ue.templateSettings);var n,r=RegExp([(t.escape||sa).source,(t.interpolate||sa).source,(t.evaluate||sa).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(r,((t,i,n,r,a)=>(s+=e.slice(o,a).replace(la,ut),o=a+t.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),t))),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var a=function(e){return n.call(this,e,ue)};return a.source="function("+(t.variable||"obj")+"){\n"+s+"}",a}function ft(e,t,i){Bo(t)||(t=[t]);var n=t.length;if(!n)return Vo(i)?i.call(e):i;for(var r=0;n>r;r++){var o=null==e?void 0:e[t[r]];void 0===o&&(o=i,r=n),e=Vo(o)?o.call(e):o}return e}function gt(e){var t=++da+"";return e?e+t:t}function mt(e){var t=ue(e);return t._chain=!0,t}function vt(e,t,i,n,r){if(!(n instanceof t))return e.apply(i,r);var o=Oe(e.prototype),s=e.apply(o,r);return D(s)?s:o}function yt(){return Id||(Id=!0,ua={},_e(),k(),i(ua,"default",(()=>vt))),ua}function bt(){return Hd||(Hd=!0,pa={},M(),yt(),pe(),(fa=T((function(e,t){var i=fa.placeholder,n=function(){for(var r=0,o=t.length,s=Array(o),a=0;o>a;a++)s[a]=t[a]===i?arguments[r++]:t[a];for(;arguments.length>r;)s.push(arguments[r++]);return vt(e,n,this,this,s)};return n}))).placeholder=ue,i(pa,"default",(()=>fa))),pa}function St(){return Fd||(Fd=!0,ga={},M(),B(),yt(),ma=T((function(e,t,i){if(!Vo(e))throw new TypeError("Bind must be called on a function");var n=T((function(r){return vt(e,n,t,this,i.concat(r))}));return n})),i(ga,"default",(()=>ma))),ga}function wt(e,t,i,n){if(n=n||[],t||0===t){if(0>=t)return n.concat(e)}else t=1/0;for(var r=n.length,o=0,s=cs(e);s>o;o++){var a=e[o];if(hs(a)&&(Bo(a)||Yo(a)))if(t>1)wt(a,t-1,i,n),r=n.length;else for(var l=0,c=a.length;c>l;)n[r++]=a[l++];else i||(n[r++]=a)}return n}function xt(){return Nd||(Nd=!0,va={},ne(),re(),W(),U(),i(va,"default",(()=>wt))),va}function Ct(e,t){var i=function(n){var r=i.cache,o=""+(t?t.apply(this,arguments):n);return q(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return i.cache={},i}function Et(){return Bd||(Bd=!0,wa={},M(),xa=T(((e,t,i)=>setTimeout((()=>e.apply(null,i)),t))),i(wa,"default",(()=>xa))),wa}function Tt(e,t,i){var n,r,o,s,a=0;i||(i={});var l=()=>{a=!1===i.leading?0:Qs(),n=null,s=e.apply(r,o),n||(r=o=null)},c=function(){var c=Qs();a||!1!==i.leading||(a=c);var d=t-(c-a);return r=this,o=arguments,0>=d||d>t?(n&&(clearTimeout(n),n=null),a=c,s=e.apply(r,o),n||(r=o=null)):n||!1===i.trailing||(n=setTimeout(l,d)),s};return c.cancel=()=>{clearTimeout(n),a=0,n=r=o=null},c}function Mt(e,t,i){var n,r,o=(t,i)=>{n=null,i&&(r=e.apply(t,i))},s=T((function(s){if(n&&clearTimeout(n),i){var a=!n;n=setTimeout(o,t),a&&(r=e.apply(this,s))}else n=xa(o,t,this,s);return r}));return s.cancel=()=>{clearTimeout(n),n=null},s}function Dt(e,t){return fa(t,e)}function kt(e){return function(){return!e.apply(this,arguments)}}function Lt(){return $d||($d=!0,i(ka={},"default",(()=>kt))),ka}function At(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}}function Ot(e,t){return function(){if(1>--e)return t.apply(this,arguments)}}function _t(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),e>1||(t=null),i}}function Pt(){return Yd||(Yd=!0,i(La={},"default",(()=>_t))),La}function Rt(e,t,i){t=Xe(t,i);for(var n,r=ae(e),o=0,s=r.length;s>o;o++)if(t(e[n=r[o]],n,e))return n}function It(){return Gd||(Gd=!0,_a={},Je(),le(),i(_a,"default",(()=>Rt))),_a}function Ht(e){return(t,i,n)=>{i=Xe(i,n);for(var r=cs(t),o=e>0?0:r-1;o>=0&&r>o;o+=e)if(i(t[o],o,t))return o;return-1}}function Ft(){return Xd||(Xd=!0,Pa={},Je(),ne(),i(Pa,"default",(()=>Ht))),Pa}function Nt(){return Jd||(Jd=!0,Ra={},Ft(),Ia=Ht(1),i(Ra,"default",(()=>Ia))),Ra}function jt(){return eh||(eh=!0,Ha={},Ft(),Fa=Ht(-1),i(Ha,"default",(()=>Fa))),Ha}function Wt(e,t,i,n){for(var r=(i=Xe(i,n,1))(t),o=0,s=cs(e);s>o;){var a=Math.floor((o+s)/2);i(e[a])<r?o=a+1:s=a}return o}function Bt(){return th||(th=!0,Na={},Je(),ne(),i(Na,"default",(()=>Wt))),Na}function qt(e,t,i){return(n,r,o)=>{var s=0,a=cs(n);if("number"==typeof o)e>0?s=0>o?Math.max(o+a,s):o:a=0>o?o+a+1:Math.min(o+1,a);else if(i&&o&&a)return n[o=i(n,r)]===r?o:-1;if(r!=r)return 0>(o=t(Xr.call(n,s,a),$))?-1:o+s;for(o=e>0?s:a-1;o>=0&&a>o;o+=e)if(n[o]===r)return o;return-1}}function zt(){return ih||(ih=!0,ja={},ne(),E(),Q(),i(ja,"default",(()=>qt))),ja}function Ut(){return nh||(nh=!0,Wa={},Bt(),Nt(),zt(),Ba=qt(1,Ia,Wt),i(Wa,"default",(()=>Ba))),Wa}function Vt(e,t,i){var n=(hs(e)?Ia:Rt)(e,t,i);if(void 0!==n&&-1!==n)return e[n]}function $t(){return oh||(oh=!0,Ua={},re(),Nt(),It(),i(Ua,"default",(()=>Vt))),Ua}function Qt(e,t){return Vt(e,We(t))}function Kt(e,t,i){var n,r;if(t=$e(t,i),hs(e))for(n=0,r=e.length;r>n;n++)t(e[n],n,e);else{var o=ae(e);for(n=0,r=o.length;r>n;n++)t(e[o[n]],o[n],e)}return e}function Yt(){return ah||(ah=!0,$a={},Qe(),re(),le(),i($a,"default",(()=>Kt))),$a}function Zt(e,t,i){t=Xe(t,i);for(var n=!hs(e)&&ae(e),r=(n||e).length,o=Array(r),s=0;r>s;s++){var a=n?n[s]:s;o[s]=t(e[a],a,e)}return o}function Gt(){return lh||(lh=!0,Qa={},Je(),re(),le(),i(Qa,"default",(()=>Zt))),Qa}function Xt(e){var t=(t,i,n,r)=>{var o=!hs(t)&&ae(t),s=(o||t).length,a=e>0?0:s-1;for(r||(n=t[o?o[a]:a],a+=e);a>=0&&s>a;a+=e){var l=o?o[a]:a;n=i(n,t[l],l,t)}return n};return function(e,i,n,r){var o=arguments.length>=3;return t(e,$e(i,r,4),n,o)}}function Jt(){return ch||(ch=!0,Ka={},re(),le(),Qe(),i(Ka,"default",(()=>Xt))),Ka}function ei(e,t,i){var n=[];return t=Xe(t,i),Kt(e,((e,i,r)=>{t(e,i,r)&&n.push(e)})),n}function ti(){return uh||(uh=!0,Ja={},Je(),Yt(),i(Ja,"default",(()=>ei))),Ja}function ii(e,t,i){return ei(e,kt(Xe(t)),i)}function ni(e,t,i){t=Xe(t,i);for(var n=!hs(e)&&ae(e),r=(n||e).length,o=0;r>o;o++){var s=n?n[o]:o;if(!t(e[s],s,e))return!1}return!0}function ri(e,t,i){t=Xe(t,i);for(var n=!hs(e)&&ae(e),r=(n||e).length,o=0;r>o;o++){var s=n?n[o]:o;if(t(e[s],s,e))return!0}return!1}function oi(e,t,i,n){return hs(e)||(e=be(e)),("number"!=typeof i||n)&&(i=0),Ba(e,t,i)>=0}function si(){return mh||(mh=!0,nl={},re(),Se(),Ut(),i(nl,"default",(()=>oi))),nl}function ai(e,t){return Zt(e,Ue(t))}function li(){return yh||(yh=!0,sl={},Gt(),Ve(),i(sl,"default",(()=>ai))),sl}function ci(e,t){return ei(e,We(t))}function di(e,t,i){var n,r,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=hs(e)?e:be(e)).length;l>a;a++)null!=(n=e[a])&&n>o&&(o=n);else t=Xe(t,i),Kt(e,((e,i,n)=>{((r=t(e,i,n))>s||r===-1/0&&o===-1/0)&&(o=e,s=r)}));return o}function hi(){return Sh||(Sh=!0,ll={},re(),Se(),Je(),Yt(),i(ll,"default",(()=>di))),ll}function ui(e,t,i){var n,r,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=hs(e)?e:be(e)).length;l>a;a++)null!=(n=e[a])&&o>n&&(o=n);else t=Xe(t,i),Kt(e,((e,i,n)=>{r=t(e,i,n),(s>r||r===1/0&&o===1/0)&&(o=e,s=r)}));return o}function pi(e,t,i){if(null==t||i)return hs(e)||(e=be(e)),e[rt(e.length-1)];var n=hs(e)?Re(e):be(e),r=cs(n);t=Math.max(Math.min(t,r),0);for(var o=r-1,s=0;t>s;s++){var a=rt(s,o),l=n[s];n[s]=n[a],n[a]=l}return n.slice(0,t)}function fi(){return xh||(xh=!0,dl={},re(),Ie(),Se(),ne(),ot(),i(dl,"default",(()=>pi))),dl}function gi(e){return pi(e,1/0)}function mi(e,t,i){var n=0;return t=Xe(t,i),ai(Zt(e,((e,i,r)=>({value:e,index:n++,criteria:t(e,i,r)}))).sort(((e,t)=>{var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index})),"value")}function vi(e,t){return(i,n,r)=>{var o=t?[[],[]]:{};return n=Xe(n,r),Kt(i,((t,r)=>{var s=n(t,r,i);e(o,t,s)})),o}}function yi(){return Th||(Th=!0,pl={},Je(),Yt(),i(pl,"default",(()=>vi))),pl}function bi(e){return e?Bo(e)?Xr.call(e):vo(e)?e.match(Cl):hs(e)?Zt(e,Ne):be(e):[]}function Si(e){return null==e?0:hs(e)?e.length:ae(e).length}function wi(e,t,i){return t in i}function xi(){return Ph||(Ph=!0,Tl={},M(),B(),Qe(),ye(),_h||(_h=!0,i({},"default",(()=>wi))),xt(),Ml=T(((e,t)=>{var i={},n=t[0];if(null==e)return i;Vo(n)?(t.length>1&&(n=$e(n,t[1])),t=ve(e)):(n=wi,t=wt(t,!1,!1),e=Object(e));for(var r=0,o=t.length;o>r;r++){var s=t[r],a=e[s];n(a,s,e)&&(i[s]=a)}return i})),i(Tl,"default",(()=>Ml))),Tl}function Ci(e,t,i){return Xr.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))}function Ei(){return Ih||(Ih=!0,Ll={},E(),i(Ll,"default",(()=>Ci))),Ll}function Ti(e,t,i){return null==e||1>e.length?null==t||i?void 0:[]:null==t||i?e[0]:Ci(e,e.length-t)}function Mi(e,t,i){return Xr.call(e,null==t||i?1:t)}function Di(){return Fh||(Fh=!0,Ol={},E(),i(Ol,"default",(()=>Mi))),Ol}function ki(e,t,i){return null==e||1>e.length?null==t||i?void 0:[]:null==t||i?e[e.length-1]:Mi(e,Math.max(0,e.length-t))}function Li(e){return ei(e,Boolean)}function Ai(e,t){return wt(e,t,!1)}function Oi(){return Bh||(Bh=!0,Il={},M(),xt(),ti(),si(),Hl=T(((e,t)=>(t=wt(t,!0,!0),ei(e,(e=>!oi(t,e)))))),i(Il,"default",(()=>Hl))),Il}function _i(e,t,i,n){O(t)||(n=i,i=t,t=!1),null!=i&&(i=Xe(i,n));for(var r=[],o=[],s=0,a=cs(e);a>s;s++){var l=e[s],c=i?i(l,s,e):l;t&&!i?(s&&o===c||r.push(l),o=c):i?oi(o,c)||(o.push(c),r.push(l)):oi(r,l)||r.push(l)}return r}function Pi(){return zh||(zh=!0,jl={},_(),Je(),ne(),si(),i(jl,"default",(()=>_i))),jl}function Ri(e){for(var t=[],i=arguments.length,n=0,r=cs(e);r>n;n++){var o=e[n];if(!oi(t,o)){var s;for(s=1;i>s&&oi(arguments[s],o);s++);s===i&&t.push(o)}}return t}function Ii(e){for(var t=e&&di(e,cs).length||0,i=Array(t),n=0;t>n;n++)i[n]=ai(e,n);return i}function Hi(){return $h||($h=!0,zl={},hi(),ne(),li(),i(zl,"default",(()=>Ii))),zl}function Fi(e,t){for(var i={},n=0,r=cs(e);r>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i}function Ni(e,t,i){null==t&&(t=e||0,e=0),i||(i=e>t?-1:1);for(var n=Math.max(Math.ceil((t-e)/i),0),r=Array(n),o=0;n>o;o++,e+=i)r[o]=e;return r}function ji(e,t){if(null==t||1>t)return[];for(var i=[],n=0,r=e.length;r>n;)i.push(Xr.call(e,n,n+=t));return i}function Wi(e,t){return e._chain?ue(t).chain():t}function Bi(){return Gh||(Gh=!0,Kl={},pe(),i(Kl,"default",(()=>Wi))),Kl}function qi(e){return Kt(Ee(e),(function(t){var i=ue[t]=e[t];ue.prototype[t]=function(){var e=[this._wrapped];return Gr.apply(e,arguments),Wi(this,i.apply(ue,e))}})),ue}function zi(){return eu||(eu=!0,Gl={},E(),M(),k(),fc||(fc=!0,i({},"default",(()=>L))),gc||(gc=!0,i({},"default",(()=>A))),_(),vc||(vc=!0,i({},"default",(()=>P))),H(),F(),wc||(wc=!0,So={},I(),wo=R("Date"),i(So,"default",(()=>wo))),xc||(xc=!0,xo={},I(),Co=R("RegExp"),i(xo,"default",(()=>Co))),Cc||(Cc=!0,Eo={},I(),To=R("Error"),i(Eo,"default",(()=>To))),N(),Tc||(Tc=!0,ko={},I(),Lo=R("Map"),i(ko,"default",(()=>Lo))),Mc||(Mc=!0,Ao={},I(),Oo=R("WeakMap"),i(Ao,"default",(()=>Oo))),Dc||(Dc=!0,_o={},I(),Po=R("Set"),i(_o,"default",(()=>Po))),kc||(kc=!0,Ro={},I(),Io=R("WeakSet"),i(Ro,"default",(()=>Io))),Lc||(Lc=!0,Ho={},I(),Fo=R("ArrayBuffer"),i(Ho,"default",(()=>Fo))),j(),W(),B(),U(),Ic||(Ic=!0,Zo={},E(),N(),i(Zo,"default",(()=>V))),Q(),ie(),Qc||(Qc=!0,fs={},re(),W(),H(),U(),le(),i(fs,"default",(()=>ce))),he(),Zc||(Zc=!0,vs={},pe(),E(),ee(),ie(),B(),le(),z(),i(vs,"default",(()=>me))),le(),ye(),Se(),Jc||(Jc=!0,Ss={},le(),i(Ss,"default",(()=>we))),Ce(),Te(),ke(),Le(),Ae(),ad||(ad=!0,Os={},_e(),Le(),i(Os,"default",(()=>Pe))),Ie(),cd||(cd=!0,i({},"default",(()=>He))),dd||(dd=!0,Ps={},W(),z(),E(),i(Ps,"default",(()=>Fe))),bd||(bd=!0,qs={},Je(),le(),i(qs,"default",(()=>et))),je(),Y(),Sd||(Sd=!0,i({},"default",(()=>tt))),Ve(),wd||(wd=!0,zs={},W(),ze(),i(zs,"default",(()=>it))),Be(),xd||(xd=!0,Us={},Qe(),i(Us,"default",(()=>nt))),ot(),st(),Dd||(Dd=!0,Gs={},lt(),ct(),Xs=at(Zs),i(Gs,"default",(()=>Xs))),dt(),ht(),Od||(Od=!0,oa={},Ae(),pe(),ht(),sa=/(.)^/,aa={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},la=/\\|'|\r|\n|\u2028|\u2029/g,i(oa,"default",(()=>pt))),_d||(_d=!0,ca={},W(),B(),i(ca,"default",(()=>ft))),Pd||(Pd=!0,da=0,i({},"default",(()=>gt))),Rd||(Rd=!0,ha={},pe(),i(ha,"default",(()=>mt))),Ge(),bt(),St(),jd||(jd=!0,ya={},M(),xt(),St(),ba=T(((e,t)=>{var i=(t=wt(t,!1,!1)).length;if(1>i)throw Error("bindAll must be passed function names");for(;i--;){var n=t[i];e[n]=ma(e[n],e)}return e})),i(ya,"default",(()=>ba))),Wd||(Wd=!0,Sa={},z(),i(Sa,"default",(()=>Ct))),Et(),qd||(qd=!0,Ca={},bt(),Et(),pe(),Ea=fa(xa,ue,1),i(Ca,"default",(()=>Ea))),zd||(zd=!0,Ta={},st(),i(Ta,"default",(()=>Tt))),Ud||(Ud=!0,Ma={},M(),Et(),i(Ma,"default",(()=>Mt))),Vd||(Vd=!0,Da={},bt(),i(Da,"default",(()=>Dt))),Lt(),Qd||(Qd=!0,i({},"default",(()=>At))),Kd||(Kd=!0,i({},"default",(()=>Ot))),Pt(),Zd||(Zd=!0,Aa={},bt(),Pt(),Oa=fa(_t,2),i(Aa,"default",(()=>Oa))),It(),Nt(),jt(),Bt(),Ut(),rh||(rh=!0,qa={},jt(),zt(),za=qt(-1,Fa),i(qa,"default",(()=>za))),$t(),sh||(sh=!0,Va={},$t(),Be(),i(Va,"default",(()=>Qt))),Yt(),Gt(),dh||(dh=!0,Ya={},Jt(),Za=Xt(1),i(Ya,"default",(()=>Za))),hh||(hh=!0,Ga={},Jt(),Xa=Xt(-1),i(Ga,"default",(()=>Xa))),ti(),ph||(ph=!0,el={},ti(),Lt(),Je(),i(el,"default",(()=>ii))),fh||(fh=!0,tl={},Je(),re(),le(),i(tl,"default",(()=>ni))),gh||(gh=!0,il={},Je(),re(),le(),i(il,"default",(()=>ri))),si(),vh||(vh=!0,rl={},M(),B(),W(),Gt(),ze(),ol=T(((e,t,i)=>{var n,r;return Vo(t)?r=t:Bo(t)&&(n=t.slice(0,-1),t=t[t.length-1]),Zt(e,(e=>{var o=r;if(!o){if(n&&n.length&&(e=qe(e,n)),null==e)return;o=e[t]}return null==o?o:o.apply(e,i)}))})),i(rl,"default",(()=>ol))),li(),bh||(bh=!0,al={},ti(),Be(),i(al,"default",(()=>ci))),hi(),wh||(wh=!0,cl={},re(),Se(),Je(),Yt(),i(cl,"default",(()=>ui))),Ch||(Ch=!0,hl={},fi(),i(hl,"default",(()=>gi))),fi(),Eh||(Eh=!0,ul={},Je(),li(),Gt(),i(ul,"default",(()=>mi))),Mh||(Mh=!0,fl={},yi(),z(),gl=vi(((e,t,i)=>{q(e,i)?e[i].push(t):e[i]=[t]})),i(fl,"default",(()=>gl))),Dh||(Dh=!0,ml={},yi(),vl=vi(((e,t,i)=>{e[i]=t})),i(ml,"default",(()=>vl))),kh||(kh=!0,yl={},yi(),z(),bl=vi(((e,t,i)=>{q(e,i)?e[i]++:e[i]=1})),i(yl,"default",(()=>bl))),Lh||(Lh=!0,Sl={},yi(),wl=vi(((e,t,i)=>{e[i?0:1].push(t)}),!0),i(Sl,"default",(()=>wl))),Ah||(Ah=!0,xl={},W(),E(),H(),re(),Gt(),je(),Se(),Cl=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g,i(xl,"default",(()=>bi))),Oh||(Oh=!0,El={},re(),le(),i(El,"default",(()=>Si))),xi(),Rh||(Rh=!0,Dl={},M(),B(),Lt(),Gt(),xt(),si(),xi(),kl=T(((e,t)=>{var i,n=t[0];return Vo(n)?(n=kt(n),t.length>1&&(i=t[1])):(t=Zt(wt(t,!1,!1),String),n=(e,i)=>!oi(t,i)),Ml(e,n,i)})),i(Dl,"default",(()=>kl))),Hh||(Hh=!0,Al={},Ei(),i(Al,"default",(()=>Ti))),Ei(),Nh||(Nh=!0,_l={},Di(),i(_l,"default",(()=>ki))),Di(),jh||(jh=!0,Pl={},ti(),i(Pl,"default",(()=>Li))),Wh||(Wh=!0,Rl={},xt(),i(Rl,"default",(()=>Ai))),qh||(qh=!0,Fl={},M(),Oi(),Nl=T(((e,t)=>Hl(e,t))),i(Fl,"default",(()=>Nl))),Pi(),Uh||(Uh=!0,Wl={},M(),Pi(),xt(),Bl=T((e=>_i(wt(e,!0,!0)))),i(Wl,"default",(()=>Bl))),Vh||(Vh=!0,ql={},ne(),si(),i(ql,"default",(()=>Ri))),Oi(),Hi(),Qh||(Qh=!0,Ul={},M(),Hi(),Vl=T(Ii),i(Ul,"default",(()=>Vl))),Kh||(Kh=!0,$l={},ne(),i($l,"default",(()=>Fi))),Yh||(Yh=!0,i({},"default",(()=>Ni))),Zh||(Zh=!0,Ql={},E(),i(Ql,"default",(()=>ji))),Xh||(Xh=!0,Yl={},pe(),Yt(),Te(),E(),Bi(),i(Yl,"default",(()=>qi))),Jh||(Jh=!0,Zl={},pe(),Yt(),E(),Bi(),Kt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=Kr[e];ue.prototype[e]=function(){var i=this._wrapped;return null!=i&&(t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0]),Wi(this,i)}})),Kt(["concat","join","slice"],(function(e){var t=Kr[e];ue.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Wi(this,e)}})),i(Zl,"default",(()=>ue))),i(Gl,"VERSION",(()=>$r)),i(Gl,"restArguments",(()=>T)),i(Gl,"isObject",(()=>D)),i(Gl,"isNull",(()=>L)),i(Gl,"isUndefined",(()=>A)),i(Gl,"isBoolean",(()=>O)),i(Gl,"isElement",(()=>P)),i(Gl,"isString",(()=>vo)),i(Gl,"isNumber",(()=>bo)),i(Gl,"isDate",(()=>wo)),i(Gl,"isRegExp",(()=>Co)),i(Gl,"isError",(()=>To)),i(Gl,"isSymbol",(()=>Do)),i(Gl,"isMap",(()=>Lo)),i(Gl,"isWeakMap",(()=>Oo)),i(Gl,"isSet",(()=>Po)),i(Gl,"isWeakSet",(()=>Io)),i(Gl,"isArrayBuffer",(()=>Fo)),i(Gl,"isDataView",(()=>jo)),i(Gl,"isArray",(()=>Bo)),i(Gl,"isFunction",(()=>Vo)),i(Gl,"isArguments",(()=>Yo)),i(Gl,"isFinite",(()=>V)),i(Gl,"isNaN",(()=>$)),i(Gl,"isTypedArray",(()=>as)),i(Gl,"isEmpty",(()=>ce)),i(Gl,"isMatch",(()=>de)),i(Gl,"isEqual",(()=>me)),i(Gl,"keys",(()=>ae)),i(Gl,"allKeys",(()=>ve)),i(Gl,"values",(()=>be)),i(Gl,"pairs",(()=>we)),i(Gl,"invert",(()=>xe)),i(Gl,"methods",(()=>Ee)),i(Gl,"functions",(()=>Ee)),i(Gl,"extend",(()=>Ts)),i(Gl,"assign",(()=>Ds)),i(Gl,"extendOwn",(()=>Ds)),i(Gl,"defaults",(()=>Ls)),i(Gl,"create",(()=>Pe)),i(Gl,"clone",(()=>Re)),i(Gl,"tap",(()=>He)),i(Gl,"has",(()=>Fe)),i(Gl,"mapObject",(()=>et)),i(Gl,"identity",(()=>Ne)),i(Gl,"constant",(()=>K)),i(Gl,"noop",(()=>tt)),i(Gl,"property",(()=>Ue)),i(Gl,"propertyOf",(()=>it)),i(Gl,"matches",(()=>We)),i(Gl,"matcher",(()=>We)),i(Gl,"times",(()=>nt)),i(Gl,"random",(()=>rt)),i(Gl,"now",(()=>Qs)),i(Gl,"escape",(()=>Xs)),i(Gl,"unescape",(()=>ia)),i(Gl,"templateSettings",(()=>ra)),i(Gl,"template",(()=>pt)),i(Gl,"result",(()=>ft)),i(Gl,"uniqueId",(()=>gt)),i(Gl,"chain",(()=>mt)),i(Gl,"iteratee",(()=>Ze)),i(Gl,"partial",(()=>fa)),i(Gl,"bind",(()=>ma)),i(Gl,"bindAll",(()=>ba)),i(Gl,"memoize",(()=>Ct)),i(Gl,"delay",(()=>xa)),i(Gl,"defer",(()=>Ea)),i(Gl,"throttle",(()=>Tt)),i(Gl,"debounce",(()=>Mt)),i(Gl,"wrap",(()=>Dt)),i(Gl,"negate",(()=>kt)),i(Gl,"compose",(()=>At)),i(Gl,"after",(()=>Ot)),i(Gl,"before",(()=>_t)),i(Gl,"once",(()=>Oa)),i(Gl,"findKey",(()=>Rt)),i(Gl,"findIndex",(()=>Ia)),i(Gl,"findLastIndex",(()=>Fa)),i(Gl,"sortedIndex",(()=>Wt)),i(Gl,"indexOf",(()=>Ba)),i(Gl,"lastIndexOf",(()=>za)),i(Gl,"detect",(()=>Vt)),i(Gl,"find",(()=>Vt)),i(Gl,"findWhere",(()=>Qt)),i(Gl,"forEach",(()=>Kt)),i(Gl,"each",(()=>Kt)),i(Gl,"collect",(()=>Zt)),i(Gl,"map",(()=>Zt)),i(Gl,"inject",(()=>Za)),i(Gl,"foldl",(()=>Za)),i(Gl,"reduce",(()=>Za)),i(Gl,"foldr",(()=>Xa)),i(Gl,"reduceRight",(()=>Xa)),i(Gl,"select",(()=>ei)),i(Gl,"filter",(()=>ei)),i(Gl,"reject",(()=>ii)),i(Gl,"all",(()=>ni)),i(Gl,"every",(()=>ni)),i(Gl,"any",(()=>ri)),i(Gl,"some",(()=>ri)),i(Gl,"include",(()=>oi)),i(Gl,"includes",(()=>oi)),i(Gl,"contains",(()=>oi)),i(Gl,"invoke",(()=>ol)),i(Gl,"pluck",(()=>ai)),i(Gl,"where",(()=>ci)),i(Gl,"max",(()=>di)),i(Gl,"min",(()=>ui)),i(Gl,"shuffle",(()=>gi)),i(Gl,"sample",(()=>pi)),i(Gl,"sortBy",(()=>mi)),i(Gl,"groupBy",(()=>gl)),i(Gl,"indexBy",(()=>vl)),i(Gl,"countBy",(()=>bl)),i(Gl,"partition",(()=>wl)),i(Gl,"toArray",(()=>bi)),i(Gl,"size",(()=>Si)),i(Gl,"pick",(()=>Ml)),i(Gl,"omit",(()=>kl)),i(Gl,"take",(()=>Ti)),i(Gl,"head",(()=>Ti)),i(Gl,"first",(()=>Ti)),i(Gl,"initial",(()=>Ci)),i(Gl,"last",(()=>ki)),i(Gl,"drop",(()=>Mi)),i(Gl,"tail",(()=>Mi)),i(Gl,"rest",(()=>Mi)),i(Gl,"compact",(()=>Li)),i(Gl,"flatten",(()=>Ai)),i(Gl,"without",(()=>Nl)),i(Gl,"unique",(()=>_i)),i(Gl,"uniq",(()=>_i)),i(Gl,"union",(()=>Bl)),i(Gl,"intersection",(()=>Ri)),i(Gl,"difference",(()=>Hl)),i(Gl,"transpose",(()=>Ii)),i(Gl,"unzip",(()=>Ii)),i(Gl,"zip",(()=>Vl)),i(Gl,"object",(()=>Fi)),i(Gl,"range",(()=>Ni)),i(Gl,"chunk",(()=>ji)),i(Gl,"mixin",(()=>qi)),i(Gl,"default",(()=>ue))),Gl}function Ui(e,t,i,n,r,o,s,a){if(e.fillStyle=i,a){const i=t.length*o;return e.fillRect(n,r,i,s),n+i}{let i=0;for(let a=0,l=t.length;l>a;a++)du.test(t[a])?(i>0&&e.fillRect(n-i*o,r,i*o,s),i=0):i++,n+=o;return i>0&&e.fillRect(n-i*o,r,i*o,s),n}}function Vi(e,t,i,n,r,o,s,a,l,c,d,h,u,p){if(e>t)return;let f,g,m=i*n-n;t=Math.min(t,c);for(let i=e;t>i;i++){const e=l.tokensForScreenRow(i),t=Math.min(e.length,p);for(let l=0;t>l;l++){const t=e[l],c=t.text.replace(d," "),p=t.scopeDescriptor||t.scopes;f!==i&&(g=0,m+=n,f=i,a.clearRect(g,m,s,n)),g>s||(lu.test(c)?g+=c.length*o:g=Ui(a,c,h(p),g,m,o,r,u))}}a.fill()}function $i(e,t,i){const n=e.getMarker().getScreenRange(),r=n.end.row-n.start.row;if(t.context.fillStyle=i,0===r)t.context.fillRect(n.start.column*t.charWidth,t.yRow,(n.end.column-n.start.column)*t.charWidth,t.lineHeight);else if(t.screenRow===n.start.row){const e=n.start.column*t.charWidth;t.context.fillRect(e,t.yRow,t.canvasWidth-e,t.lineHeight)}else t.context.fillRect(0,t.yRow,t.screenRow===n.end.row?n.end.column*t.charWidth:t.canvasWidth,t.lineHeight)}function Qi(e,t){return`rgba(${e.slice(4,-1)}, ${t})`}function Ki(e,t,i,n,r){if(null==n&&null==r)return[];let o=[{start:n,end:r,offscreenRow:0}];for(let e=0,t=i.length;t>e;e++){const t=i[e],n=[];for(let e=0,i=o.length;i>e;e++){const i=o[e];i.start>t.end&&0!==t.screenDelta?n.push({start:i.start+t.screenDelta,end:i.end+t.screenDelta,offscreenRow:i.offscreenRow}):i.start>t.end||t.start>i.end?n.push(i):(t.start>i.start&&n.push({start:i.start,end:t.start-1,offscreenRow:i.offscreenRow}),i.end>t.end&&n.push(0!==t.bufferDelta||0!==t.screenDelta?{start:t.end+t.screenDelta+1,end:i.end+t.screenDelta,offscreenRow:i.offscreenRow+t.end+1-i.start}:{start:t.end+1,end:i.end,offscreenRow:i.offscreenRow+t.end+1-i.start}))}o=n}return((e,t,i)=>{let n=0;for(;e.length>n;){const r=e[n];t>r.start&&(r.offscreenRow+=t-r.start,r.start=t),r.end>i&&(r.end=i),r.end>r.start||e.splice(n--,1),n++}return e.sort(((e,t)=>e.offscreenRow-t.offscreenRow))})(o,e,t)}function Yi(e,...t){t.forEach((t=>{var i,n;i=e,Object.getOwnPropertyNames(n=t).forEach((e=>{0>["length","name","arguments","caller","prototype","includeInto"].indexOf(e)&&Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})),Object.getOwnPropertyNames(n.prototype).forEach((e=>{"constructor"!==e&&Object.defineProperty(i.prototype,e,Object.getOwnPropertyDescriptor(n.prototype,e))}))}))}function Zi(e,t){return yr.registerOrUpdateElement(t,{class:e})}function Gi(e){mu&&(mu.textContent=`\n    atom-text-editor[with-minimap].editor > div,\n    atom-text-editor[with-minimap] > div {\n      margin-left: ${e}px;\n    }\n    `)}function Xi(e){return{x:e.pageX,y:e.pageY,isLeftMouse:0===e.button,isMiddleMouse:1===e.button}}function Ji(e){const t=e.changedTouches[0];return{x:t.pageX,y:t.pageY,isLeftMouse:!0,isMiddleMouse:!1}}function en(e,t){if(!e)return;let i="";for(const e in t)i+=`${e}: ${t[e]}; `;e.style.cssText=i}function tn(e=0,t=0,i=!1){return i?`translate3d(${e}px, ${t}px, 0)`:`translate(${e}px, ${t}px)`}function nn(e=0,t=e,i=!1){return i?`scale3d(${e}, ${t}, 1)`:`scale(${e}, ${t})`}function rn({from:e,to:t,duration:i,step:n}){const r=on();let o;const s=()=>{const a=on()-r;o=0===i?1:a/i,o>1&&(o=1);const l=(e=>.5-Math.cos(e*Math.PI)/2)(o);n(e+(t-e)*l,l),1>o&&requestAnimationFrame(s)};s()}function on(){return new Date}function sn(e,t){ku[e]=t,Lu[e]=new pr,Hu.emit("did-add-plugin",{name:e,plugin:t}),atom.config.get("minimap.displayPluginsControls")&&((e,t)=>{const i="minimap.plugins."+e,n=`minimap.plugins.${e}DecorationsZIndex`,r=mn();r.plugins.properties[e]={type:"boolean",title:e,description:`Whether the ${e} plugin is activated and displayed in the Minimap.`,default:!0},r.plugins.properties[e+"DecorationsZIndex"]={type:"integer",title:e+" decorations order",description:`The relative order of the ${e} plugin's decorations in the layer into which they are drawn. Note that this order only apply inside a layer, so highlight-over decorations will always be displayed above line decorations as they are rendered in different layers.`,default:0},void 0===atom.config.get(i)&&atom.config.set(i,!0),void 0===atom.config.get(n)&&atom.config.set(n,0),Lu[e].add(atom.config.observe(i,(()=>{dn(e)}))),Lu[e].add(atom.config.observe(n,(i=>{pn(e),Hu.emit("did-change-plugin-order",{name:e,plugin:t,order:i})}))),Lu[e].add(atom.commands.add("atom-workspace",{["minimap:toggle-"+e](){ln(e)}})),pn(e)})(e,t),dn(e)}function an(e){const t=ku[e];atom.config.get("minimap.displayPluginsControls")&&(e=>{Lu[e].dispose(),delete Lu[e],delete mn().plugins.properties[e]})(e),delete ku[e],Hu.emit("did-remove-plugin",{name:e,plugin:t})}function ln(e,t){const i="minimap.plugins."+e;null!=t?atom.config.set(i,t):atom.config.set(i,!atom.config.get(i)),dn(e)}function cn(){for(const[e,t]of function*(){for(const e in ku)yield[e,ku[e]]}())t.deactivatePlugin(),Hu.emit("did-deactivate-plugin",{name:e,plugin:t})}function dn(e){const t=ku[e],i=t.isActive(),n=atom.config.get("minimap.plugins."+e);atom.config.get("minimap.displayPluginsControls")?n&&!i?hn(e,t):i&&!n&&un(e,t):i?i&&un(e,t):hn(e,t)}function hn(e,t){const i={name:e,plugin:t};t.activatePlugin(),Hu.emit("did-activate-plugin",i)}function un(e,t){const i={name:e,plugin:t};t.deactivatePlugin(),Hu.emit("did-deactivate-plugin",i)}function pn(e){Au[e]=atom.config.get(`minimap.plugins.${e}DecorationsZIndex`)}function fn(){return Au}function gn(e){if(e instanceof Mu){const t=new vu;return t.setModel(e),t}}function mn(){return Fu||atom.packages.getLoadedPackage("minimap").metadata.configSchema}function vn(){var e;Ou&&(_u?(_u=!1,Pu&&Pu.forEach(((e,t)=>{e.destroy(),Pu.delete(t)})),Ru.dispose()):(_u=!0,Ru.add(atom.workspace.observeTextEditors((e=>{const t=Ln(e),i=atom.views.getView(t);Hu.emit("did-create-minimap",t),i.attach()})),(e="core.useTreeSitterParsers",atom.config.observe(e,(t=>{if(!0!==t){const t="Minimap."+e,i=new Date,n=window.localStorage.getItem(t);let r=null;if(n&&(r=new Date(Date.parse(n)).getDay()),!r||"number"==typeof r&&r-i.getDay()>=1){window.localStorage.setItem(t,i);const n=atom.notifications.addWarning("Tree-sitter is off (Low Performance Warning).",{description:"You should turn on Atom's tree-sitter parser to experience the best performance Minimap and Atom is deisgned for.\n    Keeping tree-sitter parser off results in sluggish scrolling and lags in the text editor.",dismissable:!0,buttons:[{text:"Set to true and restart Atom",onDidClick(){atom.config.set(e,!0),n.dismiss(),window.localStorage.removeItem(t),setTimeout((()=>{atom.reload()}),1500)}}]})}}}))))))}async function yn(e){const{default:t}=await(vr||(vr=!0,Pn={},Pn=Promise.resolve(require("./minimap-plugin-generator-element.a47de6ae.js"))),Pn),i=new t;i.template=e,i.attach()}function bn(e){return Hu.on("did-activate",e)}function Sn(e){return Hu.on("did-deactivate",e)}function wn(e){return Hu.on("did-create-minimap",e)}function xn(e){return Hu.on("did-add-plugin",e)}function Cn(e){return Hu.on("did-remove-plugin",e)}function En(e){return Hu.on("did-activate-plugin",e)}function Tn(e){return Hu.on("did-deactivate-plugin",e)}function Mn(e){return Hu.on("did-change-plugin-order",e)}function Dn(){return Mu}function kn(e){if(e)return Ln(e.getModel())}function Ln(e){if(!e)return;if(!Pu)return;let t=Pu.get(e);if(!t){t=new Mu({textEditor:e}),Pu.set(e,t);const i=e.onDidDestroy((()=>{Pu&&Pu.delete(e),i.dispose()}))}return t}function An(e){if(e)return new Mu({textEditor:e,standAlone:!0})}function On(){return Ln(atom.workspace.getActiveTextEditor())}function _n(e){if(e)return Pu&&Pu.forEach((t=>{e(t)})),wn((t=>{e(t)}))}var Pn,Rn,In,Hn,Fn,Nn,jn,Wn,Bn,qn,zn,Un,Vn,$n,Qn,Kn,Yn,Zn,Gn,Xn,Jn,er,tr,ir,nr,rr,or,sr,ar,lr,cr,dr=e(require("path")),hr=require("atom"),ur=n({},hr),{CompositeDisposable:pr,Disposable:fr,Emitter:gr}=hr,mr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},vr=!1,yr={},br=!1,Sr=!1,wr=!1,xr=!1,Cr=!1,Er=!1,Tr=!1,Mr=!1,Dr=!1,kr=!1,Lr=!1,Ar=!1;yr={requirePackages(...e){return new Promise(((t,i)=>{var n,r,o,s;return o=[],n=[],r=e.length,s=()=>{if(0==--r)return n.length>0?i(n):t(o)},e.forEach(((e,t)=>{var i,r;return i=e=>(n[t]=e,s()),null!=(r=atom.packages.activatePackage(e).then((e=>(o[t]=e.mainModule,s())))).fail?r.fail(i):null!=r.catch?r.catch(i):void 0}))}))},registerOrUpdateElement:(Tr||(Tr=!0,$n={},({deprecate:ar}=(Er||(Er=!0,f()),Vn)),null!=mr.__CUSTOM_HTML_ELEMENTS_CLASSES__?(mr.__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__=mr.__CUSTOM_HTML_ELEMENTS_CLASSES__,delete mr.__CUSTOM_HTML_ELEMENTS_CLASSES__):null==mr.__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__&&(mr.__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__={}),rr=["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"],sr=function(e,t){return rr.forEach((function(t){return Object.defineProperty(e,t,{value(){var e;return null!=(e=this["__"+t])?e.apply(this,arguments):void 0},writable:!0,enumerable:!0,configurable:!0})})),Object.getOwnPropertyNames(t).forEach((i=>{var n;if("constructor"!==i)return n=Object.getOwnPropertyDescriptor(t,i),rr.indexOf(i)>-1?Object.defineProperty(e,"__"+i,n):Object.defineProperty(e,i,n)}))},or=(e,t)=>Object.getOwnPropertyNames(t).forEach((i=>{if("length"!==i&&"name"!==i&&"arguments"!==i&&"caller"!==i&&"prototype"!==i)return Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),$n=(e,t)=>{var i,n,r,o,s;return({class:r}=t),(o=null!=r?r.prototype:null!=(s=t.prototype)?s:t)===t&&ar("Using the prototype as the second argument is deprecated, use the prototype option instead"),__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__[e]?(i=__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__[e],sr(i.prototype,o),null!=r&&or(i,r),i):(n=Object.create(HTMLElement.prototype),sr(n,o),i=document.registerElement(e,{prototype:Object.create(n)}),null!=r&&or(i,r),__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__[e]=i)}),$n),Ancestors:m(),AncestorsMethods:m(),DisposableEvents:v(),EventsDelegation:(Lr||(Lr=!0,Zn={},tr=g(),er=v(),({Disposable:Jn,CompositeDisposable:Xn}=ur),nr=(e,t)=>{var i,n;for(i in n=[],e)n.push(t(i,e[i]));return n},ir="__NONE__",Zn=function(){class e extends tr{subscribeTo(e,t,i,n){var r,o;return e instanceof HTMLElement||([e,t,i,n]=[this,e,t,i]),"object"==typeof t&&([i,t,n]=[t,ir,i]),null==this.eventsMap&&(this.eventsMap=new WeakMap),null==this.disposablesMap&&(this.disposablesMap=new WeakMap),null==this.eventsMap.get(e)&&this.eventsMap.set(e,{}),null==this.disposablesMap.get(e)&&this.disposablesMap.set(e,{}),o=this.eventsMap.get(e),r=this.disposablesMap.get(e),nr(i,((i,s)=>(null==o[i]&&(o[i]={},r[i]=this.createEventListener(e,i,n)),o[i][t]=s))),new Jn((()=>this.unsubscribeFrom(e,t,i)))}unsubscribeFrom(e,t,i){var n,r,o;if(e instanceof HTMLElement||([e,t,i]=[this,e,t]),"object"==typeof t&&([i,t]=[t,ir]),o=this.eventsMap.get(e)){for(r in i)delete o[r][t],0===Object.keys(o[r]).length&&((n=this.disposablesMap.get(e))[r].dispose(),delete n[r],delete o[r]);return 0===Object.keys(o).length?(this.eventsMap.delete(e),this.disposablesMap.delete(e)):void 0}}createEventListener(e,t,i){return this.addDisposableEventListener(e,t,(i=>{var n,r,o;if(n=null!=(r=this.eventsMap.get(e))?r[t]:void 0)return({target:o}=i),this.decorateEvent(i),this.eachSelectorFromTarget(i,o,n),i.isPropagationStopped||"function"==typeof n.__NONE__&&n.__NONE__(i),!0}),i)}eachSelectorFromTarget(e,t,i){return this.nodeAndItsAncestors(t,(t=>{if(!e.isPropagationStopped)return this.eachSelector(i,((i,n)=>{var r;if(r=this.targetMatch(t,i),!e.isImmediatePropagationStopped&&r)return n(e)}))}))}eachSelector(e,t){var i,n,r,o;for(-1!==(r=Object.keys(e)).indexOf(ir)&&r.splice(r.indexOf(ir),1),r.sort(((e,t)=>t.split(" ").length-e.split(" ").length)),i=0,o=r.length;o>i;i++)if(t(n=r[i],e[n]))return!0;return!1}targetMatch(e,t){var i;if(e.matches(t))return!0;for(i=e.parentNode;null!=i&&null!=i.matches;){if(i.matches(t))return!0;i=i.parentNode}return!1}nodeAndItsAncestors(e,t){var i,n;for(i=e.parentNode,t(e),n=[];null!=i&&null!=i.matches;)t(i),n.push(i=i.parentNode);return n}decorateEvent(e){var t,i;return t=Event.prototype.stopPropagation,e.stopPropagation=function(){return this.isPropagationStopped=!0,t.apply(this,arguments)},i=Event.prototype.stopImmediatePropagation,e.stopImmediatePropagation=function(){return this.isImmediatePropagationStopped=!0,i.apply(this,arguments)}}}return er.includeInto(e),e}()),Zn),SpacePenDSL:function(){var e,t,i,n,r,o,s;return Ar||(Ar=!0,Gn={},i=g(),o="a abbr address article aside audio b bdi bdo blockquote body button canvas caption cite code colgroup datalist dd del details dfn dialog div dl dt em fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header html i iframe ins kbd label legend li main map mark menu meter nav noscript object ol optgroup option output p pre progress q rp rt ruby s samp script section select small span strong style sub summary sup table tbody td textarea tfoot th thead time title tr u ul var video area base br col command embed hr img input keygen link meta param source track wbr".split(/\s+/),n={},"area base br col command embed hr img input keygen link meta param source track wbr".split(/\s+/).forEach((e=>n[e]=!0)),e=class extends i{buildContent(){if(null!=this.constructor.content)return r.buildContent(this,this.constructor.content)}},Gn=r=function(){class t extends i{static includeInto(e){return super.includeInto(e),Object.defineProperty(e,"content",{enumerable:!1,get(){return this.prototype.__content__},set(e){return this.prototype.__content__=e}}),Object.defineProperty(e.prototype,"createdCallback",{enumerable:!0,get(){return this.__create__},set(e){return this.__createdCallback__=e}}),Object.defineProperty(e.prototype,"__create__",{enumerable:!0,value(){if(null!=this.__content__&&t.buildContent(this,this.__content__),null!=this.__createdCallback__)return this.__createdCallback__()}}),e.useShadowRoot=()=>e.prototype.__useShadowRoot__=!0}static buildContent(e,t){var i,n,r;return r=new s,t.call(r),[i]=r.buildHtml(),(n=n=e.__useShadowRoot__?e.shadowRoot=e.createShadowRoot():e).innerHTML=i,this.wireOutlets(e,n)}static wireOutlets(e,t){var i,n,r,o;for(n=0,r=(o=t.querySelectorAll("[outlet]")).length;r>n;n++)e[(i=o[n]).getAttribute("outlet")]=i,i.removeAttribute("outlet")}}return t.Babel=e,t}(),s=function(){class e{constructor(){this.currentBuilder=new t}subview(e,t){return this.currentBuilder.subview(e,t)}text(e){return this.currentBuilder.text(e)}tag(e,...t){return this.currentBuilder.tag(e,...t)}raw(e){return this.currentBuilder.raw(e)}buildHtml(){return this.currentBuilder.buildHtml()}}return o.forEach((function(t){return e.prototype[t]=function(...e){return this.currentBuilder.tag(t,...e)}})),e}(),t=class{constructor(){this.document=[],this.postProcessingSteps=[]}buildHtml(){return[this.document.join(""),this.postProcessingSteps]}tag(e,...t){var i;if(i=this.extractOptions(t),this.openTag(e,i.attributes),!n.hasOwnProperty(e))return"function"==typeof i.content&&i.content(),i.text&&this.text(i.text),this.closeTag(e);if(null!=i.text||null!=i.content)throw Error(`Self-closing tag ${e} cannot have text or content`)}openTag(e,t){var i,n,r;return 0===this.document.length&&null==t&&(t={}),r=(n=(()=>{var e;for(i in e=[],t)e.push(`${i}="${t[i]}"`);return e})()).length?" "+n.join(" "):"",this.document.push(`<${e}${r}>`)}closeTag(e){return this.document.push(`</${e}>`)}text(e){var t;return t=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.document.push(t)}raw(e){return this.document.push(e)}subview(e,t){var i;return i="subview-"+ ++idCounter,this.tag("div",{id:i}),this.postProcessingSteps.push((n=>(n[e]=t,t.parentView=n,n.find("div#"+i).replaceWith(t))))}extractOptions(e){var t,i,n,r;for(r={},i=0,n=e.length;n>i;i++)switch(typeof(t=e[i])){case"function":r.content=t;break;case"string":case"number":r.text=""+t;break;default:r.attributes=t}return r}}),Gn}()},(cr={}).forEach=(e,t)=>{for(var i=0;e.length>i;i++){var n=t(e[i]);if(n)return n}};var Or,_r,Pr,Rr,Ir,Hr=cr.forEach;Or=e=>{var t=e.stateHandler.getState;return{isDetectable(e){var i=t(e);return i&&!!i.isDetectable},markAsDetectable(e){t(e).isDetectable=!0},isBusy:e=>!!t(e).busy,markBusy(e,i){t(e).busy=!!i}}},_r=e=>{function t(t){var n=e.get(t);return void 0===n?[]:i[n]||[]}var i={};return{get:t,add(t,n){var r=e.get(t);i[r]||(i[r]=[]),i[r].push(n)},removeListener(e,i){for(var n=t(e),r=0,o=n.length;o>r;++r)if(n[r]===i){n.splice(r,1);break}},removeAllListeners(e){var i=t(e);i&&(i.length=0)}}},Pr=()=>{var e=1;return{generate:()=>e++}},Rr=e=>{var t=e.idGenerator,i=e.stateHandler.getState;return{get(e){var t=i(e);return t&&void 0!==t.id?t.id:null},set(e){var n=i(e);if(!n)throw Error("setId required the element to have a resize detection state.");var r=t.generate();return n.id=r,r}}},Ir=e=>{function t(){}var i={log:t,warn:t,error:t};if(!e&&window.console){var n=(e,t)=>{e[t]=function(){var e=console[t];if(e.apply)e.apply(console,arguments);else for(var i=0;arguments.length>i;i++)e(arguments[i])}};n(i,"log"),n(i,"warn"),n(i,"error")}return i};var Fr={},Nr=Fr={};Nr.isIE=e=>{return!(-1===(t=navigator.userAgent.toLowerCase()).indexOf("msie")&&-1===t.indexOf("trident")&&-1===t.indexOf(" edge/")||e&&e!==(()=>{var e=3,t=document.createElement("div"),i=t.getElementsByTagName("i");do{t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e"}while(i[0]);return e>4?e:void 0})());var t},Nr.isLegacyOpera=()=>!!window.opera;var jr,Wr={};(Wr={}).getOption=(e,t,i)=>{var n=e[t];return null==n&&void 0!==i?i:n},jr=e=>{function t(){for(l=!0;a.size();){var e=a;a=y(),e.process()}l=!1}function i(){s=setTimeout(t,0)}var n=(e=e||{}).reporter,r=Wr.getOption(e,"async",!0),o=Wr.getOption(e,"auto",!0);o&&!r&&(n&&n.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),r=!0);var s,a=y(),l=!1;return{add(e,t){!l&&o&&r&&0===a.size()&&i(),a.add(e,t)},force(e){l||(void 0===e&&(e=r),s&&(clearTimeout(s),s=null),e?i():t())}}};var Br,qr={};qr={initState:e=>(e._erd={},b(e)),getState:b,cleanState(e){delete e._erd}},Br=function(e){function t(t){var i=e.important?" !important; ":"; ";return(t.join(i)+i).trim()}function i(e){return o(e).object}var n=(e=e||{}).reporter,r=e.batchProcessor,o=e.stateHandler.getState;if(!n)throw Error("Missing required dependency: reporter.");return{makeDetectable(e,i,s){s||(s=i,i=e,e=null),e=e||{},Fr.isIE(8)?s(i):function(i,s){function a(){function t(){if("static"===d.position){i.style.setProperty("position","relative",e.important?"important":"");var t=(t,i,n,r)=>{var o=n[r];"auto"!==o&&"0"!==(e=>e.replace(/[^-\d\.]/g,""))(o)&&(t.warn("An element that is positioned static has style."+r+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",i),i.style.setProperty(r,"0",e.important?"important":""))};t(n,i,d,"top"),t(n,i,d,"right"),t(n,i,d,"bottom"),t(n,i,d,"left")}}""!==d.position&&(t(),c=!0);var r=document.createElement("object");r.style.cssText=l,r.tabIndex=-1,r.type="text/html",r.setAttribute("aria-hidden","true"),r.onload=function(){c||t(),function e(t,i){if(!t.contentDocument){var n=o(t);return n.checkForObjectDocumentTimeoutId&&window.clearTimeout(n.checkForObjectDocumentTimeoutId),void(n.checkForObjectDocumentTimeoutId=setTimeout((()=>{n.checkForObjectDocumentTimeoutId=0,e(t,i)}),100))}i(t.contentDocument)}(this,(e=>{s(i)}))},Fr.isIE()||(r.data="about:blank"),o(i)&&(i.appendChild(r),o(i).object=r,Fr.isIE()&&(r.data="about:blank"))}var l=t(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),c=!1,d=window.getComputedStyle(i),h=i.offsetWidth,u=i.offsetHeight;o(i).startSize={width:h,height:u},r?r.add(a):a()}(i,s)},addListener(e,t){function n(){t(e)}if(Fr.isIE(8))o(e).object={proxy:n},e.attachEvent("onresize",n);else{var r=i(e);if(!r)throw Error("Element is not detectable by this strategy.");r.contentDocument.defaultView.addEventListener("resize",n)}},uninstall(e){if(o(e)){var t=i(e);t&&(Fr.isIE(8)?e.detachEvent("onresize",t.proxy):e.removeChild(t),o(e).checkForObjectDocumentTimeoutId&&window.clearTimeout(o(e).checkForObjectDocumentTimeoutId),delete o(e).object)}}}};var zr,Ur=cr.forEach;zr=e=>{function t(e){((e,t,n)=>{if(!e.getElementById(t)){var r=n+"_animation",o=n+"_animation_active",s="/* Created by the element-resize-detector library. */\n";s+="."+n+" > div::-webkit-scrollbar { "+i(["display: none"])+" }\n\n",s+="."+o+" { "+i(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+r,"animation-name: "+r])+" }\n",s+="@-webkit-keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",function(i,n){n=n||(t=>{e.head.appendChild(t)});var r=e.createElement("style");r.innerHTML=i,r.id=t,n(r)}(s+="@keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}})(e,"erd_scroll_detection_scrollbar_style",u)}function i(t){var i=e.important?" !important; ":"; ";return(t.join(i)+i).trim()}function n(e,t,i){if(e.addEventListener)e.addEventListener(t,i);else{if(!e.attachEvent)return a.error("[scroll] Don't know how to add event listeners.");e.attachEvent("on"+t,i)}}function r(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i);else{if(!e.detachEvent)return a.error("[scroll] Don't know how to remove event listeners.");e.detachEvent("on"+t,i)}}function o(e){return c(e).container.childNodes[0].childNodes[0].childNodes[0]}function s(e){return c(e).container.childNodes[0].childNodes[0].childNodes[1]}var a=(e=e||{}).reporter,l=e.batchProcessor,c=e.stateHandler.getState,d=e.idHandler;if(!l)throw Error("Missing required dependency: batchProcessor");if(!a)throw Error("Missing required dependency: reporter.");var h=(()=>{var e=document.createElement("div");e.style.cssText=i(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]);var t=document.createElement("div");t.style.cssText=i(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),t.appendChild(e),document.body.insertBefore(t,document.body.firstChild);var n=500-t.clientWidth,r=500-t.clientHeight;return document.body.removeChild(t),{width:n,height:r}})(),u="erd_scroll_detection_container";return t(window.document),{makeDetectable(e,t,r){function p(){if(e.debug){var i=[].slice.call(arguments);if(i.unshift(d.get(t),"Scroll: "),a.log.apply)a.log.apply(null,i);else for(var n=0;i.length>n;n++)a.log(i[n])}}function f(e){var t=c(e).container.childNodes[0],i=window.getComputedStyle(t);return!i.width||-1===i.width.indexOf("px")}function g(){var e=window.getComputedStyle(t),i={};return i.position=e.position,i.width=t.offsetWidth,i.height=t.offsetHeight,i.top=e.top,i.right=e.right,i.bottom=e.bottom,i.left=e.left,i.widthCSS=e.width,i.heightCSS=e.height,i}function m(){if(p("storeStyle invoked."),c(t)){var e=g();c(t).style=e}else p("Aborting because element has been uninstalled")}function v(e,t,i){c(e).lastWidth=t,c(e).lastHeight=i}function y(){return 2*h.width+1}function b(){return 2*h.height+1}function S(e){return e+10+y()}function w(e){return e+10+b()}function x(e,t,i){var n=o(e),r=s(e),a=S(t),l=w(i),c=(e=>2*e+y())(t),d=(e=>2*e+b())(i);n.scrollLeft=a,n.scrollTop=l,r.scrollLeft=c,r.scrollTop=d}function C(){var e=c(t).container;if(!e){(e=document.createElement("div")).className=u,e.style.cssText=i(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),c(t).container=e,(e=>{e.className+=" "+u+"_animation_active"})(e),t.appendChild(e);var r=()=>{c(t).onRendered&&c(t).onRendered()};n(e,"animationstart",r),c(t).onAnimationStart=r}return e}function E(){function r(){c(t).onExpand&&c(t).onExpand()}function o(){c(t).onShrink&&c(t).onShrink()}if(p("Injecting elements"),c(t)){(()=>{var i=c(t).style;if("static"===i.position){t.style.setProperty("position","relative",e.important?"important":"");var n=(e,t,i,n)=>{var r=i[n];"auto"!==r&&"0"!==(e=>e.replace(/[^-\d\.]/g,""))(r)&&(e.warn("An element that is positioned static has style."+n+"="+r+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+n+" will be set to 0. Element: ",t),t.style[n]=0)};n(a,t,i,"top"),n(a,t,i,"right"),n(a,t,i,"bottom"),n(a,t,i,"left")}})();var s=c(t).container;s||(s=C());var l,d,f,g,m=h.width,v=h.height,y=i(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),b=i(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(["left: "+(l=(l=-(1+m))?l+"px":"0"),"top: "+(d=(d=-(1+v))?d+"px":"0"),"right: "+(g=(g=-m)?g+"px":"0"),"bottom: "+(f=(f=-v)?f+"px":"0")])),S=i(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),w=i(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),x=i(["position: absolute","left: 0","top: 0"]),E=i(["position: absolute","width: 200%","height: 200%"]),T=document.createElement("div"),M=document.createElement("div"),D=document.createElement("div"),k=document.createElement("div"),L=document.createElement("div"),A=document.createElement("div");T.dir="ltr",T.style.cssText=y,T.className=u,M.className=u,M.style.cssText=b,D.style.cssText=S,k.style.cssText=x,L.style.cssText=w,A.style.cssText=E,D.appendChild(k),L.appendChild(A),M.appendChild(D),M.appendChild(L),T.appendChild(M),s.appendChild(T),n(D,"scroll",r),n(L,"scroll",o),c(t).onExpandScroll=r,c(t).onShrinkScroll=o}else p("Aborting because element has been uninstalled")}function T(){function i(t,i,n){var r=(e=>o(e).childNodes[0])(t),s=S(i),a=w(n);r.style.setProperty("width",s+"px",e.important?"important":""),r.style.setProperty("height",a+"px",e.important?"important":"")}function n(n){var o=t.offsetWidth,s=t.offsetHeight,h=o!==c(t).lastWidth||s!==c(t).lastHeight;p("Storing current size",o,s),v(t,o,s),l.add(0,(()=>{h&&(c(t)?r()?(e.debug&&(t.offsetWidth===o&&t.offsetHeight===s||a.warn(d.get(t),"Scroll: Size changed before updating detector elements.")),i(t,o,s)):p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled"))})),l.add(1,(()=>{c(t)?r()?x(t,o,s):p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled")})),h&&n&&l.add(2,(()=>{c(t)?r()?n():p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled")}))}function r(){return!!c(t).container}function h(){p("notifyListenersIfNeeded invoked");var e=c(t);return void 0===c(t).lastNotifiedWidth&&e.lastWidth===e.startSize.width&&e.lastHeight===e.startSize.height?p("Not notifying: Size is the same as the start size, and there has been no notification yet."):e.lastWidth===e.lastNotifiedWidth&&e.lastHeight===e.lastNotifiedHeight?p("Not notifying: Size already notified"):(p("Current size not notified, notifying..."),e.lastNotifiedWidth=e.lastWidth,e.lastNotifiedHeight=e.lastHeight,void Ur(c(t).listeners,(e=>{e(t)})))}function u(){p("Scroll detected."),f(t)?p("Scroll event fired while unrendered. Ignoring..."):n(h)}if(p("registerListenersAndPositionElements invoked."),c(t)){c(t).onRendered=()=>{if(p("startanimation triggered."),f(t))p("Ignoring since element is still unrendered...");else{p("Element rendered.");var e=o(t),i=s(t);0!==e.scrollLeft&&0!==e.scrollTop&&0!==i.scrollLeft&&0!==i.scrollTop||(p("Scrollbars out of sync. Updating detector elements..."),n(h))}},c(t).onExpand=u,c(t).onShrink=u;var g=c(t).style;i(t,g.width,g.height)}else p("Aborting because element has been uninstalled")}function M(){if(p("finalizeDomMutation invoked."),c(t)){var e=c(t).style;v(t,e.width,e.height),x(t,e.width,e.height)}else p("Aborting because element has been uninstalled")}function D(){r(t)}function k(){var e;p("Installing..."),c(t).listeners=[],e=g(),c(t).startSize={width:e.width,height:e.height},p("Element start size",c(t).startSize),l.add(0,m),l.add(1,E),l.add(2,T),l.add(3,M),l.add(4,D)}r||(r=t,t=e,e=null),e=e||{},p("Making detectable..."),(e=>!(e=>e===e.ownerDocument.body||e.ownerDocument.body.contains(e))(e)||null===window.getComputedStyle(e))(t)?(p("Element is detached"),C(),p("Waiting until element is attached..."),c(t).onRendered=()=>{p("Element is now attached"),k()}):k()},addListener(e,t){if(!c(e).listeners.push)throw Error("Cannot add listener to an element that is not detectable.");c(e).listeners.push(t)},uninstall(e){var t=c(e);t&&(t.onExpandScroll&&r(o(e),"scroll",t.onExpandScroll),t.onShrinkScroll&&r(s(e),"scroll",t.onShrinkScroll),t.onAnimationStart&&r(t.container,"animationstart",t.onAnimationStart),t.container&&e.removeChild(t.container))},initDocument:t}},lr=e=>{var t;if((e=e||{}).idHandler)t={get:t=>e.idHandler.get(t,!0),set:e.idHandler.set};else{var i=Pr(),n=Rr({idGenerator:i,stateHandler:qr});t=n}var r=e.reporter;r||(r=Ir(!1===r));var o=C(e,"batchProcessor",jr({reporter:r})),s={};s.callOnAdd=!!C(e,"callOnAdd",!0),s.debug=!!C(e,"debug",!1);var a,l=_r(t),c=Or({stateHandler:qr}),d=C(e,"strategy","object"),h=C(e,"important",!1),u={reporter:r,batchProcessor:o,stateHandler:qr,idHandler:t,important:h};if("scroll"===d&&(Fr.isLegacyOpera()?(r.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),d="object"):Fr.isIE(9)&&(r.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),d="object")),"scroll"===d)a=zr(u);else{if("object"!==d)throw Error("Invalid strategy name: "+d);a=Br(u)}var p={};return{listenTo(e,i,n){function o(e){var t=l.get(e);Hr(t,(t=>{t(e)}))}function d(e,t,i){l.add(t,i),e&&i(t)}if(n||(n=i,i=e,e={}),!i)throw Error("At least one element required.");if(!n)throw Error("Listener required.");if(x(i))i=[i];else{if(!S(i))return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");i=w(i)}var u=0,f=C(e,"callOnAdd",s.callOnAdd),g=C(e,"onReady",(()=>{})),m=C(e,"debug",s.debug);Hr(i,(e=>{qr.getState(e)||(qr.initState(e),t.set(e));var s=t.get(e);if(m&&r.log("Attaching listener to element",s,e),!c.isDetectable(e))return m&&r.log(s,"Not detectable."),c.isBusy(e)?(m&&r.log(s,"System busy making it detectable"),d(f,e,n),p[s]=p[s]||[],void p[s].push((()=>{++u===i.length&&g()}))):(m&&r.log(s,"Making detectable..."),c.markBusy(e,!0),a.makeDetectable({debug:m,important:h},e,(e=>{if(m&&r.log(s,"onElementDetectable"),qr.getState(e)){c.markAsDetectable(e),c.markBusy(e,!1),a.addListener(e,o),d(f,e,n);var t=qr.getState(e);t&&t.startSize&&(t.startSize.width===e.offsetWidth&&t.startSize.height===e.offsetHeight||o(e)),p[s]&&Hr(p[s],(e=>{e()}))}else m&&r.log(s,"Element uninstalled before being detectable.");delete p[s],++u===i.length&&g()})));m&&r.log(s,"Already detecable, adding listener."),d(f,e,n),u++})),u===i.length&&g()},removeListener:l.removeListener,removeAllListeners:l.removeAllListeners,uninstall(e){if(!e)return r.error("At least one element is required.");if(x(e))e=[e];else{if(!S(e))return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=w(e)}Hr(e,(e=>{l.removeAllListeners(e),a.uninstall(e),qr.cleanState(e)}))},initDocument(e){a.initDocument&&a.initDocument(e)}}};var Vr,$r,Qr,Kr,Yr,Zr,Gr,Xr,Jr,eo,to,io,no,ro,oo,so,ao,lo,co,ho,uo,po,fo,go,mo,vo,yo,bo,So,wo,xo,Co,Eo,To,Mo,Do,ko,Lo,Ao,Oo,_o,Po,Ro,Io,Ho,Fo,No,jo,Wo,Bo,qo,zo,Uo,Vo,$o,Qo,Ko,Yo,Zo,Go,Xo,Jo,es,ts,is,ns,rs,os,ss,as,ls,cs,ds,hs,us,ps,fs,gs,ms,vs,ys,bs,Ss,ws,xs,Cs,Es,Ts,Ms,Ds,ks,Ls,As,Os,_s,Ps,Rs,Is,Hs,Fs,Ns,js,Ws,Bs,qs,zs,Us,Vs,$s,Qs,Ks,Ys,Zs,Gs,Xs,Js,ea,ta,ia,na,ra,oa,sa,aa,la,ca,da,ha,ua,pa,fa,ga,ma,va,ya,ba,Sa,wa,xa,Ca,Ea,Ta,Ma,Da,ka,La,Aa,Oa,_a,Pa,Ra,Ia,Ha,Fa,Na,ja,Wa,Ba,qa,za,Ua,Va,$a,Qa,Ka,Ya,Za,Ga,Xa,Ja,el,tl,il,nl,rl,ol,sl,al,ll,cl,dl,hl,ul,pl,fl,gl,ml,vl,yl,bl,Sl,wl,xl,Cl,El,Tl,Ml,Dl,kl,Ll,Al,Ol,_l,Pl,Rl,Il,Hl,Fl,Nl,jl,Wl,Bl,ql,zl,Ul,Vl,$l,Ql,Kl,Yl,Zl,Gl,Xl,Jl,ec,tc,ic,nc,rc,oc,sc,ac,lc,cc,dc={},hc=!1,uc=!1,pc=!1,fc=!1,gc=!1,mc=!1,vc=!1,yc=!1,bc=!1,Sc=!1,wc=!1,xc=!1,Cc=!1,Ec=!1,Tc=!1,Mc=!1,Dc=!1,kc=!1,Lc=!1,Ac=!1,Oc=!1,_c=!1,Pc=!1,Rc=!1,Ic=!1,Hc=!1,Fc=!1,Nc=!1,jc=!1,Wc=!1,Bc=!1,qc=!1,zc=!1,Uc=!1,Vc=!1,$c=!1,Qc=!1,Kc=!1,Yc=!1,Zc=!1,Gc=!1,Xc=!1,Jc=!1,ed=!1,td=!1,id=!1,nd=!1,rd=!1,od=!1,sd=!1,ad=!1,ld=!1,cd=!1,dd=!1,hd=!1,ud=!1,pd=!1,fd=!1,gd=!1,md=!1,vd=!1,yd=!1,bd=!1,Sd=!1,wd=!1,xd=!1,Cd=!1,Ed=!1,Td=!1,Md=!1,Dd=!1,kd=!1,Ld=!1,Ad=!1,Od=!1,_d=!1,Pd=!1,Rd=!1,Id=!1,Hd=!1,Fd=!1,Nd=!1,jd=!1,Wd=!1,Bd=!1,qd=!1,zd=!1,Ud=!1,Vd=!1,$d=!1,Qd=!1,Kd=!1,Yd=!1,Zd=!1,Gd=!1,Xd=!1,Jd=!1,eh=!1,th=!1,ih=!1,nh=!1,rh=!1,oh=!1,sh=!1,ah=!1,lh=!1,ch=!1,dh=!1,hh=!1,uh=!1,ph=!1,fh=!1,gh=!1,mh=!1,vh=!1,yh=!1,bh=!1,Sh=!1,wh=!1,xh=!1,Ch=!1,Eh=!1,Th=!1,Mh=!1,Dh=!1,kh=!1,Lh=!1,Ah=!1,Oh=!1,_h=!1,Ph=!1,Rh=!1,Ih=!1,Hh=!1,Fh=!1,Nh=!1,jh=!1,Wh=!1,Bh=!1,qh=!1,zh=!1,Uh=!1,Vh=!1,$h=!1,Qh=!1,Kh=!1,Yh=!1,Zh=!1,Gh=!1,Xh=!1,Jh=!1,eu=!1,tu=!1,iu=!1;cc=[].slice,iu||(iu=!0,t(ec={}),tu||(tu=!0,Xl={},zi(),zi(),(Jl=qi(Gl))._=Jl,i(Xl,"default",(()=>Jl))),n(ec,zi()),i(ec,"default",(()=>Jl))),nc={cmd:"⌘",ctrl:"⌃",alt:"⌥",option:"⌥",shift:"⇧",enter:"⏎",left:"←",right:"→",up:"↑",down:"↓"},rc={cmd:"Cmd",ctrl:"Ctrl",alt:"Alt",option:"Alt",shift:"Shift",enter:"Enter",left:"Left",right:"Right",up:"Up",down:"Down"},sc={"~":"`",_:"-","+":"=","|":"\\","{":"[","}":"]",":":";",'"':"'","<":",",">":".","?":"/"},ac=e=>{var t,i,n,r,o;if(n=0,i=[],null==e)return i;for(t=r=0,o=e.length;o>r;t=++r)"."!==e[t]||0!==t&&"\\"===e[t-1]||(i.push(e.substring(n,t)),n=t+1);return i.push(e.substr(n,e.length)),i},ic=e=>lc.isObject(e)&&!lc.isArray(e),oc={adviseBefore(e,t,i){var n;return n=e[t],e[t]=function(){var e;if(e=1>arguments.length?[]:cc.call(arguments,0),!1!==i.apply(this,e))return n.apply(this,e)}},camelize(e){return e?e.replace(/[_-]+(\w)/g,(e=>e[1].toUpperCase())):""},capitalize(e){return e?"github"===e.toLowerCase()?"GitHub":e[0].toUpperCase()+e.slice(1):""},compactObject(e){var t,i,n;for(t in i={},e)null!=(n=e[t])&&(i[t]=n);return i},dasherize(e){return e?(e=e[0].toLowerCase()+e.slice(1)).replace(/([A-Z])|(_)/g,((e,t)=>t?"-"+t.toLowerCase():"-")):""},deepClone(e){return lc.isArray(e)?e.map((e=>oc.deepClone(e))):lc.isObject(e)&&!lc.isFunction(e)?oc.mapObject(e,((e,t)=>[e,oc.deepClone(t)])):e},deepExtend(e){var t,i,n,r,o,s,a;for(r=e,t=0;++t<arguments.length;)if(n=arguments[t],ic(r)&&ic(n))for(o=0,s=(a=Object.keys(n)).length;s>o;o++)r[i=a[o]]=oc.deepExtend(r[i],n[i]);else r=oc.deepClone(n);return r},deepContains(e,t){var i,n;if(null==e)return!1;for(i=0,n=e.length;n>i;i++)if(lc.isEqual(e[i],t))return!0;return!1},endsWith(e,t){return null==t&&(t=""),!!e&&-1!==e.indexOf(t,e.length-t.length)},escapeAttribute(e){return e?e.replace(/"/g,"&quot;").replace(/\n/g,"").replace(/\\/g,"-"):""},escapeRegExp(e){return e?e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):""},humanizeEventName(e,t){var i,n,r,o;return n=(o=e.split(":"))[0],null==(i=o[1])?oc.undasherize(n):(r=oc.undasherize(n),null==t&&(t=oc.undasherize(i)),r+": "+t)},humanizeKey(e,t){var i;return null==t&&(t=process.platform),e?(i="darwin"===t?nc:rc)[e]?i[e]:1===e.length&&null!=sc[e]?[i.shift,sc[e]]:1===e.length&&e===e.toUpperCase()&&e.toUpperCase()!==e.toLowerCase()?[i.shift,e.toUpperCase()]:1===e.length||/f[0-9]{1,2}/.test(e)?e.toUpperCase():"darwin"===t?e:oc.capitalize(e):e},humanizeKeystroke(e,t){var i,n,r,o,s,a,l,c,d,h;if(null==t&&(t=process.platform),!e)return e;for(i=[],l=0,d=(s=e.split(" ")).length;d>l;l++){for(o=[],n=c=0,h=(a=(e=s[l]).split("-")).length;h>c;n=++c)""===(r=a[n])&&""===a[n-1]&&(r="-"),r&&o.push(oc.humanizeKey(r,t));o=(o=lc.uniq(lc.flatten(o))).join("darwin"===t?"":"+"),i.push(o)}return i.join(" ")},isSubset(e,t){return lc.every(e,(e=>lc.include(t,e)))},losslessInvert(e){var t,i,n;for(i in t={},e)null==t[n=e[i]]&&(t[n]=[]),t[n].push(i);return t},mapObject(e,t){var i,n,r,o,s,a;for(n={},r=0,o=(s=Object.keys(e)).length;o>r;r++)n[i=(a=t(i=s[r],e[i]))[0]]=a[1];return n},multiplyString(e,t){var i,n;for(i="",n=0;t>n;)i+=e,n++;return i},pluralize(e,t,i){return null==e&&(e=0),null==i&&(i=t+"s"),1===e?e+" "+t:e+" "+i},remove(e,t){var i;return 0>(i=e.indexOf(t))||e.splice(i,1),e},setValueForKeyPath(e,t,i){var n,r;for(r=ac(t);r.length>1;)null==e[n=r.shift()]&&(e[n]={}),e=e[n];return null!=i?e[r.shift()]=i:delete e[r.shift()]},hasKeyPath(e,t){var i,n,r,o;for(r=0,o=(n=ac(t)).length;o>r;r++){if(!e.hasOwnProperty(i=n[r]))return!1;e=e[i]}return!0},spliceWithArray(e,t,i,n,r){var o,s,a,l;if(null==r&&(r=1e5),r>n.length)return e.splice.apply(e,[t,i].concat(cc.call(n)));for(e.splice(t,i),l=[],o=s=0,a=n.length;r>0?a>=s:s>=a;o=s+=r)l.push(e.splice.apply(e,[t+o,0].concat(cc.call(n.slice(o,o+r)))));return l},sum(e){var t,i,n;for(t=0,i=0,n=e.length;n>i;i++)t+=e[i];return t},uncamelcase(e){var t;return e?(t=e.replace(/([A-Z])|_+/g,((e,t)=>(null==t&&(t="")," "+t))),oc.capitalize(t.trim())):""},undasherize(e){return e?e.split("-").map(oc.capitalize).join(" "):""},underscore(e){return e?(e=e[0].toLowerCase()+e.slice(1)).replace(/([A-Z])|-+/g,((e,t)=>(null==t&&(t=""),"_"+t.toLowerCase()))):""},valueForKeyPath(e,t){var i,n,r;for(n=0,r=(i=ac(t)).length;r>n;n++)if(null==(e=e[i[n]]))return;return e},isEqual(e,t,i,n){return lc.isArray(i)&&lc.isArray(n)?tc(e,t,i,n):tc(e,t)},isEqualForProperties(){var e,t,i,n,r,o;for(e=arguments[0],t=arguments[1],r=0,o=(i=3>arguments.length?[]:cc.call(arguments,2)).length;o>r;r++)if(!lc.isEqual(e[n=i[r]],t[n]))return!1;return!0}},tc=(e,t,i,n)=>{var r,o,s,a,l,c,d,h,u,p,f,g,m;if(null==i&&(i=[]),null==n&&(n=[]),e===t)return lc.isEqual(e,t);if(lc.isFunction(e)||lc.isFunction(t))return lc.isEqual(e,t);for(f=i.length;f--;)if(i[f]===e)return n[f]===t;if(i.push(e),n.push(t),h=!1,lc.isFunction(null!=e?e.isEqual:void 0))h=e.isEqual(t,i,n);else if(lc.isFunction(null!=t?t.isEqual:void 0))h=t.isEqual(e,n,i);else if(lc.isArray(e)&&lc.isArray(t)&&e.length===t.length){for(h=!0,u=g=0,m=e.length;m>g;u=++g)if(!tc(e[u],t[u],i,n)){h=!1;break}}else if(lc.isRegExp(e)&&lc.isRegExp(t))h=lc.isEqual(e,t);else if(lc.isElement(e)&&lc.isElement(t))h=e===t;else if(lc.isObject(e)&&lc.isObject(t))if(l=t.constructor,o=lc.isFunction(r=e.constructor)&&r instanceof r,c=lc.isFunction(l)&&l instanceof l,r===l||o&&c){for(p in s=0,h=!0,e)if(a=e[p],lc.has(e,p)&&(s++,!lc.has(t,p)||!tc(a,t[p],i,n))){h=!1;break}if(h){for(p in d=0,t)lc.has(t,p)&&d++;h=s===d}}else h=!1;else h=lc.isEqual(e,t);return i.pop(),n.pop(),h},dc=(lc=ec).extend({},lc,oc),g();class nu{constructor(){this.canvas=document.createElement("canvas");const e="linux"!==process.platform;this.context=this.canvas.getContext("2d",{desynchronized:e}),this.canvas.webkitImageSmoothingEnabled=!1,this.context.imageSmoothingEnabled=!1,this.offscreenCanvas=document.createElement("canvas"),this.offscreenContext=this.offscreenCanvas.getContext("2d",{desynchronized:e}),this.offscreenCanvas.webkitImageSmoothingEnabled=!1,this.offscreenContext.imageSmoothingEnabled=!1}attach(e){this.canvas.parentNode||e.appendChild(this.canvas)}setSize(e=0,t=0){this.canvas.width=e,this.canvas.height=t,this.context.imageSmoothingEnabled=!1,this.resetOffscreenSize()}getSize(){return{width:this.canvas.width,height:this.canvas.height}}resetOffscreenSize(){this.offscreenCanvas.width=this.canvas.width,this.offscreenCanvas.height=this.canvas.height,this.offscreenContext.imageSmoothingEnabled=!1}copyToOffscreen(){this.canvas.width>0&&this.canvas.height>0&&this.offscreenContext.drawImage(this.canvas,0,0)}copyFromOffscreen(){this.offscreenCanvas.width>0&&this.offscreenCanvas.height>0&&this.context.drawImage(this.offscreenCanvas,0,0)}copyPartFromOffscreen(e,t,i){this.offscreenCanvas.width>0&&this.offscreenCanvas.height>0&&this.context.drawImage(this.offscreenCanvas,0,e,this.offscreenCanvas.width,i,0,t,this.offscreenCanvas.width,i)}clearCanvas(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}}class ru{constructor(){this.domStylesCache=new Map,this.dummyNode=void 0}retrieveStyleFromDom(e,t,i,n){const r=e.join(" ");let o=this.domStylesCache.get(r);if(void 0!==o){if(n){const e=o[t];if(void 0!==e)return e}}else o={},this.domStylesCache.set(r,o);this.ensureDummyNodeExistence(i);let s=this.dummyNode;for(let t=0,i=e.length;i>t;t++){const i=e[t],n=document.createElement("span");n.className=i.replace(ou," "),s.appendChild(n),s=n}const a=window.getComputedStyle(s);let l=a.getPropertyValue(t);const c=a.getPropertyValue("-webkit-filter");return c.indexOf("hue-rotate")>-1&&(l=function(e,t){const i=e.match(/rgb(a?)\((\d+), (\d+), (\d+)(, (\d+(\.\d+)?))?\)/);let[,,n,r,o,,s]=i,[,a]=t.match(/hue-rotate\((\d+)deg\)/);return[n,r,o,s,a]=[n,r,o,s,a].map(Number),[n,r,o]=((e,t,i,n)=>{function r(e){return Math.ceil(Math.max(0,Math.min(255,e)))}const o=[1,0,0,0,1,0,0,0,1],s=.2126,a=.7152,l=.0722,c=Math.cos(n*Math.PI/180),d=Math.sin(n*Math.PI/180);return o[0]=s+.7874*c-s*d,o[1]=a-a*c-a*d,o[2]=l-l*c+.9278*d,o[3]=s-s*c+.143*d,o[4]=a+(1-a)*c+.14*d,o[5]=l-l*c-.283*d,o[6]=s-s*c-.7874*d,o[7]=a-a*c+a*d,o[8]=l+.9278*c+l*d,[r(o[0]*e+o[1]*t+o[2]*i),r(o[3]*e+o[4]*t+o[5]*i),r(o[6]*e+o[7]*t+o[8]*i)]})(n,r,o,a),isNaN(s)?`rgb(${n}, ${r}, ${o})`:`rgba(${n}, ${r}, ${o}, ${s})`}(l,c)),""!==l&&(o[t]=l,this.domStylesCache.set(r,o)),this.dummyNode.innerHTML="",l}ensureDummyNodeExistence(e){void 0===this.dummyNode&&(this.dummyNode=document.createElement("span"),this.dummyNode.style.visibility="hidden",e.appendChild(this.dummyNode))}invalidateDOMStylesCache(){this.domStylesCache.clear()}}const ou=/\.+/g;var su=e(g());class au extends su{initializeCanvas(){this.tokensLayer=new nu,this.backLayer=new nu,this.frontLayer=new nu,this.pendingChanges||(this.pendingChanges=[]),this.pendingBackDecorationChanges||(this.pendingBackDecorationChanges=[]),this.pendingFrontDecorationChanges||(this.pendingFrontDecorationChanges=[]),this.maxTokensInOneLine=atom.config.get("minimap.maxTokensInOneLine"),this.DOMStylesReader=new ru}getFrontCanvas(){return this.frontLayer.canvas}attachCanvases(e){this.backLayer.attach(e),this.tokensLayer.attach(e),this.frontLayer.attach(e)}setCanvasesSize(e,t){this.backLayer.setSize(e,t),this.tokensLayer.setSize(e,t),this.frontLayer.setSize(e,t)}updateCanvas(){const e=this.minimap.getFirstVisibleScreenRow(),t=this.minimap.getLastVisibleScreenRow(),i=this.minimap.getDevicePixelRatio(),n=this.minimap.getLineHeight()*i,r=this.minimap.getCharHeight()*i,o=this.minimap.getCharWidth()*i,{width:s,height:a}=this.tokensLayer.getSize(),l=this.minimap.getTextEditor(),c=this.minimap.getTextEditorElement(),d=this.displayCodeHighlights?e=>this.getTokenColor(e,c):()=>this.getDefaultColor(c);((e,t,i,n,r,o,s,a,l,c,d,h,u,p,f,g)=>{const m=Ki(t,i,o,n,r),v=e.context;if(e.clearCanvas(),0===m.length)Vi(t,i,0,s,a,l,c,v,d,h,u,p,f,g);else{for(let i=0,n=m.length;n>i;i++){const n=m[i];e.copyPartFromOffscreen(n.offscreenRow*s,(n.start-t)*s,(n.end-n.start)*s)}let n=t;for(let e=0,i=m.length;i>e;e++){const i=m[e];Vi(n,i.start,n-t,s,a,l,c,v,d,h,u,p,f,g),n=i.end}n>i||Vi(n,i,n-t,s,a,l,c,v,d,h,u,p,f,g)}e.resetOffscreenSize(),e.copyToOffscreen()})(this.tokensLayer,e,t,this.offscreenFirstRow,this.offscreenLastRow,this.pendingChanges,n,r,o,s,l,l.getScreenLineCount(),(e=>{const t=e.getInvisibles(),i=[];return null!=t.cr&&i.push(t.cr),null!=t.eol&&i.push(t.eol),null!=t.space&&i.push(t.space),null!=t.tab&&i.push(t.tab),0!==i.length?RegExp(i.filter((e=>"string"==typeof e)).map(dc.escapeRegExp).join("|"),"g"):null})(l),d,this.ignoreWhitespacesInTokens,this.maxTokensInOneLine);const h=this.minimap.decorationsByTypeThenRows(e,t),u={context:this.backLayer.context,canvasWidth:s,canvasHeight:a,lineHeight:n,charWidth:o,charHeight:r,orders:fn()},p=(e,t,i)=>function(e,t,i,n){const r=e.getProperties().render;r&&(t.color=i,r(e,t,n))}(e,t,i,c);hu["background-custom"]=p,uu["foreground-custom"]=p,this.updateBackDecorationsLayer(e,t,u,n,c,h),u.context=this.frontLayer.context,this.updateFrontDecorationsLayer(e,t,u,n,c,h),this.pendingChanges=[],this.pendingBackDecorationChanges=[],this.pendingFrontDecorationChanges=[],this.offscreenFirstRow=e,this.offscreenLastRow=t}updateBackDecorationsLayer(e,t,i,n,r,o){const s=Ki(e,t,this.pendingBackDecorationChanges,this.offscreenFirstRow,this.offscreenLastRow);if(this.backLayer.clearCanvas(),0===s.length)this.drawBackDecorationsForLines(e,t,0,i,n,r,o);else{for(let t=0,i=s.length;i>t;t++){const i=s[t];this.backLayer.copyPartFromOffscreen(i.offscreenRow*n,(i.start-e)*n,(i.end-i.start)*n)}let a=e;for(let t=0,l=s.length;l>t;t++){const l=s[t];this.drawBackDecorationsForLines(a,l.start,a-e,i,n,r,o),a=l.end}a>t||this.drawBackDecorationsForLines(a,t,a-e,i,n,r,o)}this.backLayer.resetOffscreenSize(),this.backLayer.copyToOffscreen()}updateFrontDecorationsLayer(e,t,i,n,r,o){const s=Ki(e,t,this.pendingFrontDecorationChanges,this.offscreenFirstRow,this.offscreenLastRow);if(this.frontLayer.clearCanvas(),0===s.length)this.drawFrontDecorationsForLines(e,t,0,i,n,r,o);else{for(let t=0,i=s.length;i>t;t++){const i=s[t];this.frontLayer.copyPartFromOffscreen(i.offscreenRow*n,(i.start-e)*n,(i.end-i.start)*n)}let a=e;for(let t=0,l=s.length;l>t;t++){const l=s[t];this.drawFrontDecorationsForLines(a,l.start,a-e,i,n,r,o),a=l.end}a>t||this.drawFrontDecorationsForLines(a,t,a-e,i,n,r,o)}this.frontLayer.resetOffscreenSize(),this.frontLayer.copyToOffscreen()}getDefaultColor(e){return Qi(this.DOMStylesReader.retrieveStyleFromDom([".editor"],"color",e,!0),this.textOpacity)}getTokenColor(e,t){return Qi(this.DOMStylesReader.retrieveStyleFromDom(e,"color",t,!0),this.textOpacity)}getDecorationColor(e,t){const i=e.getProperties();if(i.color)return i.color;if(i.scope){const e=i.scope.split(cu);return this.DOMStylesReader.retrieveStyleFromDom(e,"background-color",t,!0)}return this.getDefaultColor(t)}drawBackDecorationsForLines(e,t,i,n,r,o,s){if(t>=e){for(let a=e;t>=a;a++)n.row=i+(a-e),n.yRow=n.row*r,n.screenRow=a,this.drawDecorations(a,s,n,hu,o);n.context.fill()}}drawFrontDecorationsForLines(e,t,i,n,r,o,s){if(t>=e){for(let a=e;t>=a;a++)n.row=i+(a-e),n.yRow=n.row*r,n.screenRow=a,this.drawDecorations(a,s,n,uu,o);n.context.fill()}}drawDecorations(e,t,i,n,r){let o=[];i.context.clearRect(0,i.yRow,i.canvasWidth,i.lineHeight);for(const i in n)o=o.concat(null!=t[i]&&t[i][e]||[]);if(o.sort(((e,t)=>(i.orders[e.properties.plugin]||0)-(i.orders[t.properties.plugin]||0))),null!=o?o.length:void 0)for(let e=0,t=o.length;t>e;e++){const t=o[e];(0,n[t.properties.type])(t,i,this.getDecorationColor(t,r))}}}const lu=/^\s+$/,cu=/\s+/,du=/\s/,hu={line(e,t,i){t.context.fillStyle=i,t.context.fillRect(0,t.yRow,t.canvasWidth,t.lineHeight)},"highlight-under":$i},uu={gutter(e,t,i){t.context.fillStyle=i,t.context.fillRect(0,t.yRow,1,t.lineHeight)},"highlight-over":$i,"highlight-outline"(e,t,i){let n,r,o,s,a,l;const{lineHeight:c,charWidth:d,canvasWidth:h,screenRow:u}=t,p=e.getMarker().getScreenRange(),f=p.end.row-p.start.row,g=t.yRow,m=g+c;t.context.fillStyle=i,0===f?(r=p.end.column-p.start.column,o=r*d,l=p.start.column*d,a=l+o,t.context.fillRect(l,g,o,1),t.context.fillRect(l,m-1,o,1),t.context.fillRect(l,g,1,c),t.context.fillRect(a,g,1,c)):1===f?(l=p.start.column*t.charWidth,a=p.end.column*t.charWidth,u===p.start.row?(o=t.canvasWidth-l,s=Math.max(l,a),n=t.canvasWidth-s,t.context.fillRect(l,g,o,1),t.context.fillRect(s,m-1,n,1),t.context.fillRect(l,g,1,c),t.context.fillRect(h-1,g,1,c)):(o=h-l,n=h-a,t.context.fillRect(0,g,l,1),t.context.fillRect(0,m-1,a,1),t.context.fillRect(0,g,1,c),t.context.fillRect(a,g,1,c))):(l=p.start.column*d,a=p.end.column*d,u===p.start.row?(o=h-l,t.context.fillRect(l,g,o,1),t.context.fillRect(l,g,1,c),t.context.fillRect(h-1,g,1,c)):u===p.end.row?(o=h-l,t.context.fillRect(0,m-1,a,1),t.context.fillRect(0,g,1,c),t.context.fillRect(a,g,1,c)):(t.context.fillRect(0,g,1,c),t.context.fillRect(h-1,g,1,c),u===p.start.row+1&&t.context.fillRect(0,g,l,1),u===p.end.row-1&&t.context.fillRect(a,m-1,h-a,1)))}};var pu={};t(pu),i(pu,"default",(()=>Zi));const fu=class{static initClass(){return Yi(this,yr.EventsDelegation,yr.SpacePenDSL.Babel),Zi(this,"minimap-quick-settings")}static content(){this.div({class:"select-list popover-list minimap-quick-settings"},(()=>{this.input({type:"text",class:"hidden-input",outlet:"hiddenInput"}),this.ol({class:"list-group mark-active",outlet:"list"},(()=>{this.li({class:"separator",outlet:"separator"}),this.li({class:"code-highlights",outlet:"codeHighlights"},"code-highlights"),this.li({class:"absolute-mode",outlet:"absoluteMode"},"absolute-mode"),this.li({class:"adjust-absolute-mode-height",outlet:"adjustAbsoluteModeHeight"},"adjust-absolute-mode-height")})),this.div({class:"btn-group"},(()=>{this.button({class:"btn btn-default",outlet:"onLeftButton"},"On Left"),this.button({class:"btn btn-default",outlet:"onRightButton"},"On Right")}))}))}createdCallback(){this.buildContent()}setModel(e){this.selectedItem=null,this.minimap=e,this.emitter=new gr,this.subscriptions=new pr,this.plugins={},this.itemsActions=new WeakMap;const t=this.subscriptions;t.add(xn((({name:e,plugin:t})=>this.addItemFor(e,t)))),t.add(Cn((({name:e,plugin:t})=>this.removeItemFor(e,t)))),t.add(En((({name:e,plugin:t})=>this.activateItem(e,t)))),t.add(Tn((({name:e,plugin:t})=>this.deactivateItem(e,t)))),t.add(atom.commands.add("minimap-quick-settings",{"core:move-up":()=>{this.selectPreviousItem()},"core:move-down":()=>{this.selectNextItem()},"core:move-left"(){atom.config.set("minimap.displayMinimapOnLeft",!0)},"core:move-right"(){atom.config.set("minimap.displayMinimapOnLeft",!1)},"core:cancel":()=>{this.destroy()},"core:confirm":()=>{this.toggleSelectedItem()}})),this.codeHighlights.classList.toggle("active",this.minimap.displayCodeHighlights),t.add(this.subscribeTo(this.codeHighlights,{mousedown:e=>{e.preventDefault(),atom.config.set("minimap.displayCodeHighlights",!this.minimap.displayCodeHighlights)}})),this.itemsActions.set(this.codeHighlights,(()=>{atom.config.set("minimap.displayCodeHighlights",!this.minimap.displayCodeHighlights)})),t.add(this.subscribeTo(this.absoluteMode,{mousedown(e){e.preventDefault(),atom.config.set("minimap.absoluteMode",!atom.config.get("minimap.absoluteMode"))}})),this.itemsActions.set(this.absoluteMode,(()=>{atom.config.set("minimap.absoluteMode",!atom.config.get("minimap.absoluteMode"))})),t.add(this.subscribeTo(this.adjustAbsoluteModeHeight,{mousedown(e){e.preventDefault(),atom.config.set("minimap.adjustAbsoluteModeHeight",!atom.config.get("minimap.adjustAbsoluteModeHeight"))}})),this.itemsActions.set(this.adjustAbsoluteModeHeight,(()=>{atom.config.set("minimap.adjustAbsoluteModeHeight",!atom.config.get("minimap.adjustAbsoluteModeHeight"))})),t.add(this.subscribeTo(this.hiddenInput,{focusout:e=>{this.destroy()}},{passive:!0})),t.add(this.subscribeTo(this.onLeftButton,{mousedown(e){e.preventDefault(),atom.config.set("minimap.displayMinimapOnLeft",!0)}})),t.add(this.subscribeTo(this.onRightButton,{mousedown(e){e.preventDefault(),atom.config.set("minimap.displayMinimapOnLeft",!1)}})),t.add(atom.config.observe("minimap.displayCodeHighlights",(e=>{this.codeHighlights.classList.toggle("active",e)}))),t.add(atom.config.observe("minimap.absoluteMode",(e=>{this.absoluteMode.classList.toggle("active",e)}))),t.add(atom.config.observe("minimap.adjustAbsoluteModeHeight",(e=>{this.adjustAbsoluteModeHeight.classList.toggle("active",e)}))),t.add(atom.config.observe("minimap.displayMinimapOnLeft",(e=>{this.onLeftButton.classList.toggle("selected",e),this.onRightButton.classList.toggle("selected",!e)}))),this.initList()}onDidDestroy(e){return this.emitter.on("did-destroy",e)}attach(){atom.views.getView(atom.workspace).appendChild(this),this.hiddenInput.focus()}destroy(){this.emitter.emit("did-destroy"),this.subscriptions.dispose(),this.parentNode.removeChild(this)}initList(){this.itemsDisposables=new WeakMap;for(const e in ku)this.addItemFor(e,ku[e])}toggleSelectedItem(){const e=this.itemsActions.get(this.selectedItem);"function"==typeof e&&e()}selectNextItem(){this.selectedItem.classList.remove("selected"),null!=this.selectedItem.nextSibling?(this.selectedItem=this.selectedItem.nextSibling,this.selectedItem.matches(".separator")&&(this.selectedItem=this.selectedItem.nextSibling)):this.selectedItem=this.list.firstChild,this.selectedItem.classList.add("selected")}selectPreviousItem(){this.selectedItem.classList.remove("selected"),null!=this.selectedItem.previousSibling?(this.selectedItem=this.selectedItem.previousSibling,this.selectedItem.matches(".separator")&&(this.selectedItem=this.selectedItem.previousSibling)):this.selectedItem=this.list.lastChild,this.selectedItem.classList.add("selected")}addItemFor(e,t){const i=document.createElement("li"),n=()=>{ln(e)};t.isActive()&&i.classList.add("active"),i.textContent=e,this.itemsActions.set(i,n),this.itemsDisposables.set(i,this.addDisposableEventListener(i,"mousedown",(e=>{e.preventDefault(),n()}))),this.plugins[e]=i,this.list.insertBefore(i,this.separator),null==this.selectedItem&&(this.selectedItem=i,this.selectedItem.classList.add("selected"))}removeItemFor(e,t){try{this.list.removeChild(this.plugins[e])}catch(e){}delete this.plugins[e]}activateItem(e,t){this.plugins[e].classList.add("active")}deactivateItem(e,t){this.plugins[e].classList.remove("active")}}.initClass(),gu=e(lr)({strategy:"scroll"});let mu;const vu=class{static initClass(){return Yi(this,au,yr.EventsDelegation,yr.AncestorsMethods),Zi(this,"atom-text-editor-minimap")}createdCallback(){this.minimap=void 0,this.width=void 0,this.height=void 0,this.subscriptions=new pr,this.visibleAreaSubscription=void 0,this.quickSettingsSubscription=void 0,this.dragSubscription=void 0,this.openQuickSettingSubscription=void 0,this.displayMinimapOnLeft=!1,this.minimapScrollIndicator=void 0,this.displayMinimapOnLeft=void 0,this.displayPluginsControls=void 0,this.textOpacity=void 0,this.displayCodeHighlights=void 0,this.adjustToSoftWrap=void 0,this.useHardwareAcceleration=void 0,this.absoluteMode=void 0,this.visibleArea=void 0,this.controls=void 0,this.scrollIndicator=void 0,this.openQuickSettings=void 0,this.quickSettingsElement=void 0,this.attached=void 0,this.attachedToTextEditor=void 0,this.standAlone=void 0,this.wasVisible=void 0,this.offscreenFirstRow=void 0,this.offscreenLastRow=void 0,this.frameRequested=void 0,this.flexBasis=void 0,this.initializeContent(),this.subscriptions.add(atom.config.observe("minimap.displayMinimapOnLeft",(e=>{this.displayMinimapOnLeft=e,e?mu||(mu=document.createElement("style"),mu.setAttribute("context","atom-text-editor-minimap"),document.head.appendChild(mu)):mu&&(mu.parentNode.removeChild(mu),mu=null),this.updateMinimapFlexPosition(),this.measureHeightAndWidth(!0,!0)})),atom.config.observe("minimap.minimapScrollIndicator",(e=>{this.minimapScrollIndicator=e,this.minimapScrollIndicator&&null==this.scrollIndicator&&!this.standAlone?this.initializeScrollIndicator():null!=this.scrollIndicator&&this.disposeScrollIndicator(),this.attached&&this.requestUpdate()})),atom.config.observe("minimap.displayPluginsControls",(e=>{this.displayPluginsControls=e,this.displayPluginsControls&&null==this.openQuickSettings&&!this.standAlone?this.initializeOpenQuickSettings():null!=this.openQuickSettings&&this.disposeOpenQuickSettings()})),atom.config.observe("minimap.textOpacity",(e=>{this.textOpacity=e,this.attached&&this.requestForcedUpdate()})),atom.config.observe("minimap.displayCodeHighlights",(e=>{this.displayCodeHighlights=e,this.attached&&this.requestForcedUpdate()})),atom.config.observe("minimap.smoothScrolling",(e=>{this.smoothScrolling=e,this.attached&&(this.smoothScrolling?this.requestUpdate():(this.backLayer.canvas.style.cssText="",this.tokensLayer.canvas.style.cssText="",this.frontLayer.canvas.style.cssText=""))})),atom.config.observe("minimap.adjustMinimapWidthToSoftWrap",(e=>{this.adjustToSoftWrap=e,this.attached&&this.measureHeightAndWidth()})),atom.config.observe("minimap.adjustMinimapWidthOnlyIfSmaller",(e=>{this.adjustOnlyIfSmaller=e,this.attached&&this.measureHeightAndWidth()})),atom.config.observe("minimap.useHardwareAcceleration",(e=>{this.useHardwareAcceleration=e,this.attached&&this.requestUpdate()})),atom.config.observe("minimap.absoluteMode",(e=>{this.absoluteMode=e,this.classList.toggle("absolute",this.absoluteMode)})),atom.config.observe("minimap.adjustAbsoluteModeHeight",(e=>{this.adjustAbsoluteModeHeight=e,this.classList.toggle("adjust-absolute-height",this.adjustAbsoluteModeHeight),this.attached&&this.measureHeightAndWidth()})),atom.config.observe("minimap.ignoreWhitespacesInTokens",(e=>{this.ignoreWhitespacesInTokens=e,this.attached&&this.requestForcedUpdate()})),atom.config.observe("editor.preferredLineLength",(()=>{this.attached&&this.measureHeightAndWidth()})),atom.config.observe("editor.softWrap",(()=>{this.attached&&this.requestUpdate()})),atom.config.observe("editor.showInvisibles",(()=>{this.attached&&this.requestUpdate()})),atom.config.observe("editor.invisibles",(()=>{this.attached&&this.requestUpdate()})),atom.config.observe("editor.softWrapAtPreferredLineLength",(()=>{this.attached&&this.requestUpdate()})))}attachedCallback(){if("function"==typeof atom.views.pollDocument)this.subscriptions.add(atom.views.pollDocument((()=>{this.pollDOM()})));else{this.intersectionObserver=new IntersectionObserver((e=>{const{intersectionRect:t}=e[e.length-1];(t.width>0||t.height>0)&&this.measureHeightAndWidth(!0,!0)})),this.intersectionObserver.observe(this),this.isVisible()&&this.measureHeightAndWidth(!0,!0);const e=()=>{this.measureHeightAndWidth(!1,!1)};gu.listenTo(this,e),window.addEventListener("resize",e,{passive:!0}),this.subscriptions.add(new fr((()=>{gu.removeListener(this,e)})),new fr((()=>{window.removeEventListener("resize",e)})))}this.measureHeightAndWidth(),this.updateMinimapFlexPosition(),this.attached=!0,this.attachedToTextEditor=this.queryParentSelector("atom-text-editor")===this.minimap.getTextEditorElement(),this.attachedToTextEditor&&this.minimap.getTextEditorElement().setAttribute("with-minimap",""),this.subscriptions.add(atom.styles.onDidAddStyleElement((()=>{this.DOMStylesReader.invalidateDOMStylesCache(),this.requestForcedUpdate()})),this.subscribeToMediaQuery())}detachedCallback(){this.minimap.getTextEditorElement().removeAttribute("with-minimap"),this.attached=!1}isVisible(){return this.offsetWidth>0||this.offsetHeight>0}attach(e){if(this.attached)return;const t=e||this.minimap.getTextEditorElement(),i=t.querySelectorAll("atom-text-editor-minimap");i.length&&[].forEach.call(i,(e=>{e.destroy()})),t.appendChild(this)}detach(){this.attached&&null!=this.parentNode&&this.parentNode.removeChild(this)}updateMinimapFlexPosition(){this.classList.toggle("left",this.displayMinimapOnLeft)}destroy(){this.subscriptions.dispose(),this.detach(),this.minimap=null}initializeContent(){this.initializeCanvas(),this.attachCanvases(this),this.createVisibleArea(),this.createControls(),this.subscriptions.add(this.subscribeTo(this,{mousewheel:e=>{!this.standAlone&&this.minimap.onMouseWheel&&this.minimap.onMouseWheel(e)}},{passive:!0}),this.subscribeTo(this.getFrontCanvas(),{mousedown:e=>{this.canvasPressed(Xi(e))},touchstart:e=>{this.canvasPressed(Ji(e))}},{passive:!0}))}createVisibleArea(){this.visibleArea||(this.visibleArea=document.createElement("div"),this.visibleArea.classList.add("minimap-visible-area"),this.appendChild(this.visibleArea),this.visibleAreaSubscription=this.subscribeTo(this.visibleArea,{mousedown:e=>{this.startDrag(Xi(e))},touchstart:e=>{this.startDrag(Ji(e))}},{passive:!0}),this.subscriptions.add(this.visibleAreaSubscription))}removeVisibleArea(){this.visibleArea&&(this.subscriptions.remove(this.visibleAreaSubscription),this.visibleAreaSubscription.dispose(),this.removeChild(this.visibleArea),delete this.visibleArea)}createControls(){this.controls||this.standAlone||(this.controls=document.createElement("div"),this.controls.classList.add("minimap-controls"),this.appendChild(this.controls))}removeControls(){this.controls&&(this.removeChild(this.controls),delete this.controls)}initializeScrollIndicator(){this.scrollIndicator||this.standAlone||(this.scrollIndicator=document.createElement("div"),this.scrollIndicator.classList.add("minimap-scroll-indicator"),this.controls.appendChild(this.scrollIndicator))}disposeScrollIndicator(){this.scrollIndicator&&(this.controls.removeChild(this.scrollIndicator),delete this.scrollIndicator)}initializeOpenQuickSettings(){this.openQuickSettings||this.standAlone||(this.openQuickSettings=document.createElement("div"),this.openQuickSettings.classList.add("open-minimap-quick-settings"),this.controls.appendChild(this.openQuickSettings),this.openQuickSettingSubscription=this.subscribeTo(this.openQuickSettings,{mousedown:e=>{if(e.preventDefault(),e.stopPropagation(),null!=this.quickSettingsElement)this.quickSettingsElement.destroy(),this.quickSettingsSubscription.dispose();else{this.quickSettingsElement=new fu,this.quickSettingsElement.setModel(this),this.quickSettingsSubscription=this.quickSettingsElement.onDidDestroy((()=>{this.quickSettingsElement=null}));const{top:e,left:t,right:i}=this.getFrontCanvas().getBoundingClientRect();this.quickSettingsElement.style.top=e+"px",this.quickSettingsElement.attach(),this.quickSettingsElement.style.left=this.displayMinimapOnLeft?i+"px":t-this.quickSettingsElement.clientWidth+"px"}}}))}disposeOpenQuickSettings(){this.openQuickSettings&&(this.controls.removeChild(this.openQuickSettings),this.openQuickSettingSubscription.dispose(),delete this.openQuickSettings)}getModel(){return this.minimap}setModel(e){return this.minimap=e,this.subscriptions.add(this.minimap.onDidChangeScrollTop((()=>{this.requestUpdate()})),this.minimap.onDidChangeScrollLeft((()=>{this.requestUpdate()})),this.minimap.onDidDestroy((()=>{this.destroy()})),this.minimap.onDidChangeConfig((()=>{if(this.attached)return this.requestForcedUpdate()})),this.minimap.onDidChangeStandAlone((()=>{this.setStandAlone(this.minimap.isStandAlone()),this.requestUpdate()})),this.minimap.onDidChange((e=>{this.pendingChanges.push(e),this.requestUpdate()})),this.minimap.onDidChangeDecorationRange((e=>{const{type:t}=e;"line"===t||"highlight-under"===t||"background-custom"===t?this.pendingBackDecorationChanges.push(e):this.pendingFrontDecorationChanges.push(e),this.requestUpdate()})),Mn((()=>{this.requestForcedUpdate()}))),this.setStandAlone(this.minimap.isStandAlone()),null!=this.width&&null!=this.height&&this.minimap.setScreenHeightAndWidth(this.height,this.width),this.minimap}setStandAlone(e){this.standAlone=e,this.standAlone?(this.setAttribute("stand-alone",!0),this.disposeScrollIndicator(),this.disposeOpenQuickSettings(),this.removeControls(),this.removeVisibleArea()):(this.removeAttribute("stand-alone"),this.createVisibleArea(),this.createControls(),this.minimapScrollIndicator&&this.initializeScrollIndicator(),this.displayPluginsControls&&this.initializeOpenQuickSettings())}requestUpdate(){this.frameRequested||(this.frameRequested=!0,requestAnimationFrame((()=>{this.update(),this.frameRequested=!1})))}requestForcedUpdate(){this.offscreenFirstRow=null,this.offscreenLastRow=null,this.requestUpdate()}update(){if(!(this.attached&&this.isVisible()&&this.minimap))return;const e=this.minimap;e.enableCache();const t=this.getFrontCanvas(),i=this.minimap.getDevicePixelRatio(),n=e.getTextEditorScaledScrollLeft(),r=e.getTextEditorScaledScrollTop()-e.getScrollTop(),o=Math.min(t.width/i,this.width),s=o+n;this.adjustToSoftWrap&&this.flexBasis?(this.style.flexBasis=this.flexBasis+"px",this.style.width=this.flexBasis+"px"):(this.style.flexBasis=null,this.style.width=null),en(this.visibleArea,{width:Math.round(s)+"px",height:Math.round(e.getTextEditorScaledHeight())+"px",transform:tn(0,r,this.useHardwareAcceleration),"border-left-width":Math.round(n)+"px"}),en(this.controls,{width:Math.round(o)+"px"});const a=e.getFirstVisibleScreenRow()*e.getLineHeight()-e.getScrollTop();if(this.smoothScrolling){let e=tn(0,a,this.useHardwareAcceleration);if(1!==i){const t=1/i;e+=" "+nn(t,t,this.useHardwareAcceleration)}en(this.backLayer.canvas,{transform:e}),en(this.tokensLayer.canvas,{transform:e}),en(this.frontLayer.canvas,{transform:e})}else{const e=1/i,t=nn(e,e,this.useHardwareAcceleration);en(this.backLayer.canvas,{transform:t}),en(this.tokensLayer.canvas,{transform:t}),en(this.frontLayer.canvas,{transform:t})}if(this.minimapScrollIndicator&&!this.scrollIndicator&&e.canScroll()&&this.initializeScrollIndicator(),null!=this.scrollIndicator){const t=e.getScreenHeight(),i=t*(t/e.getHeight()),n=(t-i)*e.getScrollRatio();en(this.scrollIndicator,{height:i+"px",transform:tn(0,n,this.useHardwareAcceleration)}),e.canScroll()||this.disposeScrollIndicator()}this.absoluteMode&&this.adjustAbsoluteModeHeight&&this.updateCanvasesSize(),this.updateCanvas(),e.clearCache()}setDisplayCodeHighlights(e){this.displayCodeHighlights=e,this.attached&&this.requestForcedUpdate()}pollDOM(){const e=this.checkForVisibilityChange();this.isVisible()&&(this.wasVisible||this.requestForcedUpdate(),this.measureHeightAndWidth(e,!1))}checkForVisibilityChange(){return this.isVisible()?!this.wasVisible&&(this.wasVisible=!0,this.wasVisible):this.wasVisible?(this.wasVisible=!1,!0):(this.wasVisible=!1,this.wasVisible)}measureHeightAndWidth(e,t=!0){if(!this.minimap)return;const i=this.style.flexBasis;this.style.flexBasis="";const n=this.width!==this.clientWidth||this.height!==this.clientHeight;this.height=this.clientHeight,this.width=this.clientWidth;let r=this.width;if(null!=this.minimap&&this.minimap.setScreenHeightAndWidth(this.height,this.width),(n||e||t)&&this.requestForcedUpdate(),this.isVisible())if(n||t){if(this.adjustToSoftWrap){const e=atom.config.get("editor.preferredLineLength"),t=atom.config.get("editor.softWrap"),i=atom.config.get("editor.softWrapAtPreferredLineLength"),n=e*this.minimap.getCharWidth();!(t&&i&&e)||n>this.width&&this.adjustOnlyIfSmaller?(Gi(r),delete this.flexBasis):(this.flexBasis=n,r=n,Gi(n))}else Gi(r),delete this.flexBasis;this.updateCanvasesSize(r)}else this.style.flexBasis=i}updateCanvasesSize(e){const t=this.minimap.getDevicePixelRatio(),i=this.height+this.minimap.getLineHeight(),n=this.absoluteMode&&this.adjustAbsoluteModeHeight?Math.min(this.minimap.getHeight(),i):i,r=this.getFrontCanvas();null==e&&(e=r.width/t),e===r.width&&n===r.height||(this.setCanvasesSize(e*t,n*t),this.absoluteMode&&this.adjustAbsoluteModeHeight&&(this.offscreenFirstRow=null,this.offscreenLastRow=null))}canvasPressed({y:e,isLeftMouse:t,isMiddleMouse:i}){if(!this.minimap.isStandAlone())if(t)this.canvasLeftMousePressed(e);else if(i){this.canvasMiddleMousePressed(e);const{top:t,height:i}=this.visibleArea.getBoundingClientRect();this.startDrag({y:t+i/2,isLeftMouse:!1,isMiddleMouse:!0})}}canvasLeftMousePressed(e){const t=e-this.getBoundingClientRect().top,i=Math.floor(t/this.minimap.getLineHeight())+this.minimap.getFirstVisibleScreenRow(),n=this.minimap.getTextEditor(),r=this.minimap.getTextEditorElement(),o=i*n.getLineHeightInPixels()-this.minimap.getTextEditorHeight()/2,s=r.pixelPositionForScreenPosition([i,0]).top-this.minimap.getTextEditorHeight()/2;if(atom.config.get("minimap.moveCursorOnMinimapClick")&&n.setCursorScreenPosition([i,0]),atom.config.get("minimap.scrollAnimation")){const e=atom.config.get("minimap.scrollAnimationDuration"),t=this.minimap.scrollIndependentlyOnMouseWheel(),i=this.minimap.getTextEditorScrollTop(),n=s;let r;if(t){const t=this.minimap.getScrollTop(),s=Math.min(1,o/(this.minimap.getTextEditorMaxScrollTop()||1))*this.minimap.getMaxScrollTop();r=(e,i)=>{null!==this.minimap&&(this.minimap.setTextEditorScrollTop(e,!0),this.minimap.setScrollTop(t+(s-t)*i))},rn({from:i,to:n,duration:e,step:r})}else r=e=>{null!==this.minimap&&this.minimap.setTextEditorScrollTop(e)},rn({from:i,to:n,duration:e,step:r})}else this.minimap.setTextEditorScrollTop(s)}canvasMiddleMousePressed(e){const{top:t}=this.getBoundingClientRect(),i=(e-t-this.minimap.getTextEditorScaledHeight()/2)/(this.minimap.getVisibleHeight()-this.minimap.getTextEditorScaledHeight());this.minimap.setTextEditorScrollTop(i*this.minimap.getTextEditorMaxScrollTop())}subscribeToMediaQuery(){const e=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"),t=()=>{this.requestForcedUpdate()};return e.addEventListener("change",t),new fr((()=>{e.removeEventListener("change",t)}))}startDrag({y:e,isLeftMouse:t,isMiddleMouse:i}){if(!this.minimap)return;if(!t&&!i)return;const n={dragOffset:e-this.visibleArea.getBoundingClientRect().top,offsetTop:this.getBoundingClientRect().top},r=e=>this.drag(Xi(e),n),o=()=>this.endDrag(),s=e=>this.drag(Ji(e),n);document.body.addEventListener("mousemove",r,{passive:!0}),document.body.addEventListener("mouseup",o,{passive:!0}),document.body.addEventListener("mouseleave",o,{passive:!0}),document.body.addEventListener("touchmove",s,{passive:!0}),document.body.addEventListener("touchend",o,{passive:!0}),document.body.addEventListener("touchcancel",o,{passive:!0}),this.dragSubscription=new fr((()=>{document.body.removeEventListener("mousemove",r),document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mouseleave",o),document.body.removeEventListener("touchmove",s),document.body.removeEventListener("touchend",o),document.body.removeEventListener("touchcancel",o)}))}drag({y:e,isLeftMouse:t,isMiddleMouse:i},n){if(!this.minimap)return;if(!t&&!i)return;const r=(e-n.offsetTop-n.dragOffset)/(this.minimap.getVisibleHeight()-this.minimap.getTextEditorScaledHeight());this.minimap.setTextEditorScrollTop(r*this.minimap.getTextEditorMaxScrollTop())}endDrag(){this.minimap&&this.dragSubscription.dispose()}}.initClass();var yu,bu,Su=!1;let wu=0;class xu{static isType(e,t){return Array.isArray(e.type)?e.type.indexOf(t)>=0:t===e.type}constructor(e,t,i){this.marker=e,this.minimap=t,this.emitter=new gr,this.id=wu++,this.properties=null,this.setProperties(i),this.properties.id=this.id,this.destroyed=!1,this.markerDestroyDisposable=this.marker.onDidDestroy((()=>{this.destroy()})),this.screenRange=e.getScreenRange()}destroy(){this.destroyed||(this.markerDestroyDisposable.dispose(),this.markerDestroyDisposable=null,this.destroyed=!0,this.emitter.emit("did-destroy"),this.emitter.dispose())}isDestroyed(){return this.destroyed}onDidChangeProperties(e){return this.emitter.on("did-change-properties",e)}onDidDestroy(e){return this.emitter.on("did-destroy",e)}getId(){return this.id}getMarker(){return this.marker}isType(e){return xu.isType(this.properties,e)}getProperties(){return this.properties}setProperties(e){if(this.destroyed)return;const t=this.properties;this.properties=e,this.properties.id=this.id,this.emitter.emit("did-change-properties",{oldProperties:t,newProperties:e})}}class Cu{initializeDecorations(){null==this.emitter&&(this.emitter=new gr),this.decorationsById=new Map,this.decorationsByMarkerId=new Map,this.decorationMarkerChangedSubscriptions=new Map,this.decorationMarkerDestroyedSubscriptions=new Map,this.decorationUpdatedSubscriptions=new Map,this.decorationDestroyedSubscriptions=new Map}getDecorations(){return this.decorationsById.values()}onDidAddDecoration(e){return this.emitter.on("did-add-decoration",e)}onDidRemoveDecoration(e){return this.emitter.on("did-remove-decoration",e)}onDidChangeDecoration(e){return this.emitter.on("did-change-decoration",e)}onDidChangeDecorationRange(e){return this.emitter.on("did-change-decoration-range",e)}onDidUpdateDecoration(e){return this.emitter.on("did-update-decoration",e)}decorationForId(e){return this.decorationsById.get(e)}decorationsForScreenRowRange(e,t){const i={},n=this.findMarkers({intersectsScreenRowRange:[e,t]});for(let e=0,t=n.length;t>e;e++){const t=n[e],r=this.decorationsByMarkerId.get(t.id);void 0!==r&&(i[t.id]=r)}return i}decorationsByTypeThenRows(){if(null!=this.decorationsByTypeThenRowsCache)return this.decorationsByTypeThenRowsCache;const e={},t=this.decorationsById.values();for(const i of t){const t=i.marker.getScreenRange(),n=i.getProperties().type;null==e[n]&&(e[n]={});for(let r=t.start.row,o=t.end.row;o>=r;r++)null==e[n][r]&&(e[n][r]=[]),e[n][r].push(i)}return this.decorationsByTypeThenRowsCache=e,e}invalidateDecorationForScreenRowsCache(){this.decorationsByTypeThenRowsCache=null}decorateMarker(e,t){if(this.destroyed||null==e)return;const{id:i}=e;"highlight"===t.type&&(t.type="highlight-over");const{type:n,plugin:r}=t;if(null==r&&(t.plugin=(()=>{const e=Error().stack.split("\n")[3].split("(")[1].replace(")",""),t=RegExp(atom.packages.getPackageDirPaths().join("|")+dc.escapeRegExp(dr.sep)),i=e.replace(t,"").split(dr.sep)[0].replace(/minimap-|-minimap/,"");return 0>i.indexOf(dr.sep)?i:void 0})()),null==t.scope&&null!=t.class){const e=t.class.split(" ").join(".");t.scope=".minimap ."+e}this.decorationMarkerDestroyedSubscriptions.has(i)||this.decorationMarkerDestroyedSubscriptions.set(i,e.onDidDestroy((()=>{this.removeAllDecorationsForMarker(e)}))),this.decorationMarkerChangedSubscriptions.has(i)||this.decorationMarkerChangedSubscriptions.set(i,e.onDidChange((t=>{const r=this.decorationsByMarkerId.get(i),o=e.getScreenRange();if(this.invalidateDecorationForScreenRowsCache(),void 0!==r)for(let i=0,n=r.length;n>i;i++){const n=r[i];this.emitter.emit("did-change-decoration",{marker:e,decoration:n,event:t}),this.emitDecorationChanges(n.type,n),n.screenRange=o}let s=t.oldTailScreenPosition,a=t.oldHeadScreenPosition,l=t.newTailScreenPosition,c=t.newHeadScreenPosition;s.row>a.row&&([s,a]=[a,s]),l.row>c.row&&([l,c]=[c,l]);const d=((e,t,i,n)=>{const r=[];return e.isLessThan(i)?r.push([e,i]):i.isLessThan(e)&&r.push([i,e]),t.isLessThan(n)?r.push([t,n]):n.isLessThan(t)&&r.push([n,t]),r})(s,a,l,c);for(let e=0,t=d.length;t>e;e++){const[t,i]=d[e];this.emitRangeChanges(n,{start:t,end:i},0)}})));const o=new xu(e,this,t);return this.decorationsByMarkerId.has(i)||this.decorationsByMarkerId.set(i,[]),this.decorationsByMarkerId.get(i).push(o),this.decorationsById.set(o.id,o),this.decorationUpdatedSubscriptions.has(o.id)||this.decorationUpdatedSubscriptions.set(o.id,o.onDidChangeProperties((e=>{this.emitDecorationChanges(n,o)}))),this.decorationDestroyedSubscriptions.set(o.id,o.onDidDestroy((()=>{this.removeDecoration(o)}))),this.emitDecorationChanges(n,o),this.emitter.emit("did-add-decoration",{marker:e,decoration:o}),o}emitDecorationChanges(e,t){if(this.editorDestroyed())return;this.invalidateDecorationForScreenRowsCache();const i=t.screenRange;i.start&&i.end&&this.emitRangeChanges(e,i,0)}emitRangeChanges(e,t,i){const n=t.start.row,r=t.end.row,o=this.getLastVisibleScreenRow(),s=this.getFirstVisibleScreenRow();null==i&&(i=o-s-(r-n)),this.emitter.emit("did-change-decoration-range",{start:n,end:r,screenDelta:i,type:e})}removeDecoration(e){if(null==e)return;const t=e.marker;let i;this.decorationsById.delete(e.id),i=this.decorationUpdatedSubscriptions.get(e.id),void 0!==i&&i.dispose(),i=this.decorationDestroyedSubscriptions.get(e.id),void 0!==i&&i.dispose(),this.decorationUpdatedSubscriptions.delete(e.id),this.decorationDestroyedSubscriptions.delete(e.id);const n=this.decorationsByMarkerId.get(t.id);if(void 0===n)return;this.emitDecorationChanges(e.getProperties().type,e);const r=n.indexOf(e);r>-1&&(n.splice(r,1),this.emitter.emit("did-remove-decoration",{marker:t,decoration:e}),0===n.length&&this.removedAllMarkerDecorations(t))}removeAllDecorationsForMarker(e){if(null==e)return;const t=this.decorationsByMarkerId.get(e.id);if(void 0!==t){for(let i=0,n=t.length;n>i;i++){const n=t[i];this.adapter.editorDestroyed()||this.emitDecorationChanges(n.getProperties().type,n),this.emitter.emit("did-remove-decoration",{marker:e,decoration:n})}this.removedAllMarkerDecorations(e)}}removedAllMarkerDecorations(e){null!=e&&(this.decorationMarkerChangedSubscriptions.get(e.id).dispose(),this.decorationMarkerDestroyedSubscriptions.get(e.id).dispose(),this.decorationsByMarkerId.delete(e.id),this.decorationMarkerChangedSubscriptions.delete(e.id),this.decorationMarkerDestroyedSubscriptions.delete(e.id))}removeAllDecorations(){const e=this.decorationMarkerChangedSubscriptions.values();for(const t of e)t.dispose();const t=this.decorationMarkerDestroyedSubscriptions.values();for(const e of t)e.dispose();const i=this.decorationUpdatedSubscriptions.values();for(const e of i)e.dispose();const n=this.decorationDestroyedSubscriptions.values();for(const e of n)e.dispose();const r=this.decorationsById.values();for(const e of r)e.destroy();this.decorationsById.clear(),this.decorationsByMarkerId.clear(),this.decorationMarkerChangedSubscriptions.clear(),this.decorationMarkerDestroyedSubscriptions.clear(),this.decorationUpdatedSubscriptions.clear(),this.decorationDestroyedSubscriptions.clear()}}class Eu{constructor(e){this.textEditor=e,this.textEditorElement=atom.views.getView(this.textEditor)}enableCache(){this.useCache=!0}clearCache(){this.useCache=!1,delete this.heightCache,delete this.scrollTopCache,delete this.scrollLeftCache,delete this.maxScrollTopCache}onDidChangeScrollTop(e){return this.textEditorElement.onDidChangeScrollTop(e)}onDidChangeScrollLeft(e){return this.textEditorElement.onDidChangeScrollLeft(e)}getHeight(){return this.editorDestroyed()?0:this.useCache?(this.heightCache||(this.heightCache=this.textEditorElement.getHeight()),this.heightCache):this.textEditorElement.getHeight()}getScrollTop(){return this.editorDestroyed()?0:this.useCache?(this.scrollTopCache||(this.scrollTopCache=this.computeScrollTop()),this.scrollTopCache):this.computeScrollTop()}computeScrollTop(){if(this.editorDestroyed())return 0;const e=this.textEditorElement.getScrollTop(),t=this.textEditor.getLineHeightInPixels();let i=this.textEditorElement.getFirstVisibleScreenRow();if(Number.isNaN(i))return 0;let n=this.textEditorElement.pixelPositionForScreenPosition([i,0]).top;return n>e&&(i-=1,n=this.textEditorElement.pixelPositionForScreenPosition([i,0]).top),i*t+Math.min(e-n,t)}setScrollTop(e){this.editorDestroyed()||this.textEditorElement.setScrollTop(e)}getScrollLeft(){return this.editorDestroyed()?0:this.useCache?(this.scrollLeftCache||(this.scrollLeftCache=this.textEditorElement.getScrollLeft()),this.scrollLeftCache):this.textEditorElement.getScrollLeft()}getMaxScrollTop(){if(this.editorDestroyed())return 0;if(null!=this.maxScrollTopCache&&this.useCache)return this.maxScrollTopCache;let e;if(this.textEditorElement.getMaxScrollTop){if(e=this.textEditorElement.getMaxScrollTop(),parseFloat(atom.getVersion())>=1.13&&this.scrollPastEnd){const t=this.textEditor.getLineHeightInPixels();e-=this.getHeight()-3*t}}else if(e=this.textEditorElement.getScrollHeight()-this.getHeight(),this.scrollPastEnd){const t=this.textEditor.getLineHeightInPixels();e-=this.getHeight()-3*t}return this.useCache&&(this.maxScrollTopCache=e),e}editorDestroyed(){return!this.textEditor||this.textEditor.isDestroyed()||!this.textEditorElement.component||!this.textEditorElement.getModel()||!this.textEditorElement.parentNode}}let Tu=1;class Mu{static initClass(){return Yi(this,Cu),this}constructor(e={}){if(!e.textEditor)throw Error("Cannot create a minimap without an editor");if(this.textEditor=e.textEditor,this.editorElement=void 0,this.standAlone=e.standAlone,this.width=e.width,this.height=e.height,this.id=Tu++,this.emitter=new gr,this.subscriptions=new pr,this.adapter=null,this.charHeight=null,this.configCharHeight=null,this.charWidth=null,this.configCharWidth=null,this.interline=null,this.configInterline=null,this.devicePixelRatioRounding=null,this.configDevicePixelRatioRounding=null,this.redrawDelay=0,this.destroyed=!1,this.scrollPastEnd=!1,this.pendingChangeEvents=[],this.flushChangesTimer=null,this.initializeDecorations(),null!=atom.views.getView(this.textEditor).getScrollTop)this.adapter=new Eu(this.textEditor);else{atom.notifications.addWarning("LegacyAdapter of Minimap is deprecated and will be removed in the next major version. Please upgrade Atom to the latest version.");const e=(Su||(Su=!0,t(yu={}),bu=class{constructor(e){this.textEditor=e}enableCache(){this.useCache=!0}clearCache(){this.useCache=!1,delete this.heightCache,delete this.scrollTopCache,delete this.scrollLeftCache,delete this.maxScrollTopCache}onDidChangeScrollTop(e){return this.textEditor.onDidChangeScrollTop(e)}onDidChangeScrollLeft(e){return this.textEditor.onDidChangeScrollLeft(e)}getHeight(){return this.useCache?(this.heightCache||(this.heightCache=this.textEditor.getHeight()),this.heightCache):this.textEditor.getHeight()}getScrollTop(){return this.useCache?(this.scrollTopCache||(this.scrollTopCache=this.textEditor.getScrollTop()),this.scrollTopCache):this.textEditor.getScrollTop()}setScrollTop(e){return this.textEditor.setScrollTop(e)}getScrollLeft(){return this.useCache?(this.scrollLeftCache||(this.scrollLeftCache=this.textEditor.getScrollLeft()),this.scrollLeftCache):this.textEditor.getScrollLeft()}getMaxScrollTop(){if(null!=this.maxScrollTopCache&&this.useCache)return this.maxScrollTopCache;let e=this.textEditor.displayBuffer.getMaxScrollTop();const t=this.textEditor.getLineHeightInPixels();return this.scrollPastEnd&&(e-=this.getHeight()-3*t),this.useCache&&(this.maxScrollTopCache=e),e}editorDestroyed(){return!this.textEditor||this.textEditor.isDestroyed()}},i(yu,"default",(()=>bu))),yu);this.adapter=new e(this.textEditor)}this.scrollTop=0;const n=this.subscriptions;let r=this.subscribeToConfig();n.add(r),n.add(this.textEditor.onDidChangeGrammar((()=>{n.remove(r),r.dispose(),r=this.subscribeToConfig(),n.add(r)}))),n.add(this.adapter.onDidChangeScrollTop((()=>{this.standAlone||this.ignoreTextEditorScroll||this.inChangeScrollTop||(this.inChangeScrollTop=!0,this.updateScrollTop(),this.emitter.emit("did-change-scroll-top",this),this.inChangeScrollTop=!1),this.ignoreTextEditorScroll&&(this.ignoreTextEditorScroll=!1)}))),n.add(this.adapter.onDidChangeScrollLeft((()=>{this.standAlone||this.emitter.emit("did-change-scroll-left",this)}))),n.add(this.textEditor.onDidChange((e=>{this.scheduleChanges(e)}))),n.add(this.textEditor.onDidDestroy((()=>{this.destroy()}))),n.add(this.textEditor.onDidTokenize((()=>{this.emitter.emit("did-change-config")})))}destroy(){this.destroyed||(clearTimeout(this.flushChangesTimer),this.flushChangesTimer=null,this.pendingChangeEvents=[],this.removeAllDecorations(),this.subscriptions.dispose(),this.subscriptions=null,this.textEditor=null,this.emitter.emit("did-destroy"),this.emitter.dispose(),this.destroyed=!0)}isDestroyed(){return this.destroyed}scheduleChanges(e){this.pendingChangeEvents=this.pendingChangeEvents.concat(e),this.redrawDelay||this.requestFlushChanges(),this.flushChangesTimer||(this.flushChangesTimer=setTimeout((()=>{this.requestFlushChanges()}),this.redrawDelay))}flushChanges(){clearTimeout(this.flushChangesTimer),this.flushChangesTimer=null,this.emitChanges(this.pendingChangeEvents),this.pendingChangeEvents=[]}requestFlushChanges(){this.requestedFlushChanges||(this.requestedFlushChanges=requestAnimationFrame((()=>{this.flushChanges(),this.requestedFlushChanges&&(cancelAnimationFrame(this.requestedFlushChanges),this.requestedFlushChanges=null)})))}onDidChange(e){return this.emitter.on("did-change",e)}onDidChangeConfig(e){return this.emitter.on("did-change-config",e)}onDidChangeScrollTop(e){return this.emitter.on("did-change-scroll-top",e)}onDidChangeScrollLeft(e){return this.emitter.on("did-change-scroll-left",e)}onDidChangeStandAlone(e){return this.emitter.on("did-change-stand-alone",e)}onDidDestroy(e){return this.emitter.on("did-destroy",e)}subscribeToConfig(){const e=new pr,t={scope:this.textEditor.getRootScopeDescriptor()};return e.add(atom.config.observe("editor.scrollPastEnd",t,(e=>{this.scrollPastEnd=e,this.adapter.scrollPastEnd=this.scrollPastEnd,this.emitter.emit("did-change-config")}))),e.add(atom.config.observe("minimap.charHeight",t,(e=>{this.configCharHeight=e,this.updateScrollTop(),this.emitter.emit("did-change-config")}))),e.add(atom.config.observe("minimap.charWidth",t,(e=>{this.configCharWidth=e,this.updateScrollTop(),this.emitter.emit("did-change-config")}))),e.add(atom.config.observe("minimap.interline",t,(e=>{this.configInterline=e,this.updateScrollTop(),this.emitter.emit("did-change-config")}))),e.add(atom.config.observe("minimap.independentMinimapScroll",t,(e=>{this.independentMinimapScroll=e,this.updateScrollTop()}))),e.add(atom.config.observe("minimap.scrollSensitivity",t,(e=>{this.scrollSensitivity=e}))),e.add(atom.config.observe("minimap.redrawDelay",t,(e=>{this.redrawDelay=e}))),e.add(atom.config.observe("minimap.devicePixelRatioRounding",t,(e=>{this.configDevicePixelRatioRounding=e,this.updateScrollTop(),this.emitter.emit("did-change-config")}))),e}isStandAlone(){return this.standAlone}setStandAlone(e){e!==this.standAlone&&(this.standAlone=e,this.emitter.emit("did-change-stand-alone",this))}getTextEditor(){return this.textEditor}getTextEditorElement(){return this.editorElement||(this.editorElement=atom.views.getView(this.getTextEditor())),this.editorElement}getTextEditorScaledHeight(){return this.adapter.getHeight()*this.getVerticalScaleFactor()}getTextEditorScaledScrollTop(){return this.adapter.getScrollTop()*this.getVerticalScaleFactor()}getTextEditorScaledScrollLeft(){return this.adapter.getScrollLeft()*this.getHorizontalScaleFactor()}getTextEditorMaxScrollTop(){return this.adapter.getMaxScrollTop()}getTextEditorScrollTop(){return this.adapter.getScrollTop()}setTextEditorScrollTop(e,t=!1){this.ignoreTextEditorScroll=t,this.adapter.setScrollTop(e)}getTextEditorScrollLeft(){return this.adapter.getScrollLeft()}getTextEditorHeight(){return this.adapter.getHeight()}getTextEditorScrollRatio(){return this.adapter.getScrollTop()/(this.getTextEditorMaxScrollTop()||1)}getCapedTextEditorScrollRatio(){return Math.min(1,this.getTextEditorScrollRatio())}getHeight(){return this.textEditor.getScreenLineCount()*this.getLineHeight()}getWidth(){return this.textEditor.getMaxScreenLineLength()*this.getCharWidth()}getVisibleHeight(){return Math.min(this.getScreenHeight(),this.getHeight())}getScreenHeight(){return this.isStandAlone()?null!=this.height?this.height:this.getHeight():this.adapter.getHeight()}getVisibleWidth(){return Math.min(this.getScreenWidth(),this.getWidth())}getScreenWidth(){return this.isStandAlone()&&null!=this.width?this.width:this.getWidth()}setScreenHeightAndWidth(e,t){this.width===t&&this.height===e||(this.height=e,this.width=t,this.updateScrollTop())}getVerticalScaleFactor(){return this.getLineHeight()/this.textEditor.getLineHeightInPixels()}getHorizontalScaleFactor(){return this.getCharWidth()/this.textEditor.getDefaultCharWidth()}getLineHeight(){return this.getCharHeight()+this.getInterline()}getCharWidth(){return null!=this.charWidth?this.charWidth:this.configCharWidth}setCharWidth(e){this.charWidth=Math.floor(e),this.emitter.emit("did-change-config")}getCharHeight(){return null!=this.charHeight?this.charHeight:this.configCharHeight}setCharHeight(e){this.charHeight=Math.floor(e),this.emitter.emit("did-change-config")}getInterline(){return null!=this.interline?this.interline:this.configInterline}setInterline(e){this.interline=Math.floor(e),this.emitter.emit("did-change-config")}getDevicePixelRatioRounding(){return null!=this.devicePixelRatioRounding?this.devicePixelRatioRounding:this.configDevicePixelRatioRounding}setDevicePixelRatioRounding(e){this.devicePixelRatioRounding=e,this.emitter.emit("did-change-config")}getDevicePixelRatio(){return this.getDevicePixelRatioRounding()?Math.floor(devicePixelRatio):devicePixelRatio}getFirstVisibleScreenRow(){return Math.floor(this.getScrollTop()/this.getLineHeight())}getLastVisibleScreenRow(){return Math.ceil((this.getScrollTop()+this.getScreenHeight())/this.getLineHeight())}scrollIndependentlyOnMouseWheel(){return this.independentMinimapScroll}getScrollTop(){return this.standAlone||this.independentMinimapScroll?this.scrollTop:this.getScrollTopFromEditor()}setScrollTop(e){this.scrollTop=Math.max(0,Math.min(this.getMaxScrollTop(),e)),(this.standAlone||this.independentMinimapScroll)&&this.emitter.emit("did-change-scroll-top",this)}getScrollRatio(){return this.getScrollTop()/this.getMaxScrollTop()}updateScrollTop(){if(this.independentMinimapScroll){try{this.setScrollTop(this.getScrollTopFromEditor())}catch(e){}this.emitter.emit("did-change-scroll-top",this)}}getScrollTopFromEditor(){return Math.abs(this.getCapedTextEditorScrollRatio()*this.getMaxScrollTop())}getMaxScrollTop(){return Math.max(0,this.getHeight()-this.getScreenHeight())}canScroll(){return this.getMaxScrollTop()>0}onMouseWheel(e){if(this.scrollIndependentlyOnMouseWheel()){if(e.stopPropagation(),!this.canScroll())return;const{wheelDeltaY:t}=e,i=this.getScrollTop()-Math.round(t*this.scrollSensitivity);e.preventDefault(),this.setScrollTop(i)}}getMarker(e){return this.textEditor.getMarker(e)}findMarkers(e){try{return this.textEditor.findMarkers(e)}catch(e){return[]}}markBufferRange(e){return this.textEditor.markBufferRange(e)}emitChanges(e){this.emitter.emit("did-change",e)}enableCache(){this.adapter.enableCache()}clearCache(){this.adapter.clearCache()}editorDestroyed(){this.adapter.editorDestroyed()}}exports.Minimap=Mu,Mu.initClass();var Du={};exports.config=Du,Du=JSON.parse('{"plugins":{"type":"object","properties":{}},"autoToggle":{"title":"Show Minimap On Atom Start","type":"boolean","default":true,"order":1},"displayMinimapOnLeft":{"type":"boolean","default":false,"order":2},"displayCodeHighlights":{"type":"boolean","default":true,"description":"Toggles the render of the buffer tokens in the minimap.","order":3},"displayPluginsControls":{"type":"boolean","default":true,"description":"You need to restart Atom for this setting to be effective.","order":4},"minimapScrollIndicator":{"type":"boolean","default":true,"description":"Toggles the display of a side line showing which part of the buffer is currently displayed by the minimap. This side line will only appear if the minimap is taller than the editor view height.","order":5},"adjustMinimapWidthToSoftWrap":{"type":"boolean","default":true,"description":"If this option is enabled and Soft Wrap is checked then the Minimap max width is set to the Preferred Line Length value.","order":6},"adjustMinimapWidthOnlyIfSmaller":{"type":"boolean","default":true,"description":"If this option and `adjustMinimapWidthToSoftWrap` are enabled the minimap width will never go past the limit sets by CSS. On the other hand, when disabled the minimap will expand to honor the preferred line width.","order":7},"ignoreWhitespacesInTokens":{"type":"boolean","default":false,"description":"When enabled, text editor tokens are rendered as plain blocks, with no regards to the whitespaces they contains.","order":8},"charWidth":{"type":"number","default":1,"minimum":0.5,"order":9},"charHeight":{"type":"number","default":2,"minimum":0.5,"order":10},"interline":{"type":"number","default":1,"minimum":0,"description":"The space between lines in the minimap in pixels.","order":11},"textOpacity":{"type":"number","default":0.6,"minimum":0,"maximum":1,"description":"The opacity used to render the line\'s text in the minimap.","order":12},"moveCursorOnMinimapClick":{"type":"boolean","default":false,"description":"Moves the cursor to the beginning of the target line when clicking on the minimap","order":13},"independentMinimapScroll":{"type":"boolean","title":"Independent Minimap Scroll On Mouse Wheel Events","default":false,"description":"When enabled, using the mouse wheel over the Minimap will make it scroll independently of the text editor. The Minimap will still sync with the editor whenever the editor is scrolled, but it will no longer relay the mouse wheel events to the editor.","order":14},"scrollSensitivity":{"type":"number","default":0.5,"description":"The scrolling speed when the `Independent Minimap Scroll On Mouse Wheel Events` setting is enabled.","order":15},"smoothScrolling":{"type":"boolean","default":false,"description":"Whether to offset the minimap canvas when scrolling to keep the scroll smooth. When `true` the minimap canvas will be offseted, resulting in a smoother scroll, but with the side-effect of a blurry minimap when the canvas is placed between pixels. When `false` the canvas will always stay at the same position, and will never look blurry, but the scroll will appear more jagged.","order":16},"createPluginInDevMode":{"type":"boolean","default":false,"order":17},"absoluteMode":{"type":"boolean","default":false,"description":"When enabled the text editor content will be able to flow below the minimap.","order":18},"adjustAbsoluteModeHeight":{"type":"boolean","default":false,"description":"When enabled and `Absolute Mode` is also enabled, the minimap height will be adjusted to only take the space required by the text editor content, leaving the space below triggering mouse events on the text editor. **Be aware this can have some impact on performances as the minimap canvases will be resized every time a change in the editor make its height change.**","order":19},"redrawDelay":{"type":"number","default":400,"minimum":0,"maximum":2000,"description":"Controls how often (in ms) the minimap should redraw itself after changing the text editor\'s contents. Setting this to 100ms or higher could dramatically improve editor responsiveness when working with large files. A value of 0 will cause the minimap to redraw itself immediately on each change.","order":20},"devicePixelRatioRounding":{"type":"boolean","default":true,"description":"Toggles the rounding of the devicePixelRatio in the minimap.","order":21},"useHardwareAcceleration":{"type":"boolean","default":true,"order":22},"scrollAnimation":{"type":"boolean","default":false,"description":"Enables animations when scrolling by clicking on the minimap.","order":23},"scrollAnimationDuration":{"type":"integer","default":300,"description":"The duration of scrolling animations when clicking on the minimap.","order":24},"maxTokensInOneLine":{"type":"integer","default":160,"description":"The maximum number of tokens that are rendered for each line.","order":25}}'),exports.config=Du;const ku={};exports.plugins=ku;const Lu={},Au={};exports.registerPlugin=sn,exports.unregisterPlugin=an,exports.togglePluginActivation=ln,exports.deactivateAllPlugins=cn,exports.activatePlugin=hn,exports.deactivatePlugin=un,exports.getPluginsOrder=fn;let Ou=!1,_u=!1,Pu=null,Ru=null,Iu=null;const Hu=new gr;exports.emitter=Hu,exports.activate=()=>{Ou||(Iu=atom.commands.add("atom-workspace",{"minimap:toggle"(){vn()},async"minimap:generate-coffee-plugin"(){await yn("coffee")},async"minimap:generate-javascript-plugin"(){await yn("javascript")},async"minimap:generate-babel-plugin"(){await yn("babel")}}),Pu=new Map,Ru=new pr,Ou=!0,atom.config.get("minimap.autoToggle")&&vn())},exports.minimapViewProvider=gn,exports.deactivate=()=>{Ou&&(cn(),Pu&&Pu.forEach(((e,t)=>{e.destroy(),Pu.delete(t)})),Ru.dispose(),Ru=null,Iu.dispose(),Iu=null,Pu=void 0,_u=!1,Ou=!1)};var Fu=e(Du);exports.getConfigSchema=mn,exports.toggle=vn,exports.onDidActivate=bn,exports.onDidDeactivate=Sn,exports.onDidCreateMinimap=wn,exports.onDidAddPlugin=xn,exports.onDidRemovePlugin=Cn,exports.onDidActivatePlugin=En,exports.onDidDeactivatePlugin=Tn,exports.onDidChangePluginOrder=Mn,exports.minimapClass=Dn,exports.minimapForEditorElement=kn,exports.minimapForEditor=Ln,exports.standAloneMinimapForEditor=An,exports.getActiveMinimap=On,exports.observeMinimaps=_n;const Nu={minimapViewProvider:gn,getConfigSchema:mn,onDidActivate:bn,onDidDeactivate:Sn,onDidCreateMinimap:wn,onDidAddPlugin:xn,onDidRemovePlugin:Cn,onDidActivatePlugin:En,onDidDeactivatePlugin:Tn,onDidChangePluginOrder:Mn,minimapClass:Dn,minimapForEditorElement:kn,minimapForEditor:Ln,standAloneMinimapForEditor:An,getActiveMinimap:On,observeMinimaps:_n,registerPlugin:sn,unregisterPlugin:an,togglePluginActivation:ln,deactivateAllPlugins:cn,activatePlugin:hn,deactivatePlugin:un,getPluginsOrder:fn};exports.provideMinimapServiceV1=()=>Nu,exports.$a7d4afabad3ac01364c7629a89eaa9d8$init=()=>dc,exports.$4a2375bcc1817d0a9f962e73140919e0$init=()=>pu;
//# sourceMappingURL=main.js.map
